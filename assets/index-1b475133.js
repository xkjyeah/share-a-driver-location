(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function Yc(t,e){const n=Object.create(null),r=t.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return e?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const Be={},vr=[],cn=()=>{},sI=()=>!1,oI=/^on[^a-z]/,ml=t=>oI.test(t),Qc=t=>t.startsWith("onUpdate:"),tt=Object.assign,Xc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},lI=Object.prototype.hasOwnProperty,ve=(t,e)=>lI.call(t,e),ie=Array.isArray,yr=t=>vl(t)==="[object Map]",ep=t=>vl(t)==="[object Set]",ae=t=>typeof t=="function",Qe=t=>typeof t=="string",jc=t=>typeof t=="symbol",He=t=>t!==null&&typeof t=="object",tp=t=>He(t)&&ae(t.then)&&ae(t.catch),np=Object.prototype.toString,vl=t=>np.call(t),aI=t=>vl(t).slice(8,-1),ip=t=>vl(t)==="[object Object]",Jc=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,$o=Yc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},cI=/-(\w)/g,Tr=yl(t=>t.replace(cI,(e,n)=>n?n.toUpperCase():"")),uI=/\B([A-Z])/g,Dr=yl(t=>t.replace(uI,"-$1").toLowerCase()),rp=yl(t=>t.charAt(0).toUpperCase()+t.slice(1)),ja=yl(t=>t?`on${rp(t)}`:""),ws=(t,e)=>!Object.is(t,e),Ja=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Go=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},fI=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Od;const gc=()=>Od||(Od=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hi(t){if(ie(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=Qe(r)?pI(r):hi(r);if(o)for(const a in o)e[a]=o[a]}return e}else{if(Qe(t))return t;if(He(t))return t}}const hI=/;(?![^(]*\))/g,dI=/:([^]+)/,_I=/\/\*[^]*?\*\//g;function pI(t){const e={};return t.replace(_I,"").split(hI).forEach(n=>{if(n){const r=n.split(dI);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Zc(t){let e="";if(Qe(t))e=t;else if(ie(t))for(let n=0;n<t.length;n++){const r=Zc(t[n]);r&&(e+=r+" ")}else if(He(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const gI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mI=Yc(gI);function sp(t){return!!t||t===""}const vI=t=>Qe(t)?t:t==null?"":ie(t)||He(t)&&(t.toString===np||!ae(t.toString))?JSON.stringify(t,op,2):String(t),op=(t,e)=>e&&e.__v_isRef?op(t,e.value):yr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o])=>(n[`${r} =>`]=o,n),{})}:ep(e)?{[`Set(${e.size})`]:[...e.values()]}:He(e)&&!ie(e)&&!ip(e)?String(e):e;let tn;class yI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=tn,!e&&tn&&(this.index=(tn.scopes||(tn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=tn;try{return tn=this,e()}finally{tn=n}}}on(){tn=this}off(){tn=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function wI(t,e=tn){e&&e.active&&e.effects.push(t)}function EI(){return tn}const eu=t=>{const e=new Set(t);return e.w=0,e.n=0,e},lp=t=>(t.w&di)>0,ap=t=>(t.n&di)>0,CI=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=di},bI=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const o=e[r];lp(o)&&!ap(o)?o.delete(t):e[n++]=o,o.w&=~di,o.n&=~di}e.length=n}},mc=new WeakMap;let hs=0,di=1;const vc=30;let rn;const Fi=Symbol(""),yc=Symbol("");class tu{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,wI(this,r)}run(){if(!this.active)return this.fn();let e=rn,n=oi;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=rn,rn=this,oi=!0,di=1<<++hs,hs<=vc?CI(this):Dd(this),this.fn()}finally{hs<=vc&&bI(this),di=1<<--hs,rn=this.parent,oi=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){rn===this?this.deferStop=!0:this.active&&(Dd(this),this.onStop&&this.onStop(),this.active=!1)}}function Dd(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let oi=!0;const cp=[];function Mr(){cp.push(oi),oi=!1}function Lr(){const t=cp.pop();oi=t===void 0?!0:t}function Nt(t,e,n){if(oi&&rn){let r=mc.get(t);r||mc.set(t,r=new Map);let o=r.get(n);o||r.set(n,o=eu()),up(o)}}function up(t,e){let n=!1;hs<=vc?ap(t)||(t.n|=di,n=!lp(t)):n=!t.has(rn),n&&(t.add(rn),rn.deps.push(t))}function Un(t,e,n,r,o,a){const c=mc.get(t);if(!c)return;let f=[];if(e==="clear")f=[...c.values()];else if(n==="length"&&ie(t)){const h=Number(r);c.forEach((_,v)=>{(v==="length"||v>=h)&&f.push(_)})}else switch(n!==void 0&&f.push(c.get(n)),e){case"add":ie(t)?Jc(n)&&f.push(c.get("length")):(f.push(c.get(Fi)),yr(t)&&f.push(c.get(yc)));break;case"delete":ie(t)||(f.push(c.get(Fi)),yr(t)&&f.push(c.get(yc)));break;case"set":yr(t)&&f.push(c.get(Fi));break}if(f.length===1)f[0]&&wc(f[0]);else{const h=[];for(const _ of f)_&&h.push(..._);wc(eu(h))}}function wc(t,e){const n=ie(t)?t:[...t];for(const r of n)r.computed&&Md(r);for(const r of n)r.computed||Md(r)}function Md(t,e){(t!==rn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const II=Yc("__proto__,__v_isRef,__isVue"),fp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(jc)),xI=nu(),TI=nu(!1,!0),SI=nu(!0),Ld=AI();function AI(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ie(this);for(let a=0,c=this.length;a<c;a++)Nt(r,"get",a+"");const o=r[e](...n);return o===-1||o===!1?r[e](...n.map(Ie)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Mr();const r=Ie(this)[e].apply(this,n);return Lr(),r}}),t}function RI(t){const e=Ie(this);return Nt(e,"has",t),e.hasOwnProperty(t)}function nu(t=!1,e=!1){return function(r,o,a){if(o==="__v_isReactive")return!t;if(o==="__v_isReadonly")return t;if(o==="__v_isShallow")return e;if(o==="__v_raw"&&a===(t?e?qI:gp:e?pp:_p).get(r))return r;const c=ie(r);if(!t){if(c&&ve(Ld,o))return Reflect.get(Ld,o,a);if(o==="hasOwnProperty")return RI}const f=Reflect.get(r,o,a);return(jc(o)?fp.has(o):II(o))||(t||Nt(r,"get",o),e)?f:ht(f)?c&&Jc(o)?f:f.value:He(f)?t?mp(f):su(f):f}}const NI=hp(),PI=hp(!0);function hp(t=!1){return function(n,r,o,a){let c=n[r];if(Sr(c)&&ht(c)&&!ht(o))return!1;if(!t&&(!Vo(o)&&!Sr(o)&&(c=Ie(c),o=Ie(o)),!ie(n)&&ht(c)&&!ht(o)))return c.value=o,!0;const f=ie(n)&&Jc(r)?Number(r)<n.length:ve(n,r),h=Reflect.set(n,r,o,a);return n===Ie(a)&&(f?ws(o,c)&&Un(n,"set",r,o):Un(n,"add",r,o)),h}}function OI(t,e){const n=ve(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&Un(t,"delete",e,void 0),r}function DI(t,e){const n=Reflect.has(t,e);return(!jc(e)||!fp.has(e))&&Nt(t,"has",e),n}function MI(t){return Nt(t,"iterate",ie(t)?"length":Fi),Reflect.ownKeys(t)}const dp={get:xI,set:NI,deleteProperty:OI,has:DI,ownKeys:MI},LI={get:SI,set(t,e){return!0},deleteProperty(t,e){return!0}},FI=tt({},dp,{get:TI,set:PI}),iu=t=>t,wl=t=>Reflect.getPrototypeOf(t);function Mo(t,e,n=!1,r=!1){t=t.__v_raw;const o=Ie(t),a=Ie(e);n||(e!==a&&Nt(o,"get",e),Nt(o,"get",a));const{has:c}=wl(o),f=r?iu:n?lu:Es;if(c.call(o,e))return f(t.get(e));if(c.call(o,a))return f(t.get(a));t!==o&&t.get(e)}function Lo(t,e=!1){const n=this.__v_raw,r=Ie(n),o=Ie(t);return e||(t!==o&&Nt(r,"has",t),Nt(r,"has",o)),t===o?n.has(t):n.has(t)||n.has(o)}function Fo(t,e=!1){return t=t.__v_raw,!e&&Nt(Ie(t),"iterate",Fi),Reflect.get(t,"size",t)}function Fd(t){t=Ie(t);const e=Ie(this);return wl(e).has.call(e,t)||(e.add(t),Un(e,"add",t,t)),this}function kd(t,e){e=Ie(e);const n=Ie(this),{has:r,get:o}=wl(n);let a=r.call(n,t);a||(t=Ie(t),a=r.call(n,t));const c=o.call(n,t);return n.set(t,e),a?ws(e,c)&&Un(n,"set",t,e):Un(n,"add",t,e),this}function Bd(t){const e=Ie(this),{has:n,get:r}=wl(e);let o=n.call(e,t);o||(t=Ie(t),o=n.call(e,t)),r&&r.call(e,t);const a=e.delete(t);return o&&Un(e,"delete",t,void 0),a}function Wd(){const t=Ie(this),e=t.size!==0,n=t.clear();return e&&Un(t,"clear",void 0,void 0),n}function ko(t,e){return function(r,o){const a=this,c=a.__v_raw,f=Ie(c),h=e?iu:t?lu:Es;return!t&&Nt(f,"iterate",Fi),c.forEach((_,v)=>r.call(o,h(_),h(v),a))}}function Bo(t,e,n){return function(...r){const o=this.__v_raw,a=Ie(o),c=yr(a),f=t==="entries"||t===Symbol.iterator&&c,h=t==="keys"&&c,_=o[t](...r),v=n?iu:e?lu:Es;return!e&&Nt(a,"iterate",h?yc:Fi),{next(){const{value:y,done:C}=_.next();return C?{value:y,done:C}:{value:f?[v(y[0]),v(y[1])]:v(y),done:C}},[Symbol.iterator](){return this}}}}function ri(t){return function(...e){return t==="delete"?!1:this}}function kI(){const t={get(a){return Mo(this,a)},get size(){return Fo(this)},has:Lo,add:Fd,set:kd,delete:Bd,clear:Wd,forEach:ko(!1,!1)},e={get(a){return Mo(this,a,!1,!0)},get size(){return Fo(this)},has:Lo,add:Fd,set:kd,delete:Bd,clear:Wd,forEach:ko(!1,!0)},n={get(a){return Mo(this,a,!0)},get size(){return Fo(this,!0)},has(a){return Lo.call(this,a,!0)},add:ri("add"),set:ri("set"),delete:ri("delete"),clear:ri("clear"),forEach:ko(!0,!1)},r={get(a){return Mo(this,a,!0,!0)},get size(){return Fo(this,!0)},has(a){return Lo.call(this,a,!0)},add:ri("add"),set:ri("set"),delete:ri("delete"),clear:ri("clear"),forEach:ko(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=Bo(a,!1,!1),n[a]=Bo(a,!0,!1),e[a]=Bo(a,!1,!0),r[a]=Bo(a,!0,!0)}),[t,n,e,r]}const[BI,WI,UI,HI]=kI();function ru(t,e){const n=e?t?HI:UI:t?WI:BI;return(r,o,a)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(ve(n,o)&&o in r?n:r,o,a)}const $I={get:ru(!1,!1)},zI={get:ru(!1,!0)},KI={get:ru(!0,!1)},_p=new WeakMap,pp=new WeakMap,gp=new WeakMap,qI=new WeakMap;function GI(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function VI(t){return t.__v_skip||!Object.isExtensible(t)?0:GI(aI(t))}function su(t){return Sr(t)?t:ou(t,!1,dp,$I,_p)}function YI(t){return ou(t,!1,FI,zI,pp)}function mp(t){return ou(t,!0,LI,KI,gp)}function ou(t,e,n,r,o){if(!He(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=o.get(t);if(a)return a;const c=VI(t);if(c===0)return t;const f=new Proxy(t,c===2?r:n);return o.set(t,f),f}function wr(t){return Sr(t)?wr(t.__v_raw):!!(t&&t.__v_isReactive)}function Sr(t){return!!(t&&t.__v_isReadonly)}function Vo(t){return!!(t&&t.__v_isShallow)}function vp(t){return wr(t)||Sr(t)}function Ie(t){const e=t&&t.__v_raw;return e?Ie(e):t}function yp(t){return Go(t,"__v_skip",!0),t}const Es=t=>He(t)?su(t):t,lu=t=>He(t)?mp(t):t;function wp(t){oi&&rn&&(t=Ie(t),up(t.dep||(t.dep=eu())))}function Ep(t,e){t=Ie(t);const n=t.dep;n&&wc(n)}function ht(t){return!!(t&&t.__v_isRef===!0)}function Wi(t){return QI(t,!1)}function QI(t,e){return ht(t)?t:new XI(t,e)}class XI{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ie(e),this._value=n?e:Es(e)}get value(){return wp(this),this._value}set value(e){const n=this.__v_isShallow||Vo(e)||Sr(e);e=n?e:Ie(e),ws(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Es(e),Ep(this))}}function Wt(t){return ht(t)?t.value:t}const jI={get:(t,e,n)=>Wt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const o=t[e];return ht(o)&&!ht(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function Cp(t){return wr(t)?t:new Proxy(t,jI)}class JI{constructor(e,n,r,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new tu(e,()=>{this._dirty||(this._dirty=!0,Ep(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=r}get value(){const e=Ie(this);return wp(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ZI(t,e,n=!1){let r,o;const a=ae(t);return a?(r=t,o=cn):(r=t.get,o=t.set),new JI(r,o,a||!o,n)}function li(t,e,n,r){let o;try{o=r?t(...r):t()}catch(a){El(a,e,n)}return o}function un(t,e,n,r){if(ae(t)){const a=li(t,e,n,r);return a&&tp(a)&&a.catch(c=>{El(c,e,n)}),a}const o=[];for(let a=0;a<t.length;a++)o.push(un(t[a],e,n,r));return o}function El(t,e,n,r=!0){const o=e?e.vnode:null;if(e){let a=e.parent;const c=e.proxy,f=n;for(;a;){const _=a.ec;if(_){for(let v=0;v<_.length;v++)if(_[v](t,c,f)===!1)return}a=a.parent}const h=e.appContext.config.errorHandler;if(h){li(h,null,10,[t,c,f]);return}}ex(t,n,o,r)}function ex(t,e,n,r=!0){console.error(t)}let Cs=!1,Ec=!1;const ut=[];let vn=0;const Er=[];let Fn=null,Oi=0;const bp=Promise.resolve();let au=null;function tx(t){const e=au||bp;return t?e.then(this?t.bind(this):t):e}function nx(t){let e=vn+1,n=ut.length;for(;e<n;){const r=e+n>>>1;bs(ut[r])<t?e=r+1:n=r}return e}function cu(t){(!ut.length||!ut.includes(t,Cs&&t.allowRecurse?vn+1:vn))&&(t.id==null?ut.push(t):ut.splice(nx(t.id),0,t),Ip())}function Ip(){!Cs&&!Ec&&(Ec=!0,au=bp.then(Tp))}function ix(t){const e=ut.indexOf(t);e>vn&&ut.splice(e,1)}function rx(t){ie(t)?Er.push(...t):(!Fn||!Fn.includes(t,t.allowRecurse?Oi+1:Oi))&&Er.push(t),Ip()}function Ud(t,e=Cs?vn+1:0){for(;e<ut.length;e++){const n=ut[e];n&&n.pre&&(ut.splice(e,1),e--,n())}}function xp(t){if(Er.length){const e=[...new Set(Er)];if(Er.length=0,Fn){Fn.push(...e);return}for(Fn=e,Fn.sort((n,r)=>bs(n)-bs(r)),Oi=0;Oi<Fn.length;Oi++)Fn[Oi]();Fn=null,Oi=0}}const bs=t=>t.id==null?1/0:t.id,sx=(t,e)=>{const n=bs(t)-bs(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Tp(t){Ec=!1,Cs=!0,ut.sort(sx);const e=cn;try{for(vn=0;vn<ut.length;vn++){const n=ut[vn];n&&n.active!==!1&&li(n,null,14)}}finally{vn=0,ut.length=0,xp(),Cs=!1,au=null,(ut.length||Er.length)&&Tp()}}function ox(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Be;let o=n;const a=e.startsWith("update:"),c=a&&e.slice(7);if(c&&c in r){const v=`${c==="modelValue"?"model":c}Modifiers`,{number:y,trim:C}=r[v]||Be;C&&(o=n.map(R=>Qe(R)?R.trim():R)),y&&(o=n.map(fI))}let f,h=r[f=ja(e)]||r[f=ja(Tr(e))];!h&&a&&(h=r[f=ja(Dr(e))]),h&&un(h,t,6,o);const _=r[f+"Once"];if(_){if(!t.emitted)t.emitted={};else if(t.emitted[f])return;t.emitted[f]=!0,un(_,t,6,o)}}function Sp(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const a=t.emits;let c={},f=!1;if(!ae(t)){const h=_=>{const v=Sp(_,e,!0);v&&(f=!0,tt(c,v))};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!a&&!f?(He(t)&&r.set(t,null),null):(ie(a)?a.forEach(h=>c[h]=null):tt(c,a),He(t)&&r.set(t,c),c)}function Cl(t,e){return!t||!ml(e)?!1:(e=e.slice(2).replace(/Once$/,""),ve(t,e[0].toLowerCase()+e.slice(1))||ve(t,Dr(e))||ve(t,e))}let yn=null,bl=null;function Yo(t){const e=yn;return yn=t,bl=t&&t.type.__scopeId||null,e}function Ap(t){bl=t}function Rp(){bl=null}function lx(t,e=yn,n){if(!e||t._n)return t;const r=(...o)=>{r._d&&Xd(-1);const a=Yo(e);let c;try{c=t(...o)}finally{Yo(a),r._d&&Xd(1)}return c};return r._n=!0,r._c=!0,r._d=!0,r}function Za(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:a,propsOptions:[c],slots:f,attrs:h,emit:_,render:v,renderCache:y,data:C,setupState:R,ctx:W,inheritAttrs:z}=t;let Q,we;const Le=Yo(t);try{if(n.shapeFlag&4){const te=o||r;Q=mn(v.call(te,te,y,a,R,C,W)),we=h}else{const te=e;Q=mn(te.length>1?te(a,{attrs:h,slots:f,emit:_}):te(a,null)),we=e.props?h:ax(h)}}catch(te){ps.length=0,El(te,t,1),Q=Tt(Ui)}let Ee=Q;if(we&&z!==!1){const te=Object.keys(we),{shapeFlag:qe}=Ee;te.length&&qe&7&&(c&&te.some(Qc)&&(we=cx(we,c)),Ee=Ar(Ee,we))}return n.dirs&&(Ee=Ar(Ee),Ee.dirs=Ee.dirs?Ee.dirs.concat(n.dirs):n.dirs),n.transition&&(Ee.transition=n.transition),Q=Ee,Yo(Le),Q}const ax=t=>{let e;for(const n in t)(n==="class"||n==="style"||ml(n))&&((e||(e={}))[n]=t[n]);return e},cx=(t,e)=>{const n={};for(const r in t)(!Qc(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function ux(t,e,n){const{props:r,children:o,component:a}=t,{props:c,children:f,patchFlag:h}=e,_=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return r?Hd(r,c,_):!!c;if(h&8){const v=e.dynamicProps;for(let y=0;y<v.length;y++){const C=v[y];if(c[C]!==r[C]&&!Cl(_,C))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:r===c?!1:r?c?Hd(r,c,_):!0:!!c;return!1}function Hd(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(e[a]!==t[a]&&!Cl(n,a))return!0}return!1}function fx({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const hx=t=>t.__isSuspense;function dx(t,e){e&&e.pendingBranch?ie(t)?e.effects.push(...t):e.effects.push(t):rx(t)}const Wo={};function ec(t,e,n){return Np(t,e,n)}function Np(t,e,{immediate:n,deep:r,flush:o,onTrack:a,onTrigger:c}=Be){var f;const h=EI()===((f=ft)==null?void 0:f.scope)?ft:null;let _,v=!1,y=!1;if(ht(t)?(_=()=>t.value,v=Vo(t)):wr(t)?(_=()=>t,r=!0):ie(t)?(y=!0,v=t.some(te=>wr(te)||Vo(te)),_=()=>t.map(te=>{if(ht(te))return te.value;if(wr(te))return gr(te);if(ae(te))return li(te,h,2)})):ae(t)?e?_=()=>li(t,h,2):_=()=>{if(!(h&&h.isUnmounted))return C&&C(),un(t,h,3,[R])}:_=cn,e&&r){const te=_;_=()=>gr(te())}let C,R=te=>{C=Le.onStop=()=>{li(te,h,4)}},W;if(xs)if(R=cn,e?n&&un(e,h,3,[_(),y?[]:void 0,R]):_(),o==="sync"){const te=uT();W=te.__watcherHandles||(te.__watcherHandles=[])}else return cn;let z=y?new Array(t.length).fill(Wo):Wo;const Q=()=>{if(Le.active)if(e){const te=Le.run();(r||v||(y?te.some((qe,Ut)=>ws(qe,z[Ut])):ws(te,z)))&&(C&&C(),un(e,h,3,[te,z===Wo?void 0:y&&z[0]===Wo?[]:z,R]),z=te)}else Le.run()};Q.allowRecurse=!!e;let we;o==="sync"?we=Q:o==="post"?we=()=>xt(Q,h&&h.suspense):(Q.pre=!0,h&&(Q.id=h.uid),we=()=>cu(Q));const Le=new tu(_,we);e?n?Q():z=Le.run():o==="post"?xt(Le.run.bind(Le),h&&h.suspense):Le.run();const Ee=()=>{Le.stop(),h&&h.scope&&Xc(h.scope.effects,Le)};return W&&W.push(Ee),Ee}function _x(t,e,n){const r=this.proxy,o=Qe(t)?t.includes(".")?Pp(r,t):()=>r[t]:t.bind(r,r);let a;ae(e)?a=e:(a=e.handler,n=e);const c=ft;Rr(this);const f=Np(o,a.bind(r),n);return c?Rr(c):ki(),f}function Pp(t,e){const n=e.split(".");return()=>{let r=t;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}function gr(t,e){if(!He(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ht(t))gr(t.value,e);else if(ie(t))for(let n=0;n<t.length;n++)gr(t[n],e);else if(ep(t)||yr(t))t.forEach(n=>{gr(n,e)});else if(ip(t))for(const n in t)gr(t[n],e);return t}function Ai(t,e,n,r){const o=t.dirs,a=e&&e.dirs;for(let c=0;c<o.length;c++){const f=o[c];a&&(f.oldValue=a[c].value);let h=f.dir[r];h&&(Mr(),un(h,n,8,[t.el,f,t,e]),Lr())}}function Fr(t,e){return ae(t)?(()=>tt({name:t.name},e,{setup:t}))():t}const zo=t=>!!t.type.__asyncLoader,Op=t=>t.type.__isKeepAlive;function px(t,e){Dp(t,"a",e)}function gx(t,e){Dp(t,"da",e)}function Dp(t,e,n=ft){const r=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(Il(e,r,n),n){let o=n.parent;for(;o&&o.parent;)Op(o.parent.vnode)&&mx(r,e,n,o),o=o.parent}}function mx(t,e,n,r){const o=Il(e,t,r,!0);kr(()=>{Xc(r[e],o)},n)}function Il(t,e,n=ft,r=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...c)=>{if(n.isUnmounted)return;Mr(),Rr(n);const f=un(e,n,t,c);return ki(),Lr(),f});return r?o.unshift(a):o.push(a),a}}const Kn=t=>(e,n=ft)=>(!xs||t==="sp")&&Il(t,(...r)=>e(...r),n),vx=Kn("bm"),Fs=Kn("m"),yx=Kn("bu"),wx=Kn("u"),Ex=Kn("bum"),kr=Kn("um"),Cx=Kn("sp"),bx=Kn("rtg"),Ix=Kn("rtc");function xx(t,e=ft){Il("ec",t,e)}const Tx=Symbol.for("v-ndc");function Sx(t,e,n,r){let o;const a=n&&n[r];if(ie(t)||Qe(t)){o=new Array(t.length);for(let c=0,f=t.length;c<f;c++)o[c]=e(t[c],c,void 0,a&&a[c])}else if(typeof t=="number"){o=new Array(t);for(let c=0;c<t;c++)o[c]=e(c+1,c,void 0,a&&a[c])}else if(He(t))if(t[Symbol.iterator])o=Array.from(t,(c,f)=>e(c,f,void 0,a&&a[f]));else{const c=Object.keys(t);o=new Array(c.length);for(let f=0,h=c.length;f<h;f++){const _=c[f];o[f]=e(t[_],_,f,a&&a[f])}}else o=[];return n&&(n[r]=o),o}const Cc=t=>t?Kp(t)?_u(t)||t.proxy:Cc(t.parent):null,_s=tt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Cc(t.parent),$root:t=>Cc(t.root),$emit:t=>t.emit,$options:t=>uu(t),$forceUpdate:t=>t.f||(t.f=()=>cu(t.update)),$nextTick:t=>t.n||(t.n=tx.bind(t.proxy)),$watch:t=>_x.bind(t)}),tc=(t,e)=>t!==Be&&!t.__isScriptSetup&&ve(t,e),Ax={get({_:t},e){const{ctx:n,setupState:r,data:o,props:a,accessCache:c,type:f,appContext:h}=t;let _;if(e[0]!=="$"){const R=c[e];if(R!==void 0)switch(R){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(tc(r,e))return c[e]=1,r[e];if(o!==Be&&ve(o,e))return c[e]=2,o[e];if((_=t.propsOptions[0])&&ve(_,e))return c[e]=3,a[e];if(n!==Be&&ve(n,e))return c[e]=4,n[e];bc&&(c[e]=0)}}const v=_s[e];let y,C;if(v)return e==="$attrs"&&Nt(t,"get",e),v(t);if((y=f.__cssModules)&&(y=y[e]))return y;if(n!==Be&&ve(n,e))return c[e]=4,n[e];if(C=h.config.globalProperties,ve(C,e))return C[e]},set({_:t},e,n){const{data:r,setupState:o,ctx:a}=t;return tc(o,e)?(o[e]=n,!0):r!==Be&&ve(r,e)?(r[e]=n,!0):ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:a}},c){let f;return!!n[c]||t!==Be&&ve(t,c)||tc(e,c)||(f=a[0])&&ve(f,c)||ve(r,c)||ve(_s,c)||ve(o.config.globalProperties,c)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function $d(t){return ie(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let bc=!0;function Rx(t){const e=uu(t),n=t.proxy,r=t.ctx;bc=!1,e.beforeCreate&&zd(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:c,watch:f,provide:h,inject:_,created:v,beforeMount:y,mounted:C,beforeUpdate:R,updated:W,activated:z,deactivated:Q,beforeDestroy:we,beforeUnmount:Le,destroyed:Ee,unmounted:te,render:qe,renderTracked:Ut,renderTriggered:vt,errorCaptured:Ot,serverPrefetch:mi,expose:bn,inheritAttrs:vi,components:Vi,directives:Yi,filters:Qi}=e;if(_&&Nx(_,r,null),c)for(const xe in c){const pe=c[xe];ae(pe)&&(r[xe]=pe.bind(n))}if(o){const xe=o.call(n,n);He(xe)&&(t.data=su(xe))}if(bc=!0,a)for(const xe in a){const pe=a[xe],In=ae(pe)?pe.bind(n,n):ae(pe.get)?pe.get.bind(n,n):cn,xn=!ae(pe)&&ae(pe.set)?pe.set.bind(n):cn,Xe=aT({get:In,set:xn});Object.defineProperty(r,xe,{enumerable:!0,configurable:!0,get:()=>Xe.value,set:Ht=>Xe.value=Ht})}if(f)for(const xe in f)Mp(f[xe],r,n,xe);if(h){const xe=ae(h)?h.call(n):h;Reflect.ownKeys(xe).forEach(pe=>{Fx(pe,xe[pe])})}v&&zd(v,t,"c");function nt(xe,pe){ie(pe)?pe.forEach(In=>xe(In.bind(n))):pe&&xe(pe.bind(n))}if(nt(vx,y),nt(Fs,C),nt(yx,R),nt(wx,W),nt(px,z),nt(gx,Q),nt(xx,Ot),nt(Ix,Ut),nt(bx,vt),nt(Ex,Le),nt(kr,te),nt(Cx,mi),ie(bn))if(bn.length){const xe=t.exposed||(t.exposed={});bn.forEach(pe=>{Object.defineProperty(xe,pe,{get:()=>n[pe],set:In=>n[pe]=In})})}else t.exposed||(t.exposed={});qe&&t.render===cn&&(t.render=qe),vi!=null&&(t.inheritAttrs=vi),Vi&&(t.components=Vi),Yi&&(t.directives=Yi)}function Nx(t,e,n=cn){ie(t)&&(t=Ic(t));for(const r in t){const o=t[r];let a;He(o)?"default"in o?a=Ko(o.from||r,o.default,!0):a=Ko(o.from||r):a=Ko(o),ht(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):e[r]=a}}function zd(t,e,n){un(ie(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Mp(t,e,n,r){const o=r.includes(".")?Pp(n,r):()=>n[r];if(Qe(t)){const a=e[t];ae(a)&&ec(o,a)}else if(ae(t))ec(o,t.bind(n));else if(He(t))if(ie(t))t.forEach(a=>Mp(a,e,n,r));else{const a=ae(t.handler)?t.handler.bind(n):e[t.handler];ae(a)&&ec(o,a,t)}}function uu(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=t.appContext,f=a.get(e);let h;return f?h=f:!o.length&&!n&&!r?h=e:(h={},o.length&&o.forEach(_=>Qo(h,_,c,!0)),Qo(h,e,c)),He(e)&&a.set(e,h),h}function Qo(t,e,n,r=!1){const{mixins:o,extends:a}=e;a&&Qo(t,a,n,!0),o&&o.forEach(c=>Qo(t,c,n,!0));for(const c in e)if(!(r&&c==="expose")){const f=Px[c]||n&&n[c];t[c]=f?f(t[c],e[c]):e[c]}return t}const Px={data:Kd,props:qd,emits:qd,methods:ds,computed:ds,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:ds,directives:ds,watch:Dx,provide:Kd,inject:Ox};function Kd(t,e){return e?t?function(){return tt(ae(t)?t.call(this,this):t,ae(e)?e.call(this,this):e)}:e:t}function Ox(t,e){return ds(Ic(t),Ic(e))}function Ic(t){if(ie(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mt(t,e){return t?[...new Set([].concat(t,e))]:e}function ds(t,e){return t?tt(Object.create(null),t,e):e}function qd(t,e){return t?ie(t)&&ie(e)?[...new Set([...t,...e])]:tt(Object.create(null),$d(t),$d(e??{})):e}function Dx(t,e){if(!t)return e;if(!e)return t;const n=tt(Object.create(null),t);for(const r in e)n[r]=mt(t[r],e[r]);return n}function Lp(){return{app:null,config:{isNativeTag:sI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Mx=0;function Lx(t,e){return function(r,o=null){ae(r)||(r=tt({},r)),o!=null&&!He(o)&&(o=null);const a=Lp(),c=new Set;let f=!1;const h=a.app={_uid:Mx++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:fT,get config(){return a.config},set config(_){},use(_,...v){return c.has(_)||(_&&ae(_.install)?(c.add(_),_.install(h,...v)):ae(_)&&(c.add(_),_(h,...v))),h},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),h},component(_,v){return v?(a.components[_]=v,h):a.components[_]},directive(_,v){return v?(a.directives[_]=v,h):a.directives[_]},mount(_,v,y){if(!f){const C=Tt(r,o);return C.appContext=a,v&&e?e(C,_):t(C,_,y),f=!0,h._container=_,_.__vue_app__=h,_u(C.component)||C.component.proxy}},unmount(){f&&(t(null,h._container),delete h._container.__vue_app__)},provide(_,v){return a.provides[_]=v,h},runWithContext(_){Xo=h;try{return _()}finally{Xo=null}}};return h}}let Xo=null;function Fx(t,e){if(ft){let n=ft.provides;const r=ft.parent&&ft.parent.provides;r===n&&(n=ft.provides=Object.create(r)),n[t]=e}}function Ko(t,e,n=!1){const r=ft||yn;if(r||Xo){const o=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Xo._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&ae(e)?e.call(r&&r.proxy):e}}function kx(t,e,n,r=!1){const o={},a={};Go(a,Tl,1),t.propsDefaults=Object.create(null),Fp(t,e,o,a);for(const c in t.propsOptions[0])c in o||(o[c]=void 0);n?t.props=r?o:YI(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function Bx(t,e,n,r){const{props:o,attrs:a,vnode:{patchFlag:c}}=t,f=Ie(o),[h]=t.propsOptions;let _=!1;if((r||c>0)&&!(c&16)){if(c&8){const v=t.vnode.dynamicProps;for(let y=0;y<v.length;y++){let C=v[y];if(Cl(t.emitsOptions,C))continue;const R=e[C];if(h)if(ve(a,C))R!==a[C]&&(a[C]=R,_=!0);else{const W=Tr(C);o[W]=xc(h,f,W,R,t,!1)}else R!==a[C]&&(a[C]=R,_=!0)}}}else{Fp(t,e,o,a)&&(_=!0);let v;for(const y in f)(!e||!ve(e,y)&&((v=Dr(y))===y||!ve(e,v)))&&(h?n&&(n[y]!==void 0||n[v]!==void 0)&&(o[y]=xc(h,f,y,void 0,t,!0)):delete o[y]);if(a!==f)for(const y in a)(!e||!ve(e,y))&&(delete a[y],_=!0)}_&&Un(t,"set","$attrs")}function Fp(t,e,n,r){const[o,a]=t.propsOptions;let c=!1,f;if(e)for(let h in e){if($o(h))continue;const _=e[h];let v;o&&ve(o,v=Tr(h))?!a||!a.includes(v)?n[v]=_:(f||(f={}))[v]=_:Cl(t.emitsOptions,h)||(!(h in r)||_!==r[h])&&(r[h]=_,c=!0)}if(a){const h=Ie(n),_=f||Be;for(let v=0;v<a.length;v++){const y=a[v];n[y]=xc(o,h,y,_[y],t,!ve(_,y))}}return c}function xc(t,e,n,r,o,a){const c=t[n];if(c!=null){const f=ve(c,"default");if(f&&r===void 0){const h=c.default;if(c.type!==Function&&!c.skipFactory&&ae(h)){const{propsDefaults:_}=o;n in _?r=_[n]:(Rr(o),r=_[n]=h.call(null,e),ki())}else r=h}c[0]&&(a&&!f?r=!1:c[1]&&(r===""||r===Dr(n))&&(r=!0))}return r}function kp(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const a=t.props,c={},f=[];let h=!1;if(!ae(t)){const v=y=>{h=!0;const[C,R]=kp(y,e,!0);tt(c,C),R&&f.push(...R)};!n&&e.mixins.length&&e.mixins.forEach(v),t.extends&&v(t.extends),t.mixins&&t.mixins.forEach(v)}if(!a&&!h)return He(t)&&r.set(t,vr),vr;if(ie(a))for(let v=0;v<a.length;v++){const y=Tr(a[v]);Gd(y)&&(c[y]=Be)}else if(a)for(const v in a){const y=Tr(v);if(Gd(y)){const C=a[v],R=c[y]=ie(C)||ae(C)?{type:C}:tt({},C);if(R){const W=Qd(Boolean,R.type),z=Qd(String,R.type);R[0]=W>-1,R[1]=z<0||W<z,(W>-1||ve(R,"default"))&&f.push(y)}}}const _=[c,f];return He(t)&&r.set(t,_),_}function Gd(t){return t[0]!=="$"}function Vd(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Yd(t,e){return Vd(t)===Vd(e)}function Qd(t,e){return ie(e)?e.findIndex(n=>Yd(n,t)):ae(e)&&Yd(e,t)?0:-1}const Bp=t=>t[0]==="_"||t==="$stable",fu=t=>ie(t)?t.map(mn):[mn(t)],Wx=(t,e,n)=>{if(e._n)return e;const r=lx((...o)=>fu(e(...o)),n);return r._c=!1,r},Wp=(t,e,n)=>{const r=t._ctx;for(const o in t){if(Bp(o))continue;const a=t[o];if(ae(a))e[o]=Wx(o,a,r);else if(a!=null){const c=fu(a);e[o]=()=>c}}},Up=(t,e)=>{const n=fu(e);t.slots.default=()=>n},Ux=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ie(e),Go(e,"_",n)):Wp(e,t.slots={})}else t.slots={},e&&Up(t,e);Go(t.slots,Tl,1)},Hx=(t,e,n)=>{const{vnode:r,slots:o}=t;let a=!0,c=Be;if(r.shapeFlag&32){const f=e._;f?n&&f===1?a=!1:(tt(o,e),!n&&f===1&&delete o._):(a=!e.$stable,Wp(e,o)),c=e}else e&&(Up(t,e),c={default:1});if(a)for(const f in o)!Bp(f)&&!(f in c)&&delete o[f]};function Tc(t,e,n,r,o=!1){if(ie(t)){t.forEach((C,R)=>Tc(C,e&&(ie(e)?e[R]:e),n,r,o));return}if(zo(r)&&!o)return;const a=r.shapeFlag&4?_u(r.component)||r.component.proxy:r.el,c=o?null:a,{i:f,r:h}=t,_=e&&e.r,v=f.refs===Be?f.refs={}:f.refs,y=f.setupState;if(_!=null&&_!==h&&(Qe(_)?(v[_]=null,ve(y,_)&&(y[_]=null)):ht(_)&&(_.value=null)),ae(h))li(h,f,12,[c,v]);else{const C=Qe(h),R=ht(h);if(C||R){const W=()=>{if(t.f){const z=C?ve(y,h)?y[h]:v[h]:h.value;o?ie(z)&&Xc(z,a):ie(z)?z.includes(a)||z.push(a):C?(v[h]=[a],ve(y,h)&&(y[h]=v[h])):(h.value=[a],t.k&&(v[t.k]=h.value))}else C?(v[h]=c,ve(y,h)&&(y[h]=c)):R&&(h.value=c,t.k&&(v[t.k]=c))};c?(W.id=-1,xt(W,n)):W()}}}const xt=dx;function $x(t){return zx(t)}function zx(t,e){const n=gc();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:c,createText:f,createComment:h,setText:_,setElementText:v,parentNode:y,nextSibling:C,setScopeId:R=cn,insertStaticContent:W}=t,z=(w,I,S,O=null,M=null,F=null,$=!1,k=null,U=!!I.dynamicChildren)=>{if(w===I)return;w&&!os(w,I)&&(O=Xi(w),Ht(w,M,F,!0),w=null),I.patchFlag===-2&&(U=!1,I.dynamicChildren=null);const{type:D,ref:V,shapeFlag:q}=I;switch(D){case xl:Q(w,I,S,O);break;case Ui:we(w,I,S,O);break;case nc:w==null&&Le(I,S,O,$);break;case nn:Vi(w,I,S,O,M,F,$,k,U);break;default:q&1?qe(w,I,S,O,M,F,$,k,U):q&6?Yi(w,I,S,O,M,F,$,k,U):(q&64||q&128)&&D.process(w,I,S,O,M,F,$,k,U,$t)}V!=null&&M&&Tc(V,w&&w.ref,F,I||w,!I)},Q=(w,I,S,O)=>{if(w==null)r(I.el=f(I.children),S,O);else{const M=I.el=w.el;I.children!==w.children&&_(M,I.children)}},we=(w,I,S,O)=>{w==null?r(I.el=h(I.children||""),S,O):I.el=w.el},Le=(w,I,S,O)=>{[w.el,w.anchor]=W(w.children,I,S,O,w.el,w.anchor)},Ee=({el:w,anchor:I},S,O)=>{let M;for(;w&&w!==I;)M=C(w),r(w,S,O),w=M;r(I,S,O)},te=({el:w,anchor:I})=>{let S;for(;w&&w!==I;)S=C(w),o(w),w=S;o(I)},qe=(w,I,S,O,M,F,$,k,U)=>{$=$||I.type==="svg",w==null?Ut(I,S,O,M,F,$,k,U):mi(w,I,M,F,$,k,U)},Ut=(w,I,S,O,M,F,$,k)=>{let U,D;const{type:V,props:q,shapeFlag:Y,transition:j,dirs:ce}=w;if(U=w.el=c(w.type,F,q&&q.is,q),Y&8?v(U,w.children):Y&16&&Ot(w.children,U,null,O,M,F&&V!=="foreignObject",$,k),ce&&Ai(w,null,O,"created"),vt(U,w,w.scopeId,$,O),q){for(const ge in q)ge!=="value"&&!$o(ge)&&a(U,ge,null,q[ge],F,w.children,O,M,yt);"value"in q&&a(U,"value",null,q.value),(D=q.onVnodeBeforeMount)&&gn(D,O,w)}ce&&Ai(w,null,O,"beforeMount");const ye=(!M||M&&!M.pendingBranch)&&j&&!j.persisted;ye&&j.beforeEnter(U),r(U,I,S),((D=q&&q.onVnodeMounted)||ye||ce)&&xt(()=>{D&&gn(D,O,w),ye&&j.enter(U),ce&&Ai(w,null,O,"mounted")},M)},vt=(w,I,S,O,M)=>{if(S&&R(w,S),O)for(let F=0;F<O.length;F++)R(w,O[F]);if(M){let F=M.subTree;if(I===F){const $=M.vnode;vt(w,$,$.scopeId,$.slotScopeIds,M.parent)}}},Ot=(w,I,S,O,M,F,$,k,U=0)=>{for(let D=U;D<w.length;D++){const V=w[D]=k?si(w[D]):mn(w[D]);z(null,V,I,S,O,M,F,$,k)}},mi=(w,I,S,O,M,F,$)=>{const k=I.el=w.el;let{patchFlag:U,dynamicChildren:D,dirs:V}=I;U|=w.patchFlag&16;const q=w.props||Be,Y=I.props||Be;let j;S&&Ri(S,!1),(j=Y.onVnodeBeforeUpdate)&&gn(j,S,I,w),V&&Ai(I,w,S,"beforeUpdate"),S&&Ri(S,!0);const ce=M&&I.type!=="foreignObject";if(D?bn(w.dynamicChildren,D,k,S,O,ce,F):$||pe(w,I,k,null,S,O,ce,F,!1),U>0){if(U&16)vi(k,I,q,Y,S,O,M);else if(U&2&&q.class!==Y.class&&a(k,"class",null,Y.class,M),U&4&&a(k,"style",q.style,Y.style,M),U&8){const ye=I.dynamicProps;for(let ge=0;ge<ye.length;ge++){const Fe=ye[ge],dt=q[Fe],hn=Y[Fe];(hn!==dt||Fe==="value")&&a(k,Fe,dt,hn,M,w.children,S,O,yt)}}U&1&&w.children!==I.children&&v(k,I.children)}else!$&&D==null&&vi(k,I,q,Y,S,O,M);((j=Y.onVnodeUpdated)||V)&&xt(()=>{j&&gn(j,S,I,w),V&&Ai(I,w,S,"updated")},O)},bn=(w,I,S,O,M,F,$)=>{for(let k=0;k<I.length;k++){const U=w[k],D=I[k],V=U.el&&(U.type===nn||!os(U,D)||U.shapeFlag&70)?y(U.el):S;z(U,D,V,null,O,M,F,$,!0)}},vi=(w,I,S,O,M,F,$)=>{if(S!==O){if(S!==Be)for(const k in S)!$o(k)&&!(k in O)&&a(w,k,S[k],null,$,I.children,M,F,yt);for(const k in O){if($o(k))continue;const U=O[k],D=S[k];U!==D&&k!=="value"&&a(w,k,D,U,$,I.children,M,F,yt)}"value"in O&&a(w,"value",S.value,O.value)}},Vi=(w,I,S,O,M,F,$,k,U)=>{const D=I.el=w?w.el:f(""),V=I.anchor=w?w.anchor:f("");let{patchFlag:q,dynamicChildren:Y,slotScopeIds:j}=I;j&&(k=k?k.concat(j):j),w==null?(r(D,S,O),r(V,S,O),Ot(I.children,S,V,M,F,$,k,U)):q>0&&q&64&&Y&&w.dynamicChildren?(bn(w.dynamicChildren,Y,S,M,F,$,k),(I.key!=null||M&&I===M.subTree)&&Hp(w,I,!0)):pe(w,I,S,V,M,F,$,k,U)},Yi=(w,I,S,O,M,F,$,k,U)=>{I.slotScopeIds=k,w==null?I.shapeFlag&512?M.ctx.activate(I,S,O,$,U):Qi(I,S,O,M,F,$,U):zs(w,I,U)},Qi=(w,I,S,O,M,F,$)=>{const k=w.component=nT(w,O,M);if(Op(w)&&(k.ctx.renderer=$t),iT(k),k.asyncDep){if(M&&M.registerDep(k,nt),!w.el){const U=k.subTree=Tt(Ui);we(null,U,I,S)}return}nt(k,w,I,S,M,F,$)},zs=(w,I,S)=>{const O=I.component=w.component;if(ux(w,I,S))if(O.asyncDep&&!O.asyncResolved){xe(O,I,S);return}else O.next=I,ix(O.update),O.update();else I.el=w.el,O.vnode=I},nt=(w,I,S,O,M,F,$)=>{const k=()=>{if(w.isMounted){let{next:V,bu:q,u:Y,parent:j,vnode:ce}=w,ye=V,ge;Ri(w,!1),V?(V.el=ce.el,xe(w,V,$)):V=ce,q&&Ja(q),(ge=V.props&&V.props.onVnodeBeforeUpdate)&&gn(ge,j,V,ce),Ri(w,!0);const Fe=Za(w),dt=w.subTree;w.subTree=Fe,z(dt,Fe,y(dt.el),Xi(dt),w,M,F),V.el=Fe.el,ye===null&&fx(w,Fe.el),Y&&xt(Y,M),(ge=V.props&&V.props.onVnodeUpdated)&&xt(()=>gn(ge,j,V,ce),M)}else{let V;const{el:q,props:Y}=I,{bm:j,m:ce,parent:ye}=w,ge=zo(I);if(Ri(w,!1),j&&Ja(j),!ge&&(V=Y&&Y.onVnodeBeforeMount)&&gn(V,ye,I),Ri(w,!0),q&&Yn){const Fe=()=>{w.subTree=Za(w),Yn(q,w.subTree,w,M,null)};ge?I.type.__asyncLoader().then(()=>!w.isUnmounted&&Fe()):Fe()}else{const Fe=w.subTree=Za(w);z(null,Fe,S,O,w,M,F),I.el=Fe.el}if(ce&&xt(ce,M),!ge&&(V=Y&&Y.onVnodeMounted)){const Fe=I;xt(()=>gn(V,ye,Fe),M)}(I.shapeFlag&256||ye&&zo(ye.vnode)&&ye.vnode.shapeFlag&256)&&w.a&&xt(w.a,M),w.isMounted=!0,I=S=O=null}},U=w.effect=new tu(k,()=>cu(D),w.scope),D=w.update=()=>U.run();D.id=w.uid,Ri(w,!0),D()},xe=(w,I,S)=>{I.component=w;const O=w.vnode.props;w.vnode=I,w.next=null,Bx(w,I.props,O,S),Hx(w,I.children,S),Mr(),Ud(),Lr()},pe=(w,I,S,O,M,F,$,k,U=!1)=>{const D=w&&w.children,V=w?w.shapeFlag:0,q=I.children,{patchFlag:Y,shapeFlag:j}=I;if(Y>0){if(Y&128){xn(D,q,S,O,M,F,$,k,U);return}else if(Y&256){In(D,q,S,O,M,F,$,k,U);return}}j&8?(V&16&&yt(D,M,F),q!==D&&v(S,q)):V&16?j&16?xn(D,q,S,O,M,F,$,k,U):yt(D,M,F,!0):(V&8&&v(S,""),j&16&&Ot(q,S,O,M,F,$,k,U))},In=(w,I,S,O,M,F,$,k,U)=>{w=w||vr,I=I||vr;const D=w.length,V=I.length,q=Math.min(D,V);let Y;for(Y=0;Y<q;Y++){const j=I[Y]=U?si(I[Y]):mn(I[Y]);z(w[Y],j,S,null,M,F,$,k,U)}D>V?yt(w,M,F,!0,!1,q):Ot(I,S,O,M,F,$,k,U,q)},xn=(w,I,S,O,M,F,$,k,U)=>{let D=0;const V=I.length;let q=w.length-1,Y=V-1;for(;D<=q&&D<=Y;){const j=w[D],ce=I[D]=U?si(I[D]):mn(I[D]);if(os(j,ce))z(j,ce,S,null,M,F,$,k,U);else break;D++}for(;D<=q&&D<=Y;){const j=w[q],ce=I[Y]=U?si(I[Y]):mn(I[Y]);if(os(j,ce))z(j,ce,S,null,M,F,$,k,U);else break;q--,Y--}if(D>q){if(D<=Y){const j=Y+1,ce=j<V?I[j].el:O;for(;D<=Y;)z(null,I[D]=U?si(I[D]):mn(I[D]),S,ce,M,F,$,k,U),D++}}else if(D>Y)for(;D<=q;)Ht(w[D],M,F,!0),D++;else{const j=D,ce=D,ye=new Map;for(D=ce;D<=Y;D++){const it=I[D]=U?si(I[D]):mn(I[D]);it.key!=null&&ye.set(it.key,D)}let ge,Fe=0;const dt=Y-ce+1;let hn=!1,ji=0;const Tn=new Array(dt);for(D=0;D<dt;D++)Tn[D]=0;for(D=j;D<=q;D++){const it=w[D];if(Fe>=dt){Ht(it,M,F,!0);continue}let wt;if(it.key!=null)wt=ye.get(it.key);else for(ge=ce;ge<=Y;ge++)if(Tn[ge-ce]===0&&os(it,I[ge])){wt=ge;break}wt===void 0?Ht(it,M,F,!0):(Tn[wt-ce]=D+1,wt>=ji?ji=wt:hn=!0,z(it,I[wt],S,null,M,F,$,k,U),Fe++)}const Ji=hn?Kx(Tn):vr;for(ge=Ji.length-1,D=dt-1;D>=0;D--){const it=ce+D,wt=I[it],Zi=it+1<V?I[it+1].el:O;Tn[D]===0?z(null,wt,S,Zi,M,F,$,k,U):hn&&(ge<0||D!==Ji[ge]?Xe(wt,S,Zi,2):ge--)}}},Xe=(w,I,S,O,M=null)=>{const{el:F,type:$,transition:k,children:U,shapeFlag:D}=w;if(D&6){Xe(w.component.subTree,I,S,O);return}if(D&128){w.suspense.move(I,S,O);return}if(D&64){$.move(w,I,S,$t);return}if($===nn){r(F,I,S);for(let q=0;q<U.length;q++)Xe(U[q],I,S,O);r(w.anchor,I,S);return}if($===nc){Ee(w,I,S);return}if(O!==2&&D&1&&k)if(O===0)k.beforeEnter(F),r(F,I,S),xt(()=>k.enter(F),M);else{const{leave:q,delayLeave:Y,afterLeave:j}=k,ce=()=>r(F,I,S),ye=()=>{q(F,()=>{ce(),j&&j()})};Y?Y(F,ce,ye):ye()}else r(F,I,S)},Ht=(w,I,S,O=!1,M=!1)=>{const{type:F,props:$,ref:k,children:U,dynamicChildren:D,shapeFlag:V,patchFlag:q,dirs:Y}=w;if(k!=null&&Tc(k,null,S,w,!0),V&256){I.ctx.deactivate(w);return}const j=V&1&&Y,ce=!zo(w);let ye;if(ce&&(ye=$&&$.onVnodeBeforeUnmount)&&gn(ye,I,w),V&6)Gn(w.component,S,O);else{if(V&128){w.suspense.unmount(S,O);return}j&&Ai(w,null,I,"beforeUnmount"),V&64?w.type.remove(w,I,S,M,$t,O):D&&(F!==nn||q>0&&q&64)?yt(D,I,S,!1,!0):(F===nn&&q&384||!M&&V&16)&&yt(U,I,S),O&&Ks(w)}(ce&&(ye=$&&$.onVnodeUnmounted)||j)&&xt(()=>{ye&&gn(ye,I,w),j&&Ai(w,null,I,"unmounted")},S)},Ks=w=>{const{type:I,el:S,anchor:O,transition:M}=w;if(I===nn){Bl(S,O);return}if(I===nc){te(w);return}const F=()=>{o(S),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(w.shapeFlag&1&&M&&!M.persisted){const{leave:$,delayLeave:k}=M,U=()=>$(S,F);k?k(w.el,F,U):U()}else F()},Bl=(w,I)=>{let S;for(;w!==I;)S=C(w),o(w),w=S;o(I)},Gn=(w,I,S)=>{const{bum:O,scope:M,update:F,subTree:$,um:k}=w;O&&Ja(O),M.stop(),F&&(F.active=!1,Ht($,w,I,S)),k&&xt(k,I),xt(()=>{w.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},yt=(w,I,S,O=!1,M=!1,F=0)=>{for(let $=F;$<w.length;$++)Ht(w[$],I,S,O,M)},Xi=w=>w.shapeFlag&6?Xi(w.component.subTree):w.shapeFlag&128?w.suspense.next():C(w.anchor||w.el),Vn=(w,I,S)=>{w==null?I._vnode&&Ht(I._vnode,null,null,!0):z(I._vnode||null,w,I,null,null,null,S),Ud(),xp(),I._vnode=w},$t={p:z,um:Ht,m:Xe,r:Ks,mt:Qi,mc:Ot,pc:pe,pbc:bn,n:Xi,o:t};let Kr,Yn;return e&&([Kr,Yn]=e($t)),{render:Vn,hydrate:Kr,createApp:Lx(Vn,Kr)}}function Ri({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Hp(t,e,n=!1){const r=t.children,o=e.children;if(ie(r)&&ie(o))for(let a=0;a<r.length;a++){const c=r[a];let f=o[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[a]=si(o[a]),f.el=c.el),n||Hp(c,f)),f.type===xl&&(f.el=c.el)}}function Kx(t){const e=t.slice(),n=[0];let r,o,a,c,f;const h=t.length;for(r=0;r<h;r++){const _=t[r];if(_!==0){if(o=n[n.length-1],t[o]<_){e[r]=o,n.push(r);continue}for(a=0,c=n.length-1;a<c;)f=a+c>>1,t[n[f]]<_?a=f+1:c=f;_<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,c=n[a-1];a-- >0;)n[a]=c,c=e[c];return n}const qx=t=>t.__isTeleport,nn=Symbol.for("v-fgt"),xl=Symbol.for("v-txt"),Ui=Symbol.for("v-cmt"),nc=Symbol.for("v-stc"),ps=[];let on=null;function wn(t=!1){ps.push(on=t?null:[])}function Gx(){ps.pop(),on=ps[ps.length-1]||null}let Is=1;function Xd(t){Is+=t}function $p(t){return t.dynamicChildren=Is>0?on||vr:null,Gx(),Is>0&&on&&on.push(t),t}function Bn(t,e,n,r,o,a){return $p(En(t,e,n,r,o,a,!0))}function Vx(t,e,n,r,o){return $p(Tt(t,e,n,r,o,!0))}function Yx(t){return t?t.__v_isVNode===!0:!1}function os(t,e){return t.type===e.type&&t.key===e.key}const Tl="__vInternal",zp=({key:t})=>t??null,qo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||ht(t)||ae(t)?{i:yn,r:t,k:e,f:!!n}:t:null);function En(t,e=null,n=null,r=0,o=null,a=t===nn?0:1,c=!1,f=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&zp(e),ref:e&&qo(e),scopeId:bl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:yn};return f?(hu(h,n),a&128&&t.normalize(h)):n&&(h.shapeFlag|=Qe(n)?8:16),Is>0&&!c&&on&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&on.push(h),h}const Tt=Qx;function Qx(t,e=null,n=null,r=0,o=null,a=!1){if((!t||t===Tx)&&(t=Ui),Yx(t)){const f=Ar(t,e,!0);return n&&hu(f,n),Is>0&&!a&&on&&(f.shapeFlag&6?on[on.indexOf(t)]=f:on.push(f)),f.patchFlag|=-2,f}if(lT(t)&&(t=t.__vccOpts),e){e=Xx(e);let{class:f,style:h}=e;f&&!Qe(f)&&(e.class=Zc(f)),He(h)&&(vp(h)&&!ie(h)&&(h=tt({},h)),e.style=hi(h))}const c=Qe(t)?1:hx(t)?128:qx(t)?64:He(t)?4:ae(t)?2:0;return En(t,e,n,r,o,c,a,!0)}function Xx(t){return t?vp(t)||Tl in t?tt({},t):t:null}function Ar(t,e,n=!1){const{props:r,ref:o,patchFlag:a,children:c}=t,f=e?Zx(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&zp(f),ref:e&&e.ref?n&&o?ie(o)?o.concat(qo(e)):[o,qo(e)]:qo(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==nn?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ar(t.ssContent),ssFallback:t.ssFallback&&Ar(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function jx(t=" ",e=0){return Tt(xl,null,t,e)}function Jx(t="",e=!1){return e?(wn(),Vx(Ui,null,t)):Tt(Ui,null,t)}function mn(t){return t==null||typeof t=="boolean"?Tt(Ui):ie(t)?Tt(nn,null,t.slice()):typeof t=="object"?si(t):Tt(xl,null,String(t))}function si(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ar(t)}function hu(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ie(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),hu(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!(Tl in e)?e._ctx=yn:o===3&&yn&&(yn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ae(e)?(e={default:e,_ctx:yn},n=32):(e=String(e),r&64?(n=16,e=[jx(e)]):n=8);t.children=e,t.shapeFlag|=n}function Zx(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=Zc([e.class,r.class]));else if(o==="style")e.style=hi([e.style,r.style]);else if(ml(o)){const a=e[o],c=r[o];c&&a!==c&&!(ie(a)&&a.includes(c))&&(e[o]=a?[].concat(a,c):c)}else o!==""&&(e[o]=r[o])}return e}function gn(t,e,n,r=null){un(t,e,7,[n,r])}const eT=Lp();let tT=0;function nT(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||eT,a={uid:tT++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new yI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kp(r,o),emitsOptions:Sp(r,o),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:r.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=ox.bind(null,a),t.ce&&t.ce(a),a}let ft=null,du,_r,jd="__VUE_INSTANCE_SETTERS__";(_r=gc()[jd])||(_r=gc()[jd]=[]),_r.push(t=>ft=t),du=t=>{_r.length>1?_r.forEach(e=>e(t)):_r[0](t)};const Rr=t=>{du(t),t.scope.on()},ki=()=>{ft&&ft.scope.off(),du(null)};function Kp(t){return t.vnode.shapeFlag&4}let xs=!1;function iT(t,e=!1){xs=e;const{props:n,children:r}=t.vnode,o=Kp(t);kx(t,n,o,e),Ux(t,r);const a=o?rT(t,e):void 0;return xs=!1,a}function rT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=yp(new Proxy(t.ctx,Ax));const{setup:r}=n;if(r){const o=t.setupContext=r.length>1?oT(t):null;Rr(t),Mr();const a=li(r,t,0,[t.props,o]);if(Lr(),ki(),tp(a)){if(a.then(ki,ki),e)return a.then(c=>{Jd(t,c,e)}).catch(c=>{El(c,t,0)});t.asyncDep=a}else Jd(t,a,e)}else qp(t,e)}function Jd(t,e,n){ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:He(e)&&(t.setupState=Cp(e)),qp(t,n)}let Zd;function qp(t,e,n){const r=t.type;if(!t.render){if(!e&&Zd&&!r.render){const o=r.template||uu(t).template;if(o){const{isCustomElement:a,compilerOptions:c}=t.appContext.config,{delimiters:f,compilerOptions:h}=r,_=tt(tt({isCustomElement:a,delimiters:f},c),h);r.render=Zd(o,_)}}t.render=r.render||cn}Rr(t),Mr(),Rx(t),Lr(),ki()}function sT(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Nt(t,"get","$attrs"),e[n]}}))}function oT(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return sT(t)},slots:t.slots,emit:t.emit,expose:e}}function _u(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Cp(yp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in _s)return _s[n](t)},has(e,n){return n in e||n in _s}}))}function lT(t){return ae(t)&&"__vccOpts"in t}const aT=(t,e)=>ZI(t,e,xs),cT=Symbol.for("v-scx"),uT=()=>Ko(cT),fT="3.3.4",hT="http://www.w3.org/2000/svg",Di=typeof document<"u"?document:null,e_=Di&&Di.createElement("template"),dT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e?Di.createElementNS(hT,t):Di.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>Di.createTextNode(t),createComment:t=>Di.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Di.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,o,a){const c=n?n.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{e_.innerHTML=r?`<svg>${t}</svg>`:t;const f=e_.content;if(r){const h=f.firstChild;for(;h.firstChild;)f.appendChild(h.firstChild);f.removeChild(h)}e.insertBefore(f,n)}return[c?c.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function _T(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function pT(t,e,n){const r=t.style,o=Qe(n);if(n&&!o){if(e&&!Qe(e))for(const a in e)n[a]==null&&Sc(r,a,"");for(const a in n)Sc(r,a,n[a])}else{const a=r.display;o?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=a)}}const t_=/\s*!important$/;function Sc(t,e,n){if(ie(n))n.forEach(r=>Sc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=gT(t,e);t_.test(n)?t.setProperty(Dr(r),n.replace(t_,""),"important"):t[r]=n}}const n_=["Webkit","Moz","ms"],ic={};function gT(t,e){const n=ic[e];if(n)return n;let r=Tr(e);if(r!=="filter"&&r in t)return ic[e]=r;r=rp(r);for(let o=0;o<n_.length;o++){const a=n_[o]+r;if(a in t)return ic[e]=a}return e}const i_="http://www.w3.org/1999/xlink";function mT(t,e,n,r,o){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(i_,e.slice(6,e.length)):t.setAttributeNS(i_,e,n);else{const a=mI(e);n==null||a&&!sp(n)?t.removeAttribute(e):t.setAttribute(e,a?"":n)}}function vT(t,e,n,r,o,a,c){if(e==="innerHTML"||e==="textContent"){r&&c(r,o,a),t[e]=n??"";return}const f=t.tagName;if(e==="value"&&f!=="PROGRESS"&&!f.includes("-")){t._value=n;const _=f==="OPTION"?t.getAttribute("value"):t.value,v=n??"";_!==v&&(t.value=v),n==null&&t.removeAttribute(e);return}let h=!1;if(n===""||n==null){const _=typeof t[e];_==="boolean"?n=sp(n):n==null&&_==="string"?(n="",h=!0):_==="number"&&(n=0,h=!0)}try{t[e]=n}catch{}h&&t.removeAttribute(e)}function yT(t,e,n,r){t.addEventListener(e,n,r)}function wT(t,e,n,r){t.removeEventListener(e,n,r)}function ET(t,e,n,r,o=null){const a=t._vei||(t._vei={}),c=a[e];if(r&&c)c.value=r;else{const[f,h]=CT(e);if(r){const _=a[e]=xT(r,o);yT(t,f,_,h)}else c&&(wT(t,f,c,h),a[e]=void 0)}}const r_=/(?:Once|Passive|Capture)$/;function CT(t){let e;if(r_.test(t)){e={};let r;for(;r=t.match(r_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Dr(t.slice(2)),e]}let rc=0;const bT=Promise.resolve(),IT=()=>rc||(bT.then(()=>rc=0),rc=Date.now());function xT(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;un(TT(r,n.value),e,5,[r])};return n.value=t,n.attached=IT(),n}function TT(t,e){if(ie(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const s_=/^on[a-z]/,ST=(t,e,n,r,o=!1,a,c,f,h)=>{e==="class"?_T(t,r,o):e==="style"?pT(t,n,r):ml(e)?Qc(e)||ET(t,e,n,r,c):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):AT(t,e,r,o))?vT(t,e,r,a,c,f,h):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),mT(t,e,r,o))};function AT(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&s_.test(e)&&ae(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||s_.test(e)&&Qe(n)?!1:e in t}const RT=tt({patchProp:ST},dT);let o_;function NT(){return o_||(o_=$x(RT))}const PT=(...t)=>{const e=NT().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=OT(r);if(!o)return;const a=e._component;!ae(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const c=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},e};function OT(t){return Qe(t)?document.querySelector(t):t}var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jo=WT,Jo=256,MT={x:Jo/2,y:Jo/2},LT=Jo/360,FT=Jo/(2*Math.PI);function kT(t,e,n){return e!=null&&(t=Math.max(t,e)),n!=null&&(t=Math.min(t,n)),t}function BT(t){return t*(Math.PI/180)}function WT(t,e){var n={x:null,y:null},r=MT;n.x=r.x+t.lng*LT;var o=kT(Math.sin(BT(t.lat)),-.9999,.9999);return n.y=r.y+.5*Math.log((1+o)/(1-o))*-FT,n}const UT=["src"],HT=Fr({__name:"StaticMap",props:{zoom:{},center:{},mapWidth:{},mapHeight:{}},setup(t){const e=t,n=new URL("https://maps.googleapis.com/maps/api/staticmap");return n.searchParams.set("zoom",e.zoom),n.searchParams.set("center",e.center),n.searchParams.set("key","AIzaSyDImU7k6IetA47jAxOPlhWiMlWcefJoIiw"),n.searchParams.set("size",`${e.mapWidth}x${e.mapHeight}`),n.searchParams.set("scale","2"),(r,o)=>(wn(),Bn("img",{src:Wt(n).toString(),style:hi({width:e.mapWidth+"px",height:e.mapHeight+"px"})},null,12,UT))}}),$T={key:0,class:"wake-lock"},zT=Fr({__name:"WakeLock",setup(t){const e=Wi(!1);let n=null;return Fs(async()=>{if("wakeLock"in window.navigator)try{n=await window.navigator.wakeLock.request("screen"),e.value=!1}catch{e.value=!0}else e.value=!0}),kr(()=>{n&&n.release()}),(r,o)=>e.value?(wn(),Bn("div",$T," Could not set wake lock -- your phone may go to sleep ")):Jx("",!0)}});const pu=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},KT=pu(zT,[["__scopeId","data-v-8cf9f106"]]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=function(t,e){if(!t)throw Br(e)},Br=function(t){return new Error("Firebase Database ("+Gp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},qT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],c=t[n++],f=t[n++],h=((o&7)<<18|(a&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},gu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const a=t[o],c=o+1<t.length,f=c?t[o+1]:0,h=o+2<t.length,_=h?t[o+2]:0,v=a>>2,y=(a&3)<<4|f>>4;let C=(f&15)<<2|_>>6,R=_&63;h||(R=64,c||(C=64)),r.push(n[v],n[y],n[C],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Vp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],f=o<t.length?n[t.charAt(o)]:0;++o;const _=o<t.length?n[t.charAt(o)]:64;++o;const y=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||f==null||_==null||y==null)throw new GT;const C=a<<2|f>>4;if(r.push(C),_!==64){const R=f<<4&240|_>>2;if(r.push(R),y!==64){const W=_<<6&192|y;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yp=function(t){const e=Vp(t);return gu.encodeByteArray(e,!0)},Zo=function(t){return Yp(t).replace(/\./g,"")},Ac=function(t){try{return gu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t){return Qp(void 0,t)}function Qp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!YT(n)||(t[n]=Qp(t[n],e[n]));return t}function YT(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=()=>QT().__FIREBASE_DEFAULTS__,jT=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ac(t[1]);return e&&JSON.parse(e)},Xp=()=>{try{return XT()||jT()||JT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ZT=t=>{var e,n;return(n=(e=Xp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eS=t=>{const e=ZT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},jp=()=>{var t;return(t=Xp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t),f="";return[Zo(JSON.stringify(n)),Zo(JSON.stringify(c)),f].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nS())}function iS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zp(){return Gp.NODE_ADMIN===!0}function rS(){try{return typeof indexedDB=="object"}catch{return!1}}function sS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="FirebaseError";class ks extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oS,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eg.prototype.create)}}class eg{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?lS(a,r):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new ks(o,f,r)}}function lS(t,e){return t.replace(aS,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const aS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t){return JSON.parse(t)}function et(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg=function(t){let e={},n={},r={},o="";try{const a=t.split(".");e=Ts(Ac(a[0])||""),n=Ts(Ac(a[1])||""),o=a[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:o}},cS=function(t){const e=tg(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},uS=function(t){const e=tg(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Nr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function l_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function el(t,e,n){const r={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r}function Rc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const a=t[o],c=e[o];if(a_(a)&&a_(c)){if(!Rc(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function a_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)r[y]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let y=0;y<16;y++)r[y]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let y=16;y<80;y++){const C=r[y-3]^r[y-8]^r[y-14]^r[y-16];r[y]=(C<<1|C>>>31)&4294967295}let o=this.chain_[0],a=this.chain_[1],c=this.chain_[2],f=this.chain_[3],h=this.chain_[4],_,v;for(let y=0;y<80;y++){y<40?y<20?(_=f^a&(c^f),v=1518500249):(_=a^c^f,v=1859775393):y<60?(_=a&c|f&(a|c),v=2400959708):(_=a^c^f,v=3395469782);const C=(o<<5|o>>>27)+_+h+v+r[y]&4294967295;h=f,f=c,c=(a<<30|a>>>2)&4294967295,a=o,o=C}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let o=0;const a=this.buf_;let c=this.inbuf_;for(;o<n;){if(c===0)for(;o<=r;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(a[c]=e.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}else for(;o<n;)if(a[c]=e[o],++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let a=24;a>=0;a-=8)e[r]=this.chain_[o]>>a&255,++r;return e}}function Al(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);if(o>=55296&&o<=56319){const a=o-55296;r++,B(r<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(r)-56320;o=65536+(a<<10)+c}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Rl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t){return t&&t._delegate?t._delegate:t}class Ss{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gS(e))try{this.getOrInitializeService({instanceIdentifier:Ni})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=Ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ni){return this.instances.has(e)}getOptions(e=Ni){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&c.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ni){return this.component?this.component.multipleInstances?e:Ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pS(t){return t===Ni?void 0:t}function gS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _S(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const vS={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},yS=Pe.INFO,wS={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},ES=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=wS[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ng{constructor(e){this.name=e,this._logLevel=yS,this._logHandler=ES,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const CS=(t,e)=>e.some(n=>t instanceof n);let c_,u_;function bS(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IS(){return u_||(u_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ig=new WeakMap,Nc=new WeakMap,rg=new WeakMap,sc=new WeakMap,mu=new WeakMap;function xS(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(ai(t.result)),o()},c=()=>{r(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&ig.set(n,t)}).catch(()=>{}),mu.set(e,t),e}function TS(t){if(Nc.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),o()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Nc.set(t,e)}let Pc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SS(t){Pc=t(Pc)}function AS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(oc(this),e,...n);return rg.set(r,e.sort?e.sort():[e]),ai(r)}:IS().includes(t)?function(...e){return t.apply(oc(this),e),ai(ig.get(this))}:function(...e){return ai(t.apply(oc(this),e))}}function RS(t){return typeof t=="function"?AS(t):(t instanceof IDBTransaction&&TS(t),CS(t,bS())?new Proxy(t,Pc):t)}function ai(t){if(t instanceof IDBRequest)return xS(t);if(sc.has(t))return sc.get(t);const e=RS(t);return e!==t&&(sc.set(t,e),mu.set(e,t)),e}const oc=t=>mu.get(t);function NS(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(t,e),f=ai(c);return r&&c.addEventListener("upgradeneeded",h=>{r(ai(c.result),h.oldVersion,h.newVersion,ai(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),f.then(h=>{a&&h.addEventListener("close",()=>a()),o&&h.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),f}const PS=["get","getKey","getAll","getAllKeys","count"],OS=["put","add","delete","clear"],lc=new Map;function f_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lc.get(e))return lc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=OS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||PS.includes(n)))return;const a=async function(c,...f){const h=this.transaction(c,o?"readwrite":"readonly");let _=h.store;return r&&(_=_.index(f.shift())),(await Promise.all([_[n](...f),o&&h.done]))[0]};return lc.set(e,a),a}SS(t=>({...t,get:(e,n,r)=>f_(e,n)||t.get(e,n,r),has:(e,n)=>!!f_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function MS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Oc="@firebase/app",h_="0.9.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new ng("@firebase/app"),LS="@firebase/app-compat",FS="@firebase/analytics-compat",kS="@firebase/analytics",BS="@firebase/app-check-compat",WS="@firebase/app-check",US="@firebase/auth",HS="@firebase/auth-compat",$S="@firebase/database",zS="@firebase/database-compat",KS="@firebase/functions",qS="@firebase/functions-compat",GS="@firebase/installations",VS="@firebase/installations-compat",YS="@firebase/messaging",QS="@firebase/messaging-compat",XS="@firebase/performance",jS="@firebase/performance-compat",JS="@firebase/remote-config",ZS="@firebase/remote-config-compat",e1="@firebase/storage",t1="@firebase/storage-compat",n1="@firebase/firestore",i1="@firebase/firestore-compat",r1="firebase",s1="9.22.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc="[DEFAULT]",o1={[Oc]:"fire-core",[LS]:"fire-core-compat",[kS]:"fire-analytics",[FS]:"fire-analytics-compat",[WS]:"fire-app-check",[BS]:"fire-app-check-compat",[US]:"fire-auth",[HS]:"fire-auth-compat",[$S]:"fire-rtdb",[zS]:"fire-rtdb-compat",[KS]:"fire-fn",[qS]:"fire-fn-compat",[GS]:"fire-iid",[VS]:"fire-iid-compat",[YS]:"fire-fcm",[QS]:"fire-fcm-compat",[XS]:"fire-perf",[jS]:"fire-perf-compat",[JS]:"fire-rc",[ZS]:"fire-rc-compat",[e1]:"fire-gcs",[t1]:"fire-gcs-compat",[n1]:"fire-fst",[i1]:"fire-fst-compat","fire-js":"fire-js",[r1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Map,Mc=new Map;function l1(t,e){try{t.container.addComponent(e)}catch(n){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nl(t){const e=t.name;if(Mc.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;Mc.set(e,t);for(const n of tl.values())l1(n,t);return!0}function a1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ci=new eg("app","Firebase",c1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=s1;function sg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dc,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw ci.create("bad-app-name",{appName:String(o)});if(n||(n=jp()),!n)throw ci.create("no-options");const a=tl.get(o);if(a){if(Rc(n,a.options)&&Rc(r,a.config))return a;throw ci.create("duplicate-app",{appName:o})}const c=new mS(o);for(const h of Mc.values())c.addComponent(h);const f=new u1(n,r,c);return tl.set(o,f),f}function h1(t=Dc){const e=tl.get(t);if(!e&&t===Dc&&jp())return sg();if(!e)throw ci.create("no-app",{appName:t});return e}function Cr(t,e,n){var r;let o=(r=o1[t])!==null&&r!==void 0?r:t;n&&(o+=`-${n}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${o}" with version "${e}":`];a&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(f.join(" "));return}nl(new Ss(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="firebase-heartbeat-database",_1=1,As="firebase-heartbeat-store";let ac=null;function og(){return ac||(ac=NS(d1,_1,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(As)}}}).catch(t=>{throw ci.create("idb-open",{originalErrorMessage:t.message})})),ac}async function p1(t){try{return await(await og()).transaction(As).objectStore(As).get(lg(t))}catch(e){if(e instanceof ks)Hi.warn(e.message);else{const n=ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hi.warn(n.message)}}}async function d_(t,e){try{const r=(await og()).transaction(As,"readwrite");await r.objectStore(As).put(e,lg(t)),await r.done}catch(n){if(n instanceof ks)Hi.warn(n.message);else{const r=ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hi.warn(r.message)}}}function lg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=1024,m1=30*24*60*60*1e3;class v1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new w1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=__();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=m1}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=__(),{heartbeatsToSend:n,unsentEntries:r}=y1(this._heartbeatsCache.heartbeats),o=Zo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function __(){return new Date().toISOString().substring(0,10)}function y1(t,e=g1){const n=[];let r=t.slice();for(const o of t){const a=n.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),p_(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),p_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class w1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rS()?sS().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await p1(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return d_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return d_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function p_(t){return Zo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(t){nl(new Ss("platform-logger",e=>new DS(e),"PRIVATE")),nl(new Ss("heartbeat",e=>new v1(e),"PRIVATE")),Cr(Oc,h_,t),Cr(Oc,h_,"esm2017"),Cr("fire-js","")}E1("");var C1="firebase",b1="9.22.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr(C1,b1,"app");const g_="@firebase/database",m_="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ag="";function I1(t){ag=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),et(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ts(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Cn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new x1(e)}}catch{}return new T1},Mi=cg("localStorage"),Lc=cg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new ng("@firebase/database"),S1=function(){let t=1;return function(){return t++}}(),ug=function(t){const e=dS(t),n=new hS;n.update(e);const r=n.digest();return gu.encodeByteArray(r)},Bs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Bs.apply(null,r):typeof r=="object"?e+=et(r):e+=r,e+=" "}return e};let Bi=null,v_=!0;const A1=function(t,e){B(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(br.logLevel=Pe.VERBOSE,Bi=br.log.bind(br),e&&Lc.set("logging_enabled",!0)):typeof t=="function"?Bi=t:(Bi=null,Lc.remove("logging_enabled"))},ct=function(...t){if(v_===!0&&(v_=!1,Bi===null&&Lc.get("logging_enabled")===!0&&A1(!0)),Bi){const e=Bs.apply(null,t);Bi(e)}},Ws=function(t){return function(...e){ct(t,...e)}},Fc=function(...t){const e="FIREBASE INTERNAL ERROR: "+Bs(...t);br.error(e)},Hn=function(...t){const e=`FIREBASE FATAL ERROR: ${Bs(...t)}`;throw br.error(e),new Error(e)},Rt=function(...t){const e="FIREBASE WARNING: "+Bs(...t);br.warn(e)},R1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},vu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},N1=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},$i="[MIN_NAME]",$n="[MAX_NAME]",Ur=function(t,e){if(t===e)return 0;if(t===$i||e===$n)return-1;if(e===$i||t===$n)return 1;{const n=y_(t),r=y_(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},P1=function(t,e){return t===e?0:t<e?-1:1},as=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+et(e))},yu=function(t){if(typeof t!="object"||t===null)return et(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=et(e[r]),n+=":",n+=yu(t[e[r]]);return n+="}",n},fg=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let o=0;o<n;o+=e)o+e>n?r.push(t.substring(o,n)):r.push(t.substring(o,o+e));return r};function Pt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const hg=function(t){B(!vu(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let o,a,c,f,h;t===0?(a=0,c=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(t)/Math.LN2),r),a=f+r,c=Math.round(t*Math.pow(2,n-f)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-r-n))));const _=[];for(h=n;h;h-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(h=e;h;h-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(o?1:0),_.reverse();const v=_.join("");let y="";for(h=0;h<64;h+=8){let C=parseInt(v.substr(h,8),2).toString(16);C.length===1&&(C="0"+C),y=y+C}return y.toLowerCase()},O1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},D1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function M1(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const L1=new RegExp("^-?(0*)\\d{1,10}$"),F1=-2147483648,k1=2147483647,y_=function(t){if(L1.test(t)){const e=Number(t);if(e>=F1&&e<=k1)return e}return null},Hr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Rt("Exception was thrown by user callback.",n),e},Math.floor(0))}},B1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rt(e)}}class Ir{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ir.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu="5",dg="v",_g="s",pg="r",gg="f",mg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vg="ls",yg="p",kc="ac",wg="websocket",Eg="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n,r,o,a=!1,c="",f=!1,h=!1){this.secure=n,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function H1(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function bg(t,e,n){B(typeof e=="string","typeof type must == string"),B(typeof n=="object","typeof params must == object");let r;if(e===wg)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Eg)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);H1(t)&&(n.ns=t.namespace);const o=[];return Pt(n,(a,c)=>{o.push(a+"="+c)}),r+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.counters_={}}incrementCounter(e,n=1){Cn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return VT(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc={},uc={};function Eu(t){const e=t.toString();return cc[e]||(cc[e]=new $1),cc[e]}function z1(t,e){const n=t.toString();return uc[n]||(uc[n]=e()),uc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Hr(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="start",q1="close",G1="pLPCommand",V1="pRTLPCB",Ig="id",xg="pw",Tg="ser",Y1="cb",Q1="seg",X1="ts",j1="d",J1="dframe",Sg=1870,Ag=30,Z1=Sg-Ag,eA=25e3,tA=3e4;class mr{constructor(e,n,r,o,a,c,f){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=o,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ws(e),this.stats_=Eu(n),this.urlFn=h=>(this.appCheckToken&&(h[kc]=this.appCheckToken),bg(n,Eg,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new K1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(tA)),N1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Cu((...a)=>{const[c,f,h,_,v]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===w_)this.id=f,this.password=h;else if(c===q1)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={};r[w_]="t",r[Tg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Y1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[dg]=wu,this.transportSessionId&&(r[_g]=this.transportSessionId),this.lastSessionId&&(r[vg]=this.lastSessionId),this.applicationId&&(r[yg]=this.applicationId),this.appCheckToken&&(r[kc]=this.appCheckToken),typeof location<"u"&&location.hostname&&mg.test(location.hostname)&&(r[pg]=gg);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mr.forceAllow_=!0}static forceDisallow(){mr.forceDisallow_=!0}static isAvailable(){return mr.forceAllow_?!0:!mr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!O1()&&!D1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Yp(n),o=fg(r,Z1);for(let a=0;a<o.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[J1]="t",r[Ig]=e,r[xg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=et(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Cu{constructor(e,n,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=S1(),window[G1+this.uniqueCallbackIdentifier]=e,window[V1+this.uniqueCallbackIdentifier]=n,this.myIFrame=Cu.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){ct("frame writing exception"),f.stack&&ct(f.stack),ct(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ct("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Ig]=this.myID,e[xg]=this.myPW,e[Tg]=this.currentSerial;let n=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ag+r.length<=Sg;){const c=this.pendingSegs.shift();r=r+"&"+Q1+o+"="+c.seg+"&"+X1+o+"="+c.ts+"&"+j1+o+"="+c.d,o++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(r,Math.floor(eA)),a=()=>{clearTimeout(o),r()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ct("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=16384,iA=45e3;let il=null;typeof MozWebSocket<"u"?il=MozWebSocket:typeof WebSocket<"u"&&(il=WebSocket);class sn{constructor(e,n,r,o,a,c,f){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ws(this.connId),this.stats_=Eu(n),this.connURL=sn.connectionURL_(n,c,f,o,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,o,a){const c={};return c[dg]=wu,typeof location<"u"&&location.hostname&&mg.test(location.hostname)&&(c[pg]=gg),n&&(c[_g]=n),r&&(c[vg]=r),o&&(c[kc]=o),a&&(c[yg]=a),bg(e,wg,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mi.set("previous_websocket_failure",!0);try{let r;Zp(),this.mySock=new il(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){sn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&il!==null&&!sn.forceDisallow_}static previouslyFailed(){return Mi.isInMemoryStorage||Mi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Mi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ts(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(B(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=fg(n,nA);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(iA))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}sn.responsesRequiredToBeHealthy=2;sn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[mr,sn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=sn&&sn.isAvailable();let r=n&&!sn.previouslyFailed();if(e.webSocketOnly&&(n||Rt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[sn];else{const o=this.transports_=[];for(const a of Rs.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a);Rs.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Rs.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=6e4,sA=5e3,oA=10*1024,lA=100*1024,fc="t",E_="d",aA="s",C_="r",cA="e",b_="o",I_="a",x_="n",T_="p",uA="h";class fA{constructor(e,n,r,o,a,c,f,h,_,v){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=h,this.onKill_=_,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ws("c:"+this.id+":"),this.transportManager_=new Rs(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=gs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lA?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>oA?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(fc in e){const n=e[fc];n===I_?this.upgradeIfSecondaryHealthy_():n===C_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===b_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=as("t",e),r=as("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:T_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:I_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:x_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=as("t",e),r=as("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=as(fc,e);if(E_ in e){const r=e[E_];if(n===uA){const o=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===x_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===aA?this.onConnectionShutdown_(r):n===C_?this.onReset_(r):n===cA?Fc("Server Error: "+r):n===b_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),wu!==r&&Rt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),gs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(rA))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(sA))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:T_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{put(e,n,r,o){}merge(e,n,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this.allowedEvents_=e,this.listeners_={},B(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const o=this.getInitialEvent(e);o&&n.apply(r,o)}off(e,n,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let a=0;a<o.length;a++)if(o[a].callback===n&&(!r||r===o[a].context)){o.splice(a,1);return}}validateEventType_(e){B(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Ng{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Jp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new rl}getInitialEvent(e){return B(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=32,A_=768;class Ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function be(){return new Ae("")}function ue(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function _i(t){return t.pieces_.length-t.pieceNum_}function Oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ae(t.pieces_,e)}function Pg(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function hA(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Og(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Dg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ae(e,0)}function Ye(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&n.push(r[o])}return new Ae(n,0)}function fe(t){return t.pieceNum_>=t.pieces_.length}function St(t,e){const n=ue(t),r=ue(e);if(n===null)return e;if(n===r)return St(Oe(t),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function bu(t,e){if(_i(t)!==_i(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ln(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(_i(t)>_i(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class dA{constructor(e,n){this.errorPrefix_=n,this.parts_=Og(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Rl(this.parts_[r]);Mg(this)}}function _A(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Rl(e),Mg(t)}function pA(t){const e=t.parts_.pop();t.byteLength_-=Rl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Mg(t){if(t.byteLength_>A_)throw new Error(t.errorPrefix_+"has a key path longer than "+A_+" bytes ("+t.byteLength_+").");if(t.parts_.length>S_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+S_+") or object contains a cycle "+Pi(t))}function Pi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends Ng{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Iu}getInitialEvent(e){return B(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=1e3,gA=60*5*1e3,R_=30*1e3,mA=1.3,vA=3e4,yA="server_kill",N_=3;class Wn extends Rg{constructor(e,n,r,o,a,c,f,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=h,this.id=Wn.nextPersistentConnectionId_++,this.log_=Ws("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cs,this.maxReconnectDelay_=gA,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!Zp())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Iu.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&rl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const o=++this.requestNumber_,a={r:o,a:e,b:n};this.log_(et(a)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();const n=new Sl,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const f=c.d;c.s==="ok"?n.resolve(f):n.reject(f)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,r,o){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:n,query:e,tag:r};this.listens.get(c).set(a,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+r+" for "+o);const a={p:r},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,f=>{const h=f.d,_=f.s;Wn.warnOnListenWarnings_(h,n),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",f),_!=="ok"&&this.removeListen_(r,o),e.onComplete&&e.onComplete(_,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Cn(e,"w")){const r=Nr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();Rt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||uS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=R_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=cS(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,o=>{const a=o.s,c=o.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,n)}sendUnlisten_(e,n,r,o){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";o&&(a.q=r,a.t=o),this.sendRequest(c,a)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,o){const a={p:n,d:r};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(e,n,r,o){this.putInternal("p",e,n,r,o)}merge(e,n,r,o){this.putInternal("m",e,n,r,o)}putInternal(e,n,r,o,a){this.initConnection_();const c={p:n,d:r};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:o}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+et(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Fc("Unrecognized action received from server: "+et(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vA&&(this.reconnectDelay_=cs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*mA)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Wn.nextConnectionId_++,a=this.lastSessionId;let c=!1,f=null;const h=function(){f?f.close():(c=!0,r())},_=function(y){B(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(y)};this.realtime_={close:h,sendRequest:_};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,C]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);c?ct("getToken() completed but was canceled"):(ct("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=C&&C.token,f=new fA(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,R=>{Rt(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(yA)},a))}catch(y){this.log_("Failed to get token: "+y),c||(this.repoInfo_.nodeAdmin&&Rt(y),h())}}}interrupt(e){ct("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ct("Resuming connection for reason: "+e),delete this.interruptReasons_[e],l_(this.interruptReasons_)&&(this.reconnectDelay_=cs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(a=>yu(a)).join("$"):r="default";const o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const r=new Ae(e).toString();let o;if(this.listens.has(r)){const a=this.listens.get(r);o=a.get(n),a.delete(n),a.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,n){ct("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=N_&&(this.reconnectDelay_=R_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ct("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=N_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+ag.replace(/\./g,"-")]=1,Jp()?e["framework.cordova"]=1:iS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=rl.getInstance().currentlyOnline();return l_(this.interruptReasons_)&&e}}Wn.nextPersistentConnectionId_=0;Wn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new he(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new he($i,e),o=new he($i,n);return this.compare(r,o)!==0}minPost(){return he.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo;class Lg extends Nl{static get __EMPTY_NODE(){return Uo}static set __EMPTY_NODE(e){Uo=e}compare(e,n){return Ur(e.name,n.name)}isDefinedOn(e){throw Br("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return he.MIN}maxPost(){return new he($n,Uo)}makePost(e,n){return B(typeof e=="string","KeyIndex indexValue must always be a string."),new he(e,Uo)}toString(){return".key"}}const ui=new Lg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,r,o,a=null){this.isReverse_=o,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?r(e.key,n):1,o&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,o,a){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=o??At.EMPTY_NODE,this.right=a??At.EMPTY_NODE}copy(e,n,r,o,a){return new Ze(e??this.key,n??this.value,r??this.color,o??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const a=r(e,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(e,n,r),null):a===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return At.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,o;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return At.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ze.RED=!0;Ze.BLACK=!1;class wA{copy(e,n,r,o,a){return this}insert(e,n,r){return new Ze(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class At{constructor(e,n=At.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new At(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ze.BLACK,null,null))}remove(e){return new At(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ze.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,o=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ho(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ho(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ho(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ho(this.root_,null,this.comparator_,!0,e)}}At.EMPTY_NODE=new wA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e){return Ur(t.name,e.name)}function xu(t,e){return Ur(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc;function CA(t){Bc=t}const Fg=function(t){return typeof t=="number"?"number:"+hg(t):"string:"+t},kg=function(t){if(t.isLeafNode()){const e=t.val();B(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Cn(e,".sv"),"Priority must be a string or number.")}else B(t===Bc||t.isEmpty(),"priority of unexpected type.");B(t===Bc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P_;class Je{constructor(e,n=Je.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),kg(this.priorityNode_)}static set __childrenNodeConstructor(e){P_=e}static get __childrenNodeConstructor(){return P_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Je(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Je.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return fe(e)?this:ue(e)===".priority"?this.priorityNode_:Je.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Je.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ue(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(B(r!==".priority"||_i(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Je.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Fg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=hg(this.value_):e+=this.value_,this.lazyHash_=ug(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Je.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Je.__childrenNodeConstructor?-1:(B(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,o=Je.VALUE_TYPE_ORDER.indexOf(n),a=Je.VALUE_TYPE_ORDER.indexOf(r);return B(o>=0,"Unknown leaf type: "+n),B(a>=0,"Unknown leaf type: "+r),o===a?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Je.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bg,Wg;function bA(t){Bg=t}function IA(t){Wg=t}class xA extends Nl{compare(e,n){const r=e.node.getPriority(),o=n.node.getPriority(),a=r.compareTo(o);return a===0?Ur(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return he.MIN}maxPost(){return new he($n,new Je("[PRIORITY-POST]",Wg))}makePost(e,n){const r=Bg(e);return new he(n,new Je("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ue=new xA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=Math.log(2);class SA{constructor(e){const n=a=>parseInt(Math.log(a)/TA,10),r=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=r(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sl=function(t,e,n,r){t.sort(e);const o=function(h,_){const v=_-h;let y,C;if(v===0)return null;if(v===1)return y=t[h],C=n?n(y):y,new Ze(C,y.node,Ze.BLACK,null,null);{const R=parseInt(v/2,10)+h,W=o(h,R),z=o(R+1,_);return y=t[R],C=n?n(y):y,new Ze(C,y.node,Ze.BLACK,W,z)}},a=function(h){let _=null,v=null,y=t.length;const C=function(W,z){const Q=y-W,we=y;y-=W;const Le=o(Q+1,we),Ee=t[Q],te=n?n(Ee):Ee;R(new Ze(te,Ee.node,z,null,Le))},R=function(W){_?(_.left=W,_=W):(v=W,_=W)};for(let W=0;W<h.count;++W){const z=h.nextBitIsOne(),Q=Math.pow(2,h.count-(W+1));z?C(Q,Ze.BLACK):(C(Q,Ze.BLACK),C(Q,Ze.RED))}return v},c=new SA(t.length),f=a(c);return new At(r||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc;const pr={};class kn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return B(pr&&Ue,"ChildrenNode.ts has not been loaded"),hc=hc||new kn({".priority":pr},{".priority":Ue}),hc}get(e){const n=Nr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof At?n:null}hasIndex(e){return Cn(this.indexSet_,e.toString())}addIndex(e,n){B(e!==ui,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const a=n.getIterator(he.Wrap);let c=a.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=a.getNext();let f;o?f=sl(r,e.getCompare()):f=pr;const h=e.toString(),_=Object.assign({},this.indexSet_);_[h]=e;const v=Object.assign({},this.indexes_);return v[h]=f,new kn(v,_)}addToIndexes(e,n){const r=el(this.indexes_,(o,a)=>{const c=Nr(this.indexSet_,a);if(B(c,"Missing index implementation for "+a),o===pr)if(c.isDefinedOn(e.node)){const f=[],h=n.getIterator(he.Wrap);let _=h.getNext();for(;_;)_.name!==e.name&&f.push(_),_=h.getNext();return f.push(e),sl(f,c.getCompare())}else return pr;else{const f=n.get(e.name);let h=o;return f&&(h=h.remove(new he(e.name,f))),h.insert(e,e.node)}});return new kn(r,this.indexSet_)}removeFromIndexes(e,n){const r=el(this.indexes_,o=>{if(o===pr)return o;{const a=n.get(e.name);return a?o.remove(new he(e.name,a)):o}});return new kn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let us;class ee{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&kg(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return us||(us=new ee(new At(xu),null,kn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||us}updatePriority(e){return this.children_.isEmpty()?this:new ee(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?us:n}}getChild(e){const n=ue(e);return n===null?this:this.getImmediateChild(n).getChild(Oe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(B(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new he(e,n);let o,a;n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));const c=o.isEmpty()?us:this.priorityNode_;return new ee(o,c,a)}}updateChild(e,n){const r=ue(e);if(r===null)return n;{B(ue(e)!==".priority"||_i(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Oe(e),n);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,o=0,a=!0;if(this.forEachChild(Ue,(c,f)=>{n[c]=f.val(e),r++,a&&ee.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):a=!1}),!e&&a&&o<2*r){const c=[];for(const f in n)c[f]=n[f];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Fg(this.getPriority().val())+":"),this.forEachChild(Ue,(n,r)=>{const o=r.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":ug(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const o=this.resolveIndex_(r);if(o){const a=o.getPredecessorKey(new he(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new he(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new he(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,he.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,he.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)>0;)o.getNext(),a=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Us?-1:0}withIndex(e){if(e===ui||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ee(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ui||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ue),o=n.getIterator(Ue);let a=r.getNext(),c=o.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=r.getNext(),c=o.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===ui?null:this.indexMap_.get(e.toString())}}ee.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class AA extends ee{constructor(){super(new At(xu),ee.EMPTY_NODE,kn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}}const Us=new AA;Object.defineProperties(he,{MIN:{value:new he($i,ee.EMPTY_NODE)},MAX:{value:new he($n,Us)}});Lg.__EMPTY_NODE=ee.EMPTY_NODE;Je.__childrenNodeConstructor=ee;CA(Us);IA(Us);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=!0;function ot(t,e=null){if(t===null)return ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),B(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Je(n,ot(e))}if(!(t instanceof Array)&&RA){const n=[];let r=!1;if(Pt(t,(c,f)=>{if(c.substring(0,1)!=="."){const h=ot(f);h.isEmpty()||(r=r||!h.getPriority().isEmpty(),n.push(new he(c,h)))}}),n.length===0)return ee.EMPTY_NODE;const a=sl(n,EA,c=>c.name,xu);if(r){const c=sl(n,Ue.getCompare());return new ee(a,ot(e),new kn({".priority":c},{".priority":Ue}))}else return new ee(a,ot(e),kn.Default)}else{let n=ee.EMPTY_NODE;return Pt(t,(r,o)=>{if(Cn(t,r)&&r.substring(0,1)!=="."){const a=ot(o);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(r,a))}}),n.updatePriority(ot(e))}}bA(ot);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends Nl{constructor(e){super(),this.indexPath_=e,B(!fe(e)&&ue(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),o=this.extractChild(n.node),a=r.compareTo(o);return a===0?Ur(e.name,n.name):a}makePost(e,n){const r=ot(e),o=ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new he(n,o)}maxPost(){const e=ee.EMPTY_NODE.updateChild(this.indexPath_,Us);return new he($n,e)}toString(){return Og(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA extends Nl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ur(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return he.MIN}maxPost(){return he.MAX}makePost(e,n){const r=ot(e);return new he(n,r)}toString(){return".value"}}const Ug=new NA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){return{type:"value",snapshotNode:t}}function Pr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ns(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ps(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function PA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e){this.index_=e}updateChild(e,n,r,o,a,c){B(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(n);return f.getChild(o).equals(r.getChild(o))&&f.isEmpty()===r.isEmpty()||(c!=null&&(r.isEmpty()?e.hasChild(n)?c.trackChildChange(Ns(n,f)):B(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Pr(n,r)):c.trackChildChange(Ps(n,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ue,(o,a)=>{n.hasChild(o)||r.trackChildChange(Ns(o,a))}),n.isLeafNode()||n.forEachChild(Ue,(o,a)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(a)||r.trackChildChange(Ps(o,a,c))}else r.trackChildChange(Pr(o,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.indexedFilter_=new Su(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Os.getStartPost_(e),this.endPost_=Os.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,o,a,c){return this.matches(new he(n,r))||(r=ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,o,a,c)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ee.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(ee.EMPTY_NODE);const a=this;return n.forEachChild(Ue,(c,f)=>{a.matches(new he(c,f))||(o=o.updateImmediateChild(c,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Os(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,o,a,c){return this.rangedFilter_.matches(new he(n,r))||(r=ee.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,o,a,c):this.fullLimitUpdateChild_(e,n,r,a,c)}updateFullNode(e,n,r){let o;if(n.isLeafNode()||n.isEmpty())o=ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=ee.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))o=o.updateImmediateChild(f.name,f.node),c++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(ee.EMPTY_NODE);let a;this.reverse_?a=o.getReverseIterator(this.index_):a=o.getIterator(this.index_);let c=0;for(;a.hasNext();){const f=a.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:o=o.updateImmediateChild(f.name,ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,o,a){let c;if(this.reverse_){const y=this.index_.getCompare();c=(C,R)=>y(R,C)}else c=this.index_.getCompare();const f=e;B(f.numChildren()===this.limit_,"");const h=new he(n,r),_=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),v=this.rangedFilter_.matches(h);if(f.hasChild(n)){const y=f.getImmediateChild(n);let C=o.getChildAfterChild(this.index_,_,this.reverse_);for(;C!=null&&(C.name===n||f.hasChild(C.name));)C=o.getChildAfterChild(this.index_,C,this.reverse_);const R=C==null?1:c(C,h);if(v&&!r.isEmpty()&&R>=0)return a!=null&&a.trackChildChange(Ps(n,r,y)),f.updateImmediateChild(n,r);{a!=null&&a.trackChildChange(Ns(n,y));const z=f.updateImmediateChild(n,ee.EMPTY_NODE);return C!=null&&this.rangedFilter_.matches(C)?(a!=null&&a.trackChildChange(Pr(C.name,C.node)),z.updateImmediateChild(C.name,C.node)):z}}else return r.isEmpty()?e:v&&c(_,h)>=0?(a!=null&&(a.trackChildChange(Ns(_.name,_.node)),a.trackChildChange(Pr(n,r))),f.updateImmediateChild(n,r).updateImmediateChild(_.name,ee.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ue}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$i}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$n}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ue}copy(){const e=new Au;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function DA(t){return t.loadsAllData()?new Su(t.getIndex()):t.hasLimit()?new OA(t):new Os(t)}function MA(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function O_(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function LA(t,e,n){let r;return t.index_===ui||n?r=O_(t,e,n):r=O_(t,e,$n),r.startAfterSet_=!0,r}function FA(t,e){const n=t.copy();return n.index_=e,n}function D_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ue?n="$priority":t.index_===Ug?n="$value":t.index_===ui?n="$key":(B(t.index_ instanceof Tu,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=et(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=et(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+et(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=et(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+et(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function M_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ue&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends Rg{constructor(e,n,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=Ws("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(B(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,o){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=ol.getListenId_(e,r),f={};this.listens_[c]=f;const h=D_(e._queryParams);this.restRequest_(a+".json",h,(_,v)=>{let y=v;if(_===404&&(y=null,_=null),_===null&&this.onDataUpdate_(a,y,!1,r),Nr(this.listens_,c)===f){let C;_?_===401?C="permission_denied":C="rest_error:"+_:C="ok",o(C,null)}})}unlisten(e,n){const r=ol.getListenId_(e,n);delete this.listens_[r]}get(e){const n=D_(e._queryParams),r=e._path.toString(),o=new Sl;return this.restRequest_(r+".json",n,(a,c)=>{let f=c;a===404&&(f=null,a=null),a===null?(this.onDataUpdate_(r,f,!1,null),o.resolve(f)):o.reject(new Error(f))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,a])=>{o&&o.accessToken&&(n.auth=o.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+fS(n);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&f.readyState===4){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let h=null;if(f.status>=200&&f.status<300){try{h=Ts(f.responseText)}catch{Rt("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,h)}else f.status!==401&&f.status!==404&&Rt("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(){return{value:null,children:new Map}}function $g(t,e,n){if(fe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ue(e);t.children.has(r)||t.children.set(r,ll());const o=t.children.get(r);e=Oe(e),$g(o,e,n)}}function Wc(t,e,n){t.value!==null?n(e,t.value):BA(t,(r,o)=>{const a=new Ae(e.toString()+"/"+r);Wc(o,a,n)})}function BA(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Pt(this.last_,(r,o)=>{n[r]=n[r]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=10*1e3,UA=30*1e3,HA=5*60*1e3;class $A{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new WA(e);const r=L_+(UA-L_)*Math.random();gs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Pt(e,(o,a)=>{a>0&&Cn(this.statsToReport_,o)&&(n[o]=a,r=!0)}),r&&this.server_.reportStats(n),gs(this.reportStats_.bind(this),Math.floor(Math.random()*2*HA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(an||(an={}));function zg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ru(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Nu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=an.ACK_USER_WRITE,this.source=zg()}operationForChild(e){if(fe(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ae(e));return new al(be(),n,this.revert)}}else return B(ue(this.path)===e,"operationForChild called for unrelated child."),new al(Oe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n){this.source=e,this.path=n,this.type=an.LISTEN_COMPLETE}operationForChild(e){return fe(this.path)?new Ds(this.source,be()):new Ds(this.source,Oe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=an.OVERWRITE}operationForChild(e){return fe(this.path)?new zi(this.source,be(),this.snap.getImmediateChild(e)):new zi(this.source,Oe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=an.MERGE}operationForChild(e){if(fe(this.path)){const n=this.children.subtree(new Ae(e));return n.isEmpty()?null:n.value?new zi(this.source,be(),n.value):new Ms(this.source,be(),n)}else return B(ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ms(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(fe(e))return this.isFullyInitialized()&&!this.filtered_;const n=ue(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function KA(t,e,n,r){const o=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(PA(c.childName,c.snapshotNode))}),fs(t,o,"child_removed",e,r,n),fs(t,o,"child_added",e,r,n),fs(t,o,"child_moved",a,r,n),fs(t,o,"child_changed",e,r,n),fs(t,o,"value",e,r,n),o}function fs(t,e,n,r,o,a){const c=r.filter(f=>f.type===n);c.sort((f,h)=>GA(t,f,h)),c.forEach(f=>{const h=qA(t,f,a);o.forEach(_=>{_.respondsTo(f.type)&&e.push(_.createEvent(h,t.query_))})})}function qA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function GA(t,e,n){if(e.childName==null||n.childName==null)throw Br("Should only compare child_ events.");const r=new he(e.childName,e.snapshotNode),o=new he(n.childName,n.snapshotNode);return t.index_.compare(r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t,e){return{eventCache:t,serverCache:e}}function ms(t,e,n,r){return Pl(new Ki(e,n,r),t.serverCache)}function Kg(t,e,n,r){return Pl(t.eventCache,new Ki(e,n,r))}function Uc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function qi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc;const VA=()=>(dc||(dc=new At(P1)),dc);class Me{constructor(e,n=VA()){this.value=e,this.children=n}static fromObject(e){let n=new Me(null);return Pt(e,(r,o)=>{n=n.set(new Ae(r),o)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:be(),value:this.value};if(fe(e))return null;{const r=ue(e),o=this.children.get(r);if(o!==null){const a=o.findRootMostMatchingPathAndValue(Oe(e),n);return a!=null?{path:Ye(new Ae(r),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(fe(e))return this;{const n=ue(e),r=this.children.get(n);return r!==null?r.subtree(Oe(e)):new Me(null)}}set(e,n){if(fe(e))return new Me(n,this.children);{const r=ue(e),a=(this.children.get(r)||new Me(null)).set(Oe(e),n),c=this.children.insert(r,a);return new Me(this.value,c)}}remove(e){if(fe(e))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const n=ue(e),r=this.children.get(n);if(r){const o=r.remove(Oe(e));let a;return o.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,o),this.value===null&&a.isEmpty()?new Me(null):new Me(this.value,a)}else return this}}get(e){if(fe(e))return this.value;{const n=ue(e),r=this.children.get(n);return r?r.get(Oe(e)):null}}setTree(e,n){if(fe(e))return n;{const r=ue(e),a=(this.children.get(r)||new Me(null)).setTree(Oe(e),n);let c;return a.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,a),new Me(this.value,c)}}fold(e){return this.fold_(be(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((o,a)=>{r[o]=a.fold_(Ye(e,o),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,be(),n)}findOnPath_(e,n,r){const o=this.value?r(n,this.value):!1;if(o)return o;if(fe(e))return null;{const a=ue(e),c=this.children.get(a);return c?c.findOnPath_(Oe(e),Ye(n,a),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,be(),n)}foreachOnPath_(e,n,r){if(fe(e))return this;{this.value&&r(n,this.value);const o=ue(e),a=this.children.get(o);return a?a.foreachOnPath_(Oe(e),Ye(n,o),r):new Me(null)}}foreach(e){this.foreach_(be(),e)}foreach_(e,n){this.children.inorderTraversal((r,o)=>{o.foreach_(Ye(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.writeTree_=e}static empty(){return new fn(new Me(null))}}function vs(t,e,n){if(fe(e))return new fn(new Me(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const o=r.path;let a=r.value;const c=St(o,e);return a=a.updateChild(c,n),new fn(t.writeTree_.set(o,a))}else{const o=new Me(n),a=t.writeTree_.setTree(e,o);return new fn(a)}}}function F_(t,e,n){let r=t;return Pt(n,(o,a)=>{r=vs(r,Ye(e,o),a)}),r}function k_(t,e){if(fe(e))return fn.empty();{const n=t.writeTree_.setTree(e,new Me(null));return new fn(n)}}function Hc(t,e){return Gi(t,e)!=null}function Gi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(St(n.path,e)):null}function B_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ue,(r,o)=>{e.push(new he(r,o))}):t.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&e.push(new he(r,o.value))}),e}function fi(t,e){if(fe(e))return t;{const n=Gi(t,e);return n!=null?new fn(new Me(n)):new fn(t.writeTree_.subtree(e))}}function $c(t){return t.writeTree_.isEmpty()}function Or(t,e){return qg(be(),t.writeTree_,e)}function qg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((o,a)=>{o===".priority"?(B(a.value!==null,"Priority writes must always be leaf nodes"),r=a.value):n=qg(Ye(t,o),a,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ye(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t,e){return Qg(e,t)}function YA(t,e,n,r,o){B(r>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=vs(t.visibleWrites,e,n)),t.lastWriteId=r}function QA(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function XA(t,e){const n=t.allWrites.findIndex(f=>f.writeId===e);B(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let o=r.visible,a=!1,c=t.allWrites.length-1;for(;o&&c>=0;){const f=t.allWrites[c];f.visible&&(c>=n&&jA(f,r.path)?o=!1:ln(r.path,f.path)&&(a=!0)),c--}if(o){if(a)return JA(t),!0;if(r.snap)t.visibleWrites=k_(t.visibleWrites,r.path);else{const f=r.children;Pt(f,h=>{t.visibleWrites=k_(t.visibleWrites,Ye(r.path,h))})}return!0}else return!1}function jA(t,e){if(t.snap)return ln(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ln(Ye(t.path,n),e))return!0;return!1}function JA(t){t.visibleWrites=Gg(t.allWrites,ZA,be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ZA(t){return t.visible}function Gg(t,e,n){let r=fn.empty();for(let o=0;o<t.length;++o){const a=t[o];if(e(a)){const c=a.path;let f;if(a.snap)ln(n,c)?(f=St(n,c),r=vs(r,f,a.snap)):ln(c,n)&&(f=St(c,n),r=vs(r,be(),a.snap.getChild(f)));else if(a.children){if(ln(n,c))f=St(n,c),r=F_(r,f,a.children);else if(ln(c,n))if(f=St(c,n),fe(f))r=F_(r,be(),a.children);else{const h=Nr(a.children,ue(f));if(h){const _=h.getChild(Oe(f));r=vs(r,be(),_)}}}else throw Br("WriteRecord should have .snap or .children")}}return r}function Vg(t,e,n,r,o){if(!r&&!o){const a=Gi(t.visibleWrites,e);if(a!=null)return a;{const c=fi(t.visibleWrites,e);if($c(c))return n;if(n==null&&!Hc(c,be()))return null;{const f=n||ee.EMPTY_NODE;return Or(c,f)}}}else{const a=fi(t.visibleWrites,e);if(!o&&$c(a))return n;if(!o&&n==null&&!Hc(a,be()))return null;{const c=function(_){return(_.visible||o)&&(!r||!~r.indexOf(_.writeId))&&(ln(_.path,e)||ln(e,_.path))},f=Gg(t.allWrites,c,e),h=n||ee.EMPTY_NODE;return Or(f,h)}}}function eR(t,e,n){let r=ee.EMPTY_NODE;const o=Gi(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Ue,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(n){const a=fi(t.visibleWrites,e);return n.forEachChild(Ue,(c,f)=>{const h=Or(fi(a,new Ae(c)),f);r=r.updateImmediateChild(c,h)}),B_(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{const a=fi(t.visibleWrites,e);return B_(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function tR(t,e,n,r,o){B(r||o,"Either existingEventSnap or existingServerSnap must exist");const a=Ye(e,n);if(Hc(t.visibleWrites,a))return null;{const c=fi(t.visibleWrites,a);return $c(c)?o.getChild(n):Or(c,o.getChild(n))}}function nR(t,e,n,r){const o=Ye(e,n),a=Gi(t.visibleWrites,o);if(a!=null)return a;if(r.isCompleteForChild(n)){const c=fi(t.visibleWrites,o);return Or(c,r.getNode().getImmediateChild(n))}else return null}function iR(t,e){return Gi(t.visibleWrites,e)}function rR(t,e,n,r,o,a,c){let f;const h=fi(t.visibleWrites,e),_=Gi(h,be());if(_!=null)f=_;else if(n!=null)f=Or(h,n);else return[];if(f=f.withIndex(c),!f.isEmpty()&&!f.isLeafNode()){const v=[],y=c.getCompare(),C=a?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let R=C.getNext();for(;R&&v.length<o;)y(R,r)!==0&&v.push(R),R=C.getNext();return v}else return[]}function sR(){return{visibleWrites:fn.empty(),allWrites:[],lastWriteId:-1}}function cl(t,e,n,r){return Vg(t.writeTree,t.treePath,e,n,r)}function Ou(t,e){return eR(t.writeTree,t.treePath,e)}function W_(t,e,n,r){return tR(t.writeTree,t.treePath,e,n,r)}function ul(t,e){return iR(t.writeTree,Ye(t.treePath,e))}function oR(t,e,n,r,o,a){return rR(t.writeTree,t.treePath,e,n,r,o,a)}function Du(t,e,n){return nR(t.writeTree,t.treePath,e,n)}function Yg(t,e){return Qg(Ye(t.treePath,e),t.writeTree)}function Qg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;B(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),B(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const a=o.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(r,Ps(r,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(r,Ns(r,o.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(r,Pr(r,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(r,Ps(r,e.snapshotNode,o.oldSnap));else throw Br("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Xg=new aR;class Mu{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Ki(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Du(this.writes_,e,r)}}getChildAfterChild(e,n,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qi(this.viewCache_),a=oR(this.writes_,o,n,1,r,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t){return{filter:t}}function uR(t,e){B(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),B(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function fR(t,e,n,r,o){const a=new lR;let c,f;if(n.type===an.OVERWRITE){const _=n;_.source.fromUser?c=zc(t,e,_.path,_.snap,r,o,a):(B(_.source.fromServer,"Unknown source."),f=_.source.tagged||e.serverCache.isFiltered()&&!fe(_.path),c=fl(t,e,_.path,_.snap,r,o,f,a))}else if(n.type===an.MERGE){const _=n;_.source.fromUser?c=dR(t,e,_.path,_.children,r,o,a):(B(_.source.fromServer,"Unknown source."),f=_.source.tagged||e.serverCache.isFiltered(),c=Kc(t,e,_.path,_.children,r,o,f,a))}else if(n.type===an.ACK_USER_WRITE){const _=n;_.revert?c=gR(t,e,_.path,r,o,a):c=_R(t,e,_.path,_.affectedTree,r,o,a)}else if(n.type===an.LISTEN_COMPLETE)c=pR(t,e,n.path,r,a);else throw Br("Unknown operation type: "+n.type);const h=a.getChanges();return hR(e,c,h),{viewCache:c,changes:h}}function hR(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Uc(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Hg(Uc(e)))}}function jg(t,e,n,r,o,a){const c=e.eventCache;if(ul(r,n)!=null)return e;{let f,h;if(fe(n))if(B(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=qi(e),v=_ instanceof ee?_:ee.EMPTY_NODE,y=Ou(r,v);f=t.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const _=cl(r,qi(e));f=t.filter.updateFullNode(e.eventCache.getNode(),_,a)}else{const _=ue(n);if(_===".priority"){B(_i(n)===1,"Can't have a priority with additional path components");const v=c.getNode();h=e.serverCache.getNode();const y=W_(r,n,v,h);y!=null?f=t.filter.updatePriority(v,y):f=c.getNode()}else{const v=Oe(n);let y;if(c.isCompleteForChild(_)){h=e.serverCache.getNode();const C=W_(r,n,c.getNode(),h);C!=null?y=c.getNode().getImmediateChild(_).updateChild(v,C):y=c.getNode().getImmediateChild(_)}else y=Du(r,_,e.serverCache);y!=null?f=t.filter.updateChild(c.getNode(),_,y,v,o,a):f=c.getNode()}}return ms(e,f,c.isFullyInitialized()||fe(n),t.filter.filtersNodes())}}function fl(t,e,n,r,o,a,c,f){const h=e.serverCache;let _;const v=c?t.filter:t.filter.getIndexedFilter();if(fe(n))_=v.updateFullNode(h.getNode(),r,null);else if(v.filtersNodes()&&!h.isFiltered()){const R=h.getNode().updateChild(n,r);_=v.updateFullNode(h.getNode(),R,null)}else{const R=ue(n);if(!h.isCompleteForPath(n)&&_i(n)>1)return e;const W=Oe(n),Q=h.getNode().getImmediateChild(R).updateChild(W,r);R===".priority"?_=v.updatePriority(h.getNode(),Q):_=v.updateChild(h.getNode(),R,Q,W,Xg,null)}const y=Kg(e,_,h.isFullyInitialized()||fe(n),v.filtersNodes()),C=new Mu(o,y,a);return jg(t,y,n,o,C,f)}function zc(t,e,n,r,o,a,c){const f=e.eventCache;let h,_;const v=new Mu(o,e,a);if(fe(n))_=t.filter.updateFullNode(e.eventCache.getNode(),r,c),h=ms(e,_,!0,t.filter.filtersNodes());else{const y=ue(n);if(y===".priority")_=t.filter.updatePriority(e.eventCache.getNode(),r),h=ms(e,_,f.isFullyInitialized(),f.isFiltered());else{const C=Oe(n),R=f.getNode().getImmediateChild(y);let W;if(fe(C))W=r;else{const z=v.getCompleteChild(y);z!=null?Pg(C)===".priority"&&z.getChild(Dg(C)).isEmpty()?W=z:W=z.updateChild(C,r):W=ee.EMPTY_NODE}if(R.equals(W))h=e;else{const z=t.filter.updateChild(f.getNode(),y,W,C,v,c);h=ms(e,z,f.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function U_(t,e){return t.eventCache.isCompleteForChild(e)}function dR(t,e,n,r,o,a,c){let f=e;return r.foreach((h,_)=>{const v=Ye(n,h);U_(e,ue(v))&&(f=zc(t,f,v,_,o,a,c))}),r.foreach((h,_)=>{const v=Ye(n,h);U_(e,ue(v))||(f=zc(t,f,v,_,o,a,c))}),f}function H_(t,e,n){return n.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function Kc(t,e,n,r,o,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,_;fe(n)?_=r:_=new Me(null).setTree(n,r);const v=e.serverCache.getNode();return _.children.inorderTraversal((y,C)=>{if(v.hasChild(y)){const R=e.serverCache.getNode().getImmediateChild(y),W=H_(t,R,C);h=fl(t,h,new Ae(y),W,o,a,c,f)}}),_.children.inorderTraversal((y,C)=>{const R=!e.serverCache.isCompleteForChild(y)&&C.value===null;if(!v.hasChild(y)&&!R){const W=e.serverCache.getNode().getImmediateChild(y),z=H_(t,W,C);h=fl(t,h,new Ae(y),z,o,a,c,f)}}),h}function _R(t,e,n,r,o,a,c){if(ul(o,n)!=null)return e;const f=e.serverCache.isFiltered(),h=e.serverCache;if(r.value!=null){if(fe(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return fl(t,e,n,h.getNode().getChild(n),o,a,f,c);if(fe(n)){let _=new Me(null);return h.getNode().forEachChild(ui,(v,y)=>{_=_.set(new Ae(v),y)}),Kc(t,e,n,_,o,a,f,c)}else return e}else{let _=new Me(null);return r.foreach((v,y)=>{const C=Ye(n,v);h.isCompleteForPath(C)&&(_=_.set(v,h.getNode().getChild(C)))}),Kc(t,e,n,_,o,a,f,c)}}function pR(t,e,n,r,o){const a=e.serverCache,c=Kg(e,a.getNode(),a.isFullyInitialized()||fe(n),a.isFiltered());return jg(t,c,n,r,Xg,o)}function gR(t,e,n,r,o,a){let c;if(ul(r,n)!=null)return e;{const f=new Mu(r,e,o),h=e.eventCache.getNode();let _;if(fe(n)||ue(n)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=cl(r,qi(e));else{const y=e.serverCache.getNode();B(y instanceof ee,"serverChildren would be complete if leaf node"),v=Ou(r,y)}v=v,_=t.filter.updateFullNode(h,v,a)}else{const v=ue(n);let y=Du(r,v,e.serverCache);y==null&&e.serverCache.isCompleteForChild(v)&&(y=h.getImmediateChild(v)),y!=null?_=t.filter.updateChild(h,v,y,Oe(n),f,a):e.eventCache.getNode().hasChild(v)?_=t.filter.updateChild(h,v,ee.EMPTY_NODE,Oe(n),f,a):_=h,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=cl(r,qi(e)),c.isLeafNode()&&(_=t.filter.updateFullNode(_,c,a)))}return c=e.serverCache.isFullyInitialized()||ul(r,be())!=null,ms(e,_,c,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new Su(r.getIndex()),a=DA(r);this.processor_=cR(a);const c=n.serverCache,f=n.eventCache,h=o.updateFullNode(ee.EMPTY_NODE,c.getNode(),null),_=a.updateFullNode(ee.EMPTY_NODE,f.getNode(),null),v=new Ki(h,c.isFullyInitialized(),o.filtersNodes()),y=new Ki(_,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=Pl(y,v),this.eventGenerator_=new zA(this.query_)}get query(){return this.query_}}function vR(t){return t.viewCache_.serverCache.getNode()}function yR(t,e){const n=qi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!fe(e)&&!n.getImmediateChild(ue(e)).isEmpty())?n.getChild(e):null}function $_(t){return t.eventRegistrations_.length===0}function wR(t,e){t.eventRegistrations_.push(e)}function z_(t,e,n){const r=[];if(n){B(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,o);c&&r.push(c)})}if(e){let o=[];for(let a=0;a<t.eventRegistrations_.length;++a){const c=t.eventRegistrations_[a];if(!c.matches(e))o.push(c);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function K_(t,e,n,r){e.type===an.MERGE&&e.source.queryId!==null&&(B(qi(t.viewCache_),"We should always have a full cache before handling merges"),B(Uc(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,a=fR(t.processor_,o,e,n,r);return uR(t.processor_,a.viewCache),B(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,Jg(t,a.changes,a.viewCache.eventCache.getNode(),null)}function ER(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ue,(a,c)=>{r.push(Pr(a,c))}),n.isFullyInitialized()&&r.push(Hg(n.getNode())),Jg(t,r,n.getNode(),e)}function Jg(t,e,n,r){const o=r?[r]:t.eventRegistrations_;return KA(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl;class CR{constructor(){this.views=new Map}}function bR(t){B(!hl,"__referenceConstructor has already been defined"),hl=t}function IR(){return B(hl,"Reference.ts has not been loaded"),hl}function xR(t){return t.views.size===0}function Lu(t,e,n,r){const o=e.source.queryId;if(o!==null){const a=t.views.get(o);return B(a!=null,"SyncTree gave us an op for an invalid query."),K_(a,e,n,r)}else{let a=[];for(const c of t.views.values())a=a.concat(K_(c,e,n,r));return a}}function TR(t,e,n,r,o){const a=e._queryIdentifier,c=t.views.get(a);if(!c){let f=cl(n,o?r:null),h=!1;f?h=!0:r instanceof ee?(f=Ou(n,r),h=!1):(f=ee.EMPTY_NODE,h=!1);const _=Pl(new Ki(f,h,!1),new Ki(r,o,!1));return new mR(e,_)}return c}function SR(t,e,n,r,o,a){const c=TR(t,e,r,o,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),wR(c,n),ER(c,n)}function AR(t,e,n,r){const o=e._queryIdentifier,a=[];let c=[];const f=pi(t);if(o==="default")for(const[h,_]of t.views.entries())c=c.concat(z_(_,n,r)),$_(_)&&(t.views.delete(h),_.query._queryParams.loadsAllData()||a.push(_.query));else{const h=t.views.get(o);h&&(c=c.concat(z_(h,n,r)),$_(h)&&(t.views.delete(o),h.query._queryParams.loadsAllData()||a.push(h.query)))}return f&&!pi(t)&&a.push(new(IR())(e._repo,e._path)),{removed:a,events:c}}function Zg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function xr(t,e){let n=null;for(const r of t.views.values())n=n||yR(r,e);return n}function em(t,e){if(e._queryParams.loadsAllData())return Ol(t);{const r=e._queryIdentifier;return t.views.get(r)}}function tm(t,e){return em(t,e)!=null}function pi(t){return Ol(t)!=null}function Ol(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl;function RR(t){B(!dl,"__referenceConstructor has already been defined"),dl=t}function NR(){return B(dl,"Reference.ts has not been loaded"),dl}let PR=1;class q_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Me(null),this.pendingWriteTree_=sR(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nm(t,e,n,r,o){return YA(t.pendingWriteTree_,e,n,r,o),o?Hs(t,new zi(zg(),e,n)):[]}function Li(t,e,n=!1){const r=QA(t.pendingWriteTree_,e);if(XA(t.pendingWriteTree_,e)){let a=new Me(null);return r.snap!=null?a=a.set(be(),!0):Pt(r.children,c=>{a=a.set(new Ae(c),!0)}),Hs(t,new al(r.path,a,n))}else return[]}function Dl(t,e,n){return Hs(t,new zi(Ru(),e,n))}function OR(t,e,n){const r=Me.fromObject(n);return Hs(t,new Ms(Ru(),e,r))}function DR(t,e){return Hs(t,new Ds(Ru(),e))}function MR(t,e,n){const r=ku(t,n);if(r){const o=Bu(r),a=o.path,c=o.queryId,f=St(a,e),h=new Ds(Nu(c),f);return Wu(t,a,h)}else return[]}function qc(t,e,n,r,o=!1){const a=e._path,c=t.syncPointTree_.get(a);let f=[];if(c&&(e._queryIdentifier==="default"||tm(c,e))){const h=AR(c,e,n,r);xR(c)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const _=h.removed;if(f=h.events,!o){const v=_.findIndex(C=>C._queryParams.loadsAllData())!==-1,y=t.syncPointTree_.findOnPath(a,(C,R)=>pi(R));if(v&&!y){const C=t.syncPointTree_.subtree(a);if(!C.isEmpty()){const R=kR(C);for(let W=0;W<R.length;++W){const z=R[W],Q=z.query,we=sm(t,z);t.listenProvider_.startListening(ys(Q),_l(t,Q),we.hashFn,we.onComplete)}}}!y&&_.length>0&&!r&&(v?t.listenProvider_.stopListening(ys(e),null):_.forEach(C=>{const R=t.queryToTagMap.get(Ml(C));t.listenProvider_.stopListening(ys(C),R)}))}BR(t,_)}return f}function LR(t,e,n,r){const o=ku(t,r);if(o!=null){const a=Bu(o),c=a.path,f=a.queryId,h=St(c,e),_=new zi(Nu(f),h,n);return Wu(t,c,_)}else return[]}function FR(t,e,n,r){const o=ku(t,r);if(o){const a=Bu(o),c=a.path,f=a.queryId,h=St(c,e),_=Me.fromObject(n),v=new Ms(Nu(f),h,_);return Wu(t,c,v)}else return[]}function G_(t,e,n,r=!1){const o=e._path;let a=null,c=!1;t.syncPointTree_.foreachOnPath(o,(C,R)=>{const W=St(C,o);a=a||xr(R,W),c=c||pi(R)});let f=t.syncPointTree_.get(o);f?(c=c||pi(f),a=a||xr(f,be())):(f=new CR,t.syncPointTree_=t.syncPointTree_.set(o,f));let h;a!=null?h=!0:(h=!1,a=ee.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((R,W)=>{const z=xr(W,be());z&&(a=a.updateImmediateChild(R,z))}));const _=tm(f,e);if(!_&&!e._queryParams.loadsAllData()){const C=Ml(e);B(!t.queryToTagMap.has(C),"View does not exist, but we have a tag");const R=WR();t.queryToTagMap.set(C,R),t.tagToQueryMap.set(R,C)}const v=Pu(t.pendingWriteTree_,o);let y=SR(f,e,n,v,a,h);if(!_&&!c&&!r){const C=em(f,e);y=y.concat(UR(t,e,C))}return y}function Fu(t,e,n){const o=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,f)=>{const h=St(c,e),_=xr(f,h);if(_)return _});return Vg(o,e,a,n,!0)}function Hs(t,e){return im(e,t.syncPointTree_,null,Pu(t.pendingWriteTree_,be()))}function im(t,e,n,r){if(fe(t.path))return rm(t,e,n,r);{const o=e.get(be());n==null&&o!=null&&(n=xr(o,be()));let a=[];const c=ue(t.path),f=t.operationForChild(c),h=e.children.get(c);if(h&&f){const _=n?n.getImmediateChild(c):null,v=Yg(r,c);a=a.concat(im(f,h,_,v))}return o&&(a=a.concat(Lu(o,t,r,n))),a}}function rm(t,e,n,r){const o=e.get(be());n==null&&o!=null&&(n=xr(o,be()));let a=[];return e.children.inorderTraversal((c,f)=>{const h=n?n.getImmediateChild(c):null,_=Yg(r,c),v=t.operationForChild(c);v&&(a=a.concat(rm(v,f,h,_)))}),o&&(a=a.concat(Lu(o,t,r,n))),a}function sm(t,e){const n=e.query,r=_l(t,n);return{hashFn:()=>(vR(e)||ee.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?MR(t,n._path,r):DR(t,n._path);{const a=M1(o,n);return qc(t,n,null,a)}}}}function _l(t,e){const n=Ml(e);return t.queryToTagMap.get(n)}function Ml(t){return t._path.toString()+"$"+t._queryIdentifier}function ku(t,e){return t.tagToQueryMap.get(e)}function Bu(t){const e=t.indexOf("$");return B(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ae(t.substr(0,e))}}function Wu(t,e,n){const r=t.syncPointTree_.get(e);B(r,"Missing sync point for query tag that we're tracking");const o=Pu(t.pendingWriteTree_,e);return Lu(r,n,o,null)}function kR(t){return t.fold((e,n,r)=>{if(n&&pi(n))return[Ol(n)];{let o=[];return n&&(o=Zg(n)),Pt(r,(a,c)=>{o=o.concat(c)}),o}})}function ys(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(NR())(t._repo,t._path):t}function BR(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const o=Ml(r),a=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(a)}}}function WR(){return PR++}function UR(t,e,n){const r=e._path,o=_l(t,e),a=sm(t,n),c=t.listenProvider_.startListening(ys(e),o,a.hashFn,a.onComplete),f=t.syncPointTree_.subtree(r);if(o)B(!pi(f.value),"If we're adding a query, it shouldn't be shadowed");else{const h=f.fold((_,v,y)=>{if(!fe(_)&&v&&pi(v))return[Ol(v).query];{let C=[];return v&&(C=C.concat(Zg(v).map(R=>R.query))),Pt(y,(R,W)=>{C=C.concat(W)}),C}});for(let _=0;_<h.length;++_){const v=h[_];t.listenProvider_.stopListening(ys(v),_l(t,v))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Uu(n)}node(){return this.node_}}class Hu{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ye(this.path_,e);return new Hu(this.syncTree_,n)}node(){return Fu(this.syncTree_,this.path_)}}const HR=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},V_=function(t,e,n){if(!t||typeof t!="object")return t;if(B(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return $R(t[".sv"],e,n);if(typeof t[".sv"]=="object")return zR(t[".sv"],e);B(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},$R=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:B(!1,"Unexpected server value: "+t)}},zR=function(t,e,n){t.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&B(!1,"Unexpected increment value: "+r);const o=e.node();if(B(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return typeof c!="number"?r:c+r},KR=function(t,e,n,r){return $u(e,new Hu(n,t),r)},om=function(t,e,n){return $u(t,new Uu(e),n)};function $u(t,e,n){const r=t.getPriority().val(),o=V_(r,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,f=V_(c.getValue(),e,n);return f!==c.getValue()||o!==c.getPriority().val()?new Je(f,ot(o)):t}else{const c=t;return a=c,o!==c.getPriority().val()&&(a=a.updatePriority(new Je(o))),c.forEachChild(Ue,(f,h)=>{const _=$u(h,e.getImmediateChild(f),n);_!==h&&(a=a.updateImmediateChild(f,_))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Ku(t,e){let n=e instanceof Ae?e:new Ae(e),r=t,o=ue(n);for(;o!==null;){const a=Nr(r.node.children,o)||{children:{},childCount:0};r=new zu(o,r,a),n=Oe(n),o=ue(n)}return r}function $r(t){return t.node.value}function lm(t,e){t.node.value=e,Gc(t)}function am(t){return t.node.childCount>0}function qR(t){return $r(t)===void 0&&!am(t)}function Ll(t,e){Pt(t.node.children,(n,r)=>{e(new zu(n,t,r))})}function cm(t,e,n,r){n&&!r&&e(t),Ll(t,o=>{cm(o,e,!0,r)}),n&&r&&e(t)}function GR(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function $s(t){return new Ae(t.parent===null?t.name:$s(t.parent)+"/"+t.name)}function Gc(t){t.parent!==null&&VR(t.parent,t.name,t)}function VR(t,e,n){const r=qR(n),o=Cn(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,Gc(t)):!r&&!o&&(t.node.children[e]=n.node,t.node.childCount++,Gc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=/[\[\].#$\/\u0000-\u001F\u007F]/,QR=/[\[\].#$\u0000-\u001F\u007F]/,_c=10*1024*1024,qu=function(t){return typeof t=="string"&&t.length!==0&&!YR.test(t)},um=function(t){return typeof t=="string"&&t.length!==0&&!QR.test(t)},XR=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),um(t)},Y_=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!vu(t)||t&&typeof t=="object"&&Cn(t,".sv")},fm=function(t,e,n,r){r&&e===void 0||Gu(Al(t,"value"),e,n)},Gu=function(t,e,n){const r=n instanceof Ae?new dA(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Pi(r));if(typeof e=="function")throw new Error(t+"contains a function "+Pi(r)+" with contents = "+e.toString());if(vu(e))throw new Error(t+"contains "+e.toString()+" "+Pi(r));if(typeof e=="string"&&e.length>_c/3&&Rl(e)>_c)throw new Error(t+"contains a string greater than "+_c+" utf8 bytes "+Pi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,a=!1;if(Pt(e,(c,f)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!qu(c)))throw new Error(t+" contains an invalid key ("+c+") "+Pi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_A(r,c),Gu(t,f,r),pA(r)}),o&&a)throw new Error(t+' contains ".value" child '+Pi(r)+" in addition to actual children.")}},jR=function(t,e,n,r){if(!(r&&n===void 0)&&!qu(n))throw new Error(Al(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Vu=function(t,e,n,r){if(!(r&&n===void 0)&&!um(n))throw new Error(Al(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},JR=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vu(t,e,n,r)},ZR=function(t,e){if(ue(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},eN=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qu(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!XR(n))throw new Error(Al(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Yu(t,e){let n=null;for(let r=0;r<e.length;r++){const o=e[r],a=o.getPath();n!==null&&!bu(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(o)}n&&t.eventLists_.push(n)}function hm(t,e,n){Yu(t,n),dm(t,r=>bu(r,e))}function zn(t,e,n){Yu(t,n),dm(t,r=>ln(r,e)||ln(e,r))}function dm(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const o=t.eventLists_[r];if(o){const a=o.path;e(a)?(nN(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function nN(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Bi&&ct("event: "+n.toString()),Hr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="repo_interrupt",rN=25;class sN{constructor(e,n,r,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ll(),this.transactionQueueTree_=new zu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oN(t,e,n){if(t.stats_=Eu(t.repoInfo_),t.forceRestClient_||B1())t.server_=new ol(t.repoInfo_,(r,o,a,c)=>{Q_(t,r,o,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>X_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{et(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Wn(t.repoInfo_,e,(r,o,a,c)=>{Q_(t,r,o,a,c)},r=>{X_(t,r)},r=>{aN(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=z1(t.repoInfo_,()=>new $A(t.stats_,t.server_)),t.infoData_=new kA,t.infoSyncTree_=new q_({startListening:(r,o,a,c)=>{let f=[];const h=t.infoData_.getNode(r._path);return h.isEmpty()||(f=Dl(t.infoSyncTree_,r._path,h),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),Xu(t,"connected",!1),t.serverSyncTree_=new q_({startListening:(r,o,a,c)=>(t.server_.listen(r,a,o,(f,h)=>{const _=c(f,h);zn(t.eventQueue_,r._path,_)}),[]),stopListening:(r,o)=>{t.server_.unlisten(r,o)}})}function lN(t){const n=t.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Qu(t){return HR({timestamp:lN(t)})}function Q_(t,e,n,r,o){t.dataUpdateCount++;const a=new Ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(o)if(r){const h=el(n,_=>ot(_));c=FR(t.serverSyncTree_,a,h,o)}else{const h=ot(n);c=LR(t.serverSyncTree_,a,h,o)}else if(r){const h=el(n,_=>ot(_));c=OR(t.serverSyncTree_,a,h)}else{const h=ot(n);c=Dl(t.serverSyncTree_,a,h)}let f=a;c.length>0&&(f=Fl(t,a)),zn(t.eventQueue_,f,c)}function X_(t,e){Xu(t,"connected",e),e===!1&&uN(t)}function aN(t,e){Pt(e,(n,r)=>{Xu(t,n,r)})}function Xu(t,e,n){const r=new Ae("/.info/"+e),o=ot(n);t.infoData_.updateSnapshot(r,o);const a=Dl(t.infoSyncTree_,r,o);zn(t.eventQueue_,r,a)}function _m(t){return t.nextWriteId_++}function cN(t,e,n,r,o){ju(t,"set",{path:e.toString(),value:n,priority:r});const a=Qu(t),c=ot(n,r),f=Fu(t.serverSyncTree_,e),h=om(c,f,a),_=_m(t),v=nm(t.serverSyncTree_,e,h,_,!0);Yu(t.eventQueue_,v),t.server_.put(e.toString(),c.val(!0),(C,R)=>{const W=C==="ok";W||Rt("set at "+e+" failed: "+C);const z=Li(t.serverSyncTree_,_,!W);zn(t.eventQueue_,e,z),dN(t,o,C,R)});const y=ym(t,e);Fl(t,y),zn(t.eventQueue_,y,[])}function uN(t){ju(t,"onDisconnectEvents");const e=Qu(t),n=ll();Wc(t.onDisconnect_,be(),(o,a)=>{const c=KR(o,a,t.serverSyncTree_,e);$g(n,o,c)});let r=[];Wc(n,be(),(o,a)=>{r=r.concat(Dl(t.serverSyncTree_,o,a));const c=ym(t,o);Fl(t,c)}),t.onDisconnect_=ll(),zn(t.eventQueue_,be(),r)}function fN(t,e,n){let r;ue(e._path)===".info"?r=G_(t.infoSyncTree_,e,n):r=G_(t.serverSyncTree_,e,n),hm(t.eventQueue_,e._path,r)}function j_(t,e,n){let r;ue(e._path)===".info"?r=qc(t.infoSyncTree_,e,n):r=qc(t.serverSyncTree_,e,n),hm(t.eventQueue_,e._path,r)}function hN(t){t.persistentConnection_&&t.persistentConnection_.interrupt(iN)}function ju(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ct(n,...e)}function dN(t,e,n,r){e&&Hr(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let a=o;r&&(a+=": "+r);const c=new Error(a);c.code=o,e(c)}})}function pm(t,e,n){return Fu(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function Ju(t,e=t.transactionQueueTree_){if(e||kl(t,e),$r(e)){const n=mm(t,e);B(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&_N(t,$s(e),n)}else am(e)&&Ll(e,n=>{Ju(t,n)})}function _N(t,e,n){const r=n.map(_=>_.currentWriteId),o=pm(t,e,r);let a=o;const c=o.hash();for(let _=0;_<n.length;_++){const v=n[_];B(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const y=St(e,v.path);a=a.updateChild(y,v.currentOutputSnapshotRaw)}const f=a.val(!0),h=e;t.server_.put(h.toString(),f,_=>{ju(t,"transaction put response",{path:h.toString(),status:_});let v=[];if(_==="ok"){const y=[];for(let C=0;C<n.length;C++)n[C].status=2,v=v.concat(Li(t.serverSyncTree_,n[C].currentWriteId)),n[C].onComplete&&y.push(()=>n[C].onComplete(null,!0,n[C].currentOutputSnapshotResolved)),n[C].unwatcher();kl(t,Ku(t.transactionQueueTree_,e)),Ju(t,t.transactionQueueTree_),zn(t.eventQueue_,e,v);for(let C=0;C<y.length;C++)Hr(y[C])}else{if(_==="datastale")for(let y=0;y<n.length;y++)n[y].status===3?n[y].status=4:n[y].status=0;else{Rt("transaction at "+h.toString()+" failed: "+_);for(let y=0;y<n.length;y++)n[y].status=4,n[y].abortReason=_}Fl(t,e)}},c)}function Fl(t,e){const n=gm(t,e),r=$s(n),o=mm(t,n);return pN(t,o,r),r}function pN(t,e,n){if(e.length===0)return;const r=[];let o=[];const c=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const h=e[f],_=St(n,h.path);let v=!1,y;if(B(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)v=!0,y=h.abortReason,o=o.concat(Li(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=rN)v=!0,y="maxretry",o=o.concat(Li(t.serverSyncTree_,h.currentWriteId,!0));else{const C=pm(t,h.path,c);h.currentInputSnapshot=C;const R=e[f].update(C.val());if(R!==void 0){Gu("transaction failed: Data returned ",R,h.path);let W=ot(R);typeof R=="object"&&R!=null&&Cn(R,".priority")||(W=W.updatePriority(C.getPriority()));const Q=h.currentWriteId,we=Qu(t),Le=om(W,C,we);h.currentOutputSnapshotRaw=W,h.currentOutputSnapshotResolved=Le,h.currentWriteId=_m(t),c.splice(c.indexOf(Q),1),o=o.concat(nm(t.serverSyncTree_,h.path,Le,h.currentWriteId,h.applyLocally)),o=o.concat(Li(t.serverSyncTree_,Q,!0))}else v=!0,y="nodata",o=o.concat(Li(t.serverSyncTree_,h.currentWriteId,!0))}zn(t.eventQueue_,n,o),o=[],v&&(e[f].status=2,function(C){setTimeout(C,Math.floor(0))}(e[f].unwatcher),e[f].onComplete&&(y==="nodata"?r.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):r.push(()=>e[f].onComplete(new Error(y),!1,null))))}kl(t,t.transactionQueueTree_);for(let f=0;f<r.length;f++)Hr(r[f]);Ju(t,t.transactionQueueTree_)}function gm(t,e){let n,r=t.transactionQueueTree_;for(n=ue(e);n!==null&&$r(r)===void 0;)r=Ku(r,n),e=Oe(e),n=ue(e);return r}function mm(t,e){const n=[];return vm(t,e,n),n.sort((r,o)=>r.order-o.order),n}function vm(t,e,n){const r=$r(e);if(r)for(let o=0;o<r.length;o++)n.push(r[o]);Ll(e,o=>{vm(t,o,n)})}function kl(t,e){const n=$r(e);if(n){let r=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[r]=n[o],r++);n.length=r,lm(e,n.length>0?n:void 0)}Ll(e,r=>{kl(t,r)})}function ym(t,e){const n=$s(gm(t,e)),r=Ku(t.transactionQueueTree_,e);return GR(r,o=>{pc(t,o)}),pc(t,r),cm(r,o=>{pc(t,o)}),n}function pc(t,e){const n=$r(e);if(n){const r=[];let o=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(B(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(B(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),o=o.concat(Li(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&r.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?lm(e,void 0):n.length=a+1,zn(t.eventQueue_,$s(e),o);for(let c=0;c<r.length;c++)Hr(r[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let o=n[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function mN(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rt(`Invalid query segment '${n}' in query '${t}'`)}return e}const J_=function(t,e){const n=vN(t),r=n.namespace;n.domain==="firebase.com"&&Hn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Hn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||R1();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Cg(n.host,n.secure,r,o,e,"",r!==n.subdomain),path:new Ae(n.pathString)}},vN=function(t){let e="",n="",r="",o="",a="",c=!0,f="https",h=443;if(typeof t=="string"){let _=t.indexOf("//");_>=0&&(f=t.substring(0,_-1),t=t.substring(_+2));let v=t.indexOf("/");v===-1&&(v=t.length);let y=t.indexOf("?");y===-1&&(y=t.length),e=t.substring(0,Math.min(v,y)),v<y&&(o=gN(t.substring(v,y)));const C=mN(t.substring(Math.min(t.length,y)));_=e.indexOf(":"),_>=0?(c=f==="https"||f==="wss",h=parseInt(e.substring(_+1),10)):_=e.length;const R=e.slice(0,_);if(R.toLowerCase()==="localhost")n="localhost";else if(R.split(".").length<=2)n=R;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),n=e.substring(W+1),a=r}"ns"in C&&(a=C.ns)}return{host:e,port:h,domain:n,subdomain:r,secure:c,scheme:f,pathString:o,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r,o){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+et(this.snapshot.exportVal())}}class Em{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return B(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r,o){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=o}get key(){return fe(this._path)?null:Pg(this._path)}get ref(){return new qn(this._repo,this._path)}get _queryIdentifier(){const e=M_(this._queryParams),n=yu(e);return n==="{}"?"default":n}get _queryObject(){return M_(this._queryParams)}isEqual(e){if(e=Wr(e),!(e instanceof zr))return!1;const n=this._repo===e._repo,r=bu(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+hA(this._path)}}function wN(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Cm(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ui){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==$i)throw new Error(r);if(typeof e!="string")throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==$n)throw new Error(r);if(typeof n!="string")throw new Error(o)}}else if(t.getIndex()===Ue){if(e!=null&&!Y_(e)||n!=null&&!Y_(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(B(t.getIndex()instanceof Tu||t.getIndex()===Ug,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function EN(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class qn extends zr{constructor(e,n){super(e,n,new Au,!1)}get parent(){const e=Dg(this._path);return e===null?null:new qn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ls{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ae(e),r=pl(this.ref,e);return new Ls(this._node.getChild(n),r,Ue)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>e(new Ls(o,pl(this.ref,r),Ue)))}hasChild(e){const n=new Ae(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function bm(t,e){return t=Wr(t),t._checkNotDeleted("ref"),e!==void 0?pl(t._root,e):t._root}function pl(t,e){return t=Wr(t),ue(t._path)===null?JR("child","path",e,!1):Vu("child","path",e,!1),new qn(t._repo,Ye(t._path,e))}function CN(t,e){t=Wr(t),ZR("set",t._path),fm("set",e,t._path,!1);const n=new Sl;return cN(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Zu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new wm("value",this,new Ls(e.snapshotNode,new qn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Em(this,e,n):null}matches(e){return e instanceof Zu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class ef{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Em(this,e,n):null}createEvent(e,n){B(e.childName!=null,"Child events should have a childName.");const r=pl(new qn(n._repo,n._path),e.childName),o=n._queryParams.getIndex();return new wm(e.type,this,new Ls(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ef?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function bN(t,e,n,r,o){let a;if(typeof r=="object"&&(a=void 0,o=r),typeof r=="function"&&(a=r),o&&o.onlyOnce){const h=n,_=(v,y)=>{j_(t._repo,t,f),h(v,y)};_.userCallback=n.userCallback,_.context=n.context,n=_}const c=new yN(n,a||void 0),f=e==="value"?new Zu(c):new ef(e,c);return fN(t._repo,t,f),()=>j_(t._repo,t,f)}function IN(t,e,n,r){return bN(t,"value",e,n,r)}class tf{}class xN extends tf{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){fm("startAfter",this._value,e._path,!1);const n=LA(e._queryParams,this._value,this._key);if(EN(n),Cm(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new zr(e._repo,e._path,n,e._orderByCalled)}}function TN(t,e){return jR("startAfter","key",e,!0),new xN(t,e)}class SN extends tf{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new zr(e._repo,e._path,MA(e._queryParams,this._limit),e._orderByCalled)}}function AN(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new SN(t)}class RN extends tf{constructor(e){super(),this._path=e}_apply(e){wN(e,"orderByChild");const n=new Ae(this._path);if(fe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Tu(n),o=FA(e._queryParams,r);return Cm(o),new zr(e._repo,e._path,o,!0)}}function NN(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vu("orderByChild","path",t,!1),new RN(t)}function PN(t,...e){let n=Wr(t);for(const r of e)n=r._apply(n);return n}bR(qn);RR(qn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="FIREBASE_DATABASE_EMULATOR_HOST",Vc={};let DN=!1;function MN(t,e,n,r){t.repoInfo_=new Cg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function LN(t,e,n,r,o){let a=r||t.options.databaseURL;a===void 0&&(t.options.projectId||Hn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ct("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=J_(a,o),f=c.repoInfo,h,_;typeof process<"u"&&process.env&&(_=process.env[ON]),_?(h=!0,a=`http://${_}?ns=${f.namespace}`,c=J_(a,o),f=c.repoInfo):h=!c.repoInfo.secure;const v=o&&h?new Ir(Ir.OWNER):new U1(t.name,t.options,e);eN("Invalid Firebase Database URL",c),fe(c.path)||Hn("Database URL must point to the root of a Firebase Database (not including a child path).");const y=kN(f,t,v,new W1(t.name,n));return new BN(y,t)}function FN(t,e){const n=Vc[e];(!n||n[t.key]!==t)&&Hn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),hN(t),delete n[t.key]}function kN(t,e,n,r){let o=Vc[e.name];o||(o={},Vc[e.name]=o);let a=o[t.toURLString()];return a&&Hn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new sN(t,DN,n,r),o[t.toURLString()]=a,a}class BN{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(oN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qn(this._repo,be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(FN(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Hn("Cannot call "+e+" on a deleted database.")}}function WN(t=h1(),e){const n=a1(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=eS("database");r&&UN(n,...r)}return n}function UN(t,e,n,r={}){t=Wr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Hn("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let a;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Hn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Ir(Ir.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:tS(r.mockUserToken,t.app.options.projectId);a=new Ir(c)}MN(o,e,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){I1(f1),nl(new Ss("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return LN(r,o,a,n)},"PUBLIC").setMultipleInstances(!0)),Cr(g_,m_,t),Cr(g_,m_,"esm2017")}Wn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Wn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};HN();function $N(){return[1,2,3].map(()=>Math.floor(Math.random()*(2<<16)).toString(16).padStart(4,"0")).join("")}function zN(t){const e=new URL(window.location.href);e.searchParams.set("zoom",t.zoom),e.searchParams.set("center",t.center),e.searchParams.set("sharingKey",t.sharingKey),window.history.replaceState(null,"",e.toString())}function gi(){const t=new URL(window.location.href),e=t.searchParams.get("center")||"1.38,103.8",n=t.searchParams.get("zoom")||"13",r=t.searchParams.get("sharingKey")||$N(),[o,a]=e.split(",");return{center:e,zoom:n,sharingKey:r,parsedZoom:parseFloat(n),parsedCenter:{lat:parseFloat(o),lng:parseFloat(a)}}}const KN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qN(){const t=window.localStorage.getItem("userId");if(t!=null&&t.match(KN))return t;{const e=window.crypto.randomUUID();return window.localStorage.setItem("userId",e),e}}function GN(){const t=window.localStorage.sendLocation;let e={};try{const n=JSON.parse(t);if(n instanceof Array||!(n instanceof Object))throw new Error("bad type");e=n}catch{}return e[gi().sharingKey]||!1}function Z_(t){const e=window.localStorage.sendLocation;let n={};try{const r=JSON.parse(e);if(r instanceof Array||!(r instanceof Object))throw new Error("bad type");n=r}catch{}n[gi().sharingKey]=t,window.localStorage.setItem("sendLocation",JSON.stringify(n))}const VN={apiKey:"AIzaSyCVPkgR8wpTD-PtV14m6AbUHR8iWv0WqSc",authDomain:"simple-location-sharing.firebaseapp.com",projectId:"simple-location-sharing",storageBucket:"simple-location-sharing.appspot.com",messagingSenderId:"747204085237",appId:"1:747204085237:web:0f4adacb13c07818174cbc",databaseURL:"https://simple-location-sharing-default-rtdb.asia-southeast1.firebasedatabase.app"};sg(VN);const Im=WN();function YN(t,e){const n=gi().sharingKey,r=qN();CN(bm(Im,`sessions/${n}/${r}`),{coordinates:t,timestamp:e})}function QN(t,e,n){IN(PN(bm(Im,`sessions/${t}`),NN("timestamp"),TN(Date.now()-e),AN(10)),r=>{n(r.val())})}var gl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */gl.exports;(function(t,e){(function(){var n,r="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",f="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",_=500,v="__lodash_placeholder__",y=1,C=2,R=4,W=1,z=2,Q=1,we=2,Le=4,Ee=8,te=16,qe=32,Ut=64,vt=128,Ot=256,mi=512,bn=30,vi="...",Vi=800,Yi=16,Qi=1,zs=2,nt=3,xe=1/0,pe=9007199254740991,In=17976931348623157e292,xn=0/0,Xe=4294967295,Ht=Xe-1,Ks=Xe>>>1,Bl=[["ary",vt],["bind",Q],["bindKey",we],["curry",Ee],["curryRight",te],["flip",mi],["partial",qe],["partialRight",Ut],["rearg",Ot]],Gn="[object Arguments]",yt="[object Array]",Xi="[object AsyncFunction]",Vn="[object Boolean]",$t="[object Date]",Kr="[object DOMException]",Yn="[object Error]",w="[object Function]",I="[object GeneratorFunction]",S="[object Map]",O="[object Number]",M="[object Null]",F="[object Object]",$="[object Promise]",k="[object Proxy]",U="[object RegExp]",D="[object Set]",V="[object String]",q="[object Symbol]",Y="[object Undefined]",j="[object WeakMap]",ce="[object WeakSet]",ye="[object ArrayBuffer]",ge="[object DataView]",Fe="[object Float32Array]",dt="[object Float64Array]",hn="[object Int8Array]",ji="[object Int16Array]",Tn="[object Int32Array]",Ji="[object Uint8Array]",it="[object Uint8ClampedArray]",wt="[object Uint16Array]",Zi="[object Uint32Array]",Tm=/\b__p \+= '';/g,Sm=/\b(__p \+=) '' \+/g,Am=/(__e\(.*?\)|\b__t\)) \+\n'';/g,nf=/&(?:amp|lt|gt|quot|#39);/g,rf=/[&<>"']/g,Rm=RegExp(nf.source),Nm=RegExp(rf.source),Pm=/<%-([\s\S]+?)%>/g,Om=/<%([\s\S]+?)%>/g,sf=/<%=([\s\S]+?)%>/g,Dm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mm=/^\w*$/,Lm=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wl=/[\\^$.*+?()[\]{}|]/g,Fm=RegExp(Wl.source),Ul=/^\s+/,km=/\s/,Bm=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wm=/\{\n\/\* \[wrapped with (.+)\] \*/,Um=/,? & /,Hm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$m=/[()=,{}\[\]\/\s]/,zm=/\\(\\)?/g,Km=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,of=/\w*$/,qm=/^[-+]0x[0-9a-f]+$/i,Gm=/^0b[01]+$/i,Vm=/^\[object .+?Constructor\]$/,Ym=/^0o[0-7]+$/i,Qm=/^(?:0|[1-9]\d*)$/,Xm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qs=/($^)/,jm=/['\n\r\u2028\u2029\\]/g,Gs="\\ud800-\\udfff",Jm="\\u0300-\\u036f",Zm="\\ufe20-\\ufe2f",ev="\\u20d0-\\u20ff",lf=Jm+Zm+ev,af="\\u2700-\\u27bf",cf="a-z\\xdf-\\xf6\\xf8-\\xff",tv="\\xac\\xb1\\xd7\\xf7",nv="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",iv="\\u2000-\\u206f",rv=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",uf="A-Z\\xc0-\\xd6\\xd8-\\xde",ff="\\ufe0e\\ufe0f",hf=tv+nv+iv+rv,Hl="['’]",sv="["+Gs+"]",df="["+hf+"]",Vs="["+lf+"]",_f="\\d+",ov="["+af+"]",pf="["+cf+"]",gf="[^"+Gs+hf+_f+af+cf+uf+"]",$l="\\ud83c[\\udffb-\\udfff]",lv="(?:"+Vs+"|"+$l+")",mf="[^"+Gs+"]",zl="(?:\\ud83c[\\udde6-\\uddff]){2}",Kl="[\\ud800-\\udbff][\\udc00-\\udfff]",er="["+uf+"]",vf="\\u200d",yf="(?:"+pf+"|"+gf+")",av="(?:"+er+"|"+gf+")",wf="(?:"+Hl+"(?:d|ll|m|re|s|t|ve))?",Ef="(?:"+Hl+"(?:D|LL|M|RE|S|T|VE))?",Cf=lv+"?",bf="["+ff+"]?",cv="(?:"+vf+"(?:"+[mf,zl,Kl].join("|")+")"+bf+Cf+")*",uv="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",If=bf+Cf+cv,hv="(?:"+[ov,zl,Kl].join("|")+")"+If,dv="(?:"+[mf+Vs+"?",Vs,zl,Kl,sv].join("|")+")",_v=RegExp(Hl,"g"),pv=RegExp(Vs,"g"),ql=RegExp($l+"(?="+$l+")|"+dv+If,"g"),gv=RegExp([er+"?"+pf+"+"+wf+"(?="+[df,er,"$"].join("|")+")",av+"+"+Ef+"(?="+[df,er+yf,"$"].join("|")+")",er+"?"+yf+"+"+wf,er+"+"+Ef,fv,uv,_f,hv].join("|"),"g"),mv=RegExp("["+vf+Gs+lf+ff+"]"),vv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wv=-1,De={};De[Fe]=De[dt]=De[hn]=De[ji]=De[Tn]=De[Ji]=De[it]=De[wt]=De[Zi]=!0,De[Gn]=De[yt]=De[ye]=De[Vn]=De[ge]=De[$t]=De[Yn]=De[w]=De[S]=De[O]=De[F]=De[U]=De[D]=De[V]=De[j]=!1;var Ne={};Ne[Gn]=Ne[yt]=Ne[ye]=Ne[ge]=Ne[Vn]=Ne[$t]=Ne[Fe]=Ne[dt]=Ne[hn]=Ne[ji]=Ne[Tn]=Ne[S]=Ne[O]=Ne[F]=Ne[U]=Ne[D]=Ne[V]=Ne[q]=Ne[Ji]=Ne[it]=Ne[wt]=Ne[Zi]=!0,Ne[Yn]=Ne[w]=Ne[j]=!1;var Ev={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Cv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Iv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xv=parseFloat,Tv=parseInt,xf=typeof ls=="object"&&ls&&ls.Object===Object&&ls,Sv=typeof self=="object"&&self&&self.Object===Object&&self,rt=xf||Sv||Function("return this")(),Gl=e&&!e.nodeType&&e,yi=Gl&&!0&&t&&!t.nodeType&&t,Tf=yi&&yi.exports===Gl,Vl=Tf&&xf.process,zt=function(){try{var b=yi&&yi.require&&yi.require("util").types;return b||Vl&&Vl.binding&&Vl.binding("util")}catch{}}(),Sf=zt&&zt.isArrayBuffer,Af=zt&&zt.isDate,Rf=zt&&zt.isMap,Nf=zt&&zt.isRegExp,Pf=zt&&zt.isSet,Of=zt&&zt.isTypedArray;function Dt(b,A,T){switch(T.length){case 0:return b.call(A);case 1:return b.call(A,T[0]);case 2:return b.call(A,T[0],T[1]);case 3:return b.call(A,T[0],T[1],T[2])}return b.apply(A,T)}function Av(b,A,T,K){for(var ne=-1,Ce=b==null?0:b.length;++ne<Ce;){var Ge=b[ne];A(K,Ge,T(Ge),b)}return K}function Kt(b,A){for(var T=-1,K=b==null?0:b.length;++T<K&&A(b[T],T,b)!==!1;);return b}function Rv(b,A){for(var T=b==null?0:b.length;T--&&A(b[T],T,b)!==!1;);return b}function Df(b,A){for(var T=-1,K=b==null?0:b.length;++T<K;)if(!A(b[T],T,b))return!1;return!0}function Qn(b,A){for(var T=-1,K=b==null?0:b.length,ne=0,Ce=[];++T<K;){var Ge=b[T];A(Ge,T,b)&&(Ce[ne++]=Ge)}return Ce}function Ys(b,A){var T=b==null?0:b.length;return!!T&&tr(b,A,0)>-1}function Yl(b,A,T){for(var K=-1,ne=b==null?0:b.length;++K<ne;)if(T(A,b[K]))return!0;return!1}function ke(b,A){for(var T=-1,K=b==null?0:b.length,ne=Array(K);++T<K;)ne[T]=A(b[T],T,b);return ne}function Xn(b,A){for(var T=-1,K=A.length,ne=b.length;++T<K;)b[ne+T]=A[T];return b}function Ql(b,A,T,K){var ne=-1,Ce=b==null?0:b.length;for(K&&Ce&&(T=b[++ne]);++ne<Ce;)T=A(T,b[ne],ne,b);return T}function Nv(b,A,T,K){var ne=b==null?0:b.length;for(K&&ne&&(T=b[--ne]);ne--;)T=A(T,b[ne],ne,b);return T}function Xl(b,A){for(var T=-1,K=b==null?0:b.length;++T<K;)if(A(b[T],T,b))return!0;return!1}var Pv=jl("length");function Ov(b){return b.split("")}function Dv(b){return b.match(Hm)||[]}function Mf(b,A,T){var K;return T(b,function(ne,Ce,Ge){if(A(ne,Ce,Ge))return K=Ce,!1}),K}function Qs(b,A,T,K){for(var ne=b.length,Ce=T+(K?1:-1);K?Ce--:++Ce<ne;)if(A(b[Ce],Ce,b))return Ce;return-1}function tr(b,A,T){return A===A?qv(b,A,T):Qs(b,Lf,T)}function Mv(b,A,T,K){for(var ne=T-1,Ce=b.length;++ne<Ce;)if(K(b[ne],A))return ne;return-1}function Lf(b){return b!==b}function Ff(b,A){var T=b==null?0:b.length;return T?Zl(b,A)/T:xn}function jl(b){return function(A){return A==null?n:A[b]}}function Jl(b){return function(A){return b==null?n:b[A]}}function kf(b,A,T,K,ne){return ne(b,function(Ce,Ge,Re){T=K?(K=!1,Ce):A(T,Ce,Ge,Re)}),T}function Lv(b,A){var T=b.length;for(b.sort(A);T--;)b[T]=b[T].value;return b}function Zl(b,A){for(var T,K=-1,ne=b.length;++K<ne;){var Ce=A(b[K]);Ce!==n&&(T=T===n?Ce:T+Ce)}return T}function ea(b,A){for(var T=-1,K=Array(b);++T<b;)K[T]=A(T);return K}function Fv(b,A){return ke(A,function(T){return[T,b[T]]})}function Bf(b){return b&&b.slice(0,$f(b)+1).replace(Ul,"")}function Mt(b){return function(A){return b(A)}}function ta(b,A){return ke(A,function(T){return b[T]})}function qr(b,A){return b.has(A)}function Wf(b,A){for(var T=-1,K=b.length;++T<K&&tr(A,b[T],0)>-1;);return T}function Uf(b,A){for(var T=b.length;T--&&tr(A,b[T],0)>-1;);return T}function kv(b,A){for(var T=b.length,K=0;T--;)b[T]===A&&++K;return K}var Bv=Jl(Ev),Wv=Jl(Cv);function Uv(b){return"\\"+Iv[b]}function Hv(b,A){return b==null?n:b[A]}function nr(b){return mv.test(b)}function $v(b){return vv.test(b)}function zv(b){for(var A,T=[];!(A=b.next()).done;)T.push(A.value);return T}function na(b){var A=-1,T=Array(b.size);return b.forEach(function(K,ne){T[++A]=[ne,K]}),T}function Hf(b,A){return function(T){return b(A(T))}}function jn(b,A){for(var T=-1,K=b.length,ne=0,Ce=[];++T<K;){var Ge=b[T];(Ge===A||Ge===v)&&(b[T]=v,Ce[ne++]=T)}return Ce}function Xs(b){var A=-1,T=Array(b.size);return b.forEach(function(K){T[++A]=K}),T}function Kv(b){var A=-1,T=Array(b.size);return b.forEach(function(K){T[++A]=[K,K]}),T}function qv(b,A,T){for(var K=T-1,ne=b.length;++K<ne;)if(b[K]===A)return K;return-1}function Gv(b,A,T){for(var K=T+1;K--;)if(b[K]===A)return K;return K}function ir(b){return nr(b)?Yv(b):Pv(b)}function jt(b){return nr(b)?Qv(b):Ov(b)}function $f(b){for(var A=b.length;A--&&km.test(b.charAt(A)););return A}var Vv=Jl(bv);function Yv(b){for(var A=ql.lastIndex=0;ql.test(b);)++A;return A}function Qv(b){return b.match(ql)||[]}function Xv(b){return b.match(gv)||[]}var jv=function b(A){A=A==null?rt:rr.defaults(rt.Object(),A,rr.pick(rt,yv));var T=A.Array,K=A.Date,ne=A.Error,Ce=A.Function,Ge=A.Math,Re=A.Object,ia=A.RegExp,Jv=A.String,qt=A.TypeError,js=T.prototype,Zv=Ce.prototype,sr=Re.prototype,Js=A["__core-js_shared__"],Zs=Zv.toString,Se=sr.hasOwnProperty,ey=0,zf=function(){var i=/[^.]+$/.exec(Js&&Js.keys&&Js.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),eo=sr.toString,ty=Zs.call(Re),ny=rt._,iy=ia("^"+Zs.call(Se).replace(Wl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),to=Tf?A.Buffer:n,Jn=A.Symbol,no=A.Uint8Array,Kf=to?to.allocUnsafe:n,io=Hf(Re.getPrototypeOf,Re),qf=Re.create,Gf=sr.propertyIsEnumerable,ro=js.splice,Vf=Jn?Jn.isConcatSpreadable:n,Gr=Jn?Jn.iterator:n,wi=Jn?Jn.toStringTag:n,so=function(){try{var i=xi(Re,"defineProperty");return i({},"",{}),i}catch{}}(),ry=A.clearTimeout!==rt.clearTimeout&&A.clearTimeout,sy=K&&K.now!==rt.Date.now&&K.now,oy=A.setTimeout!==rt.setTimeout&&A.setTimeout,oo=Ge.ceil,lo=Ge.floor,ra=Re.getOwnPropertySymbols,ly=to?to.isBuffer:n,Yf=A.isFinite,ay=js.join,cy=Hf(Re.keys,Re),Ve=Ge.max,lt=Ge.min,uy=K.now,fy=A.parseInt,Qf=Ge.random,hy=js.reverse,sa=xi(A,"DataView"),Vr=xi(A,"Map"),oa=xi(A,"Promise"),or=xi(A,"Set"),Yr=xi(A,"WeakMap"),Qr=xi(Re,"create"),ao=Yr&&new Yr,lr={},dy=Ti(sa),_y=Ti(Vr),py=Ti(oa),gy=Ti(or),my=Ti(Yr),co=Jn?Jn.prototype:n,Xr=co?co.valueOf:n,Xf=co?co.toString:n;function p(i){if($e(i)&&!re(i)&&!(i instanceof _e)){if(i instanceof Gt)return i;if(Se.call(i,"__wrapped__"))return jh(i)}return new Gt(i)}var ar=function(){function i(){}return function(s){if(!We(s))return{};if(qf)return qf(s);i.prototype=s;var l=new i;return i.prototype=n,l}}();function uo(){}function Gt(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=n}p.templateSettings={escape:Pm,evaluate:Om,interpolate:sf,variable:"",imports:{_:p}},p.prototype=uo.prototype,p.prototype.constructor=p,Gt.prototype=ar(uo.prototype),Gt.prototype.constructor=Gt;function _e(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Xe,this.__views__=[]}function vy(){var i=new _e(this.__wrapped__);return i.__actions__=Et(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Et(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Et(this.__views__),i}function yy(){if(this.__filtered__){var i=new _e(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function wy(){var i=this.__wrapped__.value(),s=this.__dir__,l=re(i),u=s<0,d=l?i.length:0,g=O0(0,d,this.__views__),m=g.start,E=g.end,x=E-m,N=u?E:m-1,P=this.__iteratees__,L=P.length,H=0,G=lt(x,this.__takeCount__);if(!l||!u&&d==x&&G==x)return wh(i,this.__actions__);var J=[];e:for(;x--&&H<G;){N+=s;for(var oe=-1,Z=i[N];++oe<L;){var de=P[oe],me=de.iteratee,kt=de.type,gt=me(Z);if(kt==zs)Z=gt;else if(!gt){if(kt==Qi)continue e;break e}}J[H++]=Z}return J}_e.prototype=ar(uo.prototype),_e.prototype.constructor=_e;function Ei(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var u=i[s];this.set(u[0],u[1])}}function Ey(){this.__data__=Qr?Qr(null):{},this.size=0}function Cy(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}function by(i){var s=this.__data__;if(Qr){var l=s[i];return l===h?n:l}return Se.call(s,i)?s[i]:n}function Iy(i){var s=this.__data__;return Qr?s[i]!==n:Se.call(s,i)}function xy(i,s){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=Qr&&s===n?h:s,this}Ei.prototype.clear=Ey,Ei.prototype.delete=Cy,Ei.prototype.get=by,Ei.prototype.has=Iy,Ei.prototype.set=xy;function Sn(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var u=i[s];this.set(u[0],u[1])}}function Ty(){this.__data__=[],this.size=0}function Sy(i){var s=this.__data__,l=fo(s,i);if(l<0)return!1;var u=s.length-1;return l==u?s.pop():ro.call(s,l,1),--this.size,!0}function Ay(i){var s=this.__data__,l=fo(s,i);return l<0?n:s[l][1]}function Ry(i){return fo(this.__data__,i)>-1}function Ny(i,s){var l=this.__data__,u=fo(l,i);return u<0?(++this.size,l.push([i,s])):l[u][1]=s,this}Sn.prototype.clear=Ty,Sn.prototype.delete=Sy,Sn.prototype.get=Ay,Sn.prototype.has=Ry,Sn.prototype.set=Ny;function An(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var u=i[s];this.set(u[0],u[1])}}function Py(){this.size=0,this.__data__={hash:new Ei,map:new(Vr||Sn),string:new Ei}}function Oy(i){var s=Io(this,i).delete(i);return this.size-=s?1:0,s}function Dy(i){return Io(this,i).get(i)}function My(i){return Io(this,i).has(i)}function Ly(i,s){var l=Io(this,i),u=l.size;return l.set(i,s),this.size+=l.size==u?0:1,this}An.prototype.clear=Py,An.prototype.delete=Oy,An.prototype.get=Dy,An.prototype.has=My,An.prototype.set=Ly;function Ci(i){var s=-1,l=i==null?0:i.length;for(this.__data__=new An;++s<l;)this.add(i[s])}function Fy(i){return this.__data__.set(i,h),this}function ky(i){return this.__data__.has(i)}Ci.prototype.add=Ci.prototype.push=Fy,Ci.prototype.has=ky;function Jt(i){var s=this.__data__=new Sn(i);this.size=s.size}function By(){this.__data__=new Sn,this.size=0}function Wy(i){var s=this.__data__,l=s.delete(i);return this.size=s.size,l}function Uy(i){return this.__data__.get(i)}function Hy(i){return this.__data__.has(i)}function $y(i,s){var l=this.__data__;if(l instanceof Sn){var u=l.__data__;if(!Vr||u.length<o-1)return u.push([i,s]),this.size=++l.size,this;l=this.__data__=new An(u)}return l.set(i,s),this.size=l.size,this}Jt.prototype.clear=By,Jt.prototype.delete=Wy,Jt.prototype.get=Uy,Jt.prototype.has=Hy,Jt.prototype.set=$y;function jf(i,s){var l=re(i),u=!l&&Si(i),d=!l&&!u&&ii(i),g=!l&&!u&&!d&&hr(i),m=l||u||d||g,E=m?ea(i.length,Jv):[],x=E.length;for(var N in i)(s||Se.call(i,N))&&!(m&&(N=="length"||d&&(N=="offset"||N=="parent")||g&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||On(N,x)))&&E.push(N);return E}function Jf(i){var s=i.length;return s?i[ma(0,s-1)]:n}function zy(i,s){return xo(Et(i),bi(s,0,i.length))}function Ky(i){return xo(Et(i))}function la(i,s,l){(l!==n&&!Zt(i[s],l)||l===n&&!(s in i))&&Rn(i,s,l)}function jr(i,s,l){var u=i[s];(!(Se.call(i,s)&&Zt(u,l))||l===n&&!(s in i))&&Rn(i,s,l)}function fo(i,s){for(var l=i.length;l--;)if(Zt(i[l][0],s))return l;return-1}function qy(i,s,l,u){return Zn(i,function(d,g,m){s(u,d,l(d),m)}),u}function Zf(i,s){return i&&_n(s,je(s),i)}function Gy(i,s){return i&&_n(s,bt(s),i)}function Rn(i,s,l){s=="__proto__"&&so?so(i,s,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[s]=l}function aa(i,s){for(var l=-1,u=s.length,d=T(u),g=i==null;++l<u;)d[l]=g?n:$a(i,s[l]);return d}function bi(i,s,l){return i===i&&(l!==n&&(i=i<=l?i:l),s!==n&&(i=i>=s?i:s)),i}function Vt(i,s,l,u,d,g){var m,E=s&y,x=s&C,N=s&R;if(l&&(m=d?l(i,u,d,g):l(i)),m!==n)return m;if(!We(i))return i;var P=re(i);if(P){if(m=M0(i),!E)return Et(i,m)}else{var L=at(i),H=L==w||L==I;if(ii(i))return bh(i,E);if(L==F||L==Gn||H&&!d){if(m=x||H?{}:$h(i),!E)return x?b0(i,Gy(m,i)):C0(i,Zf(m,i))}else{if(!Ne[L])return d?i:{};m=L0(i,L,E)}}g||(g=new Jt);var G=g.get(i);if(G)return G;g.set(i,m),md(i)?i.forEach(function(Z){m.add(Vt(Z,s,l,Z,i,g))}):pd(i)&&i.forEach(function(Z,de){m.set(de,Vt(Z,s,l,de,i,g))});var J=N?x?Aa:Sa:x?bt:je,oe=P?n:J(i);return Kt(oe||i,function(Z,de){oe&&(de=Z,Z=i[de]),jr(m,de,Vt(Z,s,l,de,i,g))}),m}function Vy(i){var s=je(i);return function(l){return eh(l,i,s)}}function eh(i,s,l){var u=l.length;if(i==null)return!u;for(i=Re(i);u--;){var d=l[u],g=s[d],m=i[d];if(m===n&&!(d in i)||!g(m))return!1}return!0}function th(i,s,l){if(typeof i!="function")throw new qt(c);return rs(function(){i.apply(n,l)},s)}function Jr(i,s,l,u){var d=-1,g=Ys,m=!0,E=i.length,x=[],N=s.length;if(!E)return x;l&&(s=ke(s,Mt(l))),u?(g=Yl,m=!1):s.length>=o&&(g=qr,m=!1,s=new Ci(s));e:for(;++d<E;){var P=i[d],L=l==null?P:l(P);if(P=u||P!==0?P:0,m&&L===L){for(var H=N;H--;)if(s[H]===L)continue e;x.push(P)}else g(s,L,u)||x.push(P)}return x}var Zn=Ah(dn),nh=Ah(ua,!0);function Yy(i,s){var l=!0;return Zn(i,function(u,d,g){return l=!!s(u,d,g),l}),l}function ho(i,s,l){for(var u=-1,d=i.length;++u<d;){var g=i[u],m=s(g);if(m!=null&&(E===n?m===m&&!Ft(m):l(m,E)))var E=m,x=g}return x}function Qy(i,s,l,u){var d=i.length;for(l=se(l),l<0&&(l=-l>d?0:d+l),u=u===n||u>d?d:se(u),u<0&&(u+=d),u=l>u?0:yd(u);l<u;)i[l++]=s;return i}function ih(i,s){var l=[];return Zn(i,function(u,d,g){s(u,d,g)&&l.push(u)}),l}function st(i,s,l,u,d){var g=-1,m=i.length;for(l||(l=k0),d||(d=[]);++g<m;){var E=i[g];s>0&&l(E)?s>1?st(E,s-1,l,u,d):Xn(d,E):u||(d[d.length]=E)}return d}var ca=Rh(),rh=Rh(!0);function dn(i,s){return i&&ca(i,s,je)}function ua(i,s){return i&&rh(i,s,je)}function _o(i,s){return Qn(s,function(l){return Dn(i[l])})}function Ii(i,s){s=ti(s,i);for(var l=0,u=s.length;i!=null&&l<u;)i=i[pn(s[l++])];return l&&l==u?i:n}function sh(i,s,l){var u=s(i);return re(i)?u:Xn(u,l(i))}function _t(i){return i==null?i===n?Y:M:wi&&wi in Re(i)?P0(i):K0(i)}function fa(i,s){return i>s}function Xy(i,s){return i!=null&&Se.call(i,s)}function jy(i,s){return i!=null&&s in Re(i)}function Jy(i,s,l){return i>=lt(s,l)&&i<Ve(s,l)}function ha(i,s,l){for(var u=l?Yl:Ys,d=i[0].length,g=i.length,m=g,E=T(g),x=1/0,N=[];m--;){var P=i[m];m&&s&&(P=ke(P,Mt(s))),x=lt(P.length,x),E[m]=!l&&(s||d>=120&&P.length>=120)?new Ci(m&&P):n}P=i[0];var L=-1,H=E[0];e:for(;++L<d&&N.length<x;){var G=P[L],J=s?s(G):G;if(G=l||G!==0?G:0,!(H?qr(H,J):u(N,J,l))){for(m=g;--m;){var oe=E[m];if(!(oe?qr(oe,J):u(i[m],J,l)))continue e}H&&H.push(J),N.push(G)}}return N}function Zy(i,s,l,u){return dn(i,function(d,g,m){s(u,l(d),g,m)}),u}function Zr(i,s,l){s=ti(s,i),i=Gh(i,s);var u=i==null?i:i[pn(Qt(s))];return u==null?n:Dt(u,i,l)}function oh(i){return $e(i)&&_t(i)==Gn}function e0(i){return $e(i)&&_t(i)==ye}function t0(i){return $e(i)&&_t(i)==$t}function es(i,s,l,u,d){return i===s?!0:i==null||s==null||!$e(i)&&!$e(s)?i!==i&&s!==s:n0(i,s,l,u,es,d)}function n0(i,s,l,u,d,g){var m=re(i),E=re(s),x=m?yt:at(i),N=E?yt:at(s);x=x==Gn?F:x,N=N==Gn?F:N;var P=x==F,L=N==F,H=x==N;if(H&&ii(i)){if(!ii(s))return!1;m=!0,P=!1}if(H&&!P)return g||(g=new Jt),m||hr(i)?Wh(i,s,l,u,d,g):R0(i,s,x,l,u,d,g);if(!(l&W)){var G=P&&Se.call(i,"__wrapped__"),J=L&&Se.call(s,"__wrapped__");if(G||J){var oe=G?i.value():i,Z=J?s.value():s;return g||(g=new Jt),d(oe,Z,l,u,g)}}return H?(g||(g=new Jt),N0(i,s,l,u,d,g)):!1}function i0(i){return $e(i)&&at(i)==S}function da(i,s,l,u){var d=l.length,g=d,m=!u;if(i==null)return!g;for(i=Re(i);d--;){var E=l[d];if(m&&E[2]?E[1]!==i[E[0]]:!(E[0]in i))return!1}for(;++d<g;){E=l[d];var x=E[0],N=i[x],P=E[1];if(m&&E[2]){if(N===n&&!(x in i))return!1}else{var L=new Jt;if(u)var H=u(N,P,x,i,s,L);if(!(H===n?es(P,N,W|z,u,L):H))return!1}}return!0}function lh(i){if(!We(i)||W0(i))return!1;var s=Dn(i)?iy:Vm;return s.test(Ti(i))}function r0(i){return $e(i)&&_t(i)==U}function s0(i){return $e(i)&&at(i)==D}function o0(i){return $e(i)&&Po(i.length)&&!!De[_t(i)]}function ah(i){return typeof i=="function"?i:i==null?It:typeof i=="object"?re(i)?fh(i[0],i[1]):uh(i):Nd(i)}function _a(i){if(!is(i))return cy(i);var s=[];for(var l in Re(i))Se.call(i,l)&&l!="constructor"&&s.push(l);return s}function l0(i){if(!We(i))return z0(i);var s=is(i),l=[];for(var u in i)u=="constructor"&&(s||!Se.call(i,u))||l.push(u);return l}function pa(i,s){return i<s}function ch(i,s){var l=-1,u=Ct(i)?T(i.length):[];return Zn(i,function(d,g,m){u[++l]=s(d,g,m)}),u}function uh(i){var s=Na(i);return s.length==1&&s[0][2]?Kh(s[0][0],s[0][1]):function(l){return l===i||da(l,i,s)}}function fh(i,s){return Oa(i)&&zh(s)?Kh(pn(i),s):function(l){var u=$a(l,i);return u===n&&u===s?za(l,i):es(s,u,W|z)}}function po(i,s,l,u,d){i!==s&&ca(s,function(g,m){if(d||(d=new Jt),We(g))a0(i,s,m,l,po,u,d);else{var E=u?u(Ma(i,m),g,m+"",i,s,d):n;E===n&&(E=g),la(i,m,E)}},bt)}function a0(i,s,l,u,d,g,m){var E=Ma(i,l),x=Ma(s,l),N=m.get(x);if(N){la(i,l,N);return}var P=g?g(E,x,l+"",i,s,m):n,L=P===n;if(L){var H=re(x),G=!H&&ii(x),J=!H&&!G&&hr(x);P=x,H||G||J?re(E)?P=E:ze(E)?P=Et(E):G?(L=!1,P=bh(x,!0)):J?(L=!1,P=Ih(x,!0)):P=[]:ss(x)||Si(x)?(P=E,Si(E)?P=wd(E):(!We(E)||Dn(E))&&(P=$h(x))):L=!1}L&&(m.set(x,P),d(P,x,u,g,m),m.delete(x)),la(i,l,P)}function hh(i,s){var l=i.length;if(l)return s+=s<0?l:0,On(s,l)?i[s]:n}function dh(i,s,l){s.length?s=ke(s,function(g){return re(g)?function(m){return Ii(m,g.length===1?g[0]:g)}:g}):s=[It];var u=-1;s=ke(s,Mt(X()));var d=ch(i,function(g,m,E){var x=ke(s,function(N){return N(g)});return{criteria:x,index:++u,value:g}});return Lv(d,function(g,m){return E0(g,m,l)})}function c0(i,s){return _h(i,s,function(l,u){return za(i,u)})}function _h(i,s,l){for(var u=-1,d=s.length,g={};++u<d;){var m=s[u],E=Ii(i,m);l(E,m)&&ts(g,ti(m,i),E)}return g}function u0(i){return function(s){return Ii(s,i)}}function ga(i,s,l,u){var d=u?Mv:tr,g=-1,m=s.length,E=i;for(i===s&&(s=Et(s)),l&&(E=ke(i,Mt(l)));++g<m;)for(var x=0,N=s[g],P=l?l(N):N;(x=d(E,P,x,u))>-1;)E!==i&&ro.call(E,x,1),ro.call(i,x,1);return i}function ph(i,s){for(var l=i?s.length:0,u=l-1;l--;){var d=s[l];if(l==u||d!==g){var g=d;On(d)?ro.call(i,d,1):wa(i,d)}}return i}function ma(i,s){return i+lo(Qf()*(s-i+1))}function f0(i,s,l,u){for(var d=-1,g=Ve(oo((s-i)/(l||1)),0),m=T(g);g--;)m[u?g:++d]=i,i+=l;return m}function va(i,s){var l="";if(!i||s<1||s>pe)return l;do s%2&&(l+=i),s=lo(s/2),s&&(i+=i);while(s);return l}function le(i,s){return La(qh(i,s,It),i+"")}function h0(i){return Jf(dr(i))}function d0(i,s){var l=dr(i);return xo(l,bi(s,0,l.length))}function ts(i,s,l,u){if(!We(i))return i;s=ti(s,i);for(var d=-1,g=s.length,m=g-1,E=i;E!=null&&++d<g;){var x=pn(s[d]),N=l;if(x==="__proto__"||x==="constructor"||x==="prototype")return i;if(d!=m){var P=E[x];N=u?u(P,x,E):n,N===n&&(N=We(P)?P:On(s[d+1])?[]:{})}jr(E,x,N),E=E[x]}return i}var gh=ao?function(i,s){return ao.set(i,s),i}:It,_0=so?function(i,s){return so(i,"toString",{configurable:!0,enumerable:!1,value:qa(s),writable:!0})}:It;function p0(i){return xo(dr(i))}function Yt(i,s,l){var u=-1,d=i.length;s<0&&(s=-s>d?0:d+s),l=l>d?d:l,l<0&&(l+=d),d=s>l?0:l-s>>>0,s>>>=0;for(var g=T(d);++u<d;)g[u]=i[u+s];return g}function g0(i,s){var l;return Zn(i,function(u,d,g){return l=s(u,d,g),!l}),!!l}function go(i,s,l){var u=0,d=i==null?u:i.length;if(typeof s=="number"&&s===s&&d<=Ks){for(;u<d;){var g=u+d>>>1,m=i[g];m!==null&&!Ft(m)&&(l?m<=s:m<s)?u=g+1:d=g}return d}return ya(i,s,It,l)}function ya(i,s,l,u){var d=0,g=i==null?0:i.length;if(g===0)return 0;s=l(s);for(var m=s!==s,E=s===null,x=Ft(s),N=s===n;d<g;){var P=lo((d+g)/2),L=l(i[P]),H=L!==n,G=L===null,J=L===L,oe=Ft(L);if(m)var Z=u||J;else N?Z=J&&(u||H):E?Z=J&&H&&(u||!G):x?Z=J&&H&&!G&&(u||!oe):G||oe?Z=!1:Z=u?L<=s:L<s;Z?d=P+1:g=P}return lt(g,Ht)}function mh(i,s){for(var l=-1,u=i.length,d=0,g=[];++l<u;){var m=i[l],E=s?s(m):m;if(!l||!Zt(E,x)){var x=E;g[d++]=m===0?0:m}}return g}function vh(i){return typeof i=="number"?i:Ft(i)?xn:+i}function Lt(i){if(typeof i=="string")return i;if(re(i))return ke(i,Lt)+"";if(Ft(i))return Xf?Xf.call(i):"";var s=i+"";return s=="0"&&1/i==-xe?"-0":s}function ei(i,s,l){var u=-1,d=Ys,g=i.length,m=!0,E=[],x=E;if(l)m=!1,d=Yl;else if(g>=o){var N=s?null:S0(i);if(N)return Xs(N);m=!1,d=qr,x=new Ci}else x=s?[]:E;e:for(;++u<g;){var P=i[u],L=s?s(P):P;if(P=l||P!==0?P:0,m&&L===L){for(var H=x.length;H--;)if(x[H]===L)continue e;s&&x.push(L),E.push(P)}else d(x,L,l)||(x!==E&&x.push(L),E.push(P))}return E}function wa(i,s){return s=ti(s,i),i=Gh(i,s),i==null||delete i[pn(Qt(s))]}function yh(i,s,l,u){return ts(i,s,l(Ii(i,s)),u)}function mo(i,s,l,u){for(var d=i.length,g=u?d:-1;(u?g--:++g<d)&&s(i[g],g,i););return l?Yt(i,u?0:g,u?g+1:d):Yt(i,u?g+1:0,u?d:g)}function wh(i,s){var l=i;return l instanceof _e&&(l=l.value()),Ql(s,function(u,d){return d.func.apply(d.thisArg,Xn([u],d.args))},l)}function Ea(i,s,l){var u=i.length;if(u<2)return u?ei(i[0]):[];for(var d=-1,g=T(u);++d<u;)for(var m=i[d],E=-1;++E<u;)E!=d&&(g[d]=Jr(g[d]||m,i[E],s,l));return ei(st(g,1),s,l)}function Eh(i,s,l){for(var u=-1,d=i.length,g=s.length,m={};++u<d;){var E=u<g?s[u]:n;l(m,i[u],E)}return m}function Ca(i){return ze(i)?i:[]}function ba(i){return typeof i=="function"?i:It}function ti(i,s){return re(i)?i:Oa(i,s)?[i]:Xh(Te(i))}var m0=le;function ni(i,s,l){var u=i.length;return l=l===n?u:l,!s&&l>=u?i:Yt(i,s,l)}var Ch=ry||function(i){return rt.clearTimeout(i)};function bh(i,s){if(s)return i.slice();var l=i.length,u=Kf?Kf(l):new i.constructor(l);return i.copy(u),u}function Ia(i){var s=new i.constructor(i.byteLength);return new no(s).set(new no(i)),s}function v0(i,s){var l=s?Ia(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.byteLength)}function y0(i){var s=new i.constructor(i.source,of.exec(i));return s.lastIndex=i.lastIndex,s}function w0(i){return Xr?Re(Xr.call(i)):{}}function Ih(i,s){var l=s?Ia(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)}function xh(i,s){if(i!==s){var l=i!==n,u=i===null,d=i===i,g=Ft(i),m=s!==n,E=s===null,x=s===s,N=Ft(s);if(!E&&!N&&!g&&i>s||g&&m&&x&&!E&&!N||u&&m&&x||!l&&x||!d)return 1;if(!u&&!g&&!N&&i<s||N&&l&&d&&!u&&!g||E&&l&&d||!m&&d||!x)return-1}return 0}function E0(i,s,l){for(var u=-1,d=i.criteria,g=s.criteria,m=d.length,E=l.length;++u<m;){var x=xh(d[u],g[u]);if(x){if(u>=E)return x;var N=l[u];return x*(N=="desc"?-1:1)}}return i.index-s.index}function Th(i,s,l,u){for(var d=-1,g=i.length,m=l.length,E=-1,x=s.length,N=Ve(g-m,0),P=T(x+N),L=!u;++E<x;)P[E]=s[E];for(;++d<m;)(L||d<g)&&(P[l[d]]=i[d]);for(;N--;)P[E++]=i[d++];return P}function Sh(i,s,l,u){for(var d=-1,g=i.length,m=-1,E=l.length,x=-1,N=s.length,P=Ve(g-E,0),L=T(P+N),H=!u;++d<P;)L[d]=i[d];for(var G=d;++x<N;)L[G+x]=s[x];for(;++m<E;)(H||d<g)&&(L[G+l[m]]=i[d++]);return L}function Et(i,s){var l=-1,u=i.length;for(s||(s=T(u));++l<u;)s[l]=i[l];return s}function _n(i,s,l,u){var d=!l;l||(l={});for(var g=-1,m=s.length;++g<m;){var E=s[g],x=u?u(l[E],i[E],E,l,i):n;x===n&&(x=i[E]),d?Rn(l,E,x):jr(l,E,x)}return l}function C0(i,s){return _n(i,Pa(i),s)}function b0(i,s){return _n(i,Uh(i),s)}function vo(i,s){return function(l,u){var d=re(l)?Av:qy,g=s?s():{};return d(l,i,X(u,2),g)}}function cr(i){return le(function(s,l){var u=-1,d=l.length,g=d>1?l[d-1]:n,m=d>2?l[2]:n;for(g=i.length>3&&typeof g=="function"?(d--,g):n,m&&pt(l[0],l[1],m)&&(g=d<3?n:g,d=1),s=Re(s);++u<d;){var E=l[u];E&&i(s,E,u,g)}return s})}function Ah(i,s){return function(l,u){if(l==null)return l;if(!Ct(l))return i(l,u);for(var d=l.length,g=s?d:-1,m=Re(l);(s?g--:++g<d)&&u(m[g],g,m)!==!1;);return l}}function Rh(i){return function(s,l,u){for(var d=-1,g=Re(s),m=u(s),E=m.length;E--;){var x=m[i?E:++d];if(l(g[x],x,g)===!1)break}return s}}function I0(i,s,l){var u=s&Q,d=ns(i);function g(){var m=this&&this!==rt&&this instanceof g?d:i;return m.apply(u?l:this,arguments)}return g}function Nh(i){return function(s){s=Te(s);var l=nr(s)?jt(s):n,u=l?l[0]:s.charAt(0),d=l?ni(l,1).join(""):s.slice(1);return u[i]()+d}}function ur(i){return function(s){return Ql(Ad(Sd(s).replace(_v,"")),i,"")}}function ns(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var l=ar(i.prototype),u=i.apply(l,s);return We(u)?u:l}}function x0(i,s,l){var u=ns(i);function d(){for(var g=arguments.length,m=T(g),E=g,x=fr(d);E--;)m[E]=arguments[E];var N=g<3&&m[0]!==x&&m[g-1]!==x?[]:jn(m,x);if(g-=N.length,g<l)return Lh(i,s,yo,d.placeholder,n,m,N,n,n,l-g);var P=this&&this!==rt&&this instanceof d?u:i;return Dt(P,this,m)}return d}function Ph(i){return function(s,l,u){var d=Re(s);if(!Ct(s)){var g=X(l,3);s=je(s),l=function(E){return g(d[E],E,d)}}var m=i(s,l,u);return m>-1?d[g?s[m]:m]:n}}function Oh(i){return Pn(function(s){var l=s.length,u=l,d=Gt.prototype.thru;for(i&&s.reverse();u--;){var g=s[u];if(typeof g!="function")throw new qt(c);if(d&&!m&&bo(g)=="wrapper")var m=new Gt([],!0)}for(u=m?u:l;++u<l;){g=s[u];var E=bo(g),x=E=="wrapper"?Ra(g):n;x&&Da(x[0])&&x[1]==(vt|Ee|qe|Ot)&&!x[4].length&&x[9]==1?m=m[bo(x[0])].apply(m,x[3]):m=g.length==1&&Da(g)?m[E]():m.thru(g)}return function(){var N=arguments,P=N[0];if(m&&N.length==1&&re(P))return m.plant(P).value();for(var L=0,H=l?s[L].apply(this,N):P;++L<l;)H=s[L].call(this,H);return H}})}function yo(i,s,l,u,d,g,m,E,x,N){var P=s&vt,L=s&Q,H=s&we,G=s&(Ee|te),J=s&mi,oe=H?n:ns(i);function Z(){for(var de=arguments.length,me=T(de),kt=de;kt--;)me[kt]=arguments[kt];if(G)var gt=fr(Z),Bt=kv(me,gt);if(u&&(me=Th(me,u,d,G)),g&&(me=Sh(me,g,m,G)),de-=Bt,G&&de<N){var Ke=jn(me,gt);return Lh(i,s,yo,Z.placeholder,l,me,Ke,E,x,N-de)}var en=L?l:this,Ln=H?en[i]:i;return de=me.length,E?me=q0(me,E):J&&de>1&&me.reverse(),P&&x<de&&(me.length=x),this&&this!==rt&&this instanceof Z&&(Ln=oe||ns(Ln)),Ln.apply(en,me)}return Z}function Dh(i,s){return function(l,u){return Zy(l,i,s(u),{})}}function wo(i,s){return function(l,u){var d;if(l===n&&u===n)return s;if(l!==n&&(d=l),u!==n){if(d===n)return u;typeof l=="string"||typeof u=="string"?(l=Lt(l),u=Lt(u)):(l=vh(l),u=vh(u)),d=i(l,u)}return d}}function xa(i){return Pn(function(s){return s=ke(s,Mt(X())),le(function(l){var u=this;return i(s,function(d){return Dt(d,u,l)})})})}function Eo(i,s){s=s===n?" ":Lt(s);var l=s.length;if(l<2)return l?va(s,i):s;var u=va(s,oo(i/ir(s)));return nr(s)?ni(jt(u),0,i).join(""):u.slice(0,i)}function T0(i,s,l,u){var d=s&Q,g=ns(i);function m(){for(var E=-1,x=arguments.length,N=-1,P=u.length,L=T(P+x),H=this&&this!==rt&&this instanceof m?g:i;++N<P;)L[N]=u[N];for(;x--;)L[N++]=arguments[++E];return Dt(H,d?l:this,L)}return m}function Mh(i){return function(s,l,u){return u&&typeof u!="number"&&pt(s,l,u)&&(l=u=n),s=Mn(s),l===n?(l=s,s=0):l=Mn(l),u=u===n?s<l?1:-1:Mn(u),f0(s,l,u,i)}}function Co(i){return function(s,l){return typeof s=="string"&&typeof l=="string"||(s=Xt(s),l=Xt(l)),i(s,l)}}function Lh(i,s,l,u,d,g,m,E,x,N){var P=s&Ee,L=P?m:n,H=P?n:m,G=P?g:n,J=P?n:g;s|=P?qe:Ut,s&=~(P?Ut:qe),s&Le||(s&=~(Q|we));var oe=[i,s,d,G,L,J,H,E,x,N],Z=l.apply(n,oe);return Da(i)&&Vh(Z,oe),Z.placeholder=u,Yh(Z,i,s)}function Ta(i){var s=Ge[i];return function(l,u){if(l=Xt(l),u=u==null?0:lt(se(u),292),u&&Yf(l)){var d=(Te(l)+"e").split("e"),g=s(d[0]+"e"+(+d[1]+u));return d=(Te(g)+"e").split("e"),+(d[0]+"e"+(+d[1]-u))}return s(l)}}var S0=or&&1/Xs(new or([,-0]))[1]==xe?function(i){return new or(i)}:Ya;function Fh(i){return function(s){var l=at(s);return l==S?na(s):l==D?Kv(s):Fv(s,i(s))}}function Nn(i,s,l,u,d,g,m,E){var x=s&we;if(!x&&typeof i!="function")throw new qt(c);var N=u?u.length:0;if(N||(s&=~(qe|Ut),u=d=n),m=m===n?m:Ve(se(m),0),E=E===n?E:se(E),N-=d?d.length:0,s&Ut){var P=u,L=d;u=d=n}var H=x?n:Ra(i),G=[i,s,l,u,d,P,L,g,m,E];if(H&&$0(G,H),i=G[0],s=G[1],l=G[2],u=G[3],d=G[4],E=G[9]=G[9]===n?x?0:i.length:Ve(G[9]-N,0),!E&&s&(Ee|te)&&(s&=~(Ee|te)),!s||s==Q)var J=I0(i,s,l);else s==Ee||s==te?J=x0(i,s,E):(s==qe||s==(Q|qe))&&!d.length?J=T0(i,s,l,u):J=yo.apply(n,G);var oe=H?gh:Vh;return Yh(oe(J,G),i,s)}function kh(i,s,l,u){return i===n||Zt(i,sr[l])&&!Se.call(u,l)?s:i}function Bh(i,s,l,u,d,g){return We(i)&&We(s)&&(g.set(s,i),po(i,s,n,Bh,g),g.delete(s)),i}function A0(i){return ss(i)?n:i}function Wh(i,s,l,u,d,g){var m=l&W,E=i.length,x=s.length;if(E!=x&&!(m&&x>E))return!1;var N=g.get(i),P=g.get(s);if(N&&P)return N==s&&P==i;var L=-1,H=!0,G=l&z?new Ci:n;for(g.set(i,s),g.set(s,i);++L<E;){var J=i[L],oe=s[L];if(u)var Z=m?u(oe,J,L,s,i,g):u(J,oe,L,i,s,g);if(Z!==n){if(Z)continue;H=!1;break}if(G){if(!Xl(s,function(de,me){if(!qr(G,me)&&(J===de||d(J,de,l,u,g)))return G.push(me)})){H=!1;break}}else if(!(J===oe||d(J,oe,l,u,g))){H=!1;break}}return g.delete(i),g.delete(s),H}function R0(i,s,l,u,d,g,m){switch(l){case ge:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case ye:return!(i.byteLength!=s.byteLength||!g(new no(i),new no(s)));case Vn:case $t:case O:return Zt(+i,+s);case Yn:return i.name==s.name&&i.message==s.message;case U:case V:return i==s+"";case S:var E=na;case D:var x=u&W;if(E||(E=Xs),i.size!=s.size&&!x)return!1;var N=m.get(i);if(N)return N==s;u|=z,m.set(i,s);var P=Wh(E(i),E(s),u,d,g,m);return m.delete(i),P;case q:if(Xr)return Xr.call(i)==Xr.call(s)}return!1}function N0(i,s,l,u,d,g){var m=l&W,E=Sa(i),x=E.length,N=Sa(s),P=N.length;if(x!=P&&!m)return!1;for(var L=x;L--;){var H=E[L];if(!(m?H in s:Se.call(s,H)))return!1}var G=g.get(i),J=g.get(s);if(G&&J)return G==s&&J==i;var oe=!0;g.set(i,s),g.set(s,i);for(var Z=m;++L<x;){H=E[L];var de=i[H],me=s[H];if(u)var kt=m?u(me,de,H,s,i,g):u(de,me,H,i,s,g);if(!(kt===n?de===me||d(de,me,l,u,g):kt)){oe=!1;break}Z||(Z=H=="constructor")}if(oe&&!Z){var gt=i.constructor,Bt=s.constructor;gt!=Bt&&"constructor"in i&&"constructor"in s&&!(typeof gt=="function"&&gt instanceof gt&&typeof Bt=="function"&&Bt instanceof Bt)&&(oe=!1)}return g.delete(i),g.delete(s),oe}function Pn(i){return La(qh(i,n,ed),i+"")}function Sa(i){return sh(i,je,Pa)}function Aa(i){return sh(i,bt,Uh)}var Ra=ao?function(i){return ao.get(i)}:Ya;function bo(i){for(var s=i.name+"",l=lr[s],u=Se.call(lr,s)?l.length:0;u--;){var d=l[u],g=d.func;if(g==null||g==i)return d.name}return s}function fr(i){var s=Se.call(p,"placeholder")?p:i;return s.placeholder}function X(){var i=p.iteratee||Ga;return i=i===Ga?ah:i,arguments.length?i(arguments[0],arguments[1]):i}function Io(i,s){var l=i.__data__;return B0(s)?l[typeof s=="string"?"string":"hash"]:l.map}function Na(i){for(var s=je(i),l=s.length;l--;){var u=s[l],d=i[u];s[l]=[u,d,zh(d)]}return s}function xi(i,s){var l=Hv(i,s);return lh(l)?l:n}function P0(i){var s=Se.call(i,wi),l=i[wi];try{i[wi]=n;var u=!0}catch{}var d=eo.call(i);return u&&(s?i[wi]=l:delete i[wi]),d}var Pa=ra?function(i){return i==null?[]:(i=Re(i),Qn(ra(i),function(s){return Gf.call(i,s)}))}:Qa,Uh=ra?function(i){for(var s=[];i;)Xn(s,Pa(i)),i=io(i);return s}:Qa,at=_t;(sa&&at(new sa(new ArrayBuffer(1)))!=ge||Vr&&at(new Vr)!=S||oa&&at(oa.resolve())!=$||or&&at(new or)!=D||Yr&&at(new Yr)!=j)&&(at=function(i){var s=_t(i),l=s==F?i.constructor:n,u=l?Ti(l):"";if(u)switch(u){case dy:return ge;case _y:return S;case py:return $;case gy:return D;case my:return j}return s});function O0(i,s,l){for(var u=-1,d=l.length;++u<d;){var g=l[u],m=g.size;switch(g.type){case"drop":i+=m;break;case"dropRight":s-=m;break;case"take":s=lt(s,i+m);break;case"takeRight":i=Ve(i,s-m);break}}return{start:i,end:s}}function D0(i){var s=i.match(Wm);return s?s[1].split(Um):[]}function Hh(i,s,l){s=ti(s,i);for(var u=-1,d=s.length,g=!1;++u<d;){var m=pn(s[u]);if(!(g=i!=null&&l(i,m)))break;i=i[m]}return g||++u!=d?g:(d=i==null?0:i.length,!!d&&Po(d)&&On(m,d)&&(re(i)||Si(i)))}function M0(i){var s=i.length,l=new i.constructor(s);return s&&typeof i[0]=="string"&&Se.call(i,"index")&&(l.index=i.index,l.input=i.input),l}function $h(i){return typeof i.constructor=="function"&&!is(i)?ar(io(i)):{}}function L0(i,s,l){var u=i.constructor;switch(s){case ye:return Ia(i);case Vn:case $t:return new u(+i);case ge:return v0(i,l);case Fe:case dt:case hn:case ji:case Tn:case Ji:case it:case wt:case Zi:return Ih(i,l);case S:return new u;case O:case V:return new u(i);case U:return y0(i);case D:return new u;case q:return w0(i)}}function F0(i,s){var l=s.length;if(!l)return i;var u=l-1;return s[u]=(l>1?"& ":"")+s[u],s=s.join(l>2?", ":" "),i.replace(Bm,`{
/* [wrapped with `+s+`] */
`)}function k0(i){return re(i)||Si(i)||!!(Vf&&i&&i[Vf])}function On(i,s){var l=typeof i;return s=s??pe,!!s&&(l=="number"||l!="symbol"&&Qm.test(i))&&i>-1&&i%1==0&&i<s}function pt(i,s,l){if(!We(l))return!1;var u=typeof s;return(u=="number"?Ct(l)&&On(s,l.length):u=="string"&&s in l)?Zt(l[s],i):!1}function Oa(i,s){if(re(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||Ft(i)?!0:Mm.test(i)||!Dm.test(i)||s!=null&&i in Re(s)}function B0(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}function Da(i){var s=bo(i),l=p[s];if(typeof l!="function"||!(s in _e.prototype))return!1;if(i===l)return!0;var u=Ra(l);return!!u&&i===u[0]}function W0(i){return!!zf&&zf in i}var U0=Js?Dn:Xa;function is(i){var s=i&&i.constructor,l=typeof s=="function"&&s.prototype||sr;return i===l}function zh(i){return i===i&&!We(i)}function Kh(i,s){return function(l){return l==null?!1:l[i]===s&&(s!==n||i in Re(l))}}function H0(i){var s=Ro(i,function(u){return l.size===_&&l.clear(),u}),l=s.cache;return s}function $0(i,s){var l=i[1],u=s[1],d=l|u,g=d<(Q|we|vt),m=u==vt&&l==Ee||u==vt&&l==Ot&&i[7].length<=s[8]||u==(vt|Ot)&&s[7].length<=s[8]&&l==Ee;if(!(g||m))return i;u&Q&&(i[2]=s[2],d|=l&Q?0:Le);var E=s[3];if(E){var x=i[3];i[3]=x?Th(x,E,s[4]):E,i[4]=x?jn(i[3],v):s[4]}return E=s[5],E&&(x=i[5],i[5]=x?Sh(x,E,s[6]):E,i[6]=x?jn(i[5],v):s[6]),E=s[7],E&&(i[7]=E),u&vt&&(i[8]=i[8]==null?s[8]:lt(i[8],s[8])),i[9]==null&&(i[9]=s[9]),i[0]=s[0],i[1]=d,i}function z0(i){var s=[];if(i!=null)for(var l in Re(i))s.push(l);return s}function K0(i){return eo.call(i)}function qh(i,s,l){return s=Ve(s===n?i.length-1:s,0),function(){for(var u=arguments,d=-1,g=Ve(u.length-s,0),m=T(g);++d<g;)m[d]=u[s+d];d=-1;for(var E=T(s+1);++d<s;)E[d]=u[d];return E[s]=l(m),Dt(i,this,E)}}function Gh(i,s){return s.length<2?i:Ii(i,Yt(s,0,-1))}function q0(i,s){for(var l=i.length,u=lt(s.length,l),d=Et(i);u--;){var g=s[u];i[u]=On(g,l)?d[g]:n}return i}function Ma(i,s){if(!(s==="constructor"&&typeof i[s]=="function")&&s!="__proto__")return i[s]}var Vh=Qh(gh),rs=oy||function(i,s){return rt.setTimeout(i,s)},La=Qh(_0);function Yh(i,s,l){var u=s+"";return La(i,F0(u,G0(D0(u),l)))}function Qh(i){var s=0,l=0;return function(){var u=uy(),d=Yi-(u-l);if(l=u,d>0){if(++s>=Vi)return arguments[0]}else s=0;return i.apply(n,arguments)}}function xo(i,s){var l=-1,u=i.length,d=u-1;for(s=s===n?u:s;++l<s;){var g=ma(l,d),m=i[g];i[g]=i[l],i[l]=m}return i.length=s,i}var Xh=H0(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(Lm,function(l,u,d,g){s.push(d?g.replace(zm,"$1"):u||l)}),s});function pn(i){if(typeof i=="string"||Ft(i))return i;var s=i+"";return s=="0"&&1/i==-xe?"-0":s}function Ti(i){if(i!=null){try{return Zs.call(i)}catch{}try{return i+""}catch{}}return""}function G0(i,s){return Kt(Bl,function(l){var u="_."+l[0];s&l[1]&&!Ys(i,u)&&i.push(u)}),i.sort()}function jh(i){if(i instanceof _e)return i.clone();var s=new Gt(i.__wrapped__,i.__chain__);return s.__actions__=Et(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}function V0(i,s,l){(l?pt(i,s,l):s===n)?s=1:s=Ve(se(s),0);var u=i==null?0:i.length;if(!u||s<1)return[];for(var d=0,g=0,m=T(oo(u/s));d<u;)m[g++]=Yt(i,d,d+=s);return m}function Y0(i){for(var s=-1,l=i==null?0:i.length,u=0,d=[];++s<l;){var g=i[s];g&&(d[u++]=g)}return d}function Q0(){var i=arguments.length;if(!i)return[];for(var s=T(i-1),l=arguments[0],u=i;u--;)s[u-1]=arguments[u];return Xn(re(l)?Et(l):[l],st(s,1))}var X0=le(function(i,s){return ze(i)?Jr(i,st(s,1,ze,!0)):[]}),j0=le(function(i,s){var l=Qt(s);return ze(l)&&(l=n),ze(i)?Jr(i,st(s,1,ze,!0),X(l,2)):[]}),J0=le(function(i,s){var l=Qt(s);return ze(l)&&(l=n),ze(i)?Jr(i,st(s,1,ze,!0),n,l):[]});function Z0(i,s,l){var u=i==null?0:i.length;return u?(s=l||s===n?1:se(s),Yt(i,s<0?0:s,u)):[]}function ew(i,s,l){var u=i==null?0:i.length;return u?(s=l||s===n?1:se(s),s=u-s,Yt(i,0,s<0?0:s)):[]}function tw(i,s){return i&&i.length?mo(i,X(s,3),!0,!0):[]}function nw(i,s){return i&&i.length?mo(i,X(s,3),!0):[]}function iw(i,s,l,u){var d=i==null?0:i.length;return d?(l&&typeof l!="number"&&pt(i,s,l)&&(l=0,u=d),Qy(i,s,l,u)):[]}function Jh(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var d=l==null?0:se(l);return d<0&&(d=Ve(u+d,0)),Qs(i,X(s,3),d)}function Zh(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var d=u-1;return l!==n&&(d=se(l),d=l<0?Ve(u+d,0):lt(d,u-1)),Qs(i,X(s,3),d,!0)}function ed(i){var s=i==null?0:i.length;return s?st(i,1):[]}function rw(i){var s=i==null?0:i.length;return s?st(i,xe):[]}function sw(i,s){var l=i==null?0:i.length;return l?(s=s===n?1:se(s),st(i,s)):[]}function ow(i){for(var s=-1,l=i==null?0:i.length,u={};++s<l;){var d=i[s];u[d[0]]=d[1]}return u}function td(i){return i&&i.length?i[0]:n}function lw(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var d=l==null?0:se(l);return d<0&&(d=Ve(u+d,0)),tr(i,s,d)}function aw(i){var s=i==null?0:i.length;return s?Yt(i,0,-1):[]}var cw=le(function(i){var s=ke(i,Ca);return s.length&&s[0]===i[0]?ha(s):[]}),uw=le(function(i){var s=Qt(i),l=ke(i,Ca);return s===Qt(l)?s=n:l.pop(),l.length&&l[0]===i[0]?ha(l,X(s,2)):[]}),fw=le(function(i){var s=Qt(i),l=ke(i,Ca);return s=typeof s=="function"?s:n,s&&l.pop(),l.length&&l[0]===i[0]?ha(l,n,s):[]});function hw(i,s){return i==null?"":ay.call(i,s)}function Qt(i){var s=i==null?0:i.length;return s?i[s-1]:n}function dw(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var d=u;return l!==n&&(d=se(l),d=d<0?Ve(u+d,0):lt(d,u-1)),s===s?Gv(i,s,d):Qs(i,Lf,d,!0)}function _w(i,s){return i&&i.length?hh(i,se(s)):n}var pw=le(nd);function nd(i,s){return i&&i.length&&s&&s.length?ga(i,s):i}function gw(i,s,l){return i&&i.length&&s&&s.length?ga(i,s,X(l,2)):i}function mw(i,s,l){return i&&i.length&&s&&s.length?ga(i,s,n,l):i}var vw=Pn(function(i,s){var l=i==null?0:i.length,u=aa(i,s);return ph(i,ke(s,function(d){return On(d,l)?+d:d}).sort(xh)),u});function yw(i,s){var l=[];if(!(i&&i.length))return l;var u=-1,d=[],g=i.length;for(s=X(s,3);++u<g;){var m=i[u];s(m,u,i)&&(l.push(m),d.push(u))}return ph(i,d),l}function Fa(i){return i==null?i:hy.call(i)}function ww(i,s,l){var u=i==null?0:i.length;return u?(l&&typeof l!="number"&&pt(i,s,l)?(s=0,l=u):(s=s==null?0:se(s),l=l===n?u:se(l)),Yt(i,s,l)):[]}function Ew(i,s){return go(i,s)}function Cw(i,s,l){return ya(i,s,X(l,2))}function bw(i,s){var l=i==null?0:i.length;if(l){var u=go(i,s);if(u<l&&Zt(i[u],s))return u}return-1}function Iw(i,s){return go(i,s,!0)}function xw(i,s,l){return ya(i,s,X(l,2),!0)}function Tw(i,s){var l=i==null?0:i.length;if(l){var u=go(i,s,!0)-1;if(Zt(i[u],s))return u}return-1}function Sw(i){return i&&i.length?mh(i):[]}function Aw(i,s){return i&&i.length?mh(i,X(s,2)):[]}function Rw(i){var s=i==null?0:i.length;return s?Yt(i,1,s):[]}function Nw(i,s,l){return i&&i.length?(s=l||s===n?1:se(s),Yt(i,0,s<0?0:s)):[]}function Pw(i,s,l){var u=i==null?0:i.length;return u?(s=l||s===n?1:se(s),s=u-s,Yt(i,s<0?0:s,u)):[]}function Ow(i,s){return i&&i.length?mo(i,X(s,3),!1,!0):[]}function Dw(i,s){return i&&i.length?mo(i,X(s,3)):[]}var Mw=le(function(i){return ei(st(i,1,ze,!0))}),Lw=le(function(i){var s=Qt(i);return ze(s)&&(s=n),ei(st(i,1,ze,!0),X(s,2))}),Fw=le(function(i){var s=Qt(i);return s=typeof s=="function"?s:n,ei(st(i,1,ze,!0),n,s)});function kw(i){return i&&i.length?ei(i):[]}function Bw(i,s){return i&&i.length?ei(i,X(s,2)):[]}function Ww(i,s){return s=typeof s=="function"?s:n,i&&i.length?ei(i,n,s):[]}function ka(i){if(!(i&&i.length))return[];var s=0;return i=Qn(i,function(l){if(ze(l))return s=Ve(l.length,s),!0}),ea(s,function(l){return ke(i,jl(l))})}function id(i,s){if(!(i&&i.length))return[];var l=ka(i);return s==null?l:ke(l,function(u){return Dt(s,n,u)})}var Uw=le(function(i,s){return ze(i)?Jr(i,s):[]}),Hw=le(function(i){return Ea(Qn(i,ze))}),$w=le(function(i){var s=Qt(i);return ze(s)&&(s=n),Ea(Qn(i,ze),X(s,2))}),zw=le(function(i){var s=Qt(i);return s=typeof s=="function"?s:n,Ea(Qn(i,ze),n,s)}),Kw=le(ka);function qw(i,s){return Eh(i||[],s||[],jr)}function Gw(i,s){return Eh(i||[],s||[],ts)}var Vw=le(function(i){var s=i.length,l=s>1?i[s-1]:n;return l=typeof l=="function"?(i.pop(),l):n,id(i,l)});function rd(i){var s=p(i);return s.__chain__=!0,s}function Yw(i,s){return s(i),i}function To(i,s){return s(i)}var Qw=Pn(function(i){var s=i.length,l=s?i[0]:0,u=this.__wrapped__,d=function(g){return aa(g,i)};return s>1||this.__actions__.length||!(u instanceof _e)||!On(l)?this.thru(d):(u=u.slice(l,+l+(s?1:0)),u.__actions__.push({func:To,args:[d],thisArg:n}),new Gt(u,this.__chain__).thru(function(g){return s&&!g.length&&g.push(n),g}))});function Xw(){return rd(this)}function jw(){return new Gt(this.value(),this.__chain__)}function Jw(){this.__values__===n&&(this.__values__=vd(this.value()));var i=this.__index__>=this.__values__.length,s=i?n:this.__values__[this.__index__++];return{done:i,value:s}}function Zw(){return this}function eE(i){for(var s,l=this;l instanceof uo;){var u=jh(l);u.__index__=0,u.__values__=n,s?d.__wrapped__=u:s=u;var d=u;l=l.__wrapped__}return d.__wrapped__=i,s}function tE(){var i=this.__wrapped__;if(i instanceof _e){var s=i;return this.__actions__.length&&(s=new _e(this)),s=s.reverse(),s.__actions__.push({func:To,args:[Fa],thisArg:n}),new Gt(s,this.__chain__)}return this.thru(Fa)}function nE(){return wh(this.__wrapped__,this.__actions__)}var iE=vo(function(i,s,l){Se.call(i,l)?++i[l]:Rn(i,l,1)});function rE(i,s,l){var u=re(i)?Df:Yy;return l&&pt(i,s,l)&&(s=n),u(i,X(s,3))}function sE(i,s){var l=re(i)?Qn:ih;return l(i,X(s,3))}var oE=Ph(Jh),lE=Ph(Zh);function aE(i,s){return st(So(i,s),1)}function cE(i,s){return st(So(i,s),xe)}function uE(i,s,l){return l=l===n?1:se(l),st(So(i,s),l)}function sd(i,s){var l=re(i)?Kt:Zn;return l(i,X(s,3))}function od(i,s){var l=re(i)?Rv:nh;return l(i,X(s,3))}var fE=vo(function(i,s,l){Se.call(i,l)?i[l].push(s):Rn(i,l,[s])});function hE(i,s,l,u){i=Ct(i)?i:dr(i),l=l&&!u?se(l):0;var d=i.length;return l<0&&(l=Ve(d+l,0)),Oo(i)?l<=d&&i.indexOf(s,l)>-1:!!d&&tr(i,s,l)>-1}var dE=le(function(i,s,l){var u=-1,d=typeof s=="function",g=Ct(i)?T(i.length):[];return Zn(i,function(m){g[++u]=d?Dt(s,m,l):Zr(m,s,l)}),g}),_E=vo(function(i,s,l){Rn(i,l,s)});function So(i,s){var l=re(i)?ke:ch;return l(i,X(s,3))}function pE(i,s,l,u){return i==null?[]:(re(s)||(s=s==null?[]:[s]),l=u?n:l,re(l)||(l=l==null?[]:[l]),dh(i,s,l))}var gE=vo(function(i,s,l){i[l?0:1].push(s)},function(){return[[],[]]});function mE(i,s,l){var u=re(i)?Ql:kf,d=arguments.length<3;return u(i,X(s,4),l,d,Zn)}function vE(i,s,l){var u=re(i)?Nv:kf,d=arguments.length<3;return u(i,X(s,4),l,d,nh)}function yE(i,s){var l=re(i)?Qn:ih;return l(i,No(X(s,3)))}function wE(i){var s=re(i)?Jf:h0;return s(i)}function EE(i,s,l){(l?pt(i,s,l):s===n)?s=1:s=se(s);var u=re(i)?zy:d0;return u(i,s)}function CE(i){var s=re(i)?Ky:p0;return s(i)}function bE(i){if(i==null)return 0;if(Ct(i))return Oo(i)?ir(i):i.length;var s=at(i);return s==S||s==D?i.size:_a(i).length}function IE(i,s,l){var u=re(i)?Xl:g0;return l&&pt(i,s,l)&&(s=n),u(i,X(s,3))}var xE=le(function(i,s){if(i==null)return[];var l=s.length;return l>1&&pt(i,s[0],s[1])?s=[]:l>2&&pt(s[0],s[1],s[2])&&(s=[s[0]]),dh(i,st(s,1),[])}),Ao=sy||function(){return rt.Date.now()};function TE(i,s){if(typeof s!="function")throw new qt(c);return i=se(i),function(){if(--i<1)return s.apply(this,arguments)}}function ld(i,s,l){return s=l?n:s,s=i&&s==null?i.length:s,Nn(i,vt,n,n,n,n,s)}function ad(i,s){var l;if(typeof s!="function")throw new qt(c);return i=se(i),function(){return--i>0&&(l=s.apply(this,arguments)),i<=1&&(s=n),l}}var Ba=le(function(i,s,l){var u=Q;if(l.length){var d=jn(l,fr(Ba));u|=qe}return Nn(i,u,s,l,d)}),cd=le(function(i,s,l){var u=Q|we;if(l.length){var d=jn(l,fr(cd));u|=qe}return Nn(s,u,i,l,d)});function ud(i,s,l){s=l?n:s;var u=Nn(i,Ee,n,n,n,n,n,s);return u.placeholder=ud.placeholder,u}function fd(i,s,l){s=l?n:s;var u=Nn(i,te,n,n,n,n,n,s);return u.placeholder=fd.placeholder,u}function hd(i,s,l){var u,d,g,m,E,x,N=0,P=!1,L=!1,H=!0;if(typeof i!="function")throw new qt(c);s=Xt(s)||0,We(l)&&(P=!!l.leading,L="maxWait"in l,g=L?Ve(Xt(l.maxWait)||0,s):g,H="trailing"in l?!!l.trailing:H);function G(Ke){var en=u,Ln=d;return u=d=n,N=Ke,m=i.apply(Ln,en),m}function J(Ke){return N=Ke,E=rs(de,s),P?G(Ke):m}function oe(Ke){var en=Ke-x,Ln=Ke-N,Pd=s-en;return L?lt(Pd,g-Ln):Pd}function Z(Ke){var en=Ke-x,Ln=Ke-N;return x===n||en>=s||en<0||L&&Ln>=g}function de(){var Ke=Ao();if(Z(Ke))return me(Ke);E=rs(de,oe(Ke))}function me(Ke){return E=n,H&&u?G(Ke):(u=d=n,m)}function kt(){E!==n&&Ch(E),N=0,u=x=d=E=n}function gt(){return E===n?m:me(Ao())}function Bt(){var Ke=Ao(),en=Z(Ke);if(u=arguments,d=this,x=Ke,en){if(E===n)return J(x);if(L)return Ch(E),E=rs(de,s),G(x)}return E===n&&(E=rs(de,s)),m}return Bt.cancel=kt,Bt.flush=gt,Bt}var SE=le(function(i,s){return th(i,1,s)}),AE=le(function(i,s,l){return th(i,Xt(s)||0,l)});function RE(i){return Nn(i,mi)}function Ro(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new qt(c);var l=function(){var u=arguments,d=s?s.apply(this,u):u[0],g=l.cache;if(g.has(d))return g.get(d);var m=i.apply(this,u);return l.cache=g.set(d,m)||g,m};return l.cache=new(Ro.Cache||An),l}Ro.Cache=An;function No(i){if(typeof i!="function")throw new qt(c);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}function NE(i){return ad(2,i)}var PE=m0(function(i,s){s=s.length==1&&re(s[0])?ke(s[0],Mt(X())):ke(st(s,1),Mt(X()));var l=s.length;return le(function(u){for(var d=-1,g=lt(u.length,l);++d<g;)u[d]=s[d].call(this,u[d]);return Dt(i,this,u)})}),Wa=le(function(i,s){var l=jn(s,fr(Wa));return Nn(i,qe,n,s,l)}),dd=le(function(i,s){var l=jn(s,fr(dd));return Nn(i,Ut,n,s,l)}),OE=Pn(function(i,s){return Nn(i,Ot,n,n,n,s)});function DE(i,s){if(typeof i!="function")throw new qt(c);return s=s===n?s:se(s),le(i,s)}function ME(i,s){if(typeof i!="function")throw new qt(c);return s=s==null?0:Ve(se(s),0),le(function(l){var u=l[s],d=ni(l,0,s);return u&&Xn(d,u),Dt(i,this,d)})}function LE(i,s,l){var u=!0,d=!0;if(typeof i!="function")throw new qt(c);return We(l)&&(u="leading"in l?!!l.leading:u,d="trailing"in l?!!l.trailing:d),hd(i,s,{leading:u,maxWait:s,trailing:d})}function FE(i){return ld(i,1)}function kE(i,s){return Wa(ba(s),i)}function BE(){if(!arguments.length)return[];var i=arguments[0];return re(i)?i:[i]}function WE(i){return Vt(i,R)}function UE(i,s){return s=typeof s=="function"?s:n,Vt(i,R,s)}function HE(i){return Vt(i,y|R)}function $E(i,s){return s=typeof s=="function"?s:n,Vt(i,y|R,s)}function zE(i,s){return s==null||eh(i,s,je(s))}function Zt(i,s){return i===s||i!==i&&s!==s}var KE=Co(fa),qE=Co(function(i,s){return i>=s}),Si=oh(function(){return arguments}())?oh:function(i){return $e(i)&&Se.call(i,"callee")&&!Gf.call(i,"callee")},re=T.isArray,GE=Sf?Mt(Sf):e0;function Ct(i){return i!=null&&Po(i.length)&&!Dn(i)}function ze(i){return $e(i)&&Ct(i)}function VE(i){return i===!0||i===!1||$e(i)&&_t(i)==Vn}var ii=ly||Xa,YE=Af?Mt(Af):t0;function QE(i){return $e(i)&&i.nodeType===1&&!ss(i)}function XE(i){if(i==null)return!0;if(Ct(i)&&(re(i)||typeof i=="string"||typeof i.splice=="function"||ii(i)||hr(i)||Si(i)))return!i.length;var s=at(i);if(s==S||s==D)return!i.size;if(is(i))return!_a(i).length;for(var l in i)if(Se.call(i,l))return!1;return!0}function jE(i,s){return es(i,s)}function JE(i,s,l){l=typeof l=="function"?l:n;var u=l?l(i,s):n;return u===n?es(i,s,n,l):!!u}function Ua(i){if(!$e(i))return!1;var s=_t(i);return s==Yn||s==Kr||typeof i.message=="string"&&typeof i.name=="string"&&!ss(i)}function ZE(i){return typeof i=="number"&&Yf(i)}function Dn(i){if(!We(i))return!1;var s=_t(i);return s==w||s==I||s==Xi||s==k}function _d(i){return typeof i=="number"&&i==se(i)}function Po(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=pe}function We(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}function $e(i){return i!=null&&typeof i=="object"}var pd=Rf?Mt(Rf):i0;function eC(i,s){return i===s||da(i,s,Na(s))}function tC(i,s,l){return l=typeof l=="function"?l:n,da(i,s,Na(s),l)}function nC(i){return gd(i)&&i!=+i}function iC(i){if(U0(i))throw new ne(a);return lh(i)}function rC(i){return i===null}function sC(i){return i==null}function gd(i){return typeof i=="number"||$e(i)&&_t(i)==O}function ss(i){if(!$e(i)||_t(i)!=F)return!1;var s=io(i);if(s===null)return!0;var l=Se.call(s,"constructor")&&s.constructor;return typeof l=="function"&&l instanceof l&&Zs.call(l)==ty}var Ha=Nf?Mt(Nf):r0;function oC(i){return _d(i)&&i>=-pe&&i<=pe}var md=Pf?Mt(Pf):s0;function Oo(i){return typeof i=="string"||!re(i)&&$e(i)&&_t(i)==V}function Ft(i){return typeof i=="symbol"||$e(i)&&_t(i)==q}var hr=Of?Mt(Of):o0;function lC(i){return i===n}function aC(i){return $e(i)&&at(i)==j}function cC(i){return $e(i)&&_t(i)==ce}var uC=Co(pa),fC=Co(function(i,s){return i<=s});function vd(i){if(!i)return[];if(Ct(i))return Oo(i)?jt(i):Et(i);if(Gr&&i[Gr])return zv(i[Gr]());var s=at(i),l=s==S?na:s==D?Xs:dr;return l(i)}function Mn(i){if(!i)return i===0?i:0;if(i=Xt(i),i===xe||i===-xe){var s=i<0?-1:1;return s*In}return i===i?i:0}function se(i){var s=Mn(i),l=s%1;return s===s?l?s-l:s:0}function yd(i){return i?bi(se(i),0,Xe):0}function Xt(i){if(typeof i=="number")return i;if(Ft(i))return xn;if(We(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=We(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=Bf(i);var l=Gm.test(i);return l||Ym.test(i)?Tv(i.slice(2),l?2:8):qm.test(i)?xn:+i}function wd(i){return _n(i,bt(i))}function hC(i){return i?bi(se(i),-pe,pe):i===0?i:0}function Te(i){return i==null?"":Lt(i)}var dC=cr(function(i,s){if(is(s)||Ct(s)){_n(s,je(s),i);return}for(var l in s)Se.call(s,l)&&jr(i,l,s[l])}),Ed=cr(function(i,s){_n(s,bt(s),i)}),Do=cr(function(i,s,l,u){_n(s,bt(s),i,u)}),_C=cr(function(i,s,l,u){_n(s,je(s),i,u)}),pC=Pn(aa);function gC(i,s){var l=ar(i);return s==null?l:Zf(l,s)}var mC=le(function(i,s){i=Re(i);var l=-1,u=s.length,d=u>2?s[2]:n;for(d&&pt(s[0],s[1],d)&&(u=1);++l<u;)for(var g=s[l],m=bt(g),E=-1,x=m.length;++E<x;){var N=m[E],P=i[N];(P===n||Zt(P,sr[N])&&!Se.call(i,N))&&(i[N]=g[N])}return i}),vC=le(function(i){return i.push(n,Bh),Dt(Cd,n,i)});function yC(i,s){return Mf(i,X(s,3),dn)}function wC(i,s){return Mf(i,X(s,3),ua)}function EC(i,s){return i==null?i:ca(i,X(s,3),bt)}function CC(i,s){return i==null?i:rh(i,X(s,3),bt)}function bC(i,s){return i&&dn(i,X(s,3))}function IC(i,s){return i&&ua(i,X(s,3))}function xC(i){return i==null?[]:_o(i,je(i))}function TC(i){return i==null?[]:_o(i,bt(i))}function $a(i,s,l){var u=i==null?n:Ii(i,s);return u===n?l:u}function SC(i,s){return i!=null&&Hh(i,s,Xy)}function za(i,s){return i!=null&&Hh(i,s,jy)}var AC=Dh(function(i,s,l){s!=null&&typeof s.toString!="function"&&(s=eo.call(s)),i[s]=l},qa(It)),RC=Dh(function(i,s,l){s!=null&&typeof s.toString!="function"&&(s=eo.call(s)),Se.call(i,s)?i[s].push(l):i[s]=[l]},X),NC=le(Zr);function je(i){return Ct(i)?jf(i):_a(i)}function bt(i){return Ct(i)?jf(i,!0):l0(i)}function PC(i,s){var l={};return s=X(s,3),dn(i,function(u,d,g){Rn(l,s(u,d,g),u)}),l}function OC(i,s){var l={};return s=X(s,3),dn(i,function(u,d,g){Rn(l,d,s(u,d,g))}),l}var DC=cr(function(i,s,l){po(i,s,l)}),Cd=cr(function(i,s,l,u){po(i,s,l,u)}),MC=Pn(function(i,s){var l={};if(i==null)return l;var u=!1;s=ke(s,function(g){return g=ti(g,i),u||(u=g.length>1),g}),_n(i,Aa(i),l),u&&(l=Vt(l,y|C|R,A0));for(var d=s.length;d--;)wa(l,s[d]);return l});function LC(i,s){return bd(i,No(X(s)))}var FC=Pn(function(i,s){return i==null?{}:c0(i,s)});function bd(i,s){if(i==null)return{};var l=ke(Aa(i),function(u){return[u]});return s=X(s),_h(i,l,function(u,d){return s(u,d[0])})}function kC(i,s,l){s=ti(s,i);var u=-1,d=s.length;for(d||(d=1,i=n);++u<d;){var g=i==null?n:i[pn(s[u])];g===n&&(u=d,g=l),i=Dn(g)?g.call(i):g}return i}function BC(i,s,l){return i==null?i:ts(i,s,l)}function WC(i,s,l,u){return u=typeof u=="function"?u:n,i==null?i:ts(i,s,l,u)}var Id=Fh(je),xd=Fh(bt);function UC(i,s,l){var u=re(i),d=u||ii(i)||hr(i);if(s=X(s,4),l==null){var g=i&&i.constructor;d?l=u?new g:[]:We(i)?l=Dn(g)?ar(io(i)):{}:l={}}return(d?Kt:dn)(i,function(m,E,x){return s(l,m,E,x)}),l}function HC(i,s){return i==null?!0:wa(i,s)}function $C(i,s,l){return i==null?i:yh(i,s,ba(l))}function zC(i,s,l,u){return u=typeof u=="function"?u:n,i==null?i:yh(i,s,ba(l),u)}function dr(i){return i==null?[]:ta(i,je(i))}function KC(i){return i==null?[]:ta(i,bt(i))}function qC(i,s,l){return l===n&&(l=s,s=n),l!==n&&(l=Xt(l),l=l===l?l:0),s!==n&&(s=Xt(s),s=s===s?s:0),bi(Xt(i),s,l)}function GC(i,s,l){return s=Mn(s),l===n?(l=s,s=0):l=Mn(l),i=Xt(i),Jy(i,s,l)}function VC(i,s,l){if(l&&typeof l!="boolean"&&pt(i,s,l)&&(s=l=n),l===n&&(typeof s=="boolean"?(l=s,s=n):typeof i=="boolean"&&(l=i,i=n)),i===n&&s===n?(i=0,s=1):(i=Mn(i),s===n?(s=i,i=0):s=Mn(s)),i>s){var u=i;i=s,s=u}if(l||i%1||s%1){var d=Qf();return lt(i+d*(s-i+xv("1e-"+((d+"").length-1))),s)}return ma(i,s)}var YC=ur(function(i,s,l){return s=s.toLowerCase(),i+(l?Td(s):s)});function Td(i){return Ka(Te(i).toLowerCase())}function Sd(i){return i=Te(i),i&&i.replace(Xm,Bv).replace(pv,"")}function QC(i,s,l){i=Te(i),s=Lt(s);var u=i.length;l=l===n?u:bi(se(l),0,u);var d=l;return l-=s.length,l>=0&&i.slice(l,d)==s}function XC(i){return i=Te(i),i&&Nm.test(i)?i.replace(rf,Wv):i}function jC(i){return i=Te(i),i&&Fm.test(i)?i.replace(Wl,"\\$&"):i}var JC=ur(function(i,s,l){return i+(l?"-":"")+s.toLowerCase()}),ZC=ur(function(i,s,l){return i+(l?" ":"")+s.toLowerCase()}),eb=Nh("toLowerCase");function tb(i,s,l){i=Te(i),s=se(s);var u=s?ir(i):0;if(!s||u>=s)return i;var d=(s-u)/2;return Eo(lo(d),l)+i+Eo(oo(d),l)}function nb(i,s,l){i=Te(i),s=se(s);var u=s?ir(i):0;return s&&u<s?i+Eo(s-u,l):i}function ib(i,s,l){i=Te(i),s=se(s);var u=s?ir(i):0;return s&&u<s?Eo(s-u,l)+i:i}function rb(i,s,l){return l||s==null?s=0:s&&(s=+s),fy(Te(i).replace(Ul,""),s||0)}function sb(i,s,l){return(l?pt(i,s,l):s===n)?s=1:s=se(s),va(Te(i),s)}function ob(){var i=arguments,s=Te(i[0]);return i.length<3?s:s.replace(i[1],i[2])}var lb=ur(function(i,s,l){return i+(l?"_":"")+s.toLowerCase()});function ab(i,s,l){return l&&typeof l!="number"&&pt(i,s,l)&&(s=l=n),l=l===n?Xe:l>>>0,l?(i=Te(i),i&&(typeof s=="string"||s!=null&&!Ha(s))&&(s=Lt(s),!s&&nr(i))?ni(jt(i),0,l):i.split(s,l)):[]}var cb=ur(function(i,s,l){return i+(l?" ":"")+Ka(s)});function ub(i,s,l){return i=Te(i),l=l==null?0:bi(se(l),0,i.length),s=Lt(s),i.slice(l,l+s.length)==s}function fb(i,s,l){var u=p.templateSettings;l&&pt(i,s,l)&&(s=n),i=Te(i),s=Do({},s,u,kh);var d=Do({},s.imports,u.imports,kh),g=je(d),m=ta(d,g),E,x,N=0,P=s.interpolate||qs,L="__p += '",H=ia((s.escape||qs).source+"|"+P.source+"|"+(P===sf?Km:qs).source+"|"+(s.evaluate||qs).source+"|$","g"),G="//# sourceURL="+(Se.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wv+"]")+`
`;i.replace(H,function(Z,de,me,kt,gt,Bt){return me||(me=kt),L+=i.slice(N,Bt).replace(jm,Uv),de&&(E=!0,L+=`' +
__e(`+de+`) +
'`),gt&&(x=!0,L+=`';
`+gt+`;
__p += '`),me&&(L+=`' +
((__t = (`+me+`)) == null ? '' : __t) +
'`),N=Bt+Z.length,Z}),L+=`';
`;var J=Se.call(s,"variable")&&s.variable;if(!J)L=`with (obj) {
`+L+`
}
`;else if($m.test(J))throw new ne(f);L=(x?L.replace(Tm,""):L).replace(Sm,"$1").replace(Am,"$1;"),L="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(E?", __e = _.escape":"")+(x?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+L+`return __p
}`;var oe=Rd(function(){return Ce(g,G+"return "+L).apply(n,m)});if(oe.source=L,Ua(oe))throw oe;return oe}function hb(i){return Te(i).toLowerCase()}function db(i){return Te(i).toUpperCase()}function _b(i,s,l){if(i=Te(i),i&&(l||s===n))return Bf(i);if(!i||!(s=Lt(s)))return i;var u=jt(i),d=jt(s),g=Wf(u,d),m=Uf(u,d)+1;return ni(u,g,m).join("")}function pb(i,s,l){if(i=Te(i),i&&(l||s===n))return i.slice(0,$f(i)+1);if(!i||!(s=Lt(s)))return i;var u=jt(i),d=Uf(u,jt(s))+1;return ni(u,0,d).join("")}function gb(i,s,l){if(i=Te(i),i&&(l||s===n))return i.replace(Ul,"");if(!i||!(s=Lt(s)))return i;var u=jt(i),d=Wf(u,jt(s));return ni(u,d).join("")}function mb(i,s){var l=bn,u=vi;if(We(s)){var d="separator"in s?s.separator:d;l="length"in s?se(s.length):l,u="omission"in s?Lt(s.omission):u}i=Te(i);var g=i.length;if(nr(i)){var m=jt(i);g=m.length}if(l>=g)return i;var E=l-ir(u);if(E<1)return u;var x=m?ni(m,0,E).join(""):i.slice(0,E);if(d===n)return x+u;if(m&&(E+=x.length-E),Ha(d)){if(i.slice(E).search(d)){var N,P=x;for(d.global||(d=ia(d.source,Te(of.exec(d))+"g")),d.lastIndex=0;N=d.exec(P);)var L=N.index;x=x.slice(0,L===n?E:L)}}else if(i.indexOf(Lt(d),E)!=E){var H=x.lastIndexOf(d);H>-1&&(x=x.slice(0,H))}return x+u}function vb(i){return i=Te(i),i&&Rm.test(i)?i.replace(nf,Vv):i}var yb=ur(function(i,s,l){return i+(l?" ":"")+s.toUpperCase()}),Ka=Nh("toUpperCase");function Ad(i,s,l){return i=Te(i),s=l?n:s,s===n?$v(i)?Xv(i):Dv(i):i.match(s)||[]}var Rd=le(function(i,s){try{return Dt(i,n,s)}catch(l){return Ua(l)?l:new ne(l)}}),wb=Pn(function(i,s){return Kt(s,function(l){l=pn(l),Rn(i,l,Ba(i[l],i))}),i});function Eb(i){var s=i==null?0:i.length,l=X();return i=s?ke(i,function(u){if(typeof u[1]!="function")throw new qt(c);return[l(u[0]),u[1]]}):[],le(function(u){for(var d=-1;++d<s;){var g=i[d];if(Dt(g[0],this,u))return Dt(g[1],this,u)}})}function Cb(i){return Vy(Vt(i,y))}function qa(i){return function(){return i}}function bb(i,s){return i==null||i!==i?s:i}var Ib=Oh(),xb=Oh(!0);function It(i){return i}function Ga(i){return ah(typeof i=="function"?i:Vt(i,y))}function Tb(i){return uh(Vt(i,y))}function Sb(i,s){return fh(i,Vt(s,y))}var Ab=le(function(i,s){return function(l){return Zr(l,i,s)}}),Rb=le(function(i,s){return function(l){return Zr(i,l,s)}});function Va(i,s,l){var u=je(s),d=_o(s,u);l==null&&!(We(s)&&(d.length||!u.length))&&(l=s,s=i,i=this,d=_o(s,je(s)));var g=!(We(l)&&"chain"in l)||!!l.chain,m=Dn(i);return Kt(d,function(E){var x=s[E];i[E]=x,m&&(i.prototype[E]=function(){var N=this.__chain__;if(g||N){var P=i(this.__wrapped__),L=P.__actions__=Et(this.__actions__);return L.push({func:x,args:arguments,thisArg:i}),P.__chain__=N,P}return x.apply(i,Xn([this.value()],arguments))})}),i}function Nb(){return rt._===this&&(rt._=ny),this}function Ya(){}function Pb(i){return i=se(i),le(function(s){return hh(s,i)})}var Ob=xa(ke),Db=xa(Df),Mb=xa(Xl);function Nd(i){return Oa(i)?jl(pn(i)):u0(i)}function Lb(i){return function(s){return i==null?n:Ii(i,s)}}var Fb=Mh(),kb=Mh(!0);function Qa(){return[]}function Xa(){return!1}function Bb(){return{}}function Wb(){return""}function Ub(){return!0}function Hb(i,s){if(i=se(i),i<1||i>pe)return[];var l=Xe,u=lt(i,Xe);s=X(s),i-=Xe;for(var d=ea(u,s);++l<i;)s(l);return d}function $b(i){return re(i)?ke(i,pn):Ft(i)?[i]:Et(Xh(Te(i)))}function zb(i){var s=++ey;return Te(i)+s}var Kb=wo(function(i,s){return i+s},0),qb=Ta("ceil"),Gb=wo(function(i,s){return i/s},1),Vb=Ta("floor");function Yb(i){return i&&i.length?ho(i,It,fa):n}function Qb(i,s){return i&&i.length?ho(i,X(s,2),fa):n}function Xb(i){return Ff(i,It)}function jb(i,s){return Ff(i,X(s,2))}function Jb(i){return i&&i.length?ho(i,It,pa):n}function Zb(i,s){return i&&i.length?ho(i,X(s,2),pa):n}var eI=wo(function(i,s){return i*s},1),tI=Ta("round"),nI=wo(function(i,s){return i-s},0);function iI(i){return i&&i.length?Zl(i,It):0}function rI(i,s){return i&&i.length?Zl(i,X(s,2)):0}return p.after=TE,p.ary=ld,p.assign=dC,p.assignIn=Ed,p.assignInWith=Do,p.assignWith=_C,p.at=pC,p.before=ad,p.bind=Ba,p.bindAll=wb,p.bindKey=cd,p.castArray=BE,p.chain=rd,p.chunk=V0,p.compact=Y0,p.concat=Q0,p.cond=Eb,p.conforms=Cb,p.constant=qa,p.countBy=iE,p.create=gC,p.curry=ud,p.curryRight=fd,p.debounce=hd,p.defaults=mC,p.defaultsDeep=vC,p.defer=SE,p.delay=AE,p.difference=X0,p.differenceBy=j0,p.differenceWith=J0,p.drop=Z0,p.dropRight=ew,p.dropRightWhile=tw,p.dropWhile=nw,p.fill=iw,p.filter=sE,p.flatMap=aE,p.flatMapDeep=cE,p.flatMapDepth=uE,p.flatten=ed,p.flattenDeep=rw,p.flattenDepth=sw,p.flip=RE,p.flow=Ib,p.flowRight=xb,p.fromPairs=ow,p.functions=xC,p.functionsIn=TC,p.groupBy=fE,p.initial=aw,p.intersection=cw,p.intersectionBy=uw,p.intersectionWith=fw,p.invert=AC,p.invertBy=RC,p.invokeMap=dE,p.iteratee=Ga,p.keyBy=_E,p.keys=je,p.keysIn=bt,p.map=So,p.mapKeys=PC,p.mapValues=OC,p.matches=Tb,p.matchesProperty=Sb,p.memoize=Ro,p.merge=DC,p.mergeWith=Cd,p.method=Ab,p.methodOf=Rb,p.mixin=Va,p.negate=No,p.nthArg=Pb,p.omit=MC,p.omitBy=LC,p.once=NE,p.orderBy=pE,p.over=Ob,p.overArgs=PE,p.overEvery=Db,p.overSome=Mb,p.partial=Wa,p.partialRight=dd,p.partition=gE,p.pick=FC,p.pickBy=bd,p.property=Nd,p.propertyOf=Lb,p.pull=pw,p.pullAll=nd,p.pullAllBy=gw,p.pullAllWith=mw,p.pullAt=vw,p.range=Fb,p.rangeRight=kb,p.rearg=OE,p.reject=yE,p.remove=yw,p.rest=DE,p.reverse=Fa,p.sampleSize=EE,p.set=BC,p.setWith=WC,p.shuffle=CE,p.slice=ww,p.sortBy=xE,p.sortedUniq=Sw,p.sortedUniqBy=Aw,p.split=ab,p.spread=ME,p.tail=Rw,p.take=Nw,p.takeRight=Pw,p.takeRightWhile=Ow,p.takeWhile=Dw,p.tap=Yw,p.throttle=LE,p.thru=To,p.toArray=vd,p.toPairs=Id,p.toPairsIn=xd,p.toPath=$b,p.toPlainObject=wd,p.transform=UC,p.unary=FE,p.union=Mw,p.unionBy=Lw,p.unionWith=Fw,p.uniq=kw,p.uniqBy=Bw,p.uniqWith=Ww,p.unset=HC,p.unzip=ka,p.unzipWith=id,p.update=$C,p.updateWith=zC,p.values=dr,p.valuesIn=KC,p.without=Uw,p.words=Ad,p.wrap=kE,p.xor=Hw,p.xorBy=$w,p.xorWith=zw,p.zip=Kw,p.zipObject=qw,p.zipObjectDeep=Gw,p.zipWith=Vw,p.entries=Id,p.entriesIn=xd,p.extend=Ed,p.extendWith=Do,Va(p,p),p.add=Kb,p.attempt=Rd,p.camelCase=YC,p.capitalize=Td,p.ceil=qb,p.clamp=qC,p.clone=WE,p.cloneDeep=HE,p.cloneDeepWith=$E,p.cloneWith=UE,p.conformsTo=zE,p.deburr=Sd,p.defaultTo=bb,p.divide=Gb,p.endsWith=QC,p.eq=Zt,p.escape=XC,p.escapeRegExp=jC,p.every=rE,p.find=oE,p.findIndex=Jh,p.findKey=yC,p.findLast=lE,p.findLastIndex=Zh,p.findLastKey=wC,p.floor=Vb,p.forEach=sd,p.forEachRight=od,p.forIn=EC,p.forInRight=CC,p.forOwn=bC,p.forOwnRight=IC,p.get=$a,p.gt=KE,p.gte=qE,p.has=SC,p.hasIn=za,p.head=td,p.identity=It,p.includes=hE,p.indexOf=lw,p.inRange=GC,p.invoke=NC,p.isArguments=Si,p.isArray=re,p.isArrayBuffer=GE,p.isArrayLike=Ct,p.isArrayLikeObject=ze,p.isBoolean=VE,p.isBuffer=ii,p.isDate=YE,p.isElement=QE,p.isEmpty=XE,p.isEqual=jE,p.isEqualWith=JE,p.isError=Ua,p.isFinite=ZE,p.isFunction=Dn,p.isInteger=_d,p.isLength=Po,p.isMap=pd,p.isMatch=eC,p.isMatchWith=tC,p.isNaN=nC,p.isNative=iC,p.isNil=sC,p.isNull=rC,p.isNumber=gd,p.isObject=We,p.isObjectLike=$e,p.isPlainObject=ss,p.isRegExp=Ha,p.isSafeInteger=oC,p.isSet=md,p.isString=Oo,p.isSymbol=Ft,p.isTypedArray=hr,p.isUndefined=lC,p.isWeakMap=aC,p.isWeakSet=cC,p.join=hw,p.kebabCase=JC,p.last=Qt,p.lastIndexOf=dw,p.lowerCase=ZC,p.lowerFirst=eb,p.lt=uC,p.lte=fC,p.max=Yb,p.maxBy=Qb,p.mean=Xb,p.meanBy=jb,p.min=Jb,p.minBy=Zb,p.stubArray=Qa,p.stubFalse=Xa,p.stubObject=Bb,p.stubString=Wb,p.stubTrue=Ub,p.multiply=eI,p.nth=_w,p.noConflict=Nb,p.noop=Ya,p.now=Ao,p.pad=tb,p.padEnd=nb,p.padStart=ib,p.parseInt=rb,p.random=VC,p.reduce=mE,p.reduceRight=vE,p.repeat=sb,p.replace=ob,p.result=kC,p.round=tI,p.runInContext=b,p.sample=wE,p.size=bE,p.snakeCase=lb,p.some=IE,p.sortedIndex=Ew,p.sortedIndexBy=Cw,p.sortedIndexOf=bw,p.sortedLastIndex=Iw,p.sortedLastIndexBy=xw,p.sortedLastIndexOf=Tw,p.startCase=cb,p.startsWith=ub,p.subtract=nI,p.sum=iI,p.sumBy=rI,p.template=fb,p.times=Hb,p.toFinite=Mn,p.toInteger=se,p.toLength=yd,p.toLower=hb,p.toNumber=Xt,p.toSafeInteger=hC,p.toString=Te,p.toUpper=db,p.trim=_b,p.trimEnd=pb,p.trimStart=gb,p.truncate=mb,p.unescape=vb,p.uniqueId=zb,p.upperCase=yb,p.upperFirst=Ka,p.each=sd,p.eachRight=od,p.first=td,Va(p,function(){var i={};return dn(p,function(s,l){Se.call(p.prototype,l)||(i[l]=s)}),i}(),{chain:!1}),p.VERSION=r,Kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){p[i].placeholder=p}),Kt(["drop","take"],function(i,s){_e.prototype[i]=function(l){l=l===n?1:Ve(se(l),0);var u=this.__filtered__&&!s?new _e(this):this.clone();return u.__filtered__?u.__takeCount__=lt(l,u.__takeCount__):u.__views__.push({size:lt(l,Xe),type:i+(u.__dir__<0?"Right":"")}),u},_e.prototype[i+"Right"]=function(l){return this.reverse()[i](l).reverse()}}),Kt(["filter","map","takeWhile"],function(i,s){var l=s+1,u=l==Qi||l==nt;_e.prototype[i]=function(d){var g=this.clone();return g.__iteratees__.push({iteratee:X(d,3),type:l}),g.__filtered__=g.__filtered__||u,g}}),Kt(["head","last"],function(i,s){var l="take"+(s?"Right":"");_e.prototype[i]=function(){return this[l](1).value()[0]}}),Kt(["initial","tail"],function(i,s){var l="drop"+(s?"":"Right");_e.prototype[i]=function(){return this.__filtered__?new _e(this):this[l](1)}}),_e.prototype.compact=function(){return this.filter(It)},_e.prototype.find=function(i){return this.filter(i).head()},_e.prototype.findLast=function(i){return this.reverse().find(i)},_e.prototype.invokeMap=le(function(i,s){return typeof i=="function"?new _e(this):this.map(function(l){return Zr(l,i,s)})}),_e.prototype.reject=function(i){return this.filter(No(X(i)))},_e.prototype.slice=function(i,s){i=se(i);var l=this;return l.__filtered__&&(i>0||s<0)?new _e(l):(i<0?l=l.takeRight(-i):i&&(l=l.drop(i)),s!==n&&(s=se(s),l=s<0?l.dropRight(-s):l.take(s-i)),l)},_e.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},_e.prototype.toArray=function(){return this.take(Xe)},dn(_e.prototype,function(i,s){var l=/^(?:filter|find|map|reject)|While$/.test(s),u=/^(?:head|last)$/.test(s),d=p[u?"take"+(s=="last"?"Right":""):s],g=u||/^find/.test(s);d&&(p.prototype[s]=function(){var m=this.__wrapped__,E=u?[1]:arguments,x=m instanceof _e,N=E[0],P=x||re(m),L=function(de){var me=d.apply(p,Xn([de],E));return u&&H?me[0]:me};P&&l&&typeof N=="function"&&N.length!=1&&(x=P=!1);var H=this.__chain__,G=!!this.__actions__.length,J=g&&!H,oe=x&&!G;if(!g&&P){m=oe?m:new _e(this);var Z=i.apply(m,E);return Z.__actions__.push({func:To,args:[L],thisArg:n}),new Gt(Z,H)}return J&&oe?i.apply(this,E):(Z=this.thru(L),J?u?Z.value()[0]:Z.value():Z)})}),Kt(["pop","push","shift","sort","splice","unshift"],function(i){var s=js[i],l=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",u=/^(?:pop|shift)$/.test(i);p.prototype[i]=function(){var d=arguments;if(u&&!this.__chain__){var g=this.value();return s.apply(re(g)?g:[],d)}return this[l](function(m){return s.apply(re(m)?m:[],d)})}}),dn(_e.prototype,function(i,s){var l=p[s];if(l){var u=l.name+"";Se.call(lr,u)||(lr[u]=[]),lr[u].push({name:s,func:l})}}),lr[yo(n,we).name]=[{name:"wrapper",func:n}],_e.prototype.clone=vy,_e.prototype.reverse=yy,_e.prototype.value=wy,p.prototype.at=Qw,p.prototype.chain=Xw,p.prototype.commit=jw,p.prototype.next=Jw,p.prototype.plant=eE,p.prototype.reverse=tE,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=nE,p.prototype.first=p.prototype.head,Gr&&(p.prototype[Gr]=Zw),p},rr=jv();yi?((yi.exports=rr)._=rr,Gl._=rr):rt._=rr}).call(ls)})(gl,gl.exports);var XN=gl.exports;const jN=DT(XN),JN=640,ZN=640,eP=3e4,tP=12e4,nP=t=>(Ap("data-v-166ab1e9"),t=t(),Rp(),t),iP={width:52,height:72,style:{position:"absolute",left:"0",top:"0"}},rP=nP(()=>En("defs",null,[En("filter",{id:"shadow"},[En("feDropShadow",{dx:"1",dy:"1",stdDeviation:"3"})])],-1)),sP={style:{position:"absolute",left:"0",top:"0.2em",right:"0","text-align":"center","z-index":"1"}},oP=52,lP=67,aP=Fr({__name:"DynamicMarkers",props:{width:{},height:{}},setup(t){const e=t,n=Wi(Date.now()),r=Wi([]);QN(gi().sharingKey,tP,h=>{h?r.value=jN.sortBy(Object.entries(h).map(([_,v])=>({...v,key:_})),_=>_.timestamp):r.value=[]});function o(h){return h.key.substring(h.key.length-4)}function a(h){return`hsl(${parseInt(h.key.substring(h.key.length-4),16)/65536*360} 60% 80%)`}function c(h){const _={width:e.width,height:e.height},{parsedZoom:v,parsedCenter:y}=gi(),C=Math.pow(2,v),R=jo(y),W=jo(h.coordinates),z={x:(W.x-R.x)*C,y:(W.y-R.y)*C},Q=n.value-h.timestamp>eP;return{left:Math.round(_.width/2+z.x-oP/2)+"px",top:Math.round(_.height/2+z.y-lP)+"px",opacity:Q?.5:1,"z-index":Q?10:1}}let f=null;return Fs(()=>{f=setInterval(()=>n.value=Date.now(),1e4)}),kr(()=>{clearInterval(f)}),(h,_)=>(wn(!0),Bn(nn,null,Sx(Wt(r),v=>(wn(),Bn("div",{key:v.key,class:"circle",style:hi(c(v))},[(wn(),Bn("svg",iP,[rP,En("path",{d:`
M 8.76 36
A 20 20 1 1 1 43.32 36
L 26 66
Z`,style:hi({fill:a(v),filter:"url(#shadow)"}),class:"marker"},null,4)])),En("div",sP,vI(o(v)),1)],4))),128))}});const cP=pu(aP,[["__scopeId","data-v-166ab1e9"]]),uP=Fr({__name:"OfferLocation",setup(t){const e=Wi(GN()),n=Wi(0);function r(){n.value=navigator.geolocation.watchPosition(a=>{YN({lat:a.coords.latitude,lng:a.coords.longitude},a.timestamp)}),e.value=!0,Z_(!0)}function o(){navigator.geolocation.clearWatch(n.value),e.value=!1,Z_(!1)}return Fs(()=>{e.value&&r()}),kr(()=>{n.value&&navigator.geolocation.clearWatch(n.value)}),(a,c)=>e.value?(wn(),Bn("button",{key:0,id:"send-location",style:{right:"10px",top:"10px",position:"fixed"},onClick:o},"Stop sending location")):(wn(),Bn("button",{key:1,id:"send-location",style:{right:"10px",top:"10px",position:"fixed"},onClick:r},"Send location"))}}),xm=t=>(Ap("data-v-6b0ab187"),t=t(),Rp(),t),fP=xm(()=>En("div",{class:"marker"},null,-1)),hP=xm(()=>En("div",{class:"label"}," You are here ",-1)),dP=[fP,hP],_P=20,pP=20,gP=Fr({__name:"SelfLocation",props:{width:{},height:{}},setup(t){const e=t,n=Wi({lat:0,lng:0}),r=Wi(0);function o(){r.value=navigator.geolocation.watchPosition(f=>{n.value={lat:f.coords.latitude,lng:f.coords.longitude}})}function a(){navigator.geolocation.clearWatch(r.value)}Fs(()=>{o()}),kr(()=>{a()});function c(f){const h={width:e.width,height:e.height},{parsedZoom:_,parsedCenter:v}=gi(),y=Math.pow(2,_),C=jo(v),R=jo(f),W={x:(R.x-C.x)*y,y:(R.y-C.y)*y};return{left:Math.round(h.width/2+W.x-_P/2)+"px",top:Math.round(h.height/2+W.y-pP/2)+"px"}}return(f,h)=>(wn(),Bn("div",{class:"self-marker",style:hi(c(n.value))},dP,4))}});const mP=pu(gP,[["__scopeId","data-v-6b0ab187"]]),vP=Fr({__name:"App",setup(t){const e=JN,n=ZN,{zoom:r,center:o}=gi();return(a,c)=>(wn(),Bn(nn,null,[En("div",{style:hi({position:"relative",width:Wt(e)+"px",height:Wt(n)+"px",overflow:"hidden"})},[Tt(KT),Tt(HT,{center:Wt(o),zoom:Wt(r),mapWidth:Wt(e),mapHeight:Wt(n)},null,8,["center","zoom","mapWidth","mapHeight"]),Tt(cP,{width:Wt(e),height:Wt(n)},null,8,["width","height"]),Tt(mP,{width:Wt(e),height:Wt(n)},null,8,["width","height"])],4),Tt(uP)],64))}});PT(vP).mount("#app");window.addEventListener("DOMContentLoaded",()=>{zN(gi())});window.addEventListener("load",()=>{setTimeout(()=>{window.scrollTo((document.body.scrollWidth-document.documentElement.clientWidth)/2,(document.body.scrollHeight-document.documentElement.clientHeight)/2)},50)});
