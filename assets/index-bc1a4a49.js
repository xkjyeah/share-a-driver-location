(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function zc(t,e){const n=Object.create(null),r=t.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return e?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const Be={},hr=[],an=()=>{},eI=()=>!1,tI=/^on[^a-z]/,fl=t=>tI.test(t),Kc=t=>t.startsWith("onUpdate:"),tt=Object.assign,qc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},nI=Object.prototype.hasOwnProperty,ve=(t,e)=>nI.call(t,e),ie=Array.isArray,dr=t=>hl(t)==="[object Map]",j_=t=>hl(t)==="[object Set]",ae=t=>typeof t=="function",Qe=t=>typeof t=="string",Gc=t=>typeof t=="symbol",He=t=>t!==null&&typeof t=="object",J_=t=>He(t)&&ae(t.then)&&ae(t.catch),Z_=Object.prototype.toString,hl=t=>Z_.call(t),iI=t=>hl(t).slice(8,-1),ep=t=>hl(t)==="[object Object]",Vc=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ko=zc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},rI=/-(\w)/g,wr=dl(t=>t.replace(rI,(e,n)=>n?n.toUpperCase():"")),sI=/\B([A-Z])/g,Rr=dl(t=>t.replace(sI,"-$1").toLowerCase()),tp=dl(t=>t.charAt(0).toUpperCase()+t.slice(1)),qa=dl(t=>t?`on${tp(t)}`:""),ps=(t,e)=>!Object.is(t,e),Ga=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ho=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},oI=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ad;const uc=()=>Ad||(Ad=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nr(t){if(ie(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=Qe(r)?uI(r):Nr(r);if(o)for(const a in o)e[a]=o[a]}return e}else{if(Qe(t))return t;if(He(t))return t}}const lI=/;(?![^(]*\))/g,aI=/:([^]+)/,cI=/\/\*[^]*?\*\//g;function uI(t){const e={};return t.replace(cI,"").split(lI).forEach(n=>{if(n){const r=n.split(aI);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Yc(t){let e="";if(Qe(t))e=t;else if(ie(t))for(let n=0;n<t.length;n++){const r=Yc(t[n]);r&&(e+=r+" ")}else if(He(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const fI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hI=zc(fI);function np(t){return!!t||t===""}const dI=t=>Qe(t)?t:t==null?"":ie(t)||He(t)&&(t.toString===Z_||!ae(t.toString))?JSON.stringify(t,ip,2):String(t),ip=(t,e)=>e&&e.__v_isRef?ip(t,e.value):dr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o])=>(n[`${r} =>`]=o,n),{})}:j_(e)?{[`Set(${e.size})`]:[...e.values()]}:He(e)&&!ie(e)&&!ep(e)?String(e):e;let Zt;class _I{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Zt,!e&&Zt&&(this.index=(Zt.scopes||(Zt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Zt;try{return Zt=this,e()}finally{Zt=n}}}on(){Zt=this}off(){Zt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function pI(t,e=Zt){e&&e.active&&e.effects.push(t)}function gI(){return Zt}const Qc=t=>{const e=new Set(t);return e.w=0,e.n=0,e},rp=t=>(t.w&ci)>0,sp=t=>(t.n&ci)>0,mI=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ci},vI=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const o=e[r];rp(o)&&!sp(o)?o.delete(t):e[n++]=o,o.w&=~ci,o.n&=~ci}e.length=n}},fc=new WeakMap;let ls=0,ci=1;const hc=30;let nn;const Pi=Symbol(""),dc=Symbol("");class Xc{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,pI(this,r)}run(){if(!this.active)return this.fn();let e=nn,n=ii;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=nn,nn=this,ii=!0,ci=1<<++ls,ls<=hc?mI(this):Rd(this),this.fn()}finally{ls<=hc&&vI(this),ci=1<<--ls,nn=this.parent,ii=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){nn===this?this.deferStop=!0:this.active&&(Rd(this),this.onStop&&this.onStop(),this.active=!1)}}function Rd(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ii=!0;const op=[];function Pr(){op.push(ii),ii=!1}function Or(){const t=op.pop();ii=t===void 0?!0:t}function Rt(t,e,n){if(ii&&nn){let r=fc.get(t);r||fc.set(t,r=new Map);let o=r.get(n);o||r.set(n,o=Qc()),lp(o)}}function lp(t,e){let n=!1;ls<=hc?sp(t)||(t.n|=ci,n=!rp(t)):n=!t.has(nn),n&&(t.add(nn),nn.deps.push(t))}function kn(t,e,n,r,o,a){const c=fc.get(t);if(!c)return;let f=[];if(e==="clear")f=[...c.values()];else if(n==="length"&&ie(t)){const d=Number(r);c.forEach((_,y)=>{(y==="length"||y>=d)&&f.push(_)})}else switch(n!==void 0&&f.push(c.get(n)),e){case"add":ie(t)?Vc(n)&&f.push(c.get("length")):(f.push(c.get(Pi)),dr(t)&&f.push(c.get(dc)));break;case"delete":ie(t)||(f.push(c.get(Pi)),dr(t)&&f.push(c.get(dc)));break;case"set":dr(t)&&f.push(c.get(Pi));break}if(f.length===1)f[0]&&_c(f[0]);else{const d=[];for(const _ of f)_&&d.push(..._);_c(Qc(d))}}function _c(t,e){const n=ie(t)?t:[...t];for(const r of n)r.computed&&Nd(r);for(const r of n)r.computed||Nd(r)}function Nd(t,e){(t!==nn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const yI=zc("__proto__,__v_isRef,__isVue"),ap=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Gc)),wI=jc(),EI=jc(!1,!0),CI=jc(!0),Pd=bI();function bI(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ie(this);for(let a=0,c=this.length;a<c;a++)Rt(r,"get",a+"");const o=r[e](...n);return o===-1||o===!1?r[e](...n.map(Ie)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Pr();const r=Ie(this)[e].apply(this,n);return Or(),r}}),t}function II(t){const e=Ie(this);return Rt(e,"has",t),e.hasOwnProperty(t)}function jc(t=!1,e=!1){return function(r,o,a){if(o==="__v_isReactive")return!t;if(o==="__v_isReadonly")return t;if(o==="__v_isShallow")return e;if(o==="__v_raw"&&a===(t?e?UI:dp:e?hp:fp).get(r))return r;const c=ie(r);if(!t){if(c&&ve(Pd,o))return Reflect.get(Pd,o,a);if(o==="hasOwnProperty")return II}const f=Reflect.get(r,o,a);return(Gc(o)?ap.has(o):yI(o))||(t||Rt(r,"get",o),e)?f:ht(f)?c&&Vc(o)?f:f.value:He(f)?t?_p(f):eu(f):f}}const TI=cp(),xI=cp(!0);function cp(t=!1){return function(n,r,o,a){let c=n[r];if(Er(c)&&ht(c)&&!ht(o))return!1;if(!t&&(!$o(o)&&!Er(o)&&(c=Ie(c),o=Ie(o)),!ie(n)&&ht(c)&&!ht(o)))return c.value=o,!0;const f=ie(n)&&Vc(r)?Number(r)<n.length:ve(n,r),d=Reflect.set(n,r,o,a);return n===Ie(a)&&(f?ps(o,c)&&kn(n,"set",r,o):kn(n,"add",r,o)),d}}function SI(t,e){const n=ve(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&kn(t,"delete",e,void 0),r}function AI(t,e){const n=Reflect.has(t,e);return(!Gc(e)||!ap.has(e))&&Rt(t,"has",e),n}function RI(t){return Rt(t,"iterate",ie(t)?"length":Pi),Reflect.ownKeys(t)}const up={get:wI,set:TI,deleteProperty:SI,has:AI,ownKeys:RI},NI={get:CI,set(t,e){return!0},deleteProperty(t,e){return!0}},PI=tt({},up,{get:EI,set:xI}),Jc=t=>t,_l=t=>Reflect.getPrototypeOf(t);function Ro(t,e,n=!1,r=!1){t=t.__v_raw;const o=Ie(t),a=Ie(e);n||(e!==a&&Rt(o,"get",e),Rt(o,"get",a));const{has:c}=_l(o),f=r?Jc:n?nu:gs;if(c.call(o,e))return f(t.get(e));if(c.call(o,a))return f(t.get(a));t!==o&&t.get(e)}function No(t,e=!1){const n=this.__v_raw,r=Ie(n),o=Ie(t);return e||(t!==o&&Rt(r,"has",t),Rt(r,"has",o)),t===o?n.has(t):n.has(t)||n.has(o)}function Po(t,e=!1){return t=t.__v_raw,!e&&Rt(Ie(t),"iterate",Pi),Reflect.get(t,"size",t)}function Od(t){t=Ie(t);const e=Ie(this);return _l(e).has.call(e,t)||(e.add(t),kn(e,"add",t,t)),this}function Dd(t,e){e=Ie(e);const n=Ie(this),{has:r,get:o}=_l(n);let a=r.call(n,t);a||(t=Ie(t),a=r.call(n,t));const c=o.call(n,t);return n.set(t,e),a?ps(e,c)&&kn(n,"set",t,e):kn(n,"add",t,e),this}function Md(t){const e=Ie(this),{has:n,get:r}=_l(e);let o=n.call(e,t);o||(t=Ie(t),o=n.call(e,t)),r&&r.call(e,t);const a=e.delete(t);return o&&kn(e,"delete",t,void 0),a}function Ld(){const t=Ie(this),e=t.size!==0,n=t.clear();return e&&kn(t,"clear",void 0,void 0),n}function Oo(t,e){return function(r,o){const a=this,c=a.__v_raw,f=Ie(c),d=e?Jc:t?nu:gs;return!t&&Rt(f,"iterate",Pi),c.forEach((_,y)=>r.call(o,d(_),d(y),a))}}function Do(t,e,n){return function(...r){const o=this.__v_raw,a=Ie(o),c=dr(a),f=t==="entries"||t===Symbol.iterator&&c,d=t==="keys"&&c,_=o[t](...r),y=n?Jc:e?nu:gs;return!e&&Rt(a,"iterate",d?dc:Pi),{next(){const{value:v,done:C}=_.next();return C?{value:v,done:C}:{value:f?[y(v[0]),y(v[1])]:y(v),done:C}},[Symbol.iterator](){return this}}}}function ti(t){return function(...e){return t==="delete"?!1:this}}function OI(){const t={get(a){return Ro(this,a)},get size(){return Po(this)},has:No,add:Od,set:Dd,delete:Md,clear:Ld,forEach:Oo(!1,!1)},e={get(a){return Ro(this,a,!1,!0)},get size(){return Po(this)},has:No,add:Od,set:Dd,delete:Md,clear:Ld,forEach:Oo(!1,!0)},n={get(a){return Ro(this,a,!0)},get size(){return Po(this,!0)},has(a){return No.call(this,a,!0)},add:ti("add"),set:ti("set"),delete:ti("delete"),clear:ti("clear"),forEach:Oo(!0,!1)},r={get(a){return Ro(this,a,!0,!0)},get size(){return Po(this,!0)},has(a){return No.call(this,a,!0)},add:ti("add"),set:ti("set"),delete:ti("delete"),clear:ti("clear"),forEach:Oo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=Do(a,!1,!1),n[a]=Do(a,!0,!1),e[a]=Do(a,!1,!0),r[a]=Do(a,!0,!0)}),[t,n,e,r]}const[DI,MI,LI,FI]=OI();function Zc(t,e){const n=e?t?FI:LI:t?MI:DI;return(r,o,a)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(ve(n,o)&&o in r?n:r,o,a)}const kI={get:Zc(!1,!1)},BI={get:Zc(!1,!0)},WI={get:Zc(!0,!1)},fp=new WeakMap,hp=new WeakMap,dp=new WeakMap,UI=new WeakMap;function HI(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $I(t){return t.__v_skip||!Object.isExtensible(t)?0:HI(iI(t))}function eu(t){return Er(t)?t:tu(t,!1,up,kI,fp)}function zI(t){return tu(t,!1,PI,BI,hp)}function _p(t){return tu(t,!0,NI,WI,dp)}function tu(t,e,n,r,o){if(!He(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=o.get(t);if(a)return a;const c=$I(t);if(c===0)return t;const f=new Proxy(t,c===2?r:n);return o.set(t,f),f}function _r(t){return Er(t)?_r(t.__v_raw):!!(t&&t.__v_isReactive)}function Er(t){return!!(t&&t.__v_isReadonly)}function $o(t){return!!(t&&t.__v_isShallow)}function pp(t){return _r(t)||Er(t)}function Ie(t){const e=t&&t.__v_raw;return e?Ie(e):t}function gp(t){return Ho(t,"__v_skip",!0),t}const gs=t=>He(t)?eu(t):t,nu=t=>He(t)?_p(t):t;function mp(t){ii&&nn&&(t=Ie(t),lp(t.dep||(t.dep=Qc())))}function vp(t,e){t=Ie(t);const n=t.dep;n&&_c(n)}function ht(t){return!!(t&&t.__v_isRef===!0)}function pc(t){return KI(t,!1)}function KI(t,e){return ht(t)?t:new qI(t,e)}class qI{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ie(e),this._value=n?e:gs(e)}get value(){return mp(this),this._value}set value(e){const n=this.__v_isShallow||$o(e)||Er(e);e=n?e:Ie(e),ps(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:gs(e),vp(this))}}function en(t){return ht(t)?t.value:t}const GI={get:(t,e,n)=>en(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const o=t[e];return ht(o)&&!ht(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function yp(t){return _r(t)?t:new Proxy(t,GI)}class VI{constructor(e,n,r,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Xc(e,()=>{this._dirty||(this._dirty=!0,vp(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=r}get value(){const e=Ie(this);return mp(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function YI(t,e,n=!1){let r,o;const a=ae(t);return a?(r=t,o=an):(r=t.get,o=t.set),new VI(r,o,a||!o,n)}function ri(t,e,n,r){let o;try{o=r?t(...r):t()}catch(a){pl(a,e,n)}return o}function cn(t,e,n,r){if(ae(t)){const a=ri(t,e,n,r);return a&&J_(a)&&a.catch(c=>{pl(c,e,n)}),a}const o=[];for(let a=0;a<t.length;a++)o.push(cn(t[a],e,n,r));return o}function pl(t,e,n,r=!0){const o=e?e.vnode:null;if(e){let a=e.parent;const c=e.proxy,f=n;for(;a;){const _=a.ec;if(_){for(let y=0;y<_.length;y++)if(_[y](t,c,f)===!1)return}a=a.parent}const d=e.appContext.config.errorHandler;if(d){ri(d,null,10,[t,c,f]);return}}QI(t,n,o,r)}function QI(t,e,n,r=!0){console.error(t)}let ms=!1,gc=!1;const ut=[];let mn=0;const pr=[];let Mn=null,Si=0;const wp=Promise.resolve();let iu=null;function XI(t){const e=iu||wp;return t?e.then(this?t.bind(this):t):e}function jI(t){let e=mn+1,n=ut.length;for(;e<n;){const r=e+n>>>1;vs(ut[r])<t?e=r+1:n=r}return e}function ru(t){(!ut.length||!ut.includes(t,ms&&t.allowRecurse?mn+1:mn))&&(t.id==null?ut.push(t):ut.splice(jI(t.id),0,t),Ep())}function Ep(){!ms&&!gc&&(gc=!0,iu=wp.then(bp))}function JI(t){const e=ut.indexOf(t);e>mn&&ut.splice(e,1)}function ZI(t){ie(t)?pr.push(...t):(!Mn||!Mn.includes(t,t.allowRecurse?Si+1:Si))&&pr.push(t),Ep()}function Fd(t,e=ms?mn+1:0){for(;e<ut.length;e++){const n=ut[e];n&&n.pre&&(ut.splice(e,1),e--,n())}}function Cp(t){if(pr.length){const e=[...new Set(pr)];if(pr.length=0,Mn){Mn.push(...e);return}for(Mn=e,Mn.sort((n,r)=>vs(n)-vs(r)),Si=0;Si<Mn.length;Si++)Mn[Si]();Mn=null,Si=0}}const vs=t=>t.id==null?1/0:t.id,eT=(t,e)=>{const n=vs(t)-vs(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function bp(t){gc=!1,ms=!0,ut.sort(eT);const e=an;try{for(mn=0;mn<ut.length;mn++){const n=ut[mn];n&&n.active!==!1&&ri(n,null,14)}}finally{mn=0,ut.length=0,Cp(),ms=!1,iu=null,(ut.length||pr.length)&&bp()}}function tT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Be;let o=n;const a=e.startsWith("update:"),c=a&&e.slice(7);if(c&&c in r){const y=`${c==="modelValue"?"model":c}Modifiers`,{number:v,trim:C}=r[y]||Be;C&&(o=n.map(P=>Qe(P)?P.trim():P)),v&&(o=n.map(oI))}let f,d=r[f=qa(e)]||r[f=qa(wr(e))];!d&&a&&(d=r[f=qa(Rr(e))]),d&&cn(d,t,6,o);const _=r[f+"Once"];if(_){if(!t.emitted)t.emitted={};else if(t.emitted[f])return;t.emitted[f]=!0,cn(_,t,6,o)}}function Ip(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const a=t.emits;let c={},f=!1;if(!ae(t)){const d=_=>{const y=Ip(_,e,!0);y&&(f=!0,tt(c,y))};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!a&&!f?(He(t)&&r.set(t,null),null):(ie(a)?a.forEach(d=>c[d]=null):tt(c,a),He(t)&&r.set(t,c),c)}function gl(t,e){return!t||!fl(e)?!1:(e=e.slice(2).replace(/Once$/,""),ve(t,e[0].toLowerCase()+e.slice(1))||ve(t,Rr(e))||ve(t,e))}let vn=null,Tp=null;function zo(t){const e=vn;return vn=t,Tp=t&&t.type.__scopeId||null,e}function nT(t,e=vn,n){if(!e||t._n)return t;const r=(...o)=>{r._d&&Gd(-1);const a=zo(e);let c;try{c=t(...o)}finally{zo(a),r._d&&Gd(1)}return c};return r._n=!0,r._c=!0,r._d=!0,r}function Va(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:a,propsOptions:[c],slots:f,attrs:d,emit:_,render:y,renderCache:v,data:C,setupState:P,ctx:U,inheritAttrs:K}=t;let Z,we;const Le=zo(t);try{if(n.shapeFlag&4){const te=o||r;Z=gn(y.call(te,te,v,a,P,C,U)),we=d}else{const te=e;Z=gn(te.length>1?te(a,{attrs:d,slots:f,emit:_}):te(a,null)),we=e.props?d:iT(d)}}catch(te){us.length=0,pl(te,t,1),Z=yn(ys)}let Ee=Z;if(we&&K!==!1){const te=Object.keys(we),{shapeFlag:qe}=Ee;te.length&&qe&7&&(c&&te.some(Kc)&&(we=rT(we,c)),Ee=Ir(Ee,we))}return n.dirs&&(Ee=Ir(Ee),Ee.dirs=Ee.dirs?Ee.dirs.concat(n.dirs):n.dirs),n.transition&&(Ee.transition=n.transition),Z=Ee,zo(Le),Z}const iT=t=>{let e;for(const n in t)(n==="class"||n==="style"||fl(n))&&((e||(e={}))[n]=t[n]);return e},rT=(t,e)=>{const n={};for(const r in t)(!Kc(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function sT(t,e,n){const{props:r,children:o,component:a}=t,{props:c,children:f,patchFlag:d}=e,_=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return r?kd(r,c,_):!!c;if(d&8){const y=e.dynamicProps;for(let v=0;v<y.length;v++){const C=y[v];if(c[C]!==r[C]&&!gl(_,C))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:r===c?!1:r?c?kd(r,c,_):!0:!!c;return!1}function kd(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(e[a]!==t[a]&&!gl(n,a))return!0}return!1}function oT({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const lT=t=>t.__isSuspense;function aT(t,e){e&&e.pendingBranch?ie(t)?e.effects.push(...t):e.effects.push(t):ZI(t)}const Mo={};function Ya(t,e,n){return xp(t,e,n)}function xp(t,e,{immediate:n,deep:r,flush:o,onTrack:a,onTrigger:c}=Be){var f;const d=gI()===((f=ft)==null?void 0:f.scope)?ft:null;let _,y=!1,v=!1;if(ht(t)?(_=()=>t.value,y=$o(t)):_r(t)?(_=()=>t,r=!0):ie(t)?(v=!0,y=t.some(te=>_r(te)||$o(te)),_=()=>t.map(te=>{if(ht(te))return te.value;if(_r(te))return ur(te);if(ae(te))return ri(te,d,2)})):ae(t)?e?_=()=>ri(t,d,2):_=()=>{if(!(d&&d.isUnmounted))return C&&C(),cn(t,d,3,[P])}:_=an,e&&r){const te=_;_=()=>ur(te())}let C,P=te=>{C=Le.onStop=()=>{ri(te,d,4)}},U;if(Es)if(P=an,e?n&&cn(e,d,3,[_(),v?[]:void 0,P]):_(),o==="sync"){const te=rx();U=te.__watcherHandles||(te.__watcherHandles=[])}else return an;let K=v?new Array(t.length).fill(Mo):Mo;const Z=()=>{if(Le.active)if(e){const te=Le.run();(r||y||(v?te.some((qe,Bt)=>ps(qe,K[Bt])):ps(te,K)))&&(C&&C(),cn(e,d,3,[te,K===Mo?void 0:v&&K[0]===Mo?[]:K,P]),K=te)}else Le.run()};Z.allowRecurse=!!e;let we;o==="sync"?we=Z:o==="post"?we=()=>Tt(Z,d&&d.suspense):(Z.pre=!0,d&&(Z.id=d.uid),we=()=>ru(Z));const Le=new Xc(_,we);e?n?Z():K=Le.run():o==="post"?Tt(Le.run.bind(Le),d&&d.suspense):Le.run();const Ee=()=>{Le.stop(),d&&d.scope&&qc(d.scope.effects,Le)};return U&&U.push(Ee),Ee}function cT(t,e,n){const r=this.proxy,o=Qe(t)?t.includes(".")?Sp(r,t):()=>r[t]:t.bind(r,r);let a;ae(e)?a=e:(a=e.handler,n=e);const c=ft;Tr(this);const f=xp(o,a.bind(r),n);return c?Tr(c):Oi(),f}function Sp(t,e){const n=e.split(".");return()=>{let r=t;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}function ur(t,e){if(!He(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ht(t))ur(t.value,e);else if(ie(t))for(let n=0;n<t.length;n++)ur(t[n],e);else if(j_(t)||dr(t))t.forEach(n=>{ur(n,e)});else if(ep(t))for(const n in t)ur(t[n],e);return t}function bi(t,e,n,r){const o=t.dirs,a=e&&e.dirs;for(let c=0;c<o.length;c++){const f=o[c];a&&(f.oldValue=a[c].value);let d=f.dir[r];d&&(Pr(),cn(d,n,8,[t.el,f,t,e]),Or())}}function ml(t,e){return ae(t)?(()=>tt({name:t.name},e,{setup:t}))():t}const Bo=t=>!!t.type.__asyncLoader,Ap=t=>t.type.__isKeepAlive;function uT(t,e){Rp(t,"a",e)}function fT(t,e){Rp(t,"da",e)}function Rp(t,e,n=ft){const r=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(vl(e,r,n),n){let o=n.parent;for(;o&&o.parent;)Ap(o.parent.vnode)&&hT(r,e,n,o),o=o.parent}}function hT(t,e,n,r){const o=vl(e,t,r,!0);su(()=>{qc(r[e],o)},n)}function vl(t,e,n=ft,r=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...c)=>{if(n.isUnmounted)return;Pr(),Tr(n);const f=cn(e,n,t,c);return Oi(),Or(),f});return r?o.unshift(a):o.push(a),a}}const Hn=t=>(e,n=ft)=>(!Es||t==="sp")&&vl(t,(...r)=>e(...r),n),dT=Hn("bm"),Np=Hn("m"),_T=Hn("bu"),pT=Hn("u"),gT=Hn("bum"),su=Hn("um"),mT=Hn("sp"),vT=Hn("rtg"),yT=Hn("rtc");function wT(t,e=ft){vl("ec",t,e)}const ET=Symbol.for("v-ndc");function CT(t,e,n,r){let o;const a=n&&n[r];if(ie(t)||Qe(t)){o=new Array(t.length);for(let c=0,f=t.length;c<f;c++)o[c]=e(t[c],c,void 0,a&&a[c])}else if(typeof t=="number"){o=new Array(t);for(let c=0;c<t;c++)o[c]=e(c+1,c,void 0,a&&a[c])}else if(He(t))if(t[Symbol.iterator])o=Array.from(t,(c,f)=>e(c,f,void 0,a&&a[f]));else{const c=Object.keys(t);o=new Array(c.length);for(let f=0,d=c.length;f<d;f++){const _=c[f];o[f]=e(t[_],_,f,a&&a[f])}}else o=[];return n&&(n[r]=o),o}const mc=t=>t?Up(t)?fu(t)||t.proxy:mc(t.parent):null,cs=tt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>mc(t.parent),$root:t=>mc(t.root),$emit:t=>t.emit,$options:t=>ou(t),$forceUpdate:t=>t.f||(t.f=()=>ru(t.update)),$nextTick:t=>t.n||(t.n=XI.bind(t.proxy)),$watch:t=>cT.bind(t)}),Qa=(t,e)=>t!==Be&&!t.__isScriptSetup&&ve(t,e),bT={get({_:t},e){const{ctx:n,setupState:r,data:o,props:a,accessCache:c,type:f,appContext:d}=t;let _;if(e[0]!=="$"){const P=c[e];if(P!==void 0)switch(P){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(Qa(r,e))return c[e]=1,r[e];if(o!==Be&&ve(o,e))return c[e]=2,o[e];if((_=t.propsOptions[0])&&ve(_,e))return c[e]=3,a[e];if(n!==Be&&ve(n,e))return c[e]=4,n[e];vc&&(c[e]=0)}}const y=cs[e];let v,C;if(y)return e==="$attrs"&&Rt(t,"get",e),y(t);if((v=f.__cssModules)&&(v=v[e]))return v;if(n!==Be&&ve(n,e))return c[e]=4,n[e];if(C=d.config.globalProperties,ve(C,e))return C[e]},set({_:t},e,n){const{data:r,setupState:o,ctx:a}=t;return Qa(o,e)?(o[e]=n,!0):r!==Be&&ve(r,e)?(r[e]=n,!0):ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:a}},c){let f;return!!n[c]||t!==Be&&ve(t,c)||Qa(e,c)||(f=a[0])&&ve(f,c)||ve(r,c)||ve(cs,c)||ve(o.config.globalProperties,c)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Bd(t){return ie(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let vc=!0;function IT(t){const e=ou(t),n=t.proxy,r=t.ctx;vc=!1,e.beforeCreate&&Wd(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:c,watch:f,provide:d,inject:_,created:y,beforeMount:v,mounted:C,beforeUpdate:P,updated:U,activated:K,deactivated:Z,beforeDestroy:we,beforeUnmount:Le,destroyed:Ee,unmounted:te,render:qe,renderTracked:Bt,renderTriggered:vt,errorCaptured:Pt,serverPrefetch:hi,expose:En,inheritAttrs:di,components:Hi,directives:$i,filters:zi}=e;if(_&&TT(_,r,null),c)for(const Te in c){const pe=c[Te];ae(pe)&&(r[Te]=pe.bind(n))}if(o){const Te=o.call(n,n);He(Te)&&(t.data=eu(Te))}if(vc=!0,a)for(const Te in a){const pe=a[Te],Cn=ae(pe)?pe.bind(n,n):ae(pe.get)?pe.get.bind(n,n):an,bn=!ae(pe)&&ae(pe.set)?pe.set.bind(n):an,Xe=nx({get:Cn,set:bn});Object.defineProperty(r,Te,{enumerable:!0,configurable:!0,get:()=>Xe.value,set:Wt=>Xe.value=Wt})}if(f)for(const Te in f)Pp(f[Te],r,n,Te);if(d){const Te=ae(d)?d.call(n):d;Reflect.ownKeys(Te).forEach(pe=>{PT(pe,Te[pe])})}y&&Wd(y,t,"c");function nt(Te,pe){ie(pe)?pe.forEach(Cn=>Te(Cn.bind(n))):pe&&Te(pe.bind(n))}if(nt(dT,v),nt(Np,C),nt(_T,P),nt(pT,U),nt(uT,K),nt(fT,Z),nt(wT,Pt),nt(yT,Bt),nt(vT,vt),nt(gT,Le),nt(su,te),nt(mT,hi),ie(En))if(En.length){const Te=t.exposed||(t.exposed={});En.forEach(pe=>{Object.defineProperty(Te,pe,{get:()=>n[pe],set:Cn=>n[pe]=Cn})})}else t.exposed||(t.exposed={});qe&&t.render===an&&(t.render=qe),di!=null&&(t.inheritAttrs=di),Hi&&(t.components=Hi),$i&&(t.directives=$i)}function TT(t,e,n=an){ie(t)&&(t=yc(t));for(const r in t){const o=t[r];let a;He(o)?"default"in o?a=Wo(o.from||r,o.default,!0):a=Wo(o.from||r):a=Wo(o),ht(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):e[r]=a}}function Wd(t,e,n){cn(ie(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Pp(t,e,n,r){const o=r.includes(".")?Sp(n,r):()=>n[r];if(Qe(t)){const a=e[t];ae(a)&&Ya(o,a)}else if(ae(t))Ya(o,t.bind(n));else if(He(t))if(ie(t))t.forEach(a=>Pp(a,e,n,r));else{const a=ae(t.handler)?t.handler.bind(n):e[t.handler];ae(a)&&Ya(o,a,t)}}function ou(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=t.appContext,f=a.get(e);let d;return f?d=f:!o.length&&!n&&!r?d=e:(d={},o.length&&o.forEach(_=>Ko(d,_,c,!0)),Ko(d,e,c)),He(e)&&a.set(e,d),d}function Ko(t,e,n,r=!1){const{mixins:o,extends:a}=e;a&&Ko(t,a,n,!0),o&&o.forEach(c=>Ko(t,c,n,!0));for(const c in e)if(!(r&&c==="expose")){const f=xT[c]||n&&n[c];t[c]=f?f(t[c],e[c]):e[c]}return t}const xT={data:Ud,props:Hd,emits:Hd,methods:as,computed:as,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:as,directives:as,watch:AT,provide:Ud,inject:ST};function Ud(t,e){return e?t?function(){return tt(ae(t)?t.call(this,this):t,ae(e)?e.call(this,this):e)}:e:t}function ST(t,e){return as(yc(t),yc(e))}function yc(t){if(ie(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mt(t,e){return t?[...new Set([].concat(t,e))]:e}function as(t,e){return t?tt(Object.create(null),t,e):e}function Hd(t,e){return t?ie(t)&&ie(e)?[...new Set([...t,...e])]:tt(Object.create(null),Bd(t),Bd(e??{})):e}function AT(t,e){if(!t)return e;if(!e)return t;const n=tt(Object.create(null),t);for(const r in e)n[r]=mt(t[r],e[r]);return n}function Op(){return{app:null,config:{isNativeTag:eI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let RT=0;function NT(t,e){return function(r,o=null){ae(r)||(r=tt({},r)),o!=null&&!He(o)&&(o=null);const a=Op(),c=new Set;let f=!1;const d=a.app={_uid:RT++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:sx,get config(){return a.config},set config(_){},use(_,...y){return c.has(_)||(_&&ae(_.install)?(c.add(_),_.install(d,...y)):ae(_)&&(c.add(_),_(d,...y))),d},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),d},component(_,y){return y?(a.components[_]=y,d):a.components[_]},directive(_,y){return y?(a.directives[_]=y,d):a.directives[_]},mount(_,y,v){if(!f){const C=yn(r,o);return C.appContext=a,y&&e?e(C,_):t(C,_,v),f=!0,d._container=_,_.__vue_app__=d,fu(C.component)||C.component.proxy}},unmount(){f&&(t(null,d._container),delete d._container.__vue_app__)},provide(_,y){return a.provides[_]=y,d},runWithContext(_){qo=d;try{return _()}finally{qo=null}}};return d}}let qo=null;function PT(t,e){if(ft){let n=ft.provides;const r=ft.parent&&ft.parent.provides;r===n&&(n=ft.provides=Object.create(r)),n[t]=e}}function Wo(t,e,n=!1){const r=ft||vn;if(r||qo){const o=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:qo._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&ae(e)?e.call(r&&r.proxy):e}}function OT(t,e,n,r=!1){const o={},a={};Ho(a,wl,1),t.propsDefaults=Object.create(null),Dp(t,e,o,a);for(const c in t.propsOptions[0])c in o||(o[c]=void 0);n?t.props=r?o:zI(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function DT(t,e,n,r){const{props:o,attrs:a,vnode:{patchFlag:c}}=t,f=Ie(o),[d]=t.propsOptions;let _=!1;if((r||c>0)&&!(c&16)){if(c&8){const y=t.vnode.dynamicProps;for(let v=0;v<y.length;v++){let C=y[v];if(gl(t.emitsOptions,C))continue;const P=e[C];if(d)if(ve(a,C))P!==a[C]&&(a[C]=P,_=!0);else{const U=wr(C);o[U]=wc(d,f,U,P,t,!1)}else P!==a[C]&&(a[C]=P,_=!0)}}}else{Dp(t,e,o,a)&&(_=!0);let y;for(const v in f)(!e||!ve(e,v)&&((y=Rr(v))===v||!ve(e,y)))&&(d?n&&(n[v]!==void 0||n[y]!==void 0)&&(o[v]=wc(d,f,v,void 0,t,!0)):delete o[v]);if(a!==f)for(const v in a)(!e||!ve(e,v))&&(delete a[v],_=!0)}_&&kn(t,"set","$attrs")}function Dp(t,e,n,r){const[o,a]=t.propsOptions;let c=!1,f;if(e)for(let d in e){if(ko(d))continue;const _=e[d];let y;o&&ve(o,y=wr(d))?!a||!a.includes(y)?n[y]=_:(f||(f={}))[y]=_:gl(t.emitsOptions,d)||(!(d in r)||_!==r[d])&&(r[d]=_,c=!0)}if(a){const d=Ie(n),_=f||Be;for(let y=0;y<a.length;y++){const v=a[y];n[v]=wc(o,d,v,_[v],t,!ve(_,v))}}return c}function wc(t,e,n,r,o,a){const c=t[n];if(c!=null){const f=ve(c,"default");if(f&&r===void 0){const d=c.default;if(c.type!==Function&&!c.skipFactory&&ae(d)){const{propsDefaults:_}=o;n in _?r=_[n]:(Tr(o),r=_[n]=d.call(null,e),Oi())}else r=d}c[0]&&(a&&!f?r=!1:c[1]&&(r===""||r===Rr(n))&&(r=!0))}return r}function Mp(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const a=t.props,c={},f=[];let d=!1;if(!ae(t)){const y=v=>{d=!0;const[C,P]=Mp(v,e,!0);tt(c,C),P&&f.push(...P)};!n&&e.mixins.length&&e.mixins.forEach(y),t.extends&&y(t.extends),t.mixins&&t.mixins.forEach(y)}if(!a&&!d)return He(t)&&r.set(t,hr),hr;if(ie(a))for(let y=0;y<a.length;y++){const v=wr(a[y]);$d(v)&&(c[v]=Be)}else if(a)for(const y in a){const v=wr(y);if($d(v)){const C=a[y],P=c[v]=ie(C)||ae(C)?{type:C}:tt({},C);if(P){const U=qd(Boolean,P.type),K=qd(String,P.type);P[0]=U>-1,P[1]=K<0||U<K,(U>-1||ve(P,"default"))&&f.push(v)}}}const _=[c,f];return He(t)&&r.set(t,_),_}function $d(t){return t[0]!=="$"}function zd(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Kd(t,e){return zd(t)===zd(e)}function qd(t,e){return ie(e)?e.findIndex(n=>Kd(n,t)):ae(e)&&Kd(e,t)?0:-1}const Lp=t=>t[0]==="_"||t==="$stable",lu=t=>ie(t)?t.map(gn):[gn(t)],MT=(t,e,n)=>{if(e._n)return e;const r=nT((...o)=>lu(e(...o)),n);return r._c=!1,r},Fp=(t,e,n)=>{const r=t._ctx;for(const o in t){if(Lp(o))continue;const a=t[o];if(ae(a))e[o]=MT(o,a,r);else if(a!=null){const c=lu(a);e[o]=()=>c}}},kp=(t,e)=>{const n=lu(e);t.slots.default=()=>n},LT=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ie(e),Ho(e,"_",n)):Fp(e,t.slots={})}else t.slots={},e&&kp(t,e);Ho(t.slots,wl,1)},FT=(t,e,n)=>{const{vnode:r,slots:o}=t;let a=!0,c=Be;if(r.shapeFlag&32){const f=e._;f?n&&f===1?a=!1:(tt(o,e),!n&&f===1&&delete o._):(a=!e.$stable,Fp(e,o)),c=e}else e&&(kp(t,e),c={default:1});if(a)for(const f in o)!Lp(f)&&!(f in c)&&delete o[f]};function Ec(t,e,n,r,o=!1){if(ie(t)){t.forEach((C,P)=>Ec(C,e&&(ie(e)?e[P]:e),n,r,o));return}if(Bo(r)&&!o)return;const a=r.shapeFlag&4?fu(r.component)||r.component.proxy:r.el,c=o?null:a,{i:f,r:d}=t,_=e&&e.r,y=f.refs===Be?f.refs={}:f.refs,v=f.setupState;if(_!=null&&_!==d&&(Qe(_)?(y[_]=null,ve(v,_)&&(v[_]=null)):ht(_)&&(_.value=null)),ae(d))ri(d,f,12,[c,y]);else{const C=Qe(d),P=ht(d);if(C||P){const U=()=>{if(t.f){const K=C?ve(v,d)?v[d]:y[d]:d.value;o?ie(K)&&qc(K,a):ie(K)?K.includes(a)||K.push(a):C?(y[d]=[a],ve(v,d)&&(v[d]=y[d])):(d.value=[a],t.k&&(y[t.k]=d.value))}else C?(y[d]=c,ve(v,d)&&(v[d]=c)):P&&(d.value=c,t.k&&(y[t.k]=c))};c?(U.id=-1,Tt(U,n)):U()}}}const Tt=aT;function kT(t){return BT(t)}function BT(t,e){const n=uc();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:c,createText:f,createComment:d,setText:_,setElementText:y,parentNode:v,nextSibling:C,setScopeId:P=an,insertStaticContent:U}=t,K=(w,I,S,O=null,M=null,F=null,$=!1,k=null,W=!!I.dynamicChildren)=>{if(w===I)return;w&&!ts(w,I)&&(O=Ki(w),Wt(w,M,F,!0),w=null),I.patchFlag===-2&&(W=!1,I.dynamicChildren=null);const{type:D,ref:V,shapeFlag:q}=I;switch(D){case yl:Z(w,I,S,O);break;case ys:we(w,I,S,O);break;case Xa:w==null&&Le(I,S,O,$);break;case tn:Hi(w,I,S,O,M,F,$,k,W);break;default:q&1?qe(w,I,S,O,M,F,$,k,W):q&6?$i(w,I,S,O,M,F,$,k,W):(q&64||q&128)&&D.process(w,I,S,O,M,F,$,k,W,Ut)}V!=null&&M&&Ec(V,w&&w.ref,F,I||w,!I)},Z=(w,I,S,O)=>{if(w==null)r(I.el=f(I.children),S,O);else{const M=I.el=w.el;I.children!==w.children&&_(M,I.children)}},we=(w,I,S,O)=>{w==null?r(I.el=d(I.children||""),S,O):I.el=w.el},Le=(w,I,S,O)=>{[w.el,w.anchor]=U(w.children,I,S,O,w.el,w.anchor)},Ee=({el:w,anchor:I},S,O)=>{let M;for(;w&&w!==I;)M=C(w),r(w,S,O),w=M;r(I,S,O)},te=({el:w,anchor:I})=>{let S;for(;w&&w!==I;)S=C(w),o(w),w=S;o(I)},qe=(w,I,S,O,M,F,$,k,W)=>{$=$||I.type==="svg",w==null?Bt(I,S,O,M,F,$,k,W):hi(w,I,M,F,$,k,W)},Bt=(w,I,S,O,M,F,$,k)=>{let W,D;const{type:V,props:q,shapeFlag:Y,transition:X,dirs:ce}=w;if(W=w.el=c(w.type,F,q&&q.is,q),Y&8?y(W,w.children):Y&16&&Pt(w.children,W,null,O,M,F&&V!=="foreignObject",$,k),ce&&bi(w,null,O,"created"),vt(W,w,w.scopeId,$,O),q){for(const ge in q)ge!=="value"&&!ko(ge)&&a(W,ge,null,q[ge],F,w.children,O,M,yt);"value"in q&&a(W,"value",null,q.value),(D=q.onVnodeBeforeMount)&&pn(D,O,w)}ce&&bi(w,null,O,"beforeMount");const ye=(!M||M&&!M.pendingBranch)&&X&&!X.persisted;ye&&X.beforeEnter(W),r(W,I,S),((D=q&&q.onVnodeMounted)||ye||ce)&&Tt(()=>{D&&pn(D,O,w),ye&&X.enter(W),ce&&bi(w,null,O,"mounted")},M)},vt=(w,I,S,O,M)=>{if(S&&P(w,S),O)for(let F=0;F<O.length;F++)P(w,O[F]);if(M){let F=M.subTree;if(I===F){const $=M.vnode;vt(w,$,$.scopeId,$.slotScopeIds,M.parent)}}},Pt=(w,I,S,O,M,F,$,k,W=0)=>{for(let D=W;D<w.length;D++){const V=w[D]=k?ni(w[D]):gn(w[D]);K(null,V,I,S,O,M,F,$,k)}},hi=(w,I,S,O,M,F,$)=>{const k=I.el=w.el;let{patchFlag:W,dynamicChildren:D,dirs:V}=I;W|=w.patchFlag&16;const q=w.props||Be,Y=I.props||Be;let X;S&&Ii(S,!1),(X=Y.onVnodeBeforeUpdate)&&pn(X,S,I,w),V&&bi(I,w,S,"beforeUpdate"),S&&Ii(S,!0);const ce=M&&I.type!=="foreignObject";if(D?En(w.dynamicChildren,D,k,S,O,ce,F):$||pe(w,I,k,null,S,O,ce,F,!1),W>0){if(W&16)di(k,I,q,Y,S,O,M);else if(W&2&&q.class!==Y.class&&a(k,"class",null,Y.class,M),W&4&&a(k,"style",q.style,Y.style,M),W&8){const ye=I.dynamicProps;for(let ge=0;ge<ye.length;ge++){const Fe=ye[ge],dt=q[Fe],fn=Y[Fe];(fn!==dt||Fe==="value")&&a(k,Fe,dt,fn,M,w.children,S,O,yt)}}W&1&&w.children!==I.children&&y(k,I.children)}else!$&&D==null&&di(k,I,q,Y,S,O,M);((X=Y.onVnodeUpdated)||V)&&Tt(()=>{X&&pn(X,S,I,w),V&&bi(I,w,S,"updated")},O)},En=(w,I,S,O,M,F,$)=>{for(let k=0;k<I.length;k++){const W=w[k],D=I[k],V=W.el&&(W.type===tn||!ts(W,D)||W.shapeFlag&70)?v(W.el):S;K(W,D,V,null,O,M,F,$,!0)}},di=(w,I,S,O,M,F,$)=>{if(S!==O){if(S!==Be)for(const k in S)!ko(k)&&!(k in O)&&a(w,k,S[k],null,$,I.children,M,F,yt);for(const k in O){if(ko(k))continue;const W=O[k],D=S[k];W!==D&&k!=="value"&&a(w,k,D,W,$,I.children,M,F,yt)}"value"in O&&a(w,"value",S.value,O.value)}},Hi=(w,I,S,O,M,F,$,k,W)=>{const D=I.el=w?w.el:f(""),V=I.anchor=w?w.anchor:f("");let{patchFlag:q,dynamicChildren:Y,slotScopeIds:X}=I;X&&(k=k?k.concat(X):X),w==null?(r(D,S,O),r(V,S,O),Pt(I.children,S,V,M,F,$,k,W)):q>0&&q&64&&Y&&w.dynamicChildren?(En(w.dynamicChildren,Y,S,M,F,$,k),(I.key!=null||M&&I===M.subTree)&&Bp(w,I,!0)):pe(w,I,S,V,M,F,$,k,W)},$i=(w,I,S,O,M,F,$,k,W)=>{I.slotScopeIds=k,w==null?I.shapeFlag&512?M.ctx.activate(I,S,O,$,W):zi(I,S,O,M,F,$,W):Bs(w,I,W)},zi=(w,I,S,O,M,F,$)=>{const k=w.component=XT(w,O,M);if(Ap(w)&&(k.ctx.renderer=Ut),jT(k),k.asyncDep){if(M&&M.registerDep(k,nt),!w.el){const W=k.subTree=yn(ys);we(null,W,I,S)}return}nt(k,w,I,S,M,F,$)},Bs=(w,I,S)=>{const O=I.component=w.component;if(sT(w,I,S))if(O.asyncDep&&!O.asyncResolved){Te(O,I,S);return}else O.next=I,JI(O.update),O.update();else I.el=w.el,O.vnode=I},nt=(w,I,S,O,M,F,$)=>{const k=()=>{if(w.isMounted){let{next:V,bu:q,u:Y,parent:X,vnode:ce}=w,ye=V,ge;Ii(w,!1),V?(V.el=ce.el,Te(w,V,$)):V=ce,q&&Ga(q),(ge=V.props&&V.props.onVnodeBeforeUpdate)&&pn(ge,X,V,ce),Ii(w,!0);const Fe=Va(w),dt=w.subTree;w.subTree=Fe,K(dt,Fe,v(dt.el),Ki(dt),w,M,F),V.el=Fe.el,ye===null&&oT(w,Fe.el),Y&&Tt(Y,M),(ge=V.props&&V.props.onVnodeUpdated)&&Tt(()=>pn(ge,X,V,ce),M)}else{let V;const{el:q,props:Y}=I,{bm:X,m:ce,parent:ye}=w,ge=Bo(I);if(Ii(w,!1),X&&Ga(X),!ge&&(V=Y&&Y.onVnodeBeforeMount)&&pn(V,ye,I),Ii(w,!0),q&&qn){const Fe=()=>{w.subTree=Va(w),qn(q,w.subTree,w,M,null)};ge?I.type.__asyncLoader().then(()=>!w.isUnmounted&&Fe()):Fe()}else{const Fe=w.subTree=Va(w);K(null,Fe,S,O,w,M,F),I.el=Fe.el}if(ce&&Tt(ce,M),!ge&&(V=Y&&Y.onVnodeMounted)){const Fe=I;Tt(()=>pn(V,ye,Fe),M)}(I.shapeFlag&256||ye&&Bo(ye.vnode)&&ye.vnode.shapeFlag&256)&&w.a&&Tt(w.a,M),w.isMounted=!0,I=S=O=null}},W=w.effect=new Xc(k,()=>ru(D),w.scope),D=w.update=()=>W.run();D.id=w.uid,Ii(w,!0),D()},Te=(w,I,S)=>{I.component=w;const O=w.vnode.props;w.vnode=I,w.next=null,DT(w,I.props,O,S),FT(w,I.children,S),Pr(),Fd(),Or()},pe=(w,I,S,O,M,F,$,k,W=!1)=>{const D=w&&w.children,V=w?w.shapeFlag:0,q=I.children,{patchFlag:Y,shapeFlag:X}=I;if(Y>0){if(Y&128){bn(D,q,S,O,M,F,$,k,W);return}else if(Y&256){Cn(D,q,S,O,M,F,$,k,W);return}}X&8?(V&16&&yt(D,M,F),q!==D&&y(S,q)):V&16?X&16?bn(D,q,S,O,M,F,$,k,W):yt(D,M,F,!0):(V&8&&y(S,""),X&16&&Pt(q,S,O,M,F,$,k,W))},Cn=(w,I,S,O,M,F,$,k,W)=>{w=w||hr,I=I||hr;const D=w.length,V=I.length,q=Math.min(D,V);let Y;for(Y=0;Y<q;Y++){const X=I[Y]=W?ni(I[Y]):gn(I[Y]);K(w[Y],X,S,null,M,F,$,k,W)}D>V?yt(w,M,F,!0,!1,q):Pt(I,S,O,M,F,$,k,W,q)},bn=(w,I,S,O,M,F,$,k,W)=>{let D=0;const V=I.length;let q=w.length-1,Y=V-1;for(;D<=q&&D<=Y;){const X=w[D],ce=I[D]=W?ni(I[D]):gn(I[D]);if(ts(X,ce))K(X,ce,S,null,M,F,$,k,W);else break;D++}for(;D<=q&&D<=Y;){const X=w[q],ce=I[Y]=W?ni(I[Y]):gn(I[Y]);if(ts(X,ce))K(X,ce,S,null,M,F,$,k,W);else break;q--,Y--}if(D>q){if(D<=Y){const X=Y+1,ce=X<V?I[X].el:O;for(;D<=Y;)K(null,I[D]=W?ni(I[D]):gn(I[D]),S,ce,M,F,$,k,W),D++}}else if(D>Y)for(;D<=q;)Wt(w[D],M,F,!0),D++;else{const X=D,ce=D,ye=new Map;for(D=ce;D<=Y;D++){const it=I[D]=W?ni(I[D]):gn(I[D]);it.key!=null&&ye.set(it.key,D)}let ge,Fe=0;const dt=Y-ce+1;let fn=!1,qi=0;const In=new Array(dt);for(D=0;D<dt;D++)In[D]=0;for(D=X;D<=q;D++){const it=w[D];if(Fe>=dt){Wt(it,M,F,!0);continue}let wt;if(it.key!=null)wt=ye.get(it.key);else for(ge=ce;ge<=Y;ge++)if(In[ge-ce]===0&&ts(it,I[ge])){wt=ge;break}wt===void 0?Wt(it,M,F,!0):(In[wt-ce]=D+1,wt>=qi?qi=wt:fn=!0,K(it,I[wt],S,null,M,F,$,k,W),Fe++)}const Gi=fn?WT(In):hr;for(ge=Gi.length-1,D=dt-1;D>=0;D--){const it=ce+D,wt=I[it],Vi=it+1<V?I[it+1].el:O;In[D]===0?K(null,wt,S,Vi,M,F,$,k,W):fn&&(ge<0||D!==Gi[ge]?Xe(wt,S,Vi,2):ge--)}}},Xe=(w,I,S,O,M=null)=>{const{el:F,type:$,transition:k,children:W,shapeFlag:D}=w;if(D&6){Xe(w.component.subTree,I,S,O);return}if(D&128){w.suspense.move(I,S,O);return}if(D&64){$.move(w,I,S,Ut);return}if($===tn){r(F,I,S);for(let q=0;q<W.length;q++)Xe(W[q],I,S,O);r(w.anchor,I,S);return}if($===Xa){Ee(w,I,S);return}if(O!==2&&D&1&&k)if(O===0)k.beforeEnter(F),r(F,I,S),Tt(()=>k.enter(F),M);else{const{leave:q,delayLeave:Y,afterLeave:X}=k,ce=()=>r(F,I,S),ye=()=>{q(F,()=>{ce(),X&&X()})};Y?Y(F,ce,ye):ye()}else r(F,I,S)},Wt=(w,I,S,O=!1,M=!1)=>{const{type:F,props:$,ref:k,children:W,dynamicChildren:D,shapeFlag:V,patchFlag:q,dirs:Y}=w;if(k!=null&&Ec(k,null,S,w,!0),V&256){I.ctx.deactivate(w);return}const X=V&1&&Y,ce=!Bo(w);let ye;if(ce&&(ye=$&&$.onVnodeBeforeUnmount)&&pn(ye,I,w),V&6)zn(w.component,S,O);else{if(V&128){w.suspense.unmount(S,O);return}X&&bi(w,null,I,"beforeUnmount"),V&64?w.type.remove(w,I,S,M,Ut,O):D&&(F!==tn||q>0&&q&64)?yt(D,I,S,!1,!0):(F===tn&&q&384||!M&&V&16)&&yt(W,I,S),O&&Ws(w)}(ce&&(ye=$&&$.onVnodeUnmounted)||X)&&Tt(()=>{ye&&pn(ye,I,w),X&&bi(w,null,I,"unmounted")},S)},Ws=w=>{const{type:I,el:S,anchor:O,transition:M}=w;if(I===tn){Ol(S,O);return}if(I===Xa){te(w);return}const F=()=>{o(S),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(w.shapeFlag&1&&M&&!M.persisted){const{leave:$,delayLeave:k}=M,W=()=>$(S,F);k?k(w.el,F,W):W()}else F()},Ol=(w,I)=>{let S;for(;w!==I;)S=C(w),o(w),w=S;o(I)},zn=(w,I,S)=>{const{bum:O,scope:M,update:F,subTree:$,um:k}=w;O&&Ga(O),M.stop(),F&&(F.active=!1,Wt($,w,I,S)),k&&Tt(k,I),Tt(()=>{w.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},yt=(w,I,S,O=!1,M=!1,F=0)=>{for(let $=F;$<w.length;$++)Wt(w[$],I,S,O,M)},Ki=w=>w.shapeFlag&6?Ki(w.component.subTree):w.shapeFlag&128?w.suspense.next():C(w.anchor||w.el),Kn=(w,I,S)=>{w==null?I._vnode&&Wt(I._vnode,null,null,!0):K(I._vnode||null,w,I,null,null,null,S),Fd(),Cp(),I._vnode=w},Ut={p:K,um:Wt,m:Xe,r:Ws,mt:zi,mc:Pt,pc:pe,pbc:En,n:Ki,o:t};let Wr,qn;return e&&([Wr,qn]=e(Ut)),{render:Kn,hydrate:Wr,createApp:NT(Kn,Wr)}}function Ii({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Bp(t,e,n=!1){const r=t.children,o=e.children;if(ie(r)&&ie(o))for(let a=0;a<r.length;a++){const c=r[a];let f=o[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[a]=ni(o[a]),f.el=c.el),n||Bp(c,f)),f.type===yl&&(f.el=c.el)}}function WT(t){const e=t.slice(),n=[0];let r,o,a,c,f;const d=t.length;for(r=0;r<d;r++){const _=t[r];if(_!==0){if(o=n[n.length-1],t[o]<_){e[r]=o,n.push(r);continue}for(a=0,c=n.length-1;a<c;)f=a+c>>1,t[n[f]]<_?a=f+1:c=f;_<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,c=n[a-1];a-- >0;)n[a]=c,c=e[c];return n}const UT=t=>t.__isTeleport,tn=Symbol.for("v-fgt"),yl=Symbol.for("v-txt"),ys=Symbol.for("v-cmt"),Xa=Symbol.for("v-stc"),us=[];let sn=null;function Cr(t=!1){us.push(sn=t?null:[])}function HT(){us.pop(),sn=us[us.length-1]||null}let ws=1;function Gd(t){ws+=t}function $T(t){return t.dynamicChildren=ws>0?sn||hr:null,HT(),ws>0&&sn&&sn.push(t),t}function br(t,e,n,r,o,a){return $T(au(t,e,n,r,o,a,!0))}function zT(t){return t?t.__v_isVNode===!0:!1}function ts(t,e){return t.type===e.type&&t.key===e.key}const wl="__vInternal",Wp=({key:t})=>t??null,Uo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||ht(t)||ae(t)?{i:vn,r:t,k:e,f:!!n}:t:null);function au(t,e=null,n=null,r=0,o=null,a=t===tn?0:1,c=!1,f=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Wp(e),ref:e&&Uo(e),scopeId:Tp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:vn};return f?(cu(d,n),a&128&&t.normalize(d)):n&&(d.shapeFlag|=Qe(n)?8:16),ws>0&&!c&&sn&&(d.patchFlag>0||a&6)&&d.patchFlag!==32&&sn.push(d),d}const yn=KT;function KT(t,e=null,n=null,r=0,o=null,a=!1){if((!t||t===ET)&&(t=ys),zT(t)){const f=Ir(t,e,!0);return n&&cu(f,n),ws>0&&!a&&sn&&(f.shapeFlag&6?sn[sn.indexOf(t)]=f:sn.push(f)),f.patchFlag|=-2,f}if(tx(t)&&(t=t.__vccOpts),e){e=qT(e);let{class:f,style:d}=e;f&&!Qe(f)&&(e.class=Yc(f)),He(d)&&(pp(d)&&!ie(d)&&(d=tt({},d)),e.style=Nr(d))}const c=Qe(t)?1:lT(t)?128:UT(t)?64:He(t)?4:ae(t)?2:0;return au(t,e,n,r,o,c,a,!0)}function qT(t){return t?pp(t)||wl in t?tt({},t):t:null}function Ir(t,e,n=!1){const{props:r,ref:o,patchFlag:a,children:c}=t,f=e?VT(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&Wp(f),ref:e&&e.ref?n&&o?ie(o)?o.concat(Uo(e)):[o,Uo(e)]:Uo(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==tn?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ir(t.ssContent),ssFallback:t.ssFallback&&Ir(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function GT(t=" ",e=0){return yn(yl,null,t,e)}function gn(t){return t==null||typeof t=="boolean"?yn(ys):ie(t)?yn(tn,null,t.slice()):typeof t=="object"?ni(t):yn(yl,null,String(t))}function ni(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ir(t)}function cu(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ie(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),cu(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!(wl in e)?e._ctx=vn:o===3&&vn&&(vn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ae(e)?(e={default:e,_ctx:vn},n=32):(e=String(e),r&64?(n=16,e=[GT(e)]):n=8);t.children=e,t.shapeFlag|=n}function VT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=Yc([e.class,r.class]));else if(o==="style")e.style=Nr([e.style,r.style]);else if(fl(o)){const a=e[o],c=r[o];c&&a!==c&&!(ie(a)&&a.includes(c))&&(e[o]=a?[].concat(a,c):c)}else o!==""&&(e[o]=r[o])}return e}function pn(t,e,n,r=null){cn(t,e,7,[n,r])}const YT=Op();let QT=0;function XT(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||YT,a={uid:QT++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new _I(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mp(r,o),emitsOptions:Ip(r,o),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:r.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=tT.bind(null,a),t.ce&&t.ce(a),a}let ft=null,uu,ar,Vd="__VUE_INSTANCE_SETTERS__";(ar=uc()[Vd])||(ar=uc()[Vd]=[]),ar.push(t=>ft=t),uu=t=>{ar.length>1?ar.forEach(e=>e(t)):ar[0](t)};const Tr=t=>{uu(t),t.scope.on()},Oi=()=>{ft&&ft.scope.off(),uu(null)};function Up(t){return t.vnode.shapeFlag&4}let Es=!1;function jT(t,e=!1){Es=e;const{props:n,children:r}=t.vnode,o=Up(t);OT(t,n,o,e),LT(t,r);const a=o?JT(t,e):void 0;return Es=!1,a}function JT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=gp(new Proxy(t.ctx,bT));const{setup:r}=n;if(r){const o=t.setupContext=r.length>1?ex(t):null;Tr(t),Pr();const a=ri(r,t,0,[t.props,o]);if(Or(),Oi(),J_(a)){if(a.then(Oi,Oi),e)return a.then(c=>{Yd(t,c,e)}).catch(c=>{pl(c,t,0)});t.asyncDep=a}else Yd(t,a,e)}else Hp(t,e)}function Yd(t,e,n){ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:He(e)&&(t.setupState=yp(e)),Hp(t,n)}let Qd;function Hp(t,e,n){const r=t.type;if(!t.render){if(!e&&Qd&&!r.render){const o=r.template||ou(t).template;if(o){const{isCustomElement:a,compilerOptions:c}=t.appContext.config,{delimiters:f,compilerOptions:d}=r,_=tt(tt({isCustomElement:a,delimiters:f},c),d);r.render=Qd(o,_)}}t.render=r.render||an}Tr(t),Pr(),IT(t),Or(),Oi()}function ZT(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Rt(t,"get","$attrs"),e[n]}}))}function ex(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return ZT(t)},slots:t.slots,emit:t.emit,expose:e}}function fu(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(yp(gp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in cs)return cs[n](t)},has(e,n){return n in e||n in cs}}))}function tx(t){return ae(t)&&"__vccOpts"in t}const nx=(t,e)=>YI(t,e,Es),ix=Symbol.for("v-scx"),rx=()=>Wo(ix),sx="3.3.4",ox="http://www.w3.org/2000/svg",Ai=typeof document<"u"?document:null,Xd=Ai&&Ai.createElement("template"),lx={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e?Ai.createElementNS(ox,t):Ai.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>Ai.createTextNode(t),createComment:t=>Ai.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ai.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,o,a){const c=n?n.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{Xd.innerHTML=r?`<svg>${t}</svg>`:t;const f=Xd.content;if(r){const d=f.firstChild;for(;d.firstChild;)f.appendChild(d.firstChild);f.removeChild(d)}e.insertBefore(f,n)}return[c?c.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function ax(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function cx(t,e,n){const r=t.style,o=Qe(n);if(n&&!o){if(e&&!Qe(e))for(const a in e)n[a]==null&&Cc(r,a,"");for(const a in n)Cc(r,a,n[a])}else{const a=r.display;o?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=a)}}const jd=/\s*!important$/;function Cc(t,e,n){if(ie(n))n.forEach(r=>Cc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ux(t,e);jd.test(n)?t.setProperty(Rr(r),n.replace(jd,""),"important"):t[r]=n}}const Jd=["Webkit","Moz","ms"],ja={};function ux(t,e){const n=ja[e];if(n)return n;let r=wr(e);if(r!=="filter"&&r in t)return ja[e]=r;r=tp(r);for(let o=0;o<Jd.length;o++){const a=Jd[o]+r;if(a in t)return ja[e]=a}return e}const Zd="http://www.w3.org/1999/xlink";function fx(t,e,n,r,o){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Zd,e.slice(6,e.length)):t.setAttributeNS(Zd,e,n);else{const a=hI(e);n==null||a&&!np(n)?t.removeAttribute(e):t.setAttribute(e,a?"":n)}}function hx(t,e,n,r,o,a,c){if(e==="innerHTML"||e==="textContent"){r&&c(r,o,a),t[e]=n??"";return}const f=t.tagName;if(e==="value"&&f!=="PROGRESS"&&!f.includes("-")){t._value=n;const _=f==="OPTION"?t.getAttribute("value"):t.value,y=n??"";_!==y&&(t.value=y),n==null&&t.removeAttribute(e);return}let d=!1;if(n===""||n==null){const _=typeof t[e];_==="boolean"?n=np(n):n==null&&_==="string"?(n="",d=!0):_==="number"&&(n=0,d=!0)}try{t[e]=n}catch{}d&&t.removeAttribute(e)}function dx(t,e,n,r){t.addEventListener(e,n,r)}function _x(t,e,n,r){t.removeEventListener(e,n,r)}function px(t,e,n,r,o=null){const a=t._vei||(t._vei={}),c=a[e];if(r&&c)c.value=r;else{const[f,d]=gx(e);if(r){const _=a[e]=yx(r,o);dx(t,f,_,d)}else c&&(_x(t,f,c,d),a[e]=void 0)}}const e_=/(?:Once|Passive|Capture)$/;function gx(t){let e;if(e_.test(t)){e={};let r;for(;r=t.match(e_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Rr(t.slice(2)),e]}let Ja=0;const mx=Promise.resolve(),vx=()=>Ja||(mx.then(()=>Ja=0),Ja=Date.now());function yx(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;cn(wx(r,n.value),e,5,[r])};return n.value=t,n.attached=vx(),n}function wx(t,e){if(ie(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const t_=/^on[a-z]/,Ex=(t,e,n,r,o=!1,a,c,f,d)=>{e==="class"?ax(t,r,o):e==="style"?cx(t,n,r):fl(e)?Kc(e)||px(t,e,n,r,c):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Cx(t,e,r,o))?hx(t,e,r,a,c,f,d):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),fx(t,e,r,o))};function Cx(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&t_.test(e)&&ae(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||t_.test(e)&&Qe(n)?!1:e in t}const bx=tt({patchProp:Ex},lx);let n_;function Ix(){return n_||(n_=kT(bx))}const Tx=(...t)=>{const e=Ix().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=xx(r);if(!o)return;const a=e._component;!ae(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const c=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},e};function xx(t){return Qe(t)?document.querySelector(t):t}var ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i_=Dx,Go=256,Ax={x:Go/2,y:Go/2},Rx=Go/360,Nx=Go/(2*Math.PI);function Px(t,e,n){return e!=null&&(t=Math.max(t,e)),n!=null&&(t=Math.min(t,n)),t}function Ox(t){return t*(Math.PI/180)}function Dx(t,e){var n={x:null,y:null},r=Ax;n.x=r.x+t.lng*Rx;var o=Px(Math.sin(Ox(t.lat)),-.9999,.9999);return n.y=r.y+.5*Math.log((1+o)/(1-o))*-Nx,n}const Mx=["src"],Lx=ml({__name:"StaticMap",props:{zoom:{},center:{},mapWidth:{},mapHeight:{}},setup(t){const e=t,n=new URL("https://maps.googleapis.com/maps/api/staticmap");return n.searchParams.set("zoom",e.zoom),n.searchParams.set("center",e.center),n.searchParams.set("key","AIzaSyDImU7k6IetA47jAxOPlhWiMlWcefJoIiw"),n.searchParams.set("size",`${e.mapWidth}x${e.mapHeight}`),n.searchParams.set("scale","2"),(r,o)=>(Cr(),br("img",{src:en(n).toString(),style:Nr({width:e.mapWidth+"px",height:e.mapHeight+"px"})},null,12,Mx))}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=function(t,e){if(!t)throw Dr(e)},Dr=function(t){return new Error("Firebase Database ("+$p.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Fx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],c=t[n++],f=t[n++],d=((o&7)<<18|(a&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},hu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const a=t[o],c=o+1<t.length,f=c?t[o+1]:0,d=o+2<t.length,_=d?t[o+2]:0,y=a>>2,v=(a&3)<<4|f>>4;let C=(f&15)<<2|_>>6,P=_&63;d||(P=64,c||(C=64)),r.push(n[y],n[v],n[C],n[P])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Fx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],f=o<t.length?n[t.charAt(o)]:0;++o;const _=o<t.length?n[t.charAt(o)]:64;++o;const v=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||f==null||_==null||v==null)throw new kx;const C=a<<2|f>>4;if(r.push(C),_!==64){const P=f<<4&240|_>>2;if(r.push(P),v!==64){const U=_<<6&192|v;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kp=function(t){const e=zp(t);return hu.encodeByteArray(e,!0)},Vo=function(t){return Kp(t).replace(/\./g,"")},bc=function(t){try{return hu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t){return qp(void 0,t)}function qp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Wx(n)||(t[n]=qp(t[n],e[n]));return t}function Wx(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=()=>Ux().__FIREBASE_DEFAULTS__,$x=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bc(t[1]);return e&&JSON.parse(e)},Gp=()=>{try{return Hx()||$x()||zx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Kx=t=>{var e,n;return(n=(e=Gp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qx=t=>{const e=Kx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Vp=()=>{var t;return(t=Gp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t),f="";return[Vo(JSON.stringify(n)),Vo(JSON.stringify(c)),f].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vx())}function Yx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qp(){return $p.NODE_ADMIN===!0}function Qx(){try{return typeof indexedDB=="object"}catch{return!1}}function Xx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="FirebaseError";class Os extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jx,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xp.prototype.create)}}class Xp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?Jx(a,r):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new Os(o,f,r)}}function Jx(t,e){return t.replace(Zx,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Zx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t){return JSON.parse(t)}function et(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=function(t){let e={},n={},r={},o="";try{const a=t.split(".");e=Cs(bc(a[0])||""),n=Cs(bc(a[1])||""),o=a[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:o}},eS=function(t){const e=jp(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},tS=function(t){const e=jp(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function xr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function r_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yo(t,e,n){const r={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r}function Ic(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const a=t[o],c=e[o];if(s_(a)&&s_(c)){if(!Ic(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function s_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)r[v]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let v=0;v<16;v++)r[v]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let v=16;v<80;v++){const C=r[v-3]^r[v-8]^r[v-14]^r[v-16];r[v]=(C<<1|C>>>31)&4294967295}let o=this.chain_[0],a=this.chain_[1],c=this.chain_[2],f=this.chain_[3],d=this.chain_[4],_,y;for(let v=0;v<80;v++){v<40?v<20?(_=f^a&(c^f),y=1518500249):(_=a^c^f,y=1859775393):v<60?(_=a&c|f&(a|c),y=2400959708):(_=a^c^f,y=3395469782);const C=(o<<5|o>>>27)+_+d+y+r[v]&4294967295;d=f,f=c,c=(a<<30|a>>>2)&4294967295,a=o,o=C}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let o=0;const a=this.buf_;let c=this.inbuf_;for(;o<n;){if(c===0)for(;o<=r;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(a[c]=e.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}else for(;o<n;)if(a[c]=e[o],++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let a=24;a>=0;a-=8)e[r]=this.chain_[o]>>a&255,++r;return e}}function Cl(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);if(o>=55296&&o<=56319){const a=o-55296;r++,B(r<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(r)-56320;o=65536+(a<<10)+c}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},bl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t){return t&&t._delegate?t._delegate:t}class bs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new El;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lS(e))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=Ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ti){return this.instances.has(e)}getOptions(e=Ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&c.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ti){return this.component?this.component.multipleInstances?e:Ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oS(t){return t===Ti?void 0:t}function lS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const cS={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},uS=Pe.INFO,fS={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},hS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=fS[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jp{constructor(e){this.name=e,this._logLevel=uS,this._logHandler=hS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const dS=(t,e)=>e.some(n=>t instanceof n);let o_,l_;function _S(){return o_||(o_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pS(){return l_||(l_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zp=new WeakMap,Tc=new WeakMap,eg=new WeakMap,Za=new WeakMap,du=new WeakMap;function gS(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(si(t.result)),o()},c=()=>{r(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&Zp.set(n,t)}).catch(()=>{}),du.set(e,t),e}function mS(t){if(Tc.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),o()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Tc.set(t,e)}let xc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||eg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return si(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vS(t){xc=t(xc)}function yS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ec(this),e,...n);return eg.set(r,e.sort?e.sort():[e]),si(r)}:pS().includes(t)?function(...e){return t.apply(ec(this),e),si(Zp.get(this))}:function(...e){return si(t.apply(ec(this),e))}}function wS(t){return typeof t=="function"?yS(t):(t instanceof IDBTransaction&&mS(t),dS(t,_S())?new Proxy(t,xc):t)}function si(t){if(t instanceof IDBRequest)return gS(t);if(Za.has(t))return Za.get(t);const e=wS(t);return e!==t&&(Za.set(t,e),du.set(e,t)),e}const ec=t=>du.get(t);function ES(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(t,e),f=si(c);return r&&c.addEventListener("upgradeneeded",d=>{r(si(c.result),d.oldVersion,d.newVersion,si(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),f.then(d=>{a&&d.addEventListener("close",()=>a()),o&&d.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),f}const CS=["get","getKey","getAll","getAllKeys","count"],bS=["put","add","delete","clear"],tc=new Map;function a_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tc.get(e))return tc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=bS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||CS.includes(n)))return;const a=async function(c,...f){const d=this.transaction(c,o?"readwrite":"readonly");let _=d.store;return r&&(_=_.index(f.shift())),(await Promise.all([_[n](...f),o&&d.done]))[0]};return tc.set(e,a),a}vS(t=>({...t,get:(e,n,r)=>a_(e,n)||t.get(e,n,r),has:(e,n)=>!!a_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function TS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sc="@firebase/app",c_="0.9.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Jp("@firebase/app"),xS="@firebase/app-compat",SS="@firebase/analytics-compat",AS="@firebase/analytics",RS="@firebase/app-check-compat",NS="@firebase/app-check",PS="@firebase/auth",OS="@firebase/auth-compat",DS="@firebase/database",MS="@firebase/database-compat",LS="@firebase/functions",FS="@firebase/functions-compat",kS="@firebase/installations",BS="@firebase/installations-compat",WS="@firebase/messaging",US="@firebase/messaging-compat",HS="@firebase/performance",$S="@firebase/performance-compat",zS="@firebase/remote-config",KS="@firebase/remote-config-compat",qS="@firebase/storage",GS="@firebase/storage-compat",VS="@firebase/firestore",YS="@firebase/firestore-compat",QS="firebase",XS="9.22.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="[DEFAULT]",jS={[Sc]:"fire-core",[xS]:"fire-core-compat",[AS]:"fire-analytics",[SS]:"fire-analytics-compat",[NS]:"fire-app-check",[RS]:"fire-app-check-compat",[PS]:"fire-auth",[OS]:"fire-auth-compat",[DS]:"fire-rtdb",[MS]:"fire-rtdb-compat",[LS]:"fire-fn",[FS]:"fire-fn-compat",[kS]:"fire-iid",[BS]:"fire-iid-compat",[WS]:"fire-fcm",[US]:"fire-fcm-compat",[HS]:"fire-perf",[$S]:"fire-perf-compat",[zS]:"fire-rc",[KS]:"fire-rc-compat",[qS]:"fire-gcs",[GS]:"fire-gcs-compat",[VS]:"fire-fst",[YS]:"fire-fst-compat","fire-js":"fire-js",[QS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new Map,Rc=new Map;function JS(t,e){try{t.container.addComponent(e)}catch(n){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xo(t){const e=t.name;if(Rc.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;Rc.set(e,t);for(const n of Qo.values())JS(n,t);return!0}function ZS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},oi=new Xp("app","Firebase",e1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=XS;function tg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ac,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw oi.create("bad-app-name",{appName:String(o)});if(n||(n=Vp()),!n)throw oi.create("no-options");const a=Qo.get(o);if(a){if(Ic(n,a.options)&&Ic(r,a.config))return a;throw oi.create("duplicate-app",{appName:o})}const c=new aS(o);for(const d of Rc.values())c.addComponent(d);const f=new t1(n,r,c);return Qo.set(o,f),f}function i1(t=Ac){const e=Qo.get(t);if(!e&&t===Ac&&Vp())return tg();if(!e)throw oi.create("no-app",{appName:t});return e}function gr(t,e,n){var r;let o=(r=jS[t])!==null&&r!==void 0?r:t;n&&(o+=`-${n}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${o}" with version "${e}":`];a&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(f.join(" "));return}Xo(new bs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="firebase-heartbeat-database",s1=1,Is="firebase-heartbeat-store";let nc=null;function ng(){return nc||(nc=ES(r1,s1,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Is)}}}).catch(t=>{throw oi.create("idb-open",{originalErrorMessage:t.message})})),nc}async function o1(t){try{return await(await ng()).transaction(Is).objectStore(Is).get(ig(t))}catch(e){if(e instanceof Os)Mi.warn(e.message);else{const n=oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mi.warn(n.message)}}}async function u_(t,e){try{const r=(await ng()).transaction(Is,"readwrite");await r.objectStore(Is).put(e,ig(t)),await r.done}catch(n){if(n instanceof Os)Mi.warn(n.message);else{const r=oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mi.warn(r.message)}}}function ig(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=1024,a1=30*24*60*60*1e3;class c1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=f_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=a1}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=f_(),{heartbeatsToSend:n,unsentEntries:r}=u1(this._heartbeatsCache.heartbeats),o=Vo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function f_(){return new Date().toISOString().substring(0,10)}function u1(t,e=l1){const n=[];let r=t.slice();for(const o of t){const a=n.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),h_(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),h_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class f1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qx()?Xx().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await o1(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return u_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return u_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function h_(t){return Vo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t){Xo(new bs("platform-logger",e=>new IS(e),"PRIVATE")),Xo(new bs("heartbeat",e=>new c1(e),"PRIVATE")),gr(Sc,c_,t),gr(Sc,c_,"esm2017"),gr("fire-js","")}h1("");var d1="firebase",_1="9.22.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(d1,_1,"app");const d_="@firebase/database",__="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg="";function p1(t){rg=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),et(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Cs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return wn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new g1(e)}}catch{}return new m1},Ri=sg("localStorage"),Nc=sg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Jp("@firebase/database"),v1=function(){let t=1;return function(){return t++}}(),og=function(t){const e=rS(t),n=new iS;n.update(e);const r=n.digest();return hu.encodeByteArray(r)},Ds=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ds.apply(null,r):typeof r=="object"?e+=et(r):e+=r,e+=" "}return e};let Di=null,p_=!0;const y1=function(t,e){B(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(mr.logLevel=Pe.VERBOSE,Di=mr.log.bind(mr),e&&Nc.set("logging_enabled",!0)):typeof t=="function"?Di=t:(Di=null,Nc.remove("logging_enabled"))},ct=function(...t){if(p_===!0&&(p_=!1,Di===null&&Nc.get("logging_enabled")===!0&&y1(!0)),Di){const e=Ds.apply(null,t);Di(e)}},Ms=function(t){return function(...e){ct(t,...e)}},Pc=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ds(...t);mr.error(e)},Bn=function(...t){const e=`FIREBASE FATAL ERROR: ${Ds(...t)}`;throw mr.error(e),new Error(e)},At=function(...t){const e="FIREBASE WARNING: "+Ds(...t);mr.warn(e)},w1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&At("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},_u=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},E1=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Li="[MIN_NAME]",Wn="[MAX_NAME]",Lr=function(t,e){if(t===e)return 0;if(t===Li||e===Wn)return-1;if(e===Li||t===Wn)return 1;{const n=g_(t),r=g_(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},C1=function(t,e){return t===e?0:t<e?-1:1},is=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+et(e))},pu=function(t){if(typeof t!="object"||t===null)return et(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=et(e[r]),n+=":",n+=pu(t[e[r]]);return n+="}",n},lg=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let o=0;o<n;o+=e)o+e>n?r.push(t.substring(o,n)):r.push(t.substring(o,o+e));return r};function Nt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ag=function(t){B(!_u(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let o,a,c,f,d;t===0?(a=0,c=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(t)/Math.LN2),r),a=f+r,c=Math.round(t*Math.pow(2,n-f)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-r-n))));const _=[];for(d=n;d;d-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(d=e;d;d-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(o?1:0),_.reverse();const y=_.join("");let v="";for(d=0;d<64;d+=8){let C=parseInt(y.substr(d,8),2).toString(16);C.length===1&&(C="0"+C),v=v+C}return v.toLowerCase()},b1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},I1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function T1(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const x1=new RegExp("^-?(0*)\\d{1,10}$"),S1=-2147483648,A1=2147483647,g_=function(t){if(x1.test(t)){const e=Number(t);if(e>=S1&&e<=A1)return e}return null},Fr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw At("Exception was thrown by user callback.",n),e},Math.floor(0))}},R1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){At(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',At(e)}}class vr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}vr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu="5",cg="v",ug="s",fg="r",hg="f",dg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_g="ls",pg="p",Oc="ac",gg="websocket",mg="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r,o,a=!1,c="",f=!1,d=!1){this.secure=n,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ri.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ri.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function O1(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function yg(t,e,n){B(typeof e=="string","typeof type must == string"),B(typeof n=="object","typeof params must == object");let r;if(e===gg)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===mg)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);O1(t)&&(n.ns=t.namespace);const o=[];return Nt(n,(a,c)=>{o.push(a+"="+c)}),r+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.counters_={}}incrementCounter(e,n=1){wn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Bx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic={},rc={};function mu(t){const e=t.toString();return ic[e]||(ic[e]=new D1),ic[e]}function M1(t,e){const n=t.toString();return rc[n]||(rc[n]=e()),rc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Fr(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="start",F1="close",k1="pLPCommand",B1="pRTLPCB",wg="id",Eg="pw",Cg="ser",W1="cb",U1="seg",H1="ts",$1="d",z1="dframe",bg=1870,Ig=30,K1=bg-Ig,q1=25e3,G1=3e4;class fr{constructor(e,n,r,o,a,c,f){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=o,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ms(e),this.stats_=mu(n),this.urlFn=d=>(this.appCheckToken&&(d[Oc]=this.appCheckToken),yg(n,mg,d))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new L1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(G1)),E1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vu((...a)=>{const[c,f,d,_,y]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===m_)this.id=f,this.password=d;else if(c===F1)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={};r[m_]="t",r[Cg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[W1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[cg]=gu,this.transportSessionId&&(r[ug]=this.transportSessionId),this.lastSessionId&&(r[_g]=this.lastSessionId),this.applicationId&&(r[pg]=this.applicationId),this.appCheckToken&&(r[Oc]=this.appCheckToken),typeof location<"u"&&location.hostname&&dg.test(location.hostname)&&(r[fg]=hg);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fr.forceAllow_=!0}static forceDisallow(){fr.forceDisallow_=!0}static isAvailable(){return fr.forceAllow_?!0:!fr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!b1()&&!I1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Kp(n),o=lg(r,K1);for(let a=0;a<o.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[z1]="t",r[wg]=e,r[Eg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=et(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class vu{constructor(e,n,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=v1(),window[k1+this.uniqueCallbackIdentifier]=e,window[B1+this.uniqueCallbackIdentifier]=n,this.myIFrame=vu.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){ct("frame writing exception"),f.stack&&ct(f.stack),ct(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ct("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[wg]=this.myID,e[Eg]=this.myPW,e[Cg]=this.currentSerial;let n=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ig+r.length<=bg;){const c=this.pendingSegs.shift();r=r+"&"+U1+o+"="+c.seg+"&"+H1+o+"="+c.ts+"&"+$1+o+"="+c.d,o++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(r,Math.floor(q1)),a=()=>{clearTimeout(o),r()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ct("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=16384,Y1=45e3;let jo=null;typeof MozWebSocket<"u"?jo=MozWebSocket:typeof WebSocket<"u"&&(jo=WebSocket);class rn{constructor(e,n,r,o,a,c,f){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ms(this.connId),this.stats_=mu(n),this.connURL=rn.connectionURL_(n,c,f,o,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,o,a){const c={};return c[cg]=gu,typeof location<"u"&&location.hostname&&dg.test(location.hostname)&&(c[fg]=hg),n&&(c[ug]=n),r&&(c[_g]=r),o&&(c[Oc]=o),a&&(c[pg]=a),yg(e,gg,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ri.set("previous_websocket_failure",!0);try{let r;Qp(),this.mySock=new jo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){rn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&jo!==null&&!rn.forceDisallow_}static previouslyFailed(){return Ri.isInMemoryStorage||Ri.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ri.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Cs(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(B(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=lg(n,V1);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Y1))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rn.responsesRequiredToBeHealthy=2;rn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[fr,rn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=rn&&rn.isAvailable();let r=n&&!rn.previouslyFailed();if(e.webSocketOnly&&(n||At("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rn];else{const o=this.transports_=[];for(const a of Ts.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a);Ts.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ts.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=6e4,X1=5e3,j1=10*1024,J1=100*1024,sc="t",v_="d",Z1="s",y_="r",eA="e",w_="o",E_="a",C_="n",b_="p",tA="h";class nA{constructor(e,n,r,o,a,c,f,d,_,y){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=d,this.onKill_=_,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ms("c:"+this.id+":"),this.transportManager_=new Ts(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=fs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>J1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>j1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(sc in e){const n=e[sc];n===E_?this.upgradeIfSecondaryHealthy_():n===y_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===w_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=is("t",e),r=is("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:b_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:E_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:C_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=is("t",e),r=is("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=is(sc,e);if(v_ in e){const r=e[v_];if(n===tA){const o=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===C_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Z1?this.onConnectionShutdown_(r):n===y_?this.onReset_(r):n===eA?Pc("Server Error: "+r):n===w_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Pc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),gu!==r&&At("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),fs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Q1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(X1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:b_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ri.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{put(e,n,r,o){}merge(e,n,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this.allowedEvents_=e,this.listeners_={},B(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const o=this.getInitialEvent(e);o&&n.apply(r,o)}off(e,n,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let a=0;a<o.length;a++)if(o[a].callback===n&&(!r||r===o[a].context)){o.splice(a,1);return}}validateEventType_(e){B(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends xg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Yp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Jo}getInitialEvent(e){return B(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=32,T_=768;class Ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function be(){return new Ae("")}function ue(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ui(t){return t.pieces_.length-t.pieceNum_}function Oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ae(t.pieces_,e)}function Sg(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function iA(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ag(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Rg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ae(e,0)}function Ye(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&n.push(r[o])}return new Ae(n,0)}function fe(t){return t.pieceNum_>=t.pieces_.length}function xt(t,e){const n=ue(t),r=ue(e);if(n===null)return e;if(n===r)return xt(Oe(t),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function yu(t,e){if(ui(t)!==ui(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function on(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ui(t)>ui(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class rA{constructor(e,n){this.errorPrefix_=n,this.parts_=Ag(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=bl(this.parts_[r]);Ng(this)}}function sA(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=bl(e),Ng(t)}function oA(t){const e=t.parts_.pop();t.byteLength_-=bl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ng(t){if(t.byteLength_>T_)throw new Error(t.errorPrefix_+"has a key path longer than "+T_+" bytes ("+t.byteLength_+").");if(t.parts_.length>I_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+I_+") or object contains a cycle "+xi(t))}function xi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends xg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new wu}getInitialEvent(e){return B(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=1e3,lA=60*5*1e3,x_=30*1e3,aA=1.3,cA=3e4,uA="server_kill",S_=3;class Fn extends Tg{constructor(e,n,r,o,a,c,f,d){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=d,this.id=Fn.nextPersistentConnectionId_++,this.log_=Ms("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rs,this.maxReconnectDelay_=lA,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!Qp())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wu.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Jo.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const o=++this.requestNumber_,a={r:o,a:e,b:n};this.log_(et(a)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();const n=new El,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const f=c.d;c.s==="ok"?n.resolve(f):n.reject(f)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,r,o){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:n,query:e,tag:r};this.listens.get(c).set(a,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+r+" for "+o);const a={p:r},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,f=>{const d=f.d,_=f.s;Fn.warnOnListenWarnings_(d,n),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",f),_!=="ok"&&this.removeListen_(r,o),e.onComplete&&e.onComplete(_,d))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&wn(e,"w")){const r=xr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();At(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=x_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=eS(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,o=>{const a=o.s,c=o.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,n)}sendUnlisten_(e,n,r,o){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";o&&(a.q=r,a.t=o),this.sendRequest(c,a)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,o){const a={p:n,d:r};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(e,n,r,o){this.putInternal("p",e,n,r,o)}merge(e,n,r,o){this.putInternal("m",e,n,r,o)}putInternal(e,n,r,o,a){this.initConnection_();const c={p:n,d:r};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:o}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+et(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Pc("Unrecognized action received from server: "+et(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=rs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>cA&&(this.reconnectDelay_=rs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*aA)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Fn.nextConnectionId_++,a=this.lastSessionId;let c=!1,f=null;const d=function(){f?f.close():(c=!0,r())},_=function(v){B(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(v)};this.realtime_={close:d,sendRequest:_};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,C]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);c?ct("getToken() completed but was canceled"):(ct("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=C&&C.token,f=new nA(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,P=>{At(P+" ("+this.repoInfo_.toString()+")"),this.interrupt(uA)},a))}catch(v){this.log_("Failed to get token: "+v),c||(this.repoInfo_.nodeAdmin&&At(v),d())}}}interrupt(e){ct("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ct("Resuming connection for reason: "+e),delete this.interruptReasons_[e],r_(this.interruptReasons_)&&(this.reconnectDelay_=rs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(a=>pu(a)).join("$"):r="default";const o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const r=new Ae(e).toString();let o;if(this.listens.has(r)){const a=this.listens.get(r);o=a.get(n),a.delete(n),a.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,n){ct("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=S_&&(this.reconnectDelay_=x_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ct("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=S_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+rg.replace(/\./g,"-")]=1,Yp()?e["framework.cordova"]=1:Yx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Jo.getInstance().currentlyOnline();return r_(this.interruptReasons_)&&e}}Fn.nextPersistentConnectionId_=0;Fn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new he(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new he(Li,e),o=new he(Li,n);return this.compare(r,o)!==0}minPost(){return he.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo;class Pg extends Il{static get __EMPTY_NODE(){return Lo}static set __EMPTY_NODE(e){Lo=e}compare(e,n){return Lr(e.name,n.name)}isDefinedOn(e){throw Dr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return he.MIN}maxPost(){return new he(Wn,Lo)}makePost(e,n){return B(typeof e=="string","KeyIndex indexValue must always be a string."),new he(e,Lo)}toString(){return".key"}}const li=new Pg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n,r,o,a=null){this.isReverse_=o,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?r(e.key,n):1,o&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,o,a){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=o??St.EMPTY_NODE,this.right=a??St.EMPTY_NODE}copy(e,n,r,o,a){return new Ze(e??this.key,n??this.value,r??this.color,o??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const a=r(e,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(e,n,r),null):a===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return St.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,o;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return St.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ze.RED=!0;Ze.BLACK=!1;class fA{copy(e,n,r,o,a){return this}insert(e,n,r){return new Ze(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class St{constructor(e,n=St.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new St(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ze.BLACK,null,null))}remove(e){return new St(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ze.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,o=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Fo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Fo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Fo(this.root_,null,this.comparator_,!0,e)}}St.EMPTY_NODE=new fA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e){return Lr(t.name,e.name)}function Eu(t,e){return Lr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc;function dA(t){Dc=t}const Og=function(t){return typeof t=="number"?"number:"+ag(t):"string:"+t},Dg=function(t){if(t.isLeafNode()){const e=t.val();B(typeof e=="string"||typeof e=="number"||typeof e=="object"&&wn(e,".sv"),"Priority must be a string or number.")}else B(t===Dc||t.isEmpty(),"priority of unexpected type.");B(t===Dc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A_;class Je{constructor(e,n=Je.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Dg(this.priorityNode_)}static set __childrenNodeConstructor(e){A_=e}static get __childrenNodeConstructor(){return A_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Je(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Je.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return fe(e)?this:ue(e)===".priority"?this.priorityNode_:Je.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Je.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ue(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(B(r!==".priority"||ui(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Je.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Og(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ag(this.value_):e+=this.value_,this.lazyHash_=og(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Je.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Je.__childrenNodeConstructor?-1:(B(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,o=Je.VALUE_TYPE_ORDER.indexOf(n),a=Je.VALUE_TYPE_ORDER.indexOf(r);return B(o>=0,"Unknown leaf type: "+n),B(a>=0,"Unknown leaf type: "+r),o===a?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Je.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mg,Lg;function _A(t){Mg=t}function pA(t){Lg=t}class gA extends Il{compare(e,n){const r=e.node.getPriority(),o=n.node.getPriority(),a=r.compareTo(o);return a===0?Lr(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return he.MIN}maxPost(){return new he(Wn,new Je("[PRIORITY-POST]",Lg))}makePost(e,n){const r=Mg(e);return new he(n,new Je("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ue=new gA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=Math.log(2);class vA{constructor(e){const n=a=>parseInt(Math.log(a)/mA,10),r=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=r(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Zo=function(t,e,n,r){t.sort(e);const o=function(d,_){const y=_-d;let v,C;if(y===0)return null;if(y===1)return v=t[d],C=n?n(v):v,new Ze(C,v.node,Ze.BLACK,null,null);{const P=parseInt(y/2,10)+d,U=o(d,P),K=o(P+1,_);return v=t[P],C=n?n(v):v,new Ze(C,v.node,Ze.BLACK,U,K)}},a=function(d){let _=null,y=null,v=t.length;const C=function(U,K){const Z=v-U,we=v;v-=U;const Le=o(Z+1,we),Ee=t[Z],te=n?n(Ee):Ee;P(new Ze(te,Ee.node,K,null,Le))},P=function(U){_?(_.left=U,_=U):(y=U,_=U)};for(let U=0;U<d.count;++U){const K=d.nextBitIsOne(),Z=Math.pow(2,d.count-(U+1));K?C(Z,Ze.BLACK):(C(Z,Ze.BLACK),C(Z,Ze.RED))}return y},c=new vA(t.length),f=a(c);return new St(r||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc;const cr={};class Ln{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return B(cr&&Ue,"ChildrenNode.ts has not been loaded"),oc=oc||new Ln({".priority":cr},{".priority":Ue}),oc}get(e){const n=xr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof St?n:null}hasIndex(e){return wn(this.indexSet_,e.toString())}addIndex(e,n){B(e!==li,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const a=n.getIterator(he.Wrap);let c=a.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=a.getNext();let f;o?f=Zo(r,e.getCompare()):f=cr;const d=e.toString(),_=Object.assign({},this.indexSet_);_[d]=e;const y=Object.assign({},this.indexes_);return y[d]=f,new Ln(y,_)}addToIndexes(e,n){const r=Yo(this.indexes_,(o,a)=>{const c=xr(this.indexSet_,a);if(B(c,"Missing index implementation for "+a),o===cr)if(c.isDefinedOn(e.node)){const f=[],d=n.getIterator(he.Wrap);let _=d.getNext();for(;_;)_.name!==e.name&&f.push(_),_=d.getNext();return f.push(e),Zo(f,c.getCompare())}else return cr;else{const f=n.get(e.name);let d=o;return f&&(d=d.remove(new he(e.name,f))),d.insert(e,e.node)}});return new Ln(r,this.indexSet_)}removeFromIndexes(e,n){const r=Yo(this.indexes_,o=>{if(o===cr)return o;{const a=n.get(e.name);return a?o.remove(new he(e.name,a)):o}});return new Ln(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ss;class ee{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Dg(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ss||(ss=new ee(new St(Eu),null,Ln.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ss}updatePriority(e){return this.children_.isEmpty()?this:new ee(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ss:n}}getChild(e){const n=ue(e);return n===null?this:this.getImmediateChild(n).getChild(Oe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(B(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new he(e,n);let o,a;n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));const c=o.isEmpty()?ss:this.priorityNode_;return new ee(o,c,a)}}updateChild(e,n){const r=ue(e);if(r===null)return n;{B(ue(e)!==".priority"||ui(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Oe(e),n);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,o=0,a=!0;if(this.forEachChild(Ue,(c,f)=>{n[c]=f.val(e),r++,a&&ee.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):a=!1}),!e&&a&&o<2*r){const c=[];for(const f in n)c[f]=n[f];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Og(this.getPriority().val())+":"),this.forEachChild(Ue,(n,r)=>{const o=r.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":og(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const o=this.resolveIndex_(r);if(o){const a=o.getPredecessorKey(new he(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new he(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new he(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,he.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,he.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)>0;)o.getNext(),a=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ls?-1:0}withIndex(e){if(e===li||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ee(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===li||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ue),o=n.getIterator(Ue);let a=r.getNext(),c=o.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=r.getNext(),c=o.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===li?null:this.indexMap_.get(e.toString())}}ee.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yA extends ee{constructor(){super(new St(Eu),ee.EMPTY_NODE,Ln.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}}const Ls=new yA;Object.defineProperties(he,{MIN:{value:new he(Li,ee.EMPTY_NODE)},MAX:{value:new he(Wn,Ls)}});Pg.__EMPTY_NODE=ee.EMPTY_NODE;Je.__childrenNodeConstructor=ee;dA(Ls);pA(Ls);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=!0;function ot(t,e=null){if(t===null)return ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),B(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Je(n,ot(e))}if(!(t instanceof Array)&&wA){const n=[];let r=!1;if(Nt(t,(c,f)=>{if(c.substring(0,1)!=="."){const d=ot(f);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),n.push(new he(c,d)))}}),n.length===0)return ee.EMPTY_NODE;const a=Zo(n,hA,c=>c.name,Eu);if(r){const c=Zo(n,Ue.getCompare());return new ee(a,ot(e),new Ln({".priority":c},{".priority":Ue}))}else return new ee(a,ot(e),Ln.Default)}else{let n=ee.EMPTY_NODE;return Nt(t,(r,o)=>{if(wn(t,r)&&r.substring(0,1)!=="."){const a=ot(o);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(r,a))}}),n.updatePriority(ot(e))}}_A(ot);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends Il{constructor(e){super(),this.indexPath_=e,B(!fe(e)&&ue(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),o=this.extractChild(n.node),a=r.compareTo(o);return a===0?Lr(e.name,n.name):a}makePost(e,n){const r=ot(e),o=ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new he(n,o)}maxPost(){const e=ee.EMPTY_NODE.updateChild(this.indexPath_,Ls);return new he(Wn,e)}toString(){return Ag(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA extends Il{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Lr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return he.MIN}maxPost(){return he.MAX}makePost(e,n){const r=ot(e);return new he(n,r)}toString(){return".value"}}const Fg=new EA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){return{type:"value",snapshotNode:t}}function Sr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function xs(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ss(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function CA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this.index_=e}updateChild(e,n,r,o,a,c){B(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(n);return f.getChild(o).equals(r.getChild(o))&&f.isEmpty()===r.isEmpty()||(c!=null&&(r.isEmpty()?e.hasChild(n)?c.trackChildChange(xs(n,f)):B(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Sr(n,r)):c.trackChildChange(Ss(n,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ue,(o,a)=>{n.hasChild(o)||r.trackChildChange(xs(o,a))}),n.isLeafNode()||n.forEachChild(Ue,(o,a)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(a)||r.trackChildChange(Ss(o,a,c))}else r.trackChildChange(Sr(o,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.indexedFilter_=new bu(e.getIndex()),this.index_=e.getIndex(),this.startPost_=As.getStartPost_(e),this.endPost_=As.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,o,a,c){return this.matches(new he(n,r))||(r=ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,o,a,c)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ee.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(ee.EMPTY_NODE);const a=this;return n.forEachChild(Ue,(c,f)=>{a.matches(new he(c,f))||(o=o.updateImmediateChild(c,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new As(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,o,a,c){return this.rangedFilter_.matches(new he(n,r))||(r=ee.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,o,a,c):this.fullLimitUpdateChild_(e,n,r,a,c)}updateFullNode(e,n,r){let o;if(n.isLeafNode()||n.isEmpty())o=ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=ee.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))o=o.updateImmediateChild(f.name,f.node),c++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(ee.EMPTY_NODE);let a;this.reverse_?a=o.getReverseIterator(this.index_):a=o.getIterator(this.index_);let c=0;for(;a.hasNext();){const f=a.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:o=o.updateImmediateChild(f.name,ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,o,a){let c;if(this.reverse_){const v=this.index_.getCompare();c=(C,P)=>v(P,C)}else c=this.index_.getCompare();const f=e;B(f.numChildren()===this.limit_,"");const d=new he(n,r),_=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),y=this.rangedFilter_.matches(d);if(f.hasChild(n)){const v=f.getImmediateChild(n);let C=o.getChildAfterChild(this.index_,_,this.reverse_);for(;C!=null&&(C.name===n||f.hasChild(C.name));)C=o.getChildAfterChild(this.index_,C,this.reverse_);const P=C==null?1:c(C,d);if(y&&!r.isEmpty()&&P>=0)return a!=null&&a.trackChildChange(Ss(n,r,v)),f.updateImmediateChild(n,r);{a!=null&&a.trackChildChange(xs(n,v));const K=f.updateImmediateChild(n,ee.EMPTY_NODE);return C!=null&&this.rangedFilter_.matches(C)?(a!=null&&a.trackChildChange(Sr(C.name,C.node)),K.updateImmediateChild(C.name,C.node)):K}}else return r.isEmpty()?e:y&&c(_,d)>=0?(a!=null&&(a.trackChildChange(xs(_.name,_.node)),a.trackChildChange(Sr(n,r))),f.updateImmediateChild(n,r).updateImmediateChild(_.name,ee.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ue}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Li}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ue}copy(){const e=new Iu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function IA(t){return t.loadsAllData()?new bu(t.getIndex()):t.hasLimit()?new bA(t):new As(t)}function TA(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function R_(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function xA(t,e,n){let r;return t.index_===li||n?r=R_(t,e,n):r=R_(t,e,Wn),r.startAfterSet_=!0,r}function SA(t,e){const n=t.copy();return n.index_=e,n}function N_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ue?n="$priority":t.index_===Fg?n="$value":t.index_===li?n="$key":(B(t.index_ instanceof Cu,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=et(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=et(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+et(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=et(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+et(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function P_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ue&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends Tg{constructor(e,n,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=Ms("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(B(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,o){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=el.getListenId_(e,r),f={};this.listens_[c]=f;const d=N_(e._queryParams);this.restRequest_(a+".json",d,(_,y)=>{let v=y;if(_===404&&(v=null,_=null),_===null&&this.onDataUpdate_(a,v,!1,r),xr(this.listens_,c)===f){let C;_?_===401?C="permission_denied":C="rest_error:"+_:C="ok",o(C,null)}})}unlisten(e,n){const r=el.getListenId_(e,n);delete this.listens_[r]}get(e){const n=N_(e._queryParams),r=e._path.toString(),o=new El;return this.restRequest_(r+".json",n,(a,c)=>{let f=c;a===404&&(f=null,a=null),a===null?(this.onDataUpdate_(r,f,!1,null),o.resolve(f)):o.reject(new Error(f))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,a])=>{o&&o.accessToken&&(n.auth=o.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+nS(n);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&f.readyState===4){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let d=null;if(f.status>=200&&f.status<300){try{d=Cs(f.responseText)}catch{At("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,d)}else f.status!==401&&f.status!==404&&At("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(){return{value:null,children:new Map}}function Bg(t,e,n){if(fe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ue(e);t.children.has(r)||t.children.set(r,tl());const o=t.children.get(r);e=Oe(e),Bg(o,e,n)}}function Mc(t,e,n){t.value!==null?n(e,t.value):RA(t,(r,o)=>{const a=new Ae(e.toString()+"/"+r);Mc(o,a,n)})}function RA(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Nt(this.last_,(r,o)=>{n[r]=n[r]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=10*1e3,PA=30*1e3,OA=5*60*1e3;class DA{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new NA(e);const r=O_+(PA-O_)*Math.random();fs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Nt(e,(o,a)=>{a>0&&wn(this.statsToReport_,o)&&(n[o]=a,r=!0)}),r&&this.server_.reportStats(n),fs(this.reportStats_.bind(this),Math.floor(Math.random()*2*OA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ln||(ln={}));function Wg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Tu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function xu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ln.ACK_USER_WRITE,this.source=Wg()}operationForChild(e){if(fe(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ae(e));return new nl(be(),n,this.revert)}}else return B(ue(this.path)===e,"operationForChild called for unrelated child."),new nl(Oe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n){this.source=e,this.path=n,this.type=ln.LISTEN_COMPLETE}operationForChild(e){return fe(this.path)?new Rs(this.source,be()):new Rs(this.source,Oe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ln.OVERWRITE}operationForChild(e){return fe(this.path)?new Fi(this.source,be(),this.snap.getImmediateChild(e)):new Fi(this.source,Oe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ln.MERGE}operationForChild(e){if(fe(this.path)){const n=this.children.subtree(new Ae(e));return n.isEmpty()?null:n.value?new Fi(this.source,be(),n.value):new Ns(this.source,be(),n)}else return B(ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ns(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(fe(e))return this.isFullyInitialized()&&!this.filtered_;const n=ue(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function LA(t,e,n,r){const o=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(CA(c.childName,c.snapshotNode))}),os(t,o,"child_removed",e,r,n),os(t,o,"child_added",e,r,n),os(t,o,"child_moved",a,r,n),os(t,o,"child_changed",e,r,n),os(t,o,"value",e,r,n),o}function os(t,e,n,r,o,a){const c=r.filter(f=>f.type===n);c.sort((f,d)=>kA(t,f,d)),c.forEach(f=>{const d=FA(t,f,a);o.forEach(_=>{_.respondsTo(f.type)&&e.push(_.createEvent(d,t.query_))})})}function FA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function kA(t,e,n){if(e.childName==null||n.childName==null)throw Dr("Should only compare child_ events.");const r=new he(e.childName,e.snapshotNode),o=new he(n.childName,n.snapshotNode);return t.index_.compare(r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e){return{eventCache:t,serverCache:e}}function hs(t,e,n,r){return Tl(new ki(e,n,r),t.serverCache)}function Ug(t,e,n,r){return Tl(t.eventCache,new ki(e,n,r))}function Lc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Bi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc;const BA=()=>(lc||(lc=new St(C1)),lc);class Me{constructor(e,n=BA()){this.value=e,this.children=n}static fromObject(e){let n=new Me(null);return Nt(e,(r,o)=>{n=n.set(new Ae(r),o)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:be(),value:this.value};if(fe(e))return null;{const r=ue(e),o=this.children.get(r);if(o!==null){const a=o.findRootMostMatchingPathAndValue(Oe(e),n);return a!=null?{path:Ye(new Ae(r),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(fe(e))return this;{const n=ue(e),r=this.children.get(n);return r!==null?r.subtree(Oe(e)):new Me(null)}}set(e,n){if(fe(e))return new Me(n,this.children);{const r=ue(e),a=(this.children.get(r)||new Me(null)).set(Oe(e),n),c=this.children.insert(r,a);return new Me(this.value,c)}}remove(e){if(fe(e))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const n=ue(e),r=this.children.get(n);if(r){const o=r.remove(Oe(e));let a;return o.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,o),this.value===null&&a.isEmpty()?new Me(null):new Me(this.value,a)}else return this}}get(e){if(fe(e))return this.value;{const n=ue(e),r=this.children.get(n);return r?r.get(Oe(e)):null}}setTree(e,n){if(fe(e))return n;{const r=ue(e),a=(this.children.get(r)||new Me(null)).setTree(Oe(e),n);let c;return a.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,a),new Me(this.value,c)}}fold(e){return this.fold_(be(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((o,a)=>{r[o]=a.fold_(Ye(e,o),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,be(),n)}findOnPath_(e,n,r){const o=this.value?r(n,this.value):!1;if(o)return o;if(fe(e))return null;{const a=ue(e),c=this.children.get(a);return c?c.findOnPath_(Oe(e),Ye(n,a),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,be(),n)}foreachOnPath_(e,n,r){if(fe(e))return this;{this.value&&r(n,this.value);const o=ue(e),a=this.children.get(o);return a?a.foreachOnPath_(Oe(e),Ye(n,o),r):new Me(null)}}foreach(e){this.foreach_(be(),e)}foreach_(e,n){this.children.inorderTraversal((r,o)=>{o.foreach_(Ye(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.writeTree_=e}static empty(){return new un(new Me(null))}}function ds(t,e,n){if(fe(e))return new un(new Me(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const o=r.path;let a=r.value;const c=xt(o,e);return a=a.updateChild(c,n),new un(t.writeTree_.set(o,a))}else{const o=new Me(n),a=t.writeTree_.setTree(e,o);return new un(a)}}}function D_(t,e,n){let r=t;return Nt(n,(o,a)=>{r=ds(r,Ye(e,o),a)}),r}function M_(t,e){if(fe(e))return un.empty();{const n=t.writeTree_.setTree(e,new Me(null));return new un(n)}}function Fc(t,e){return Ui(t,e)!=null}function Ui(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(xt(n.path,e)):null}function L_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ue,(r,o)=>{e.push(new he(r,o))}):t.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&e.push(new he(r,o.value))}),e}function ai(t,e){if(fe(e))return t;{const n=Ui(t,e);return n!=null?new un(new Me(n)):new un(t.writeTree_.subtree(e))}}function kc(t){return t.writeTree_.isEmpty()}function Ar(t,e){return Hg(be(),t.writeTree_,e)}function Hg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((o,a)=>{o===".priority"?(B(a.value!==null,"Priority writes must always be leaf nodes"),r=a.value):n=Hg(Ye(t,o),a,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ye(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t,e){return qg(e,t)}function WA(t,e,n,r,o){B(r>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=ds(t.visibleWrites,e,n)),t.lastWriteId=r}function UA(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function HA(t,e){const n=t.allWrites.findIndex(f=>f.writeId===e);B(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let o=r.visible,a=!1,c=t.allWrites.length-1;for(;o&&c>=0;){const f=t.allWrites[c];f.visible&&(c>=n&&$A(f,r.path)?o=!1:on(r.path,f.path)&&(a=!0)),c--}if(o){if(a)return zA(t),!0;if(r.snap)t.visibleWrites=M_(t.visibleWrites,r.path);else{const f=r.children;Nt(f,d=>{t.visibleWrites=M_(t.visibleWrites,Ye(r.path,d))})}return!0}else return!1}function $A(t,e){if(t.snap)return on(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&on(Ye(t.path,n),e))return!0;return!1}function zA(t){t.visibleWrites=$g(t.allWrites,KA,be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function KA(t){return t.visible}function $g(t,e,n){let r=un.empty();for(let o=0;o<t.length;++o){const a=t[o];if(e(a)){const c=a.path;let f;if(a.snap)on(n,c)?(f=xt(n,c),r=ds(r,f,a.snap)):on(c,n)&&(f=xt(c,n),r=ds(r,be(),a.snap.getChild(f)));else if(a.children){if(on(n,c))f=xt(n,c),r=D_(r,f,a.children);else if(on(c,n))if(f=xt(c,n),fe(f))r=D_(r,be(),a.children);else{const d=xr(a.children,ue(f));if(d){const _=d.getChild(Oe(f));r=ds(r,be(),_)}}}else throw Dr("WriteRecord should have .snap or .children")}}return r}function zg(t,e,n,r,o){if(!r&&!o){const a=Ui(t.visibleWrites,e);if(a!=null)return a;{const c=ai(t.visibleWrites,e);if(kc(c))return n;if(n==null&&!Fc(c,be()))return null;{const f=n||ee.EMPTY_NODE;return Ar(c,f)}}}else{const a=ai(t.visibleWrites,e);if(!o&&kc(a))return n;if(!o&&n==null&&!Fc(a,be()))return null;{const c=function(_){return(_.visible||o)&&(!r||!~r.indexOf(_.writeId))&&(on(_.path,e)||on(e,_.path))},f=$g(t.allWrites,c,e),d=n||ee.EMPTY_NODE;return Ar(f,d)}}}function qA(t,e,n){let r=ee.EMPTY_NODE;const o=Ui(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Ue,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(n){const a=ai(t.visibleWrites,e);return n.forEachChild(Ue,(c,f)=>{const d=Ar(ai(a,new Ae(c)),f);r=r.updateImmediateChild(c,d)}),L_(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{const a=ai(t.visibleWrites,e);return L_(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function GA(t,e,n,r,o){B(r||o,"Either existingEventSnap or existingServerSnap must exist");const a=Ye(e,n);if(Fc(t.visibleWrites,a))return null;{const c=ai(t.visibleWrites,a);return kc(c)?o.getChild(n):Ar(c,o.getChild(n))}}function VA(t,e,n,r){const o=Ye(e,n),a=Ui(t.visibleWrites,o);if(a!=null)return a;if(r.isCompleteForChild(n)){const c=ai(t.visibleWrites,o);return Ar(c,r.getNode().getImmediateChild(n))}else return null}function YA(t,e){return Ui(t.visibleWrites,e)}function QA(t,e,n,r,o,a,c){let f;const d=ai(t.visibleWrites,e),_=Ui(d,be());if(_!=null)f=_;else if(n!=null)f=Ar(d,n);else return[];if(f=f.withIndex(c),!f.isEmpty()&&!f.isLeafNode()){const y=[],v=c.getCompare(),C=a?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let P=C.getNext();for(;P&&y.length<o;)v(P,r)!==0&&y.push(P),P=C.getNext();return y}else return[]}function XA(){return{visibleWrites:un.empty(),allWrites:[],lastWriteId:-1}}function il(t,e,n,r){return zg(t.writeTree,t.treePath,e,n,r)}function Au(t,e){return qA(t.writeTree,t.treePath,e)}function F_(t,e,n,r){return GA(t.writeTree,t.treePath,e,n,r)}function rl(t,e){return YA(t.writeTree,Ye(t.treePath,e))}function jA(t,e,n,r,o,a){return QA(t.writeTree,t.treePath,e,n,r,o,a)}function Ru(t,e,n){return VA(t.writeTree,t.treePath,e,n)}function Kg(t,e){return qg(Ye(t.treePath,e),t.writeTree)}function qg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;B(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),B(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const a=o.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(r,Ss(r,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(r,xs(r,o.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(r,Sr(r,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(r,Ss(r,e.snapshotNode,o.oldSnap));else throw Dr("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Gg=new ZA;class Nu{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new ki(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ru(this.writes_,e,r)}}getChildAfterChild(e,n,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Bi(this.viewCache_),a=jA(this.writes_,o,n,1,r,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(t){return{filter:t}}function tR(t,e){B(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),B(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function nR(t,e,n,r,o){const a=new JA;let c,f;if(n.type===ln.OVERWRITE){const _=n;_.source.fromUser?c=Bc(t,e,_.path,_.snap,r,o,a):(B(_.source.fromServer,"Unknown source."),f=_.source.tagged||e.serverCache.isFiltered()&&!fe(_.path),c=sl(t,e,_.path,_.snap,r,o,f,a))}else if(n.type===ln.MERGE){const _=n;_.source.fromUser?c=rR(t,e,_.path,_.children,r,o,a):(B(_.source.fromServer,"Unknown source."),f=_.source.tagged||e.serverCache.isFiltered(),c=Wc(t,e,_.path,_.children,r,o,f,a))}else if(n.type===ln.ACK_USER_WRITE){const _=n;_.revert?c=lR(t,e,_.path,r,o,a):c=sR(t,e,_.path,_.affectedTree,r,o,a)}else if(n.type===ln.LISTEN_COMPLETE)c=oR(t,e,n.path,r,a);else throw Dr("Unknown operation type: "+n.type);const d=a.getChanges();return iR(e,c,d),{viewCache:c,changes:d}}function iR(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Lc(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(kg(Lc(e)))}}function Vg(t,e,n,r,o,a){const c=e.eventCache;if(rl(r,n)!=null)return e;{let f,d;if(fe(n))if(B(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=Bi(e),y=_ instanceof ee?_:ee.EMPTY_NODE,v=Au(r,y);f=t.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const _=il(r,Bi(e));f=t.filter.updateFullNode(e.eventCache.getNode(),_,a)}else{const _=ue(n);if(_===".priority"){B(ui(n)===1,"Can't have a priority with additional path components");const y=c.getNode();d=e.serverCache.getNode();const v=F_(r,n,y,d);v!=null?f=t.filter.updatePriority(y,v):f=c.getNode()}else{const y=Oe(n);let v;if(c.isCompleteForChild(_)){d=e.serverCache.getNode();const C=F_(r,n,c.getNode(),d);C!=null?v=c.getNode().getImmediateChild(_).updateChild(y,C):v=c.getNode().getImmediateChild(_)}else v=Ru(r,_,e.serverCache);v!=null?f=t.filter.updateChild(c.getNode(),_,v,y,o,a):f=c.getNode()}}return hs(e,f,c.isFullyInitialized()||fe(n),t.filter.filtersNodes())}}function sl(t,e,n,r,o,a,c,f){const d=e.serverCache;let _;const y=c?t.filter:t.filter.getIndexedFilter();if(fe(n))_=y.updateFullNode(d.getNode(),r,null);else if(y.filtersNodes()&&!d.isFiltered()){const P=d.getNode().updateChild(n,r);_=y.updateFullNode(d.getNode(),P,null)}else{const P=ue(n);if(!d.isCompleteForPath(n)&&ui(n)>1)return e;const U=Oe(n),Z=d.getNode().getImmediateChild(P).updateChild(U,r);P===".priority"?_=y.updatePriority(d.getNode(),Z):_=y.updateChild(d.getNode(),P,Z,U,Gg,null)}const v=Ug(e,_,d.isFullyInitialized()||fe(n),y.filtersNodes()),C=new Nu(o,v,a);return Vg(t,v,n,o,C,f)}function Bc(t,e,n,r,o,a,c){const f=e.eventCache;let d,_;const y=new Nu(o,e,a);if(fe(n))_=t.filter.updateFullNode(e.eventCache.getNode(),r,c),d=hs(e,_,!0,t.filter.filtersNodes());else{const v=ue(n);if(v===".priority")_=t.filter.updatePriority(e.eventCache.getNode(),r),d=hs(e,_,f.isFullyInitialized(),f.isFiltered());else{const C=Oe(n),P=f.getNode().getImmediateChild(v);let U;if(fe(C))U=r;else{const K=y.getCompleteChild(v);K!=null?Sg(C)===".priority"&&K.getChild(Rg(C)).isEmpty()?U=K:U=K.updateChild(C,r):U=ee.EMPTY_NODE}if(P.equals(U))d=e;else{const K=t.filter.updateChild(f.getNode(),v,U,C,y,c);d=hs(e,K,f.isFullyInitialized(),t.filter.filtersNodes())}}}return d}function k_(t,e){return t.eventCache.isCompleteForChild(e)}function rR(t,e,n,r,o,a,c){let f=e;return r.foreach((d,_)=>{const y=Ye(n,d);k_(e,ue(y))&&(f=Bc(t,f,y,_,o,a,c))}),r.foreach((d,_)=>{const y=Ye(n,d);k_(e,ue(y))||(f=Bc(t,f,y,_,o,a,c))}),f}function B_(t,e,n){return n.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function Wc(t,e,n,r,o,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,_;fe(n)?_=r:_=new Me(null).setTree(n,r);const y=e.serverCache.getNode();return _.children.inorderTraversal((v,C)=>{if(y.hasChild(v)){const P=e.serverCache.getNode().getImmediateChild(v),U=B_(t,P,C);d=sl(t,d,new Ae(v),U,o,a,c,f)}}),_.children.inorderTraversal((v,C)=>{const P=!e.serverCache.isCompleteForChild(v)&&C.value===null;if(!y.hasChild(v)&&!P){const U=e.serverCache.getNode().getImmediateChild(v),K=B_(t,U,C);d=sl(t,d,new Ae(v),K,o,a,c,f)}}),d}function sR(t,e,n,r,o,a,c){if(rl(o,n)!=null)return e;const f=e.serverCache.isFiltered(),d=e.serverCache;if(r.value!=null){if(fe(n)&&d.isFullyInitialized()||d.isCompleteForPath(n))return sl(t,e,n,d.getNode().getChild(n),o,a,f,c);if(fe(n)){let _=new Me(null);return d.getNode().forEachChild(li,(y,v)=>{_=_.set(new Ae(y),v)}),Wc(t,e,n,_,o,a,f,c)}else return e}else{let _=new Me(null);return r.foreach((y,v)=>{const C=Ye(n,y);d.isCompleteForPath(C)&&(_=_.set(y,d.getNode().getChild(C)))}),Wc(t,e,n,_,o,a,f,c)}}function oR(t,e,n,r,o){const a=e.serverCache,c=Ug(e,a.getNode(),a.isFullyInitialized()||fe(n),a.isFiltered());return Vg(t,c,n,r,Gg,o)}function lR(t,e,n,r,o,a){let c;if(rl(r,n)!=null)return e;{const f=new Nu(r,e,o),d=e.eventCache.getNode();let _;if(fe(n)||ue(n)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=il(r,Bi(e));else{const v=e.serverCache.getNode();B(v instanceof ee,"serverChildren would be complete if leaf node"),y=Au(r,v)}y=y,_=t.filter.updateFullNode(d,y,a)}else{const y=ue(n);let v=Ru(r,y,e.serverCache);v==null&&e.serverCache.isCompleteForChild(y)&&(v=d.getImmediateChild(y)),v!=null?_=t.filter.updateChild(d,y,v,Oe(n),f,a):e.eventCache.getNode().hasChild(y)?_=t.filter.updateChild(d,y,ee.EMPTY_NODE,Oe(n),f,a):_=d,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=il(r,Bi(e)),c.isLeafNode()&&(_=t.filter.updateFullNode(_,c,a)))}return c=e.serverCache.isFullyInitialized()||rl(r,be())!=null,hs(e,_,c,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new bu(r.getIndex()),a=IA(r);this.processor_=eR(a);const c=n.serverCache,f=n.eventCache,d=o.updateFullNode(ee.EMPTY_NODE,c.getNode(),null),_=a.updateFullNode(ee.EMPTY_NODE,f.getNode(),null),y=new ki(d,c.isFullyInitialized(),o.filtersNodes()),v=new ki(_,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=Tl(v,y),this.eventGenerator_=new MA(this.query_)}get query(){return this.query_}}function cR(t){return t.viewCache_.serverCache.getNode()}function uR(t,e){const n=Bi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!fe(e)&&!n.getImmediateChild(ue(e)).isEmpty())?n.getChild(e):null}function W_(t){return t.eventRegistrations_.length===0}function fR(t,e){t.eventRegistrations_.push(e)}function U_(t,e,n){const r=[];if(n){B(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,o);c&&r.push(c)})}if(e){let o=[];for(let a=0;a<t.eventRegistrations_.length;++a){const c=t.eventRegistrations_[a];if(!c.matches(e))o.push(c);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function H_(t,e,n,r){e.type===ln.MERGE&&e.source.queryId!==null&&(B(Bi(t.viewCache_),"We should always have a full cache before handling merges"),B(Lc(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,a=nR(t.processor_,o,e,n,r);return tR(t.processor_,a.viewCache),B(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,Yg(t,a.changes,a.viewCache.eventCache.getNode(),null)}function hR(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ue,(a,c)=>{r.push(Sr(a,c))}),n.isFullyInitialized()&&r.push(kg(n.getNode())),Yg(t,r,n.getNode(),e)}function Yg(t,e,n,r){const o=r?[r]:t.eventRegistrations_;return LA(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol;class dR{constructor(){this.views=new Map}}function _R(t){B(!ol,"__referenceConstructor has already been defined"),ol=t}function pR(){return B(ol,"Reference.ts has not been loaded"),ol}function gR(t){return t.views.size===0}function Pu(t,e,n,r){const o=e.source.queryId;if(o!==null){const a=t.views.get(o);return B(a!=null,"SyncTree gave us an op for an invalid query."),H_(a,e,n,r)}else{let a=[];for(const c of t.views.values())a=a.concat(H_(c,e,n,r));return a}}function mR(t,e,n,r,o){const a=e._queryIdentifier,c=t.views.get(a);if(!c){let f=il(n,o?r:null),d=!1;f?d=!0:r instanceof ee?(f=Au(n,r),d=!1):(f=ee.EMPTY_NODE,d=!1);const _=Tl(new ki(f,d,!1),new ki(r,o,!1));return new aR(e,_)}return c}function vR(t,e,n,r,o,a){const c=mR(t,e,r,o,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),fR(c,n),hR(c,n)}function yR(t,e,n,r){const o=e._queryIdentifier,a=[];let c=[];const f=fi(t);if(o==="default")for(const[d,_]of t.views.entries())c=c.concat(U_(_,n,r)),W_(_)&&(t.views.delete(d),_.query._queryParams.loadsAllData()||a.push(_.query));else{const d=t.views.get(o);d&&(c=c.concat(U_(d,n,r)),W_(d)&&(t.views.delete(o),d.query._queryParams.loadsAllData()||a.push(d.query)))}return f&&!fi(t)&&a.push(new(pR())(e._repo,e._path)),{removed:a,events:c}}function Qg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function yr(t,e){let n=null;for(const r of t.views.values())n=n||uR(r,e);return n}function Xg(t,e){if(e._queryParams.loadsAllData())return xl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function jg(t,e){return Xg(t,e)!=null}function fi(t){return xl(t)!=null}function xl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll;function wR(t){B(!ll,"__referenceConstructor has already been defined"),ll=t}function ER(){return B(ll,"Reference.ts has not been loaded"),ll}let CR=1;class $_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Me(null),this.pendingWriteTree_=XA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Jg(t,e,n,r,o){return WA(t.pendingWriteTree_,e,n,r,o),o?Fs(t,new Fi(Wg(),e,n)):[]}function Ni(t,e,n=!1){const r=UA(t.pendingWriteTree_,e);if(HA(t.pendingWriteTree_,e)){let a=new Me(null);return r.snap!=null?a=a.set(be(),!0):Nt(r.children,c=>{a=a.set(new Ae(c),!0)}),Fs(t,new nl(r.path,a,n))}else return[]}function Sl(t,e,n){return Fs(t,new Fi(Tu(),e,n))}function bR(t,e,n){const r=Me.fromObject(n);return Fs(t,new Ns(Tu(),e,r))}function IR(t,e){return Fs(t,new Rs(Tu(),e))}function TR(t,e,n){const r=Du(t,n);if(r){const o=Mu(r),a=o.path,c=o.queryId,f=xt(a,e),d=new Rs(xu(c),f);return Lu(t,a,d)}else return[]}function Uc(t,e,n,r,o=!1){const a=e._path,c=t.syncPointTree_.get(a);let f=[];if(c&&(e._queryIdentifier==="default"||jg(c,e))){const d=yR(c,e,n,r);gR(c)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const _=d.removed;if(f=d.events,!o){const y=_.findIndex(C=>C._queryParams.loadsAllData())!==-1,v=t.syncPointTree_.findOnPath(a,(C,P)=>fi(P));if(y&&!v){const C=t.syncPointTree_.subtree(a);if(!C.isEmpty()){const P=AR(C);for(let U=0;U<P.length;++U){const K=P[U],Z=K.query,we=tm(t,K);t.listenProvider_.startListening(_s(Z),al(t,Z),we.hashFn,we.onComplete)}}}!v&&_.length>0&&!r&&(y?t.listenProvider_.stopListening(_s(e),null):_.forEach(C=>{const P=t.queryToTagMap.get(Al(C));t.listenProvider_.stopListening(_s(C),P)}))}RR(t,_)}return f}function xR(t,e,n,r){const o=Du(t,r);if(o!=null){const a=Mu(o),c=a.path,f=a.queryId,d=xt(c,e),_=new Fi(xu(f),d,n);return Lu(t,c,_)}else return[]}function SR(t,e,n,r){const o=Du(t,r);if(o){const a=Mu(o),c=a.path,f=a.queryId,d=xt(c,e),_=Me.fromObject(n),y=new Ns(xu(f),d,_);return Lu(t,c,y)}else return[]}function z_(t,e,n,r=!1){const o=e._path;let a=null,c=!1;t.syncPointTree_.foreachOnPath(o,(C,P)=>{const U=xt(C,o);a=a||yr(P,U),c=c||fi(P)});let f=t.syncPointTree_.get(o);f?(c=c||fi(f),a=a||yr(f,be())):(f=new dR,t.syncPointTree_=t.syncPointTree_.set(o,f));let d;a!=null?d=!0:(d=!1,a=ee.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((P,U)=>{const K=yr(U,be());K&&(a=a.updateImmediateChild(P,K))}));const _=jg(f,e);if(!_&&!e._queryParams.loadsAllData()){const C=Al(e);B(!t.queryToTagMap.has(C),"View does not exist, but we have a tag");const P=NR();t.queryToTagMap.set(C,P),t.tagToQueryMap.set(P,C)}const y=Su(t.pendingWriteTree_,o);let v=vR(f,e,n,y,a,d);if(!_&&!c&&!r){const C=Xg(f,e);v=v.concat(PR(t,e,C))}return v}function Ou(t,e,n){const o=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,f)=>{const d=xt(c,e),_=yr(f,d);if(_)return _});return zg(o,e,a,n,!0)}function Fs(t,e){return Zg(e,t.syncPointTree_,null,Su(t.pendingWriteTree_,be()))}function Zg(t,e,n,r){if(fe(t.path))return em(t,e,n,r);{const o=e.get(be());n==null&&o!=null&&(n=yr(o,be()));let a=[];const c=ue(t.path),f=t.operationForChild(c),d=e.children.get(c);if(d&&f){const _=n?n.getImmediateChild(c):null,y=Kg(r,c);a=a.concat(Zg(f,d,_,y))}return o&&(a=a.concat(Pu(o,t,r,n))),a}}function em(t,e,n,r){const o=e.get(be());n==null&&o!=null&&(n=yr(o,be()));let a=[];return e.children.inorderTraversal((c,f)=>{const d=n?n.getImmediateChild(c):null,_=Kg(r,c),y=t.operationForChild(c);y&&(a=a.concat(em(y,f,d,_)))}),o&&(a=a.concat(Pu(o,t,r,n))),a}function tm(t,e){const n=e.query,r=al(t,n);return{hashFn:()=>(cR(e)||ee.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?TR(t,n._path,r):IR(t,n._path);{const a=T1(o,n);return Uc(t,n,null,a)}}}}function al(t,e){const n=Al(e);return t.queryToTagMap.get(n)}function Al(t){return t._path.toString()+"$"+t._queryIdentifier}function Du(t,e){return t.tagToQueryMap.get(e)}function Mu(t){const e=t.indexOf("$");return B(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ae(t.substr(0,e))}}function Lu(t,e,n){const r=t.syncPointTree_.get(e);B(r,"Missing sync point for query tag that we're tracking");const o=Su(t.pendingWriteTree_,e);return Pu(r,n,o,null)}function AR(t){return t.fold((e,n,r)=>{if(n&&fi(n))return[xl(n)];{let o=[];return n&&(o=Qg(n)),Nt(r,(a,c)=>{o=o.concat(c)}),o}})}function _s(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ER())(t._repo,t._path):t}function RR(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const o=Al(r),a=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(a)}}}function NR(){return CR++}function PR(t,e,n){const r=e._path,o=al(t,e),a=tm(t,n),c=t.listenProvider_.startListening(_s(e),o,a.hashFn,a.onComplete),f=t.syncPointTree_.subtree(r);if(o)B(!fi(f.value),"If we're adding a query, it shouldn't be shadowed");else{const d=f.fold((_,y,v)=>{if(!fe(_)&&y&&fi(y))return[xl(y).query];{let C=[];return y&&(C=C.concat(Qg(y).map(P=>P.query))),Nt(v,(P,U)=>{C=C.concat(U)}),C}});for(let _=0;_<d.length;++_){const y=d[_];t.listenProvider_.stopListening(_s(y),al(t,y))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Fu(n)}node(){return this.node_}}class ku{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ye(this.path_,e);return new ku(this.syncTree_,n)}node(){return Ou(this.syncTree_,this.path_)}}const OR=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},K_=function(t,e,n){if(!t||typeof t!="object")return t;if(B(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return DR(t[".sv"],e,n);if(typeof t[".sv"]=="object")return MR(t[".sv"],e);B(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},DR=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:B(!1,"Unexpected server value: "+t)}},MR=function(t,e,n){t.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&B(!1,"Unexpected increment value: "+r);const o=e.node();if(B(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return typeof c!="number"?r:c+r},LR=function(t,e,n,r){return Bu(e,new ku(n,t),r)},nm=function(t,e,n){return Bu(t,new Fu(e),n)};function Bu(t,e,n){const r=t.getPriority().val(),o=K_(r,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,f=K_(c.getValue(),e,n);return f!==c.getValue()||o!==c.getPriority().val()?new Je(f,ot(o)):t}else{const c=t;return a=c,o!==c.getPriority().val()&&(a=a.updatePriority(new Je(o))),c.forEachChild(Ue,(f,d)=>{const _=Bu(d,e.getImmediateChild(f),n);_!==d&&(a=a.updateImmediateChild(f,_))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Uu(t,e){let n=e instanceof Ae?e:new Ae(e),r=t,o=ue(n);for(;o!==null;){const a=xr(r.node.children,o)||{children:{},childCount:0};r=new Wu(o,r,a),n=Oe(n),o=ue(n)}return r}function kr(t){return t.node.value}function im(t,e){t.node.value=e,Hc(t)}function rm(t){return t.node.childCount>0}function FR(t){return kr(t)===void 0&&!rm(t)}function Rl(t,e){Nt(t.node.children,(n,r)=>{e(new Wu(n,t,r))})}function sm(t,e,n,r){n&&!r&&e(t),Rl(t,o=>{sm(o,e,!0,r)}),n&&r&&e(t)}function kR(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ks(t){return new Ae(t.parent===null?t.name:ks(t.parent)+"/"+t.name)}function Hc(t){t.parent!==null&&BR(t.parent,t.name,t)}function BR(t,e,n){const r=FR(n),o=wn(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,Hc(t)):!r&&!o&&(t.node.children[e]=n.node,t.node.childCount++,Hc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=/[\[\].#$\/\u0000-\u001F\u007F]/,UR=/[\[\].#$\u0000-\u001F\u007F]/,ac=10*1024*1024,Hu=function(t){return typeof t=="string"&&t.length!==0&&!WR.test(t)},om=function(t){return typeof t=="string"&&t.length!==0&&!UR.test(t)},HR=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),om(t)},q_=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!_u(t)||t&&typeof t=="object"&&wn(t,".sv")},lm=function(t,e,n,r){r&&e===void 0||$u(Cl(t,"value"),e,n)},$u=function(t,e,n){const r=n instanceof Ae?new rA(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+xi(r));if(typeof e=="function")throw new Error(t+"contains a function "+xi(r)+" with contents = "+e.toString());if(_u(e))throw new Error(t+"contains "+e.toString()+" "+xi(r));if(typeof e=="string"&&e.length>ac/3&&bl(e)>ac)throw new Error(t+"contains a string greater than "+ac+" utf8 bytes "+xi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,a=!1;if(Nt(e,(c,f)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!Hu(c)))throw new Error(t+" contains an invalid key ("+c+") "+xi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sA(r,c),$u(t,f,r),oA(r)}),o&&a)throw new Error(t+' contains ".value" child '+xi(r)+" in addition to actual children.")}},$R=function(t,e,n,r){if(!(r&&n===void 0)&&!Hu(n))throw new Error(Cl(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},zu=function(t,e,n,r){if(!(r&&n===void 0)&&!om(n))throw new Error(Cl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},zR=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zu(t,e,n,r)},KR=function(t,e){if(ue(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},qR=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Hu(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!HR(n))throw new Error(Cl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ku(t,e){let n=null;for(let r=0;r<e.length;r++){const o=e[r],a=o.getPath();n!==null&&!yu(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(o)}n&&t.eventLists_.push(n)}function am(t,e,n){Ku(t,n),cm(t,r=>yu(r,e))}function Un(t,e,n){Ku(t,n),cm(t,r=>on(r,e)||on(e,r))}function cm(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const o=t.eventLists_[r];if(o){const a=o.path;e(a)?(VR(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function VR(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Di&&ct("event: "+n.toString()),Fr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="repo_interrupt",QR=25;class XR{constructor(e,n,r,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tl(),this.transactionQueueTree_=new Wu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jR(t,e,n){if(t.stats_=mu(t.repoInfo_),t.forceRestClient_||R1())t.server_=new el(t.repoInfo_,(r,o,a,c)=>{G_(t,r,o,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>V_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{et(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Fn(t.repoInfo_,e,(r,o,a,c)=>{G_(t,r,o,a,c)},r=>{V_(t,r)},r=>{ZR(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=M1(t.repoInfo_,()=>new DA(t.stats_,t.server_)),t.infoData_=new AA,t.infoSyncTree_=new $_({startListening:(r,o,a,c)=>{let f=[];const d=t.infoData_.getNode(r._path);return d.isEmpty()||(f=Sl(t.infoSyncTree_,r._path,d),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),Gu(t,"connected",!1),t.serverSyncTree_=new $_({startListening:(r,o,a,c)=>(t.server_.listen(r,a,o,(f,d)=>{const _=c(f,d);Un(t.eventQueue_,r._path,_)}),[]),stopListening:(r,o)=>{t.server_.unlisten(r,o)}})}function JR(t){const n=t.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function qu(t){return OR({timestamp:JR(t)})}function G_(t,e,n,r,o){t.dataUpdateCount++;const a=new Ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(o)if(r){const d=Yo(n,_=>ot(_));c=SR(t.serverSyncTree_,a,d,o)}else{const d=ot(n);c=xR(t.serverSyncTree_,a,d,o)}else if(r){const d=Yo(n,_=>ot(_));c=bR(t.serverSyncTree_,a,d)}else{const d=ot(n);c=Sl(t.serverSyncTree_,a,d)}let f=a;c.length>0&&(f=Nl(t,a)),Un(t.eventQueue_,f,c)}function V_(t,e){Gu(t,"connected",e),e===!1&&tN(t)}function ZR(t,e){Nt(e,(n,r)=>{Gu(t,n,r)})}function Gu(t,e,n){const r=new Ae("/.info/"+e),o=ot(n);t.infoData_.updateSnapshot(r,o);const a=Sl(t.infoSyncTree_,r,o);Un(t.eventQueue_,r,a)}function um(t){return t.nextWriteId_++}function eN(t,e,n,r,o){Vu(t,"set",{path:e.toString(),value:n,priority:r});const a=qu(t),c=ot(n,r),f=Ou(t.serverSyncTree_,e),d=nm(c,f,a),_=um(t),y=Jg(t.serverSyncTree_,e,d,_,!0);Ku(t.eventQueue_,y),t.server_.put(e.toString(),c.val(!0),(C,P)=>{const U=C==="ok";U||At("set at "+e+" failed: "+C);const K=Ni(t.serverSyncTree_,_,!U);Un(t.eventQueue_,e,K),rN(t,o,C,P)});const v=pm(t,e);Nl(t,v),Un(t.eventQueue_,v,[])}function tN(t){Vu(t,"onDisconnectEvents");const e=qu(t),n=tl();Mc(t.onDisconnect_,be(),(o,a)=>{const c=LR(o,a,t.serverSyncTree_,e);Bg(n,o,c)});let r=[];Mc(n,be(),(o,a)=>{r=r.concat(Sl(t.serverSyncTree_,o,a));const c=pm(t,o);Nl(t,c)}),t.onDisconnect_=tl(),Un(t.eventQueue_,be(),r)}function nN(t,e,n){let r;ue(e._path)===".info"?r=z_(t.infoSyncTree_,e,n):r=z_(t.serverSyncTree_,e,n),am(t.eventQueue_,e._path,r)}function Y_(t,e,n){let r;ue(e._path)===".info"?r=Uc(t.infoSyncTree_,e,n):r=Uc(t.serverSyncTree_,e,n),am(t.eventQueue_,e._path,r)}function iN(t){t.persistentConnection_&&t.persistentConnection_.interrupt(YR)}function Vu(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ct(n,...e)}function rN(t,e,n,r){e&&Fr(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let a=o;r&&(a+=": "+r);const c=new Error(a);c.code=o,e(c)}})}function fm(t,e,n){return Ou(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function Yu(t,e=t.transactionQueueTree_){if(e||Pl(t,e),kr(e)){const n=dm(t,e);B(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&sN(t,ks(e),n)}else rm(e)&&Rl(e,n=>{Yu(t,n)})}function sN(t,e,n){const r=n.map(_=>_.currentWriteId),o=fm(t,e,r);let a=o;const c=o.hash();for(let _=0;_<n.length;_++){const y=n[_];B(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const v=xt(e,y.path);a=a.updateChild(v,y.currentOutputSnapshotRaw)}const f=a.val(!0),d=e;t.server_.put(d.toString(),f,_=>{Vu(t,"transaction put response",{path:d.toString(),status:_});let y=[];if(_==="ok"){const v=[];for(let C=0;C<n.length;C++)n[C].status=2,y=y.concat(Ni(t.serverSyncTree_,n[C].currentWriteId)),n[C].onComplete&&v.push(()=>n[C].onComplete(null,!0,n[C].currentOutputSnapshotResolved)),n[C].unwatcher();Pl(t,Uu(t.transactionQueueTree_,e)),Yu(t,t.transactionQueueTree_),Un(t.eventQueue_,e,y);for(let C=0;C<v.length;C++)Fr(v[C])}else{if(_==="datastale")for(let v=0;v<n.length;v++)n[v].status===3?n[v].status=4:n[v].status=0;else{At("transaction at "+d.toString()+" failed: "+_);for(let v=0;v<n.length;v++)n[v].status=4,n[v].abortReason=_}Nl(t,e)}},c)}function Nl(t,e){const n=hm(t,e),r=ks(n),o=dm(t,n);return oN(t,o,r),r}function oN(t,e,n){if(e.length===0)return;const r=[];let o=[];const c=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const d=e[f],_=xt(n,d.path);let y=!1,v;if(B(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)y=!0,v=d.abortReason,o=o.concat(Ni(t.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=QR)y=!0,v="maxretry",o=o.concat(Ni(t.serverSyncTree_,d.currentWriteId,!0));else{const C=fm(t,d.path,c);d.currentInputSnapshot=C;const P=e[f].update(C.val());if(P!==void 0){$u("transaction failed: Data returned ",P,d.path);let U=ot(P);typeof P=="object"&&P!=null&&wn(P,".priority")||(U=U.updatePriority(C.getPriority()));const Z=d.currentWriteId,we=qu(t),Le=nm(U,C,we);d.currentOutputSnapshotRaw=U,d.currentOutputSnapshotResolved=Le,d.currentWriteId=um(t),c.splice(c.indexOf(Z),1),o=o.concat(Jg(t.serverSyncTree_,d.path,Le,d.currentWriteId,d.applyLocally)),o=o.concat(Ni(t.serverSyncTree_,Z,!0))}else y=!0,v="nodata",o=o.concat(Ni(t.serverSyncTree_,d.currentWriteId,!0))}Un(t.eventQueue_,n,o),o=[],y&&(e[f].status=2,function(C){setTimeout(C,Math.floor(0))}(e[f].unwatcher),e[f].onComplete&&(v==="nodata"?r.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):r.push(()=>e[f].onComplete(new Error(v),!1,null))))}Pl(t,t.transactionQueueTree_);for(let f=0;f<r.length;f++)Fr(r[f]);Yu(t,t.transactionQueueTree_)}function hm(t,e){let n,r=t.transactionQueueTree_;for(n=ue(e);n!==null&&kr(r)===void 0;)r=Uu(r,n),e=Oe(e),n=ue(e);return r}function dm(t,e){const n=[];return _m(t,e,n),n.sort((r,o)=>r.order-o.order),n}function _m(t,e,n){const r=kr(e);if(r)for(let o=0;o<r.length;o++)n.push(r[o]);Rl(e,o=>{_m(t,o,n)})}function Pl(t,e){const n=kr(e);if(n){let r=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[r]=n[o],r++);n.length=r,im(e,n.length>0?n:void 0)}Rl(e,r=>{Pl(t,r)})}function pm(t,e){const n=ks(hm(t,e)),r=Uu(t.transactionQueueTree_,e);return kR(r,o=>{cc(t,o)}),cc(t,r),sm(r,o=>{cc(t,o)}),n}function cc(t,e){const n=kr(e);if(n){const r=[];let o=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(B(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(B(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),o=o.concat(Ni(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&r.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?im(e,void 0):n.length=a+1,Un(t.eventQueue_,ks(e),o);for(let c=0;c<r.length;c++)Fr(r[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let o=n[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function aN(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):At(`Invalid query segment '${n}' in query '${t}'`)}return e}const Q_=function(t,e){const n=cN(t),r=n.namespace;n.domain==="firebase.com"&&Bn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Bn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||w1();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new vg(n.host,n.secure,r,o,e,"",r!==n.subdomain),path:new Ae(n.pathString)}},cN=function(t){let e="",n="",r="",o="",a="",c=!0,f="https",d=443;if(typeof t=="string"){let _=t.indexOf("//");_>=0&&(f=t.substring(0,_-1),t=t.substring(_+2));let y=t.indexOf("/");y===-1&&(y=t.length);let v=t.indexOf("?");v===-1&&(v=t.length),e=t.substring(0,Math.min(y,v)),y<v&&(o=lN(t.substring(y,v)));const C=aN(t.substring(Math.min(t.length,v)));_=e.indexOf(":"),_>=0?(c=f==="https"||f==="wss",d=parseInt(e.substring(_+1),10)):_=e.length;const P=e.slice(0,_);if(P.toLowerCase()==="localhost")n="localhost";else if(P.split(".").length<=2)n=P;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),n=e.substring(U+1),a=r}"ns"in C&&(a=C.ns)}return{host:e,port:d,domain:n,subdomain:r,secure:c,scheme:f,pathString:o,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r,o){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+et(this.snapshot.exportVal())}}class mm{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return B(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r,o){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=o}get key(){return fe(this._path)?null:Sg(this._path)}get ref(){return new $n(this._repo,this._path)}get _queryIdentifier(){const e=P_(this._queryParams),n=pu(e);return n==="{}"?"default":n}get _queryObject(){return P_(this._queryParams)}isEqual(e){if(e=Mr(e),!(e instanceof Br))return!1;const n=this._repo===e._repo,r=yu(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+iA(this._path)}}function fN(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function vm(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===li){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Li)throw new Error(r);if(typeof e!="string")throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==Wn)throw new Error(r);if(typeof n!="string")throw new Error(o)}}else if(t.getIndex()===Ue){if(e!=null&&!q_(e)||n!=null&&!q_(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(B(t.getIndex()instanceof Cu||t.getIndex()===Fg,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function hN(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class $n extends Br{constructor(e,n){super(e,n,new Iu,!1)}get parent(){const e=Rg(this._path);return e===null?null:new $n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ps{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ae(e),r=cl(this.ref,e);return new Ps(this._node.getChild(n),r,Ue)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>e(new Ps(o,cl(this.ref,r),Ue)))}hasChild(e){const n=new Ae(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ym(t,e){return t=Mr(t),t._checkNotDeleted("ref"),e!==void 0?cl(t._root,e):t._root}function cl(t,e){return t=Mr(t),ue(t._path)===null?zR("child","path",e,!1):zu("child","path",e,!1),new $n(t._repo,Ye(t._path,e))}function dN(t,e){t=Mr(t),KR("set",t._path),lm("set",e,t._path,!1);const n=new El;return eN(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Qu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new gm("value",this,new Ps(e.snapshotNode,new $n(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mm(this,e,n):null}matches(e){return e instanceof Qu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Xu{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mm(this,e,n):null}createEvent(e,n){B(e.childName!=null,"Child events should have a childName.");const r=cl(new $n(n._repo,n._path),e.childName),o=n._queryParams.getIndex();return new gm(e.type,this,new Ps(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Xu?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function _N(t,e,n,r,o){let a;if(typeof r=="object"&&(a=void 0,o=r),typeof r=="function"&&(a=r),o&&o.onlyOnce){const d=n,_=(y,v)=>{Y_(t._repo,t,f),d(y,v)};_.userCallback=n.userCallback,_.context=n.context,n=_}const c=new uN(n,a||void 0),f=e==="value"?new Qu(c):new Xu(e,c);return nN(t._repo,t,f),()=>Y_(t._repo,t,f)}function pN(t,e,n,r){return _N(t,"value",e,n,r)}class ju{}class gN extends ju{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){lm("startAfter",this._value,e._path,!1);const n=xA(e._queryParams,this._value,this._key);if(hN(n),vm(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Br(e._repo,e._path,n,e._orderByCalled)}}function mN(t,e){return $R("startAfter","key",e,!0),new gN(t,e)}class vN extends ju{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Br(e._repo,e._path,TA(e._queryParams,this._limit),e._orderByCalled)}}function yN(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vN(t)}class wN extends ju{constructor(e){super(),this._path=e}_apply(e){fN(e,"orderByChild");const n=new Ae(this._path);if(fe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Cu(n),o=SA(e._queryParams,r);return vm(o),new Br(e._repo,e._path,o,!0)}}function EN(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return zu("orderByChild","path",t,!1),new wN(t)}function CN(t,...e){let n=Mr(t);for(const r of e)n=r._apply(n);return n}_R($n);wR($n);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="FIREBASE_DATABASE_EMULATOR_HOST",$c={};let IN=!1;function TN(t,e,n,r){t.repoInfo_=new vg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function xN(t,e,n,r,o){let a=r||t.options.databaseURL;a===void 0&&(t.options.projectId||Bn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ct("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=Q_(a,o),f=c.repoInfo,d,_;typeof process<"u"&&process.env&&(_=process.env[bN]),_?(d=!0,a=`http://${_}?ns=${f.namespace}`,c=Q_(a,o),f=c.repoInfo):d=!c.repoInfo.secure;const y=o&&d?new vr(vr.OWNER):new P1(t.name,t.options,e);qR("Invalid Firebase Database URL",c),fe(c.path)||Bn("Database URL must point to the root of a Firebase Database (not including a child path).");const v=AN(f,t,y,new N1(t.name,n));return new RN(v,t)}function SN(t,e){const n=$c[e];(!n||n[t.key]!==t)&&Bn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),iN(t),delete n[t.key]}function AN(t,e,n,r){let o=$c[e.name];o||(o={},$c[e.name]=o);let a=o[t.toURLString()];return a&&Bn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new XR(t,IN,n,r),o[t.toURLString()]=a,a}class RN{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $n(this._repo,be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(SN(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Bn("Cannot call "+e+" on a deleted database.")}}function NN(t=i1(),e){const n=ZS(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=qx("database");r&&PN(n,...r)}return n}function PN(t,e,n,r={}){t=Mr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Bn("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let a;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Bn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new vr(vr.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Gx(r.mockUserToken,t.app.options.projectId);a=new vr(c)}TN(o,e,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){p1(n1),Xo(new bs("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return xN(r,o,a,n)},"PUBLIC").setMultipleInstances(!0)),gr(d_,__,t),gr(d_,__,"esm2017")}Fn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Fn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};ON();function DN(){return[1,2,3].map(()=>Math.floor(Math.random()*(2<<16)).toString(16).padStart(4,"0")).join("")}function MN(t){const e=new URL(window.location.href);e.searchParams.set("zoom",t.zoom),e.searchParams.set("center",t.center),e.searchParams.set("sharingKey",t.sharingKey),window.history.replaceState(null,"",e.toString())}function Wi(){const t=new URL(window.location.href),e=t.searchParams.get("center")||"1.38,103.8",n=t.searchParams.get("zoom")||"13",r=t.searchParams.get("sharingKey")||DN(),[o,a]=e.split(",");return{center:e,zoom:n,sharingKey:r,parsedZoom:parseFloat(n),parsedCenter:{lat:parseFloat(o),lng:parseFloat(a)}}}const LN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function FN(){const t=window.localStorage.getItem("userId");if(t!=null&&t.match(LN))return t;{const e=window.crypto.randomUUID();return window.localStorage.setItem("userId",e),e}}function kN(){const t=window.localStorage.sendLocation;let e={};try{const n=JSON.parse(t);if(n instanceof Array||!(n instanceof Object))throw new Error("bad type");e=n}catch{}return e[Wi().sharingKey]||!1}function X_(t){const e=window.localStorage.sendLocation;let n={};try{const r=JSON.parse(e);if(r instanceof Array||!(r instanceof Object))throw new Error("bad type");n=r}catch{}n[Wi().sharingKey]=t,window.localStorage.setItem("sendLocation",JSON.stringify(n))}const BN={apiKey:"AIzaSyCVPkgR8wpTD-PtV14m6AbUHR8iWv0WqSc",authDomain:"simple-location-sharing.firebaseapp.com",projectId:"simple-location-sharing",storageBucket:"simple-location-sharing.appspot.com",messagingSenderId:"747204085237",appId:"1:747204085237:web:0f4adacb13c07818174cbc",databaseURL:"https://simple-location-sharing-default-rtdb.asia-southeast1.firebasedatabase.app"};tg(BN);const wm=NN();function WN(t,e){const n=Wi().sharingKey,r=FN();dN(ym(wm,`sessions/${n}/${r}`),{coordinates:t,timestamp:e})}function UN(t,e,n){pN(CN(ym(wm,`sessions/${t}`),EN("timestamp"),mN(Date.now()-e),yN(10)),r=>{n(r.val())})}var ul={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ul.exports;(function(t,e){(function(){var n,r="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",f="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",_=500,y="__lodash_placeholder__",v=1,C=2,P=4,U=1,K=2,Z=1,we=2,Le=4,Ee=8,te=16,qe=32,Bt=64,vt=128,Pt=256,hi=512,En=30,di="...",Hi=800,$i=16,zi=1,Bs=2,nt=3,Te=1/0,pe=9007199254740991,Cn=17976931348623157e292,bn=0/0,Xe=4294967295,Wt=Xe-1,Ws=Xe>>>1,Ol=[["ary",vt],["bind",Z],["bindKey",we],["curry",Ee],["curryRight",te],["flip",hi],["partial",qe],["partialRight",Bt],["rearg",Pt]],zn="[object Arguments]",yt="[object Array]",Ki="[object AsyncFunction]",Kn="[object Boolean]",Ut="[object Date]",Wr="[object DOMException]",qn="[object Error]",w="[object Function]",I="[object GeneratorFunction]",S="[object Map]",O="[object Number]",M="[object Null]",F="[object Object]",$="[object Promise]",k="[object Proxy]",W="[object RegExp]",D="[object Set]",V="[object String]",q="[object Symbol]",Y="[object Undefined]",X="[object WeakMap]",ce="[object WeakSet]",ye="[object ArrayBuffer]",ge="[object DataView]",Fe="[object Float32Array]",dt="[object Float64Array]",fn="[object Int8Array]",qi="[object Int16Array]",In="[object Int32Array]",Gi="[object Uint8Array]",it="[object Uint8ClampedArray]",wt="[object Uint16Array]",Vi="[object Uint32Array]",Em=/\b__p \+= '';/g,Cm=/\b(__p \+=) '' \+/g,bm=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ju=/&(?:amp|lt|gt|quot|#39);/g,Zu=/[&<>"']/g,Im=RegExp(Ju.source),Tm=RegExp(Zu.source),xm=/<%-([\s\S]+?)%>/g,Sm=/<%([\s\S]+?)%>/g,ef=/<%=([\s\S]+?)%>/g,Am=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rm=/^\w*$/,Nm=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dl=/[\\^$.*+?()[\]{}|]/g,Pm=RegExp(Dl.source),Ml=/^\s+/,Om=/\s/,Dm=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Mm=/\{\n\/\* \[wrapped with (.+)\] \*/,Lm=/,? & /,Fm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,km=/[()=,{}\[\]\/\s]/,Bm=/\\(\\)?/g,Wm=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tf=/\w*$/,Um=/^[-+]0x[0-9a-f]+$/i,Hm=/^0b[01]+$/i,$m=/^\[object .+?Constructor\]$/,zm=/^0o[0-7]+$/i,Km=/^(?:0|[1-9]\d*)$/,qm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Us=/($^)/,Gm=/['\n\r\u2028\u2029\\]/g,Hs="\\ud800-\\udfff",Vm="\\u0300-\\u036f",Ym="\\ufe20-\\ufe2f",Qm="\\u20d0-\\u20ff",nf=Vm+Ym+Qm,rf="\\u2700-\\u27bf",sf="a-z\\xdf-\\xf6\\xf8-\\xff",Xm="\\xac\\xb1\\xd7\\xf7",jm="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Jm="\\u2000-\\u206f",Zm=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",of="A-Z\\xc0-\\xd6\\xd8-\\xde",lf="\\ufe0e\\ufe0f",af=Xm+jm+Jm+Zm,Ll="['’]",ev="["+Hs+"]",cf="["+af+"]",$s="["+nf+"]",uf="\\d+",tv="["+rf+"]",ff="["+sf+"]",hf="[^"+Hs+af+uf+rf+sf+of+"]",Fl="\\ud83c[\\udffb-\\udfff]",nv="(?:"+$s+"|"+Fl+")",df="[^"+Hs+"]",kl="(?:\\ud83c[\\udde6-\\uddff]){2}",Bl="[\\ud800-\\udbff][\\udc00-\\udfff]",Yi="["+of+"]",_f="\\u200d",pf="(?:"+ff+"|"+hf+")",iv="(?:"+Yi+"|"+hf+")",gf="(?:"+Ll+"(?:d|ll|m|re|s|t|ve))?",mf="(?:"+Ll+"(?:D|LL|M|RE|S|T|VE))?",vf=nv+"?",yf="["+lf+"]?",rv="(?:"+_f+"(?:"+[df,kl,Bl].join("|")+")"+yf+vf+")*",sv="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ov="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",wf=yf+vf+rv,lv="(?:"+[tv,kl,Bl].join("|")+")"+wf,av="(?:"+[df+$s+"?",$s,kl,Bl,ev].join("|")+")",cv=RegExp(Ll,"g"),uv=RegExp($s,"g"),Wl=RegExp(Fl+"(?="+Fl+")|"+av+wf,"g"),fv=RegExp([Yi+"?"+ff+"+"+gf+"(?="+[cf,Yi,"$"].join("|")+")",iv+"+"+mf+"(?="+[cf,Yi+pf,"$"].join("|")+")",Yi+"?"+pf+"+"+gf,Yi+"+"+mf,ov,sv,uf,lv].join("|"),"g"),hv=RegExp("["+_f+Hs+nf+lf+"]"),dv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_v=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pv=-1,De={};De[Fe]=De[dt]=De[fn]=De[qi]=De[In]=De[Gi]=De[it]=De[wt]=De[Vi]=!0,De[zn]=De[yt]=De[ye]=De[Kn]=De[ge]=De[Ut]=De[qn]=De[w]=De[S]=De[O]=De[F]=De[W]=De[D]=De[V]=De[X]=!1;var Ne={};Ne[zn]=Ne[yt]=Ne[ye]=Ne[ge]=Ne[Kn]=Ne[Ut]=Ne[Fe]=Ne[dt]=Ne[fn]=Ne[qi]=Ne[In]=Ne[S]=Ne[O]=Ne[F]=Ne[W]=Ne[D]=Ne[V]=Ne[q]=Ne[Gi]=Ne[it]=Ne[wt]=Ne[Vi]=!0,Ne[qn]=Ne[w]=Ne[X]=!1;var gv={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},mv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wv=parseFloat,Ev=parseInt,Ef=typeof ns=="object"&&ns&&ns.Object===Object&&ns,Cv=typeof self=="object"&&self&&self.Object===Object&&self,rt=Ef||Cv||Function("return this")(),Ul=e&&!e.nodeType&&e,_i=Ul&&!0&&t&&!t.nodeType&&t,Cf=_i&&_i.exports===Ul,Hl=Cf&&Ef.process,Ht=function(){try{var b=_i&&_i.require&&_i.require("util").types;return b||Hl&&Hl.binding&&Hl.binding("util")}catch{}}(),bf=Ht&&Ht.isArrayBuffer,If=Ht&&Ht.isDate,Tf=Ht&&Ht.isMap,xf=Ht&&Ht.isRegExp,Sf=Ht&&Ht.isSet,Af=Ht&&Ht.isTypedArray;function Ot(b,A,x){switch(x.length){case 0:return b.call(A);case 1:return b.call(A,x[0]);case 2:return b.call(A,x[0],x[1]);case 3:return b.call(A,x[0],x[1],x[2])}return b.apply(A,x)}function bv(b,A,x,z){for(var ne=-1,Ce=b==null?0:b.length;++ne<Ce;){var Ge=b[ne];A(z,Ge,x(Ge),b)}return z}function $t(b,A){for(var x=-1,z=b==null?0:b.length;++x<z&&A(b[x],x,b)!==!1;);return b}function Iv(b,A){for(var x=b==null?0:b.length;x--&&A(b[x],x,b)!==!1;);return b}function Rf(b,A){for(var x=-1,z=b==null?0:b.length;++x<z;)if(!A(b[x],x,b))return!1;return!0}function Gn(b,A){for(var x=-1,z=b==null?0:b.length,ne=0,Ce=[];++x<z;){var Ge=b[x];A(Ge,x,b)&&(Ce[ne++]=Ge)}return Ce}function zs(b,A){var x=b==null?0:b.length;return!!x&&Qi(b,A,0)>-1}function $l(b,A,x){for(var z=-1,ne=b==null?0:b.length;++z<ne;)if(x(A,b[z]))return!0;return!1}function ke(b,A){for(var x=-1,z=b==null?0:b.length,ne=Array(z);++x<z;)ne[x]=A(b[x],x,b);return ne}function Vn(b,A){for(var x=-1,z=A.length,ne=b.length;++x<z;)b[ne+x]=A[x];return b}function zl(b,A,x,z){var ne=-1,Ce=b==null?0:b.length;for(z&&Ce&&(x=b[++ne]);++ne<Ce;)x=A(x,b[ne],ne,b);return x}function Tv(b,A,x,z){var ne=b==null?0:b.length;for(z&&ne&&(x=b[--ne]);ne--;)x=A(x,b[ne],ne,b);return x}function Kl(b,A){for(var x=-1,z=b==null?0:b.length;++x<z;)if(A(b[x],x,b))return!0;return!1}var xv=ql("length");function Sv(b){return b.split("")}function Av(b){return b.match(Fm)||[]}function Nf(b,A,x){var z;return x(b,function(ne,Ce,Ge){if(A(ne,Ce,Ge))return z=Ce,!1}),z}function Ks(b,A,x,z){for(var ne=b.length,Ce=x+(z?1:-1);z?Ce--:++Ce<ne;)if(A(b[Ce],Ce,b))return Ce;return-1}function Qi(b,A,x){return A===A?Uv(b,A,x):Ks(b,Pf,x)}function Rv(b,A,x,z){for(var ne=x-1,Ce=b.length;++ne<Ce;)if(z(b[ne],A))return ne;return-1}function Pf(b){return b!==b}function Of(b,A){var x=b==null?0:b.length;return x?Vl(b,A)/x:bn}function ql(b){return function(A){return A==null?n:A[b]}}function Gl(b){return function(A){return b==null?n:b[A]}}function Df(b,A,x,z,ne){return ne(b,function(Ce,Ge,Re){x=z?(z=!1,Ce):A(x,Ce,Ge,Re)}),x}function Nv(b,A){var x=b.length;for(b.sort(A);x--;)b[x]=b[x].value;return b}function Vl(b,A){for(var x,z=-1,ne=b.length;++z<ne;){var Ce=A(b[z]);Ce!==n&&(x=x===n?Ce:x+Ce)}return x}function Yl(b,A){for(var x=-1,z=Array(b);++x<b;)z[x]=A(x);return z}function Pv(b,A){return ke(A,function(x){return[x,b[x]]})}function Mf(b){return b&&b.slice(0,Bf(b)+1).replace(Ml,"")}function Dt(b){return function(A){return b(A)}}function Ql(b,A){return ke(A,function(x){return b[x]})}function Ur(b,A){return b.has(A)}function Lf(b,A){for(var x=-1,z=b.length;++x<z&&Qi(A,b[x],0)>-1;);return x}function Ff(b,A){for(var x=b.length;x--&&Qi(A,b[x],0)>-1;);return x}function Ov(b,A){for(var x=b.length,z=0;x--;)b[x]===A&&++z;return z}var Dv=Gl(gv),Mv=Gl(mv);function Lv(b){return"\\"+yv[b]}function Fv(b,A){return b==null?n:b[A]}function Xi(b){return hv.test(b)}function kv(b){return dv.test(b)}function Bv(b){for(var A,x=[];!(A=b.next()).done;)x.push(A.value);return x}function Xl(b){var A=-1,x=Array(b.size);return b.forEach(function(z,ne){x[++A]=[ne,z]}),x}function kf(b,A){return function(x){return b(A(x))}}function Yn(b,A){for(var x=-1,z=b.length,ne=0,Ce=[];++x<z;){var Ge=b[x];(Ge===A||Ge===y)&&(b[x]=y,Ce[ne++]=x)}return Ce}function qs(b){var A=-1,x=Array(b.size);return b.forEach(function(z){x[++A]=z}),x}function Wv(b){var A=-1,x=Array(b.size);return b.forEach(function(z){x[++A]=[z,z]}),x}function Uv(b,A,x){for(var z=x-1,ne=b.length;++z<ne;)if(b[z]===A)return z;return-1}function Hv(b,A,x){for(var z=x+1;z--;)if(b[z]===A)return z;return z}function ji(b){return Xi(b)?zv(b):xv(b)}function Qt(b){return Xi(b)?Kv(b):Sv(b)}function Bf(b){for(var A=b.length;A--&&Om.test(b.charAt(A)););return A}var $v=Gl(vv);function zv(b){for(var A=Wl.lastIndex=0;Wl.test(b);)++A;return A}function Kv(b){return b.match(Wl)||[]}function qv(b){return b.match(fv)||[]}var Gv=function b(A){A=A==null?rt:Ji.defaults(rt.Object(),A,Ji.pick(rt,_v));var x=A.Array,z=A.Date,ne=A.Error,Ce=A.Function,Ge=A.Math,Re=A.Object,jl=A.RegExp,Vv=A.String,zt=A.TypeError,Gs=x.prototype,Yv=Ce.prototype,Zi=Re.prototype,Vs=A["__core-js_shared__"],Ys=Yv.toString,Se=Zi.hasOwnProperty,Qv=0,Wf=function(){var i=/[^.]+$/.exec(Vs&&Vs.keys&&Vs.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),Qs=Zi.toString,Xv=Ys.call(Re),jv=rt._,Jv=jl("^"+Ys.call(Se).replace(Dl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xs=Cf?A.Buffer:n,Qn=A.Symbol,js=A.Uint8Array,Uf=Xs?Xs.allocUnsafe:n,Js=kf(Re.getPrototypeOf,Re),Hf=Re.create,$f=Zi.propertyIsEnumerable,Zs=Gs.splice,zf=Qn?Qn.isConcatSpreadable:n,Hr=Qn?Qn.iterator:n,pi=Qn?Qn.toStringTag:n,eo=function(){try{var i=wi(Re,"defineProperty");return i({},"",{}),i}catch{}}(),Zv=A.clearTimeout!==rt.clearTimeout&&A.clearTimeout,ey=z&&z.now!==rt.Date.now&&z.now,ty=A.setTimeout!==rt.setTimeout&&A.setTimeout,to=Ge.ceil,no=Ge.floor,Jl=Re.getOwnPropertySymbols,ny=Xs?Xs.isBuffer:n,Kf=A.isFinite,iy=Gs.join,ry=kf(Re.keys,Re),Ve=Ge.max,lt=Ge.min,sy=z.now,oy=A.parseInt,qf=Ge.random,ly=Gs.reverse,Zl=wi(A,"DataView"),$r=wi(A,"Map"),ea=wi(A,"Promise"),er=wi(A,"Set"),zr=wi(A,"WeakMap"),Kr=wi(Re,"create"),io=zr&&new zr,tr={},ay=Ei(Zl),cy=Ei($r),uy=Ei(ea),fy=Ei(er),hy=Ei(zr),ro=Qn?Qn.prototype:n,qr=ro?ro.valueOf:n,Gf=ro?ro.toString:n;function p(i){if($e(i)&&!re(i)&&!(i instanceof _e)){if(i instanceof Kt)return i;if(Se.call(i,"__wrapped__"))return Vh(i)}return new Kt(i)}var nr=function(){function i(){}return function(s){if(!We(s))return{};if(Hf)return Hf(s);i.prototype=s;var l=new i;return i.prototype=n,l}}();function so(){}function Kt(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=n}p.templateSettings={escape:xm,evaluate:Sm,interpolate:ef,variable:"",imports:{_:p}},p.prototype=so.prototype,p.prototype.constructor=p,Kt.prototype=nr(so.prototype),Kt.prototype.constructor=Kt;function _e(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Xe,this.__views__=[]}function dy(){var i=new _e(this.__wrapped__);return i.__actions__=Et(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Et(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Et(this.__views__),i}function _y(){if(this.__filtered__){var i=new _e(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function py(){var i=this.__wrapped__.value(),s=this.__dir__,l=re(i),u=s<0,h=l?i.length:0,g=S0(0,h,this.__views__),m=g.start,E=g.end,T=E-m,R=u?E:m-1,N=this.__iteratees__,L=N.length,H=0,G=lt(T,this.__takeCount__);if(!l||!u&&h==T&&G==T)return gh(i,this.__actions__);var j=[];e:for(;T--&&H<G;){R+=s;for(var oe=-1,J=i[R];++oe<L;){var de=N[oe],me=de.iteratee,Ft=de.type,gt=me(J);if(Ft==Bs)J=gt;else if(!gt){if(Ft==zi)continue e;break e}}j[H++]=J}return j}_e.prototype=nr(so.prototype),_e.prototype.constructor=_e;function gi(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var u=i[s];this.set(u[0],u[1])}}function gy(){this.__data__=Kr?Kr(null):{},this.size=0}function my(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}function vy(i){var s=this.__data__;if(Kr){var l=s[i];return l===d?n:l}return Se.call(s,i)?s[i]:n}function yy(i){var s=this.__data__;return Kr?s[i]!==n:Se.call(s,i)}function wy(i,s){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=Kr&&s===n?d:s,this}gi.prototype.clear=gy,gi.prototype.delete=my,gi.prototype.get=vy,gi.prototype.has=yy,gi.prototype.set=wy;function Tn(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var u=i[s];this.set(u[0],u[1])}}function Ey(){this.__data__=[],this.size=0}function Cy(i){var s=this.__data__,l=oo(s,i);if(l<0)return!1;var u=s.length-1;return l==u?s.pop():Zs.call(s,l,1),--this.size,!0}function by(i){var s=this.__data__,l=oo(s,i);return l<0?n:s[l][1]}function Iy(i){return oo(this.__data__,i)>-1}function Ty(i,s){var l=this.__data__,u=oo(l,i);return u<0?(++this.size,l.push([i,s])):l[u][1]=s,this}Tn.prototype.clear=Ey,Tn.prototype.delete=Cy,Tn.prototype.get=by,Tn.prototype.has=Iy,Tn.prototype.set=Ty;function xn(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var u=i[s];this.set(u[0],u[1])}}function xy(){this.size=0,this.__data__={hash:new gi,map:new($r||Tn),string:new gi}}function Sy(i){var s=yo(this,i).delete(i);return this.size-=s?1:0,s}function Ay(i){return yo(this,i).get(i)}function Ry(i){return yo(this,i).has(i)}function Ny(i,s){var l=yo(this,i),u=l.size;return l.set(i,s),this.size+=l.size==u?0:1,this}xn.prototype.clear=xy,xn.prototype.delete=Sy,xn.prototype.get=Ay,xn.prototype.has=Ry,xn.prototype.set=Ny;function mi(i){var s=-1,l=i==null?0:i.length;for(this.__data__=new xn;++s<l;)this.add(i[s])}function Py(i){return this.__data__.set(i,d),this}function Oy(i){return this.__data__.has(i)}mi.prototype.add=mi.prototype.push=Py,mi.prototype.has=Oy;function Xt(i){var s=this.__data__=new Tn(i);this.size=s.size}function Dy(){this.__data__=new Tn,this.size=0}function My(i){var s=this.__data__,l=s.delete(i);return this.size=s.size,l}function Ly(i){return this.__data__.get(i)}function Fy(i){return this.__data__.has(i)}function ky(i,s){var l=this.__data__;if(l instanceof Tn){var u=l.__data__;if(!$r||u.length<o-1)return u.push([i,s]),this.size=++l.size,this;l=this.__data__=new xn(u)}return l.set(i,s),this.size=l.size,this}Xt.prototype.clear=Dy,Xt.prototype.delete=My,Xt.prototype.get=Ly,Xt.prototype.has=Fy,Xt.prototype.set=ky;function Vf(i,s){var l=re(i),u=!l&&Ci(i),h=!l&&!u&&ei(i),g=!l&&!u&&!h&&or(i),m=l||u||h||g,E=m?Yl(i.length,Vv):[],T=E.length;for(var R in i)(s||Se.call(i,R))&&!(m&&(R=="length"||h&&(R=="offset"||R=="parent")||g&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||Nn(R,T)))&&E.push(R);return E}function Yf(i){var s=i.length;return s?i[fa(0,s-1)]:n}function By(i,s){return wo(Et(i),vi(s,0,i.length))}function Wy(i){return wo(Et(i))}function ta(i,s,l){(l!==n&&!jt(i[s],l)||l===n&&!(s in i))&&Sn(i,s,l)}function Gr(i,s,l){var u=i[s];(!(Se.call(i,s)&&jt(u,l))||l===n&&!(s in i))&&Sn(i,s,l)}function oo(i,s){for(var l=i.length;l--;)if(jt(i[l][0],s))return l;return-1}function Uy(i,s,l,u){return Xn(i,function(h,g,m){s(u,h,l(h),m)}),u}function Qf(i,s){return i&&dn(s,je(s),i)}function Hy(i,s){return i&&dn(s,bt(s),i)}function Sn(i,s,l){s=="__proto__"&&eo?eo(i,s,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[s]=l}function na(i,s){for(var l=-1,u=s.length,h=x(u),g=i==null;++l<u;)h[l]=g?n:Fa(i,s[l]);return h}function vi(i,s,l){return i===i&&(l!==n&&(i=i<=l?i:l),s!==n&&(i=i>=s?i:s)),i}function qt(i,s,l,u,h,g){var m,E=s&v,T=s&C,R=s&P;if(l&&(m=h?l(i,u,h,g):l(i)),m!==n)return m;if(!We(i))return i;var N=re(i);if(N){if(m=R0(i),!E)return Et(i,m)}else{var L=at(i),H=L==w||L==I;if(ei(i))return yh(i,E);if(L==F||L==zn||H&&!h){if(m=T||H?{}:Bh(i),!E)return T?v0(i,Hy(m,i)):m0(i,Qf(m,i))}else{if(!Ne[L])return h?i:{};m=N0(i,L,E)}}g||(g=new Xt);var G=g.get(i);if(G)return G;g.set(i,m),dd(i)?i.forEach(function(J){m.add(qt(J,s,l,J,i,g))}):fd(i)&&i.forEach(function(J,de){m.set(de,qt(J,s,l,de,i,g))});var j=R?T?Ca:Ea:T?bt:je,oe=N?n:j(i);return $t(oe||i,function(J,de){oe&&(de=J,J=i[de]),Gr(m,de,qt(J,s,l,de,i,g))}),m}function $y(i){var s=je(i);return function(l){return Xf(l,i,s)}}function Xf(i,s,l){var u=l.length;if(i==null)return!u;for(i=Re(i);u--;){var h=l[u],g=s[h],m=i[h];if(m===n&&!(h in i)||!g(m))return!1}return!0}function jf(i,s,l){if(typeof i!="function")throw new zt(c);return Zr(function(){i.apply(n,l)},s)}function Vr(i,s,l,u){var h=-1,g=zs,m=!0,E=i.length,T=[],R=s.length;if(!E)return T;l&&(s=ke(s,Dt(l))),u?(g=$l,m=!1):s.length>=o&&(g=Ur,m=!1,s=new mi(s));e:for(;++h<E;){var N=i[h],L=l==null?N:l(N);if(N=u||N!==0?N:0,m&&L===L){for(var H=R;H--;)if(s[H]===L)continue e;T.push(N)}else g(s,L,u)||T.push(N)}return T}var Xn=Ih(hn),Jf=Ih(ra,!0);function zy(i,s){var l=!0;return Xn(i,function(u,h,g){return l=!!s(u,h,g),l}),l}function lo(i,s,l){for(var u=-1,h=i.length;++u<h;){var g=i[u],m=s(g);if(m!=null&&(E===n?m===m&&!Lt(m):l(m,E)))var E=m,T=g}return T}function Ky(i,s,l,u){var h=i.length;for(l=se(l),l<0&&(l=-l>h?0:h+l),u=u===n||u>h?h:se(u),u<0&&(u+=h),u=l>u?0:pd(u);l<u;)i[l++]=s;return i}function Zf(i,s){var l=[];return Xn(i,function(u,h,g){s(u,h,g)&&l.push(u)}),l}function st(i,s,l,u,h){var g=-1,m=i.length;for(l||(l=O0),h||(h=[]);++g<m;){var E=i[g];s>0&&l(E)?s>1?st(E,s-1,l,u,h):Vn(h,E):u||(h[h.length]=E)}return h}var ia=Th(),eh=Th(!0);function hn(i,s){return i&&ia(i,s,je)}function ra(i,s){return i&&eh(i,s,je)}function ao(i,s){return Gn(s,function(l){return Pn(i[l])})}function yi(i,s){s=Jn(s,i);for(var l=0,u=s.length;i!=null&&l<u;)i=i[_n(s[l++])];return l&&l==u?i:n}function th(i,s,l){var u=s(i);return re(i)?u:Vn(u,l(i))}function _t(i){return i==null?i===n?Y:M:pi&&pi in Re(i)?x0(i):W0(i)}function sa(i,s){return i>s}function qy(i,s){return i!=null&&Se.call(i,s)}function Gy(i,s){return i!=null&&s in Re(i)}function Vy(i,s,l){return i>=lt(s,l)&&i<Ve(s,l)}function oa(i,s,l){for(var u=l?$l:zs,h=i[0].length,g=i.length,m=g,E=x(g),T=1/0,R=[];m--;){var N=i[m];m&&s&&(N=ke(N,Dt(s))),T=lt(N.length,T),E[m]=!l&&(s||h>=120&&N.length>=120)?new mi(m&&N):n}N=i[0];var L=-1,H=E[0];e:for(;++L<h&&R.length<T;){var G=N[L],j=s?s(G):G;if(G=l||G!==0?G:0,!(H?Ur(H,j):u(R,j,l))){for(m=g;--m;){var oe=E[m];if(!(oe?Ur(oe,j):u(i[m],j,l)))continue e}H&&H.push(j),R.push(G)}}return R}function Yy(i,s,l,u){return hn(i,function(h,g,m){s(u,l(h),g,m)}),u}function Yr(i,s,l){s=Jn(s,i),i=$h(i,s);var u=i==null?i:i[_n(Vt(s))];return u==null?n:Ot(u,i,l)}function nh(i){return $e(i)&&_t(i)==zn}function Qy(i){return $e(i)&&_t(i)==ye}function Xy(i){return $e(i)&&_t(i)==Ut}function Qr(i,s,l,u,h){return i===s?!0:i==null||s==null||!$e(i)&&!$e(s)?i!==i&&s!==s:jy(i,s,l,u,Qr,h)}function jy(i,s,l,u,h,g){var m=re(i),E=re(s),T=m?yt:at(i),R=E?yt:at(s);T=T==zn?F:T,R=R==zn?F:R;var N=T==F,L=R==F,H=T==R;if(H&&ei(i)){if(!ei(s))return!1;m=!0,N=!1}if(H&&!N)return g||(g=new Xt),m||or(i)?Lh(i,s,l,u,h,g):I0(i,s,T,l,u,h,g);if(!(l&U)){var G=N&&Se.call(i,"__wrapped__"),j=L&&Se.call(s,"__wrapped__");if(G||j){var oe=G?i.value():i,J=j?s.value():s;return g||(g=new Xt),h(oe,J,l,u,g)}}return H?(g||(g=new Xt),T0(i,s,l,u,h,g)):!1}function Jy(i){return $e(i)&&at(i)==S}function la(i,s,l,u){var h=l.length,g=h,m=!u;if(i==null)return!g;for(i=Re(i);h--;){var E=l[h];if(m&&E[2]?E[1]!==i[E[0]]:!(E[0]in i))return!1}for(;++h<g;){E=l[h];var T=E[0],R=i[T],N=E[1];if(m&&E[2]){if(R===n&&!(T in i))return!1}else{var L=new Xt;if(u)var H=u(R,N,T,i,s,L);if(!(H===n?Qr(N,R,U|K,u,L):H))return!1}}return!0}function ih(i){if(!We(i)||M0(i))return!1;var s=Pn(i)?Jv:$m;return s.test(Ei(i))}function Zy(i){return $e(i)&&_t(i)==W}function e0(i){return $e(i)&&at(i)==D}function t0(i){return $e(i)&&xo(i.length)&&!!De[_t(i)]}function rh(i){return typeof i=="function"?i:i==null?It:typeof i=="object"?re(i)?lh(i[0],i[1]):oh(i):xd(i)}function aa(i){if(!Jr(i))return ry(i);var s=[];for(var l in Re(i))Se.call(i,l)&&l!="constructor"&&s.push(l);return s}function n0(i){if(!We(i))return B0(i);var s=Jr(i),l=[];for(var u in i)u=="constructor"&&(s||!Se.call(i,u))||l.push(u);return l}function ca(i,s){return i<s}function sh(i,s){var l=-1,u=Ct(i)?x(i.length):[];return Xn(i,function(h,g,m){u[++l]=s(h,g,m)}),u}function oh(i){var s=Ia(i);return s.length==1&&s[0][2]?Uh(s[0][0],s[0][1]):function(l){return l===i||la(l,i,s)}}function lh(i,s){return xa(i)&&Wh(s)?Uh(_n(i),s):function(l){var u=Fa(l,i);return u===n&&u===s?ka(l,i):Qr(s,u,U|K)}}function co(i,s,l,u,h){i!==s&&ia(s,function(g,m){if(h||(h=new Xt),We(g))i0(i,s,m,l,co,u,h);else{var E=u?u(Aa(i,m),g,m+"",i,s,h):n;E===n&&(E=g),ta(i,m,E)}},bt)}function i0(i,s,l,u,h,g,m){var E=Aa(i,l),T=Aa(s,l),R=m.get(T);if(R){ta(i,l,R);return}var N=g?g(E,T,l+"",i,s,m):n,L=N===n;if(L){var H=re(T),G=!H&&ei(T),j=!H&&!G&&or(T);N=T,H||G||j?re(E)?N=E:ze(E)?N=Et(E):G?(L=!1,N=yh(T,!0)):j?(L=!1,N=wh(T,!0)):N=[]:es(T)||Ci(T)?(N=E,Ci(E)?N=gd(E):(!We(E)||Pn(E))&&(N=Bh(T))):L=!1}L&&(m.set(T,N),h(N,T,u,g,m),m.delete(T)),ta(i,l,N)}function ah(i,s){var l=i.length;if(l)return s+=s<0?l:0,Nn(s,l)?i[s]:n}function ch(i,s,l){s.length?s=ke(s,function(g){return re(g)?function(m){return yi(m,g.length===1?g[0]:g)}:g}):s=[It];var u=-1;s=ke(s,Dt(Q()));var h=sh(i,function(g,m,E){var T=ke(s,function(R){return R(g)});return{criteria:T,index:++u,value:g}});return Nv(h,function(g,m){return g0(g,m,l)})}function r0(i,s){return uh(i,s,function(l,u){return ka(i,u)})}function uh(i,s,l){for(var u=-1,h=s.length,g={};++u<h;){var m=s[u],E=yi(i,m);l(E,m)&&Xr(g,Jn(m,i),E)}return g}function s0(i){return function(s){return yi(s,i)}}function ua(i,s,l,u){var h=u?Rv:Qi,g=-1,m=s.length,E=i;for(i===s&&(s=Et(s)),l&&(E=ke(i,Dt(l)));++g<m;)for(var T=0,R=s[g],N=l?l(R):R;(T=h(E,N,T,u))>-1;)E!==i&&Zs.call(E,T,1),Zs.call(i,T,1);return i}function fh(i,s){for(var l=i?s.length:0,u=l-1;l--;){var h=s[l];if(l==u||h!==g){var g=h;Nn(h)?Zs.call(i,h,1):_a(i,h)}}return i}function fa(i,s){return i+no(qf()*(s-i+1))}function o0(i,s,l,u){for(var h=-1,g=Ve(to((s-i)/(l||1)),0),m=x(g);g--;)m[u?g:++h]=i,i+=l;return m}function ha(i,s){var l="";if(!i||s<1||s>pe)return l;do s%2&&(l+=i),s=no(s/2),s&&(i+=i);while(s);return l}function le(i,s){return Ra(Hh(i,s,It),i+"")}function l0(i){return Yf(lr(i))}function a0(i,s){var l=lr(i);return wo(l,vi(s,0,l.length))}function Xr(i,s,l,u){if(!We(i))return i;s=Jn(s,i);for(var h=-1,g=s.length,m=g-1,E=i;E!=null&&++h<g;){var T=_n(s[h]),R=l;if(T==="__proto__"||T==="constructor"||T==="prototype")return i;if(h!=m){var N=E[T];R=u?u(N,T,E):n,R===n&&(R=We(N)?N:Nn(s[h+1])?[]:{})}Gr(E,T,R),E=E[T]}return i}var hh=io?function(i,s){return io.set(i,s),i}:It,c0=eo?function(i,s){return eo(i,"toString",{configurable:!0,enumerable:!1,value:Wa(s),writable:!0})}:It;function u0(i){return wo(lr(i))}function Gt(i,s,l){var u=-1,h=i.length;s<0&&(s=-s>h?0:h+s),l=l>h?h:l,l<0&&(l+=h),h=s>l?0:l-s>>>0,s>>>=0;for(var g=x(h);++u<h;)g[u]=i[u+s];return g}function f0(i,s){var l;return Xn(i,function(u,h,g){return l=s(u,h,g),!l}),!!l}function uo(i,s,l){var u=0,h=i==null?u:i.length;if(typeof s=="number"&&s===s&&h<=Ws){for(;u<h;){var g=u+h>>>1,m=i[g];m!==null&&!Lt(m)&&(l?m<=s:m<s)?u=g+1:h=g}return h}return da(i,s,It,l)}function da(i,s,l,u){var h=0,g=i==null?0:i.length;if(g===0)return 0;s=l(s);for(var m=s!==s,E=s===null,T=Lt(s),R=s===n;h<g;){var N=no((h+g)/2),L=l(i[N]),H=L!==n,G=L===null,j=L===L,oe=Lt(L);if(m)var J=u||j;else R?J=j&&(u||H):E?J=j&&H&&(u||!G):T?J=j&&H&&!G&&(u||!oe):G||oe?J=!1:J=u?L<=s:L<s;J?h=N+1:g=N}return lt(g,Wt)}function dh(i,s){for(var l=-1,u=i.length,h=0,g=[];++l<u;){var m=i[l],E=s?s(m):m;if(!l||!jt(E,T)){var T=E;g[h++]=m===0?0:m}}return g}function _h(i){return typeof i=="number"?i:Lt(i)?bn:+i}function Mt(i){if(typeof i=="string")return i;if(re(i))return ke(i,Mt)+"";if(Lt(i))return Gf?Gf.call(i):"";var s=i+"";return s=="0"&&1/i==-Te?"-0":s}function jn(i,s,l){var u=-1,h=zs,g=i.length,m=!0,E=[],T=E;if(l)m=!1,h=$l;else if(g>=o){var R=s?null:C0(i);if(R)return qs(R);m=!1,h=Ur,T=new mi}else T=s?[]:E;e:for(;++u<g;){var N=i[u],L=s?s(N):N;if(N=l||N!==0?N:0,m&&L===L){for(var H=T.length;H--;)if(T[H]===L)continue e;s&&T.push(L),E.push(N)}else h(T,L,l)||(T!==E&&T.push(L),E.push(N))}return E}function _a(i,s){return s=Jn(s,i),i=$h(i,s),i==null||delete i[_n(Vt(s))]}function ph(i,s,l,u){return Xr(i,s,l(yi(i,s)),u)}function fo(i,s,l,u){for(var h=i.length,g=u?h:-1;(u?g--:++g<h)&&s(i[g],g,i););return l?Gt(i,u?0:g,u?g+1:h):Gt(i,u?g+1:0,u?h:g)}function gh(i,s){var l=i;return l instanceof _e&&(l=l.value()),zl(s,function(u,h){return h.func.apply(h.thisArg,Vn([u],h.args))},l)}function pa(i,s,l){var u=i.length;if(u<2)return u?jn(i[0]):[];for(var h=-1,g=x(u);++h<u;)for(var m=i[h],E=-1;++E<u;)E!=h&&(g[h]=Vr(g[h]||m,i[E],s,l));return jn(st(g,1),s,l)}function mh(i,s,l){for(var u=-1,h=i.length,g=s.length,m={};++u<h;){var E=u<g?s[u]:n;l(m,i[u],E)}return m}function ga(i){return ze(i)?i:[]}function ma(i){return typeof i=="function"?i:It}function Jn(i,s){return re(i)?i:xa(i,s)?[i]:Gh(xe(i))}var h0=le;function Zn(i,s,l){var u=i.length;return l=l===n?u:l,!s&&l>=u?i:Gt(i,s,l)}var vh=Zv||function(i){return rt.clearTimeout(i)};function yh(i,s){if(s)return i.slice();var l=i.length,u=Uf?Uf(l):new i.constructor(l);return i.copy(u),u}function va(i){var s=new i.constructor(i.byteLength);return new js(s).set(new js(i)),s}function d0(i,s){var l=s?va(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.byteLength)}function _0(i){var s=new i.constructor(i.source,tf.exec(i));return s.lastIndex=i.lastIndex,s}function p0(i){return qr?Re(qr.call(i)):{}}function wh(i,s){var l=s?va(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)}function Eh(i,s){if(i!==s){var l=i!==n,u=i===null,h=i===i,g=Lt(i),m=s!==n,E=s===null,T=s===s,R=Lt(s);if(!E&&!R&&!g&&i>s||g&&m&&T&&!E&&!R||u&&m&&T||!l&&T||!h)return 1;if(!u&&!g&&!R&&i<s||R&&l&&h&&!u&&!g||E&&l&&h||!m&&h||!T)return-1}return 0}function g0(i,s,l){for(var u=-1,h=i.criteria,g=s.criteria,m=h.length,E=l.length;++u<m;){var T=Eh(h[u],g[u]);if(T){if(u>=E)return T;var R=l[u];return T*(R=="desc"?-1:1)}}return i.index-s.index}function Ch(i,s,l,u){for(var h=-1,g=i.length,m=l.length,E=-1,T=s.length,R=Ve(g-m,0),N=x(T+R),L=!u;++E<T;)N[E]=s[E];for(;++h<m;)(L||h<g)&&(N[l[h]]=i[h]);for(;R--;)N[E++]=i[h++];return N}function bh(i,s,l,u){for(var h=-1,g=i.length,m=-1,E=l.length,T=-1,R=s.length,N=Ve(g-E,0),L=x(N+R),H=!u;++h<N;)L[h]=i[h];for(var G=h;++T<R;)L[G+T]=s[T];for(;++m<E;)(H||h<g)&&(L[G+l[m]]=i[h++]);return L}function Et(i,s){var l=-1,u=i.length;for(s||(s=x(u));++l<u;)s[l]=i[l];return s}function dn(i,s,l,u){var h=!l;l||(l={});for(var g=-1,m=s.length;++g<m;){var E=s[g],T=u?u(l[E],i[E],E,l,i):n;T===n&&(T=i[E]),h?Sn(l,E,T):Gr(l,E,T)}return l}function m0(i,s){return dn(i,Ta(i),s)}function v0(i,s){return dn(i,Fh(i),s)}function ho(i,s){return function(l,u){var h=re(l)?bv:Uy,g=s?s():{};return h(l,i,Q(u,2),g)}}function ir(i){return le(function(s,l){var u=-1,h=l.length,g=h>1?l[h-1]:n,m=h>2?l[2]:n;for(g=i.length>3&&typeof g=="function"?(h--,g):n,m&&pt(l[0],l[1],m)&&(g=h<3?n:g,h=1),s=Re(s);++u<h;){var E=l[u];E&&i(s,E,u,g)}return s})}function Ih(i,s){return function(l,u){if(l==null)return l;if(!Ct(l))return i(l,u);for(var h=l.length,g=s?h:-1,m=Re(l);(s?g--:++g<h)&&u(m[g],g,m)!==!1;);return l}}function Th(i){return function(s,l,u){for(var h=-1,g=Re(s),m=u(s),E=m.length;E--;){var T=m[i?E:++h];if(l(g[T],T,g)===!1)break}return s}}function y0(i,s,l){var u=s&Z,h=jr(i);function g(){var m=this&&this!==rt&&this instanceof g?h:i;return m.apply(u?l:this,arguments)}return g}function xh(i){return function(s){s=xe(s);var l=Xi(s)?Qt(s):n,u=l?l[0]:s.charAt(0),h=l?Zn(l,1).join(""):s.slice(1);return u[i]()+h}}function rr(i){return function(s){return zl(Id(bd(s).replace(cv,"")),i,"")}}function jr(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var l=nr(i.prototype),u=i.apply(l,s);return We(u)?u:l}}function w0(i,s,l){var u=jr(i);function h(){for(var g=arguments.length,m=x(g),E=g,T=sr(h);E--;)m[E]=arguments[E];var R=g<3&&m[0]!==T&&m[g-1]!==T?[]:Yn(m,T);if(g-=R.length,g<l)return Ph(i,s,_o,h.placeholder,n,m,R,n,n,l-g);var N=this&&this!==rt&&this instanceof h?u:i;return Ot(N,this,m)}return h}function Sh(i){return function(s,l,u){var h=Re(s);if(!Ct(s)){var g=Q(l,3);s=je(s),l=function(E){return g(h[E],E,h)}}var m=i(s,l,u);return m>-1?h[g?s[m]:m]:n}}function Ah(i){return Rn(function(s){var l=s.length,u=l,h=Kt.prototype.thru;for(i&&s.reverse();u--;){var g=s[u];if(typeof g!="function")throw new zt(c);if(h&&!m&&vo(g)=="wrapper")var m=new Kt([],!0)}for(u=m?u:l;++u<l;){g=s[u];var E=vo(g),T=E=="wrapper"?ba(g):n;T&&Sa(T[0])&&T[1]==(vt|Ee|qe|Pt)&&!T[4].length&&T[9]==1?m=m[vo(T[0])].apply(m,T[3]):m=g.length==1&&Sa(g)?m[E]():m.thru(g)}return function(){var R=arguments,N=R[0];if(m&&R.length==1&&re(N))return m.plant(N).value();for(var L=0,H=l?s[L].apply(this,R):N;++L<l;)H=s[L].call(this,H);return H}})}function _o(i,s,l,u,h,g,m,E,T,R){var N=s&vt,L=s&Z,H=s&we,G=s&(Ee|te),j=s&hi,oe=H?n:jr(i);function J(){for(var de=arguments.length,me=x(de),Ft=de;Ft--;)me[Ft]=arguments[Ft];if(G)var gt=sr(J),kt=Ov(me,gt);if(u&&(me=Ch(me,u,h,G)),g&&(me=bh(me,g,m,G)),de-=kt,G&&de<R){var Ke=Yn(me,gt);return Ph(i,s,_o,J.placeholder,l,me,Ke,E,T,R-de)}var Jt=L?l:this,Dn=H?Jt[i]:i;return de=me.length,E?me=U0(me,E):j&&de>1&&me.reverse(),N&&T<de&&(me.length=T),this&&this!==rt&&this instanceof J&&(Dn=oe||jr(Dn)),Dn.apply(Jt,me)}return J}function Rh(i,s){return function(l,u){return Yy(l,i,s(u),{})}}function po(i,s){return function(l,u){var h;if(l===n&&u===n)return s;if(l!==n&&(h=l),u!==n){if(h===n)return u;typeof l=="string"||typeof u=="string"?(l=Mt(l),u=Mt(u)):(l=_h(l),u=_h(u)),h=i(l,u)}return h}}function ya(i){return Rn(function(s){return s=ke(s,Dt(Q())),le(function(l){var u=this;return i(s,function(h){return Ot(h,u,l)})})})}function go(i,s){s=s===n?" ":Mt(s);var l=s.length;if(l<2)return l?ha(s,i):s;var u=ha(s,to(i/ji(s)));return Xi(s)?Zn(Qt(u),0,i).join(""):u.slice(0,i)}function E0(i,s,l,u){var h=s&Z,g=jr(i);function m(){for(var E=-1,T=arguments.length,R=-1,N=u.length,L=x(N+T),H=this&&this!==rt&&this instanceof m?g:i;++R<N;)L[R]=u[R];for(;T--;)L[R++]=arguments[++E];return Ot(H,h?l:this,L)}return m}function Nh(i){return function(s,l,u){return u&&typeof u!="number"&&pt(s,l,u)&&(l=u=n),s=On(s),l===n?(l=s,s=0):l=On(l),u=u===n?s<l?1:-1:On(u),o0(s,l,u,i)}}function mo(i){return function(s,l){return typeof s=="string"&&typeof l=="string"||(s=Yt(s),l=Yt(l)),i(s,l)}}function Ph(i,s,l,u,h,g,m,E,T,R){var N=s&Ee,L=N?m:n,H=N?n:m,G=N?g:n,j=N?n:g;s|=N?qe:Bt,s&=~(N?Bt:qe),s&Le||(s&=~(Z|we));var oe=[i,s,h,G,L,j,H,E,T,R],J=l.apply(n,oe);return Sa(i)&&zh(J,oe),J.placeholder=u,Kh(J,i,s)}function wa(i){var s=Ge[i];return function(l,u){if(l=Yt(l),u=u==null?0:lt(se(u),292),u&&Kf(l)){var h=(xe(l)+"e").split("e"),g=s(h[0]+"e"+(+h[1]+u));return h=(xe(g)+"e").split("e"),+(h[0]+"e"+(+h[1]-u))}return s(l)}}var C0=er&&1/qs(new er([,-0]))[1]==Te?function(i){return new er(i)}:$a;function Oh(i){return function(s){var l=at(s);return l==S?Xl(s):l==D?Wv(s):Pv(s,i(s))}}function An(i,s,l,u,h,g,m,E){var T=s&we;if(!T&&typeof i!="function")throw new zt(c);var R=u?u.length:0;if(R||(s&=~(qe|Bt),u=h=n),m=m===n?m:Ve(se(m),0),E=E===n?E:se(E),R-=h?h.length:0,s&Bt){var N=u,L=h;u=h=n}var H=T?n:ba(i),G=[i,s,l,u,h,N,L,g,m,E];if(H&&k0(G,H),i=G[0],s=G[1],l=G[2],u=G[3],h=G[4],E=G[9]=G[9]===n?T?0:i.length:Ve(G[9]-R,0),!E&&s&(Ee|te)&&(s&=~(Ee|te)),!s||s==Z)var j=y0(i,s,l);else s==Ee||s==te?j=w0(i,s,E):(s==qe||s==(Z|qe))&&!h.length?j=E0(i,s,l,u):j=_o.apply(n,G);var oe=H?hh:zh;return Kh(oe(j,G),i,s)}function Dh(i,s,l,u){return i===n||jt(i,Zi[l])&&!Se.call(u,l)?s:i}function Mh(i,s,l,u,h,g){return We(i)&&We(s)&&(g.set(s,i),co(i,s,n,Mh,g),g.delete(s)),i}function b0(i){return es(i)?n:i}function Lh(i,s,l,u,h,g){var m=l&U,E=i.length,T=s.length;if(E!=T&&!(m&&T>E))return!1;var R=g.get(i),N=g.get(s);if(R&&N)return R==s&&N==i;var L=-1,H=!0,G=l&K?new mi:n;for(g.set(i,s),g.set(s,i);++L<E;){var j=i[L],oe=s[L];if(u)var J=m?u(oe,j,L,s,i,g):u(j,oe,L,i,s,g);if(J!==n){if(J)continue;H=!1;break}if(G){if(!Kl(s,function(de,me){if(!Ur(G,me)&&(j===de||h(j,de,l,u,g)))return G.push(me)})){H=!1;break}}else if(!(j===oe||h(j,oe,l,u,g))){H=!1;break}}return g.delete(i),g.delete(s),H}function I0(i,s,l,u,h,g,m){switch(l){case ge:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case ye:return!(i.byteLength!=s.byteLength||!g(new js(i),new js(s)));case Kn:case Ut:case O:return jt(+i,+s);case qn:return i.name==s.name&&i.message==s.message;case W:case V:return i==s+"";case S:var E=Xl;case D:var T=u&U;if(E||(E=qs),i.size!=s.size&&!T)return!1;var R=m.get(i);if(R)return R==s;u|=K,m.set(i,s);var N=Lh(E(i),E(s),u,h,g,m);return m.delete(i),N;case q:if(qr)return qr.call(i)==qr.call(s)}return!1}function T0(i,s,l,u,h,g){var m=l&U,E=Ea(i),T=E.length,R=Ea(s),N=R.length;if(T!=N&&!m)return!1;for(var L=T;L--;){var H=E[L];if(!(m?H in s:Se.call(s,H)))return!1}var G=g.get(i),j=g.get(s);if(G&&j)return G==s&&j==i;var oe=!0;g.set(i,s),g.set(s,i);for(var J=m;++L<T;){H=E[L];var de=i[H],me=s[H];if(u)var Ft=m?u(me,de,H,s,i,g):u(de,me,H,i,s,g);if(!(Ft===n?de===me||h(de,me,l,u,g):Ft)){oe=!1;break}J||(J=H=="constructor")}if(oe&&!J){var gt=i.constructor,kt=s.constructor;gt!=kt&&"constructor"in i&&"constructor"in s&&!(typeof gt=="function"&&gt instanceof gt&&typeof kt=="function"&&kt instanceof kt)&&(oe=!1)}return g.delete(i),g.delete(s),oe}function Rn(i){return Ra(Hh(i,n,Xh),i+"")}function Ea(i){return th(i,je,Ta)}function Ca(i){return th(i,bt,Fh)}var ba=io?function(i){return io.get(i)}:$a;function vo(i){for(var s=i.name+"",l=tr[s],u=Se.call(tr,s)?l.length:0;u--;){var h=l[u],g=h.func;if(g==null||g==i)return h.name}return s}function sr(i){var s=Se.call(p,"placeholder")?p:i;return s.placeholder}function Q(){var i=p.iteratee||Ua;return i=i===Ua?rh:i,arguments.length?i(arguments[0],arguments[1]):i}function yo(i,s){var l=i.__data__;return D0(s)?l[typeof s=="string"?"string":"hash"]:l.map}function Ia(i){for(var s=je(i),l=s.length;l--;){var u=s[l],h=i[u];s[l]=[u,h,Wh(h)]}return s}function wi(i,s){var l=Fv(i,s);return ih(l)?l:n}function x0(i){var s=Se.call(i,pi),l=i[pi];try{i[pi]=n;var u=!0}catch{}var h=Qs.call(i);return u&&(s?i[pi]=l:delete i[pi]),h}var Ta=Jl?function(i){return i==null?[]:(i=Re(i),Gn(Jl(i),function(s){return $f.call(i,s)}))}:za,Fh=Jl?function(i){for(var s=[];i;)Vn(s,Ta(i)),i=Js(i);return s}:za,at=_t;(Zl&&at(new Zl(new ArrayBuffer(1)))!=ge||$r&&at(new $r)!=S||ea&&at(ea.resolve())!=$||er&&at(new er)!=D||zr&&at(new zr)!=X)&&(at=function(i){var s=_t(i),l=s==F?i.constructor:n,u=l?Ei(l):"";if(u)switch(u){case ay:return ge;case cy:return S;case uy:return $;case fy:return D;case hy:return X}return s});function S0(i,s,l){for(var u=-1,h=l.length;++u<h;){var g=l[u],m=g.size;switch(g.type){case"drop":i+=m;break;case"dropRight":s-=m;break;case"take":s=lt(s,i+m);break;case"takeRight":i=Ve(i,s-m);break}}return{start:i,end:s}}function A0(i){var s=i.match(Mm);return s?s[1].split(Lm):[]}function kh(i,s,l){s=Jn(s,i);for(var u=-1,h=s.length,g=!1;++u<h;){var m=_n(s[u]);if(!(g=i!=null&&l(i,m)))break;i=i[m]}return g||++u!=h?g:(h=i==null?0:i.length,!!h&&xo(h)&&Nn(m,h)&&(re(i)||Ci(i)))}function R0(i){var s=i.length,l=new i.constructor(s);return s&&typeof i[0]=="string"&&Se.call(i,"index")&&(l.index=i.index,l.input=i.input),l}function Bh(i){return typeof i.constructor=="function"&&!Jr(i)?nr(Js(i)):{}}function N0(i,s,l){var u=i.constructor;switch(s){case ye:return va(i);case Kn:case Ut:return new u(+i);case ge:return d0(i,l);case Fe:case dt:case fn:case qi:case In:case Gi:case it:case wt:case Vi:return wh(i,l);case S:return new u;case O:case V:return new u(i);case W:return _0(i);case D:return new u;case q:return p0(i)}}function P0(i,s){var l=s.length;if(!l)return i;var u=l-1;return s[u]=(l>1?"& ":"")+s[u],s=s.join(l>2?", ":" "),i.replace(Dm,`{
/* [wrapped with `+s+`] */
`)}function O0(i){return re(i)||Ci(i)||!!(zf&&i&&i[zf])}function Nn(i,s){var l=typeof i;return s=s??pe,!!s&&(l=="number"||l!="symbol"&&Km.test(i))&&i>-1&&i%1==0&&i<s}function pt(i,s,l){if(!We(l))return!1;var u=typeof s;return(u=="number"?Ct(l)&&Nn(s,l.length):u=="string"&&s in l)?jt(l[s],i):!1}function xa(i,s){if(re(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||Lt(i)?!0:Rm.test(i)||!Am.test(i)||s!=null&&i in Re(s)}function D0(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}function Sa(i){var s=vo(i),l=p[s];if(typeof l!="function"||!(s in _e.prototype))return!1;if(i===l)return!0;var u=ba(l);return!!u&&i===u[0]}function M0(i){return!!Wf&&Wf in i}var L0=Vs?Pn:Ka;function Jr(i){var s=i&&i.constructor,l=typeof s=="function"&&s.prototype||Zi;return i===l}function Wh(i){return i===i&&!We(i)}function Uh(i,s){return function(l){return l==null?!1:l[i]===s&&(s!==n||i in Re(l))}}function F0(i){var s=Io(i,function(u){return l.size===_&&l.clear(),u}),l=s.cache;return s}function k0(i,s){var l=i[1],u=s[1],h=l|u,g=h<(Z|we|vt),m=u==vt&&l==Ee||u==vt&&l==Pt&&i[7].length<=s[8]||u==(vt|Pt)&&s[7].length<=s[8]&&l==Ee;if(!(g||m))return i;u&Z&&(i[2]=s[2],h|=l&Z?0:Le);var E=s[3];if(E){var T=i[3];i[3]=T?Ch(T,E,s[4]):E,i[4]=T?Yn(i[3],y):s[4]}return E=s[5],E&&(T=i[5],i[5]=T?bh(T,E,s[6]):E,i[6]=T?Yn(i[5],y):s[6]),E=s[7],E&&(i[7]=E),u&vt&&(i[8]=i[8]==null?s[8]:lt(i[8],s[8])),i[9]==null&&(i[9]=s[9]),i[0]=s[0],i[1]=h,i}function B0(i){var s=[];if(i!=null)for(var l in Re(i))s.push(l);return s}function W0(i){return Qs.call(i)}function Hh(i,s,l){return s=Ve(s===n?i.length-1:s,0),function(){for(var u=arguments,h=-1,g=Ve(u.length-s,0),m=x(g);++h<g;)m[h]=u[s+h];h=-1;for(var E=x(s+1);++h<s;)E[h]=u[h];return E[s]=l(m),Ot(i,this,E)}}function $h(i,s){return s.length<2?i:yi(i,Gt(s,0,-1))}function U0(i,s){for(var l=i.length,u=lt(s.length,l),h=Et(i);u--;){var g=s[u];i[u]=Nn(g,l)?h[g]:n}return i}function Aa(i,s){if(!(s==="constructor"&&typeof i[s]=="function")&&s!="__proto__")return i[s]}var zh=qh(hh),Zr=ty||function(i,s){return rt.setTimeout(i,s)},Ra=qh(c0);function Kh(i,s,l){var u=s+"";return Ra(i,P0(u,H0(A0(u),l)))}function qh(i){var s=0,l=0;return function(){var u=sy(),h=$i-(u-l);if(l=u,h>0){if(++s>=Hi)return arguments[0]}else s=0;return i.apply(n,arguments)}}function wo(i,s){var l=-1,u=i.length,h=u-1;for(s=s===n?u:s;++l<s;){var g=fa(l,h),m=i[g];i[g]=i[l],i[l]=m}return i.length=s,i}var Gh=F0(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(Nm,function(l,u,h,g){s.push(h?g.replace(Bm,"$1"):u||l)}),s});function _n(i){if(typeof i=="string"||Lt(i))return i;var s=i+"";return s=="0"&&1/i==-Te?"-0":s}function Ei(i){if(i!=null){try{return Ys.call(i)}catch{}try{return i+""}catch{}}return""}function H0(i,s){return $t(Ol,function(l){var u="_."+l[0];s&l[1]&&!zs(i,u)&&i.push(u)}),i.sort()}function Vh(i){if(i instanceof _e)return i.clone();var s=new Kt(i.__wrapped__,i.__chain__);return s.__actions__=Et(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}function $0(i,s,l){(l?pt(i,s,l):s===n)?s=1:s=Ve(se(s),0);var u=i==null?0:i.length;if(!u||s<1)return[];for(var h=0,g=0,m=x(to(u/s));h<u;)m[g++]=Gt(i,h,h+=s);return m}function z0(i){for(var s=-1,l=i==null?0:i.length,u=0,h=[];++s<l;){var g=i[s];g&&(h[u++]=g)}return h}function K0(){var i=arguments.length;if(!i)return[];for(var s=x(i-1),l=arguments[0],u=i;u--;)s[u-1]=arguments[u];return Vn(re(l)?Et(l):[l],st(s,1))}var q0=le(function(i,s){return ze(i)?Vr(i,st(s,1,ze,!0)):[]}),G0=le(function(i,s){var l=Vt(s);return ze(l)&&(l=n),ze(i)?Vr(i,st(s,1,ze,!0),Q(l,2)):[]}),V0=le(function(i,s){var l=Vt(s);return ze(l)&&(l=n),ze(i)?Vr(i,st(s,1,ze,!0),n,l):[]});function Y0(i,s,l){var u=i==null?0:i.length;return u?(s=l||s===n?1:se(s),Gt(i,s<0?0:s,u)):[]}function Q0(i,s,l){var u=i==null?0:i.length;return u?(s=l||s===n?1:se(s),s=u-s,Gt(i,0,s<0?0:s)):[]}function X0(i,s){return i&&i.length?fo(i,Q(s,3),!0,!0):[]}function j0(i,s){return i&&i.length?fo(i,Q(s,3),!0):[]}function J0(i,s,l,u){var h=i==null?0:i.length;return h?(l&&typeof l!="number"&&pt(i,s,l)&&(l=0,u=h),Ky(i,s,l,u)):[]}function Yh(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var h=l==null?0:se(l);return h<0&&(h=Ve(u+h,0)),Ks(i,Q(s,3),h)}function Qh(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var h=u-1;return l!==n&&(h=se(l),h=l<0?Ve(u+h,0):lt(h,u-1)),Ks(i,Q(s,3),h,!0)}function Xh(i){var s=i==null?0:i.length;return s?st(i,1):[]}function Z0(i){var s=i==null?0:i.length;return s?st(i,Te):[]}function ew(i,s){var l=i==null?0:i.length;return l?(s=s===n?1:se(s),st(i,s)):[]}function tw(i){for(var s=-1,l=i==null?0:i.length,u={};++s<l;){var h=i[s];u[h[0]]=h[1]}return u}function jh(i){return i&&i.length?i[0]:n}function nw(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var h=l==null?0:se(l);return h<0&&(h=Ve(u+h,0)),Qi(i,s,h)}function iw(i){var s=i==null?0:i.length;return s?Gt(i,0,-1):[]}var rw=le(function(i){var s=ke(i,ga);return s.length&&s[0]===i[0]?oa(s):[]}),sw=le(function(i){var s=Vt(i),l=ke(i,ga);return s===Vt(l)?s=n:l.pop(),l.length&&l[0]===i[0]?oa(l,Q(s,2)):[]}),ow=le(function(i){var s=Vt(i),l=ke(i,ga);return s=typeof s=="function"?s:n,s&&l.pop(),l.length&&l[0]===i[0]?oa(l,n,s):[]});function lw(i,s){return i==null?"":iy.call(i,s)}function Vt(i){var s=i==null?0:i.length;return s?i[s-1]:n}function aw(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var h=u;return l!==n&&(h=se(l),h=h<0?Ve(u+h,0):lt(h,u-1)),s===s?Hv(i,s,h):Ks(i,Pf,h,!0)}function cw(i,s){return i&&i.length?ah(i,se(s)):n}var uw=le(Jh);function Jh(i,s){return i&&i.length&&s&&s.length?ua(i,s):i}function fw(i,s,l){return i&&i.length&&s&&s.length?ua(i,s,Q(l,2)):i}function hw(i,s,l){return i&&i.length&&s&&s.length?ua(i,s,n,l):i}var dw=Rn(function(i,s){var l=i==null?0:i.length,u=na(i,s);return fh(i,ke(s,function(h){return Nn(h,l)?+h:h}).sort(Eh)),u});function _w(i,s){var l=[];if(!(i&&i.length))return l;var u=-1,h=[],g=i.length;for(s=Q(s,3);++u<g;){var m=i[u];s(m,u,i)&&(l.push(m),h.push(u))}return fh(i,h),l}function Na(i){return i==null?i:ly.call(i)}function pw(i,s,l){var u=i==null?0:i.length;return u?(l&&typeof l!="number"&&pt(i,s,l)?(s=0,l=u):(s=s==null?0:se(s),l=l===n?u:se(l)),Gt(i,s,l)):[]}function gw(i,s){return uo(i,s)}function mw(i,s,l){return da(i,s,Q(l,2))}function vw(i,s){var l=i==null?0:i.length;if(l){var u=uo(i,s);if(u<l&&jt(i[u],s))return u}return-1}function yw(i,s){return uo(i,s,!0)}function ww(i,s,l){return da(i,s,Q(l,2),!0)}function Ew(i,s){var l=i==null?0:i.length;if(l){var u=uo(i,s,!0)-1;if(jt(i[u],s))return u}return-1}function Cw(i){return i&&i.length?dh(i):[]}function bw(i,s){return i&&i.length?dh(i,Q(s,2)):[]}function Iw(i){var s=i==null?0:i.length;return s?Gt(i,1,s):[]}function Tw(i,s,l){return i&&i.length?(s=l||s===n?1:se(s),Gt(i,0,s<0?0:s)):[]}function xw(i,s,l){var u=i==null?0:i.length;return u?(s=l||s===n?1:se(s),s=u-s,Gt(i,s<0?0:s,u)):[]}function Sw(i,s){return i&&i.length?fo(i,Q(s,3),!1,!0):[]}function Aw(i,s){return i&&i.length?fo(i,Q(s,3)):[]}var Rw=le(function(i){return jn(st(i,1,ze,!0))}),Nw=le(function(i){var s=Vt(i);return ze(s)&&(s=n),jn(st(i,1,ze,!0),Q(s,2))}),Pw=le(function(i){var s=Vt(i);return s=typeof s=="function"?s:n,jn(st(i,1,ze,!0),n,s)});function Ow(i){return i&&i.length?jn(i):[]}function Dw(i,s){return i&&i.length?jn(i,Q(s,2)):[]}function Mw(i,s){return s=typeof s=="function"?s:n,i&&i.length?jn(i,n,s):[]}function Pa(i){if(!(i&&i.length))return[];var s=0;return i=Gn(i,function(l){if(ze(l))return s=Ve(l.length,s),!0}),Yl(s,function(l){return ke(i,ql(l))})}function Zh(i,s){if(!(i&&i.length))return[];var l=Pa(i);return s==null?l:ke(l,function(u){return Ot(s,n,u)})}var Lw=le(function(i,s){return ze(i)?Vr(i,s):[]}),Fw=le(function(i){return pa(Gn(i,ze))}),kw=le(function(i){var s=Vt(i);return ze(s)&&(s=n),pa(Gn(i,ze),Q(s,2))}),Bw=le(function(i){var s=Vt(i);return s=typeof s=="function"?s:n,pa(Gn(i,ze),n,s)}),Ww=le(Pa);function Uw(i,s){return mh(i||[],s||[],Gr)}function Hw(i,s){return mh(i||[],s||[],Xr)}var $w=le(function(i){var s=i.length,l=s>1?i[s-1]:n;return l=typeof l=="function"?(i.pop(),l):n,Zh(i,l)});function ed(i){var s=p(i);return s.__chain__=!0,s}function zw(i,s){return s(i),i}function Eo(i,s){return s(i)}var Kw=Rn(function(i){var s=i.length,l=s?i[0]:0,u=this.__wrapped__,h=function(g){return na(g,i)};return s>1||this.__actions__.length||!(u instanceof _e)||!Nn(l)?this.thru(h):(u=u.slice(l,+l+(s?1:0)),u.__actions__.push({func:Eo,args:[h],thisArg:n}),new Kt(u,this.__chain__).thru(function(g){return s&&!g.length&&g.push(n),g}))});function qw(){return ed(this)}function Gw(){return new Kt(this.value(),this.__chain__)}function Vw(){this.__values__===n&&(this.__values__=_d(this.value()));var i=this.__index__>=this.__values__.length,s=i?n:this.__values__[this.__index__++];return{done:i,value:s}}function Yw(){return this}function Qw(i){for(var s,l=this;l instanceof so;){var u=Vh(l);u.__index__=0,u.__values__=n,s?h.__wrapped__=u:s=u;var h=u;l=l.__wrapped__}return h.__wrapped__=i,s}function Xw(){var i=this.__wrapped__;if(i instanceof _e){var s=i;return this.__actions__.length&&(s=new _e(this)),s=s.reverse(),s.__actions__.push({func:Eo,args:[Na],thisArg:n}),new Kt(s,this.__chain__)}return this.thru(Na)}function jw(){return gh(this.__wrapped__,this.__actions__)}var Jw=ho(function(i,s,l){Se.call(i,l)?++i[l]:Sn(i,l,1)});function Zw(i,s,l){var u=re(i)?Rf:zy;return l&&pt(i,s,l)&&(s=n),u(i,Q(s,3))}function eE(i,s){var l=re(i)?Gn:Zf;return l(i,Q(s,3))}var tE=Sh(Yh),nE=Sh(Qh);function iE(i,s){return st(Co(i,s),1)}function rE(i,s){return st(Co(i,s),Te)}function sE(i,s,l){return l=l===n?1:se(l),st(Co(i,s),l)}function td(i,s){var l=re(i)?$t:Xn;return l(i,Q(s,3))}function nd(i,s){var l=re(i)?Iv:Jf;return l(i,Q(s,3))}var oE=ho(function(i,s,l){Se.call(i,l)?i[l].push(s):Sn(i,l,[s])});function lE(i,s,l,u){i=Ct(i)?i:lr(i),l=l&&!u?se(l):0;var h=i.length;return l<0&&(l=Ve(h+l,0)),So(i)?l<=h&&i.indexOf(s,l)>-1:!!h&&Qi(i,s,l)>-1}var aE=le(function(i,s,l){var u=-1,h=typeof s=="function",g=Ct(i)?x(i.length):[];return Xn(i,function(m){g[++u]=h?Ot(s,m,l):Yr(m,s,l)}),g}),cE=ho(function(i,s,l){Sn(i,l,s)});function Co(i,s){var l=re(i)?ke:sh;return l(i,Q(s,3))}function uE(i,s,l,u){return i==null?[]:(re(s)||(s=s==null?[]:[s]),l=u?n:l,re(l)||(l=l==null?[]:[l]),ch(i,s,l))}var fE=ho(function(i,s,l){i[l?0:1].push(s)},function(){return[[],[]]});function hE(i,s,l){var u=re(i)?zl:Df,h=arguments.length<3;return u(i,Q(s,4),l,h,Xn)}function dE(i,s,l){var u=re(i)?Tv:Df,h=arguments.length<3;return u(i,Q(s,4),l,h,Jf)}function _E(i,s){var l=re(i)?Gn:Zf;return l(i,To(Q(s,3)))}function pE(i){var s=re(i)?Yf:l0;return s(i)}function gE(i,s,l){(l?pt(i,s,l):s===n)?s=1:s=se(s);var u=re(i)?By:a0;return u(i,s)}function mE(i){var s=re(i)?Wy:u0;return s(i)}function vE(i){if(i==null)return 0;if(Ct(i))return So(i)?ji(i):i.length;var s=at(i);return s==S||s==D?i.size:aa(i).length}function yE(i,s,l){var u=re(i)?Kl:f0;return l&&pt(i,s,l)&&(s=n),u(i,Q(s,3))}var wE=le(function(i,s){if(i==null)return[];var l=s.length;return l>1&&pt(i,s[0],s[1])?s=[]:l>2&&pt(s[0],s[1],s[2])&&(s=[s[0]]),ch(i,st(s,1),[])}),bo=ey||function(){return rt.Date.now()};function EE(i,s){if(typeof s!="function")throw new zt(c);return i=se(i),function(){if(--i<1)return s.apply(this,arguments)}}function id(i,s,l){return s=l?n:s,s=i&&s==null?i.length:s,An(i,vt,n,n,n,n,s)}function rd(i,s){var l;if(typeof s!="function")throw new zt(c);return i=se(i),function(){return--i>0&&(l=s.apply(this,arguments)),i<=1&&(s=n),l}}var Oa=le(function(i,s,l){var u=Z;if(l.length){var h=Yn(l,sr(Oa));u|=qe}return An(i,u,s,l,h)}),sd=le(function(i,s,l){var u=Z|we;if(l.length){var h=Yn(l,sr(sd));u|=qe}return An(s,u,i,l,h)});function od(i,s,l){s=l?n:s;var u=An(i,Ee,n,n,n,n,n,s);return u.placeholder=od.placeholder,u}function ld(i,s,l){s=l?n:s;var u=An(i,te,n,n,n,n,n,s);return u.placeholder=ld.placeholder,u}function ad(i,s,l){var u,h,g,m,E,T,R=0,N=!1,L=!1,H=!0;if(typeof i!="function")throw new zt(c);s=Yt(s)||0,We(l)&&(N=!!l.leading,L="maxWait"in l,g=L?Ve(Yt(l.maxWait)||0,s):g,H="trailing"in l?!!l.trailing:H);function G(Ke){var Jt=u,Dn=h;return u=h=n,R=Ke,m=i.apply(Dn,Jt),m}function j(Ke){return R=Ke,E=Zr(de,s),N?G(Ke):m}function oe(Ke){var Jt=Ke-T,Dn=Ke-R,Sd=s-Jt;return L?lt(Sd,g-Dn):Sd}function J(Ke){var Jt=Ke-T,Dn=Ke-R;return T===n||Jt>=s||Jt<0||L&&Dn>=g}function de(){var Ke=bo();if(J(Ke))return me(Ke);E=Zr(de,oe(Ke))}function me(Ke){return E=n,H&&u?G(Ke):(u=h=n,m)}function Ft(){E!==n&&vh(E),R=0,u=T=h=E=n}function gt(){return E===n?m:me(bo())}function kt(){var Ke=bo(),Jt=J(Ke);if(u=arguments,h=this,T=Ke,Jt){if(E===n)return j(T);if(L)return vh(E),E=Zr(de,s),G(T)}return E===n&&(E=Zr(de,s)),m}return kt.cancel=Ft,kt.flush=gt,kt}var CE=le(function(i,s){return jf(i,1,s)}),bE=le(function(i,s,l){return jf(i,Yt(s)||0,l)});function IE(i){return An(i,hi)}function Io(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new zt(c);var l=function(){var u=arguments,h=s?s.apply(this,u):u[0],g=l.cache;if(g.has(h))return g.get(h);var m=i.apply(this,u);return l.cache=g.set(h,m)||g,m};return l.cache=new(Io.Cache||xn),l}Io.Cache=xn;function To(i){if(typeof i!="function")throw new zt(c);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}function TE(i){return rd(2,i)}var xE=h0(function(i,s){s=s.length==1&&re(s[0])?ke(s[0],Dt(Q())):ke(st(s,1),Dt(Q()));var l=s.length;return le(function(u){for(var h=-1,g=lt(u.length,l);++h<g;)u[h]=s[h].call(this,u[h]);return Ot(i,this,u)})}),Da=le(function(i,s){var l=Yn(s,sr(Da));return An(i,qe,n,s,l)}),cd=le(function(i,s){var l=Yn(s,sr(cd));return An(i,Bt,n,s,l)}),SE=Rn(function(i,s){return An(i,Pt,n,n,n,s)});function AE(i,s){if(typeof i!="function")throw new zt(c);return s=s===n?s:se(s),le(i,s)}function RE(i,s){if(typeof i!="function")throw new zt(c);return s=s==null?0:Ve(se(s),0),le(function(l){var u=l[s],h=Zn(l,0,s);return u&&Vn(h,u),Ot(i,this,h)})}function NE(i,s,l){var u=!0,h=!0;if(typeof i!="function")throw new zt(c);return We(l)&&(u="leading"in l?!!l.leading:u,h="trailing"in l?!!l.trailing:h),ad(i,s,{leading:u,maxWait:s,trailing:h})}function PE(i){return id(i,1)}function OE(i,s){return Da(ma(s),i)}function DE(){if(!arguments.length)return[];var i=arguments[0];return re(i)?i:[i]}function ME(i){return qt(i,P)}function LE(i,s){return s=typeof s=="function"?s:n,qt(i,P,s)}function FE(i){return qt(i,v|P)}function kE(i,s){return s=typeof s=="function"?s:n,qt(i,v|P,s)}function BE(i,s){return s==null||Xf(i,s,je(s))}function jt(i,s){return i===s||i!==i&&s!==s}var WE=mo(sa),UE=mo(function(i,s){return i>=s}),Ci=nh(function(){return arguments}())?nh:function(i){return $e(i)&&Se.call(i,"callee")&&!$f.call(i,"callee")},re=x.isArray,HE=bf?Dt(bf):Qy;function Ct(i){return i!=null&&xo(i.length)&&!Pn(i)}function ze(i){return $e(i)&&Ct(i)}function $E(i){return i===!0||i===!1||$e(i)&&_t(i)==Kn}var ei=ny||Ka,zE=If?Dt(If):Xy;function KE(i){return $e(i)&&i.nodeType===1&&!es(i)}function qE(i){if(i==null)return!0;if(Ct(i)&&(re(i)||typeof i=="string"||typeof i.splice=="function"||ei(i)||or(i)||Ci(i)))return!i.length;var s=at(i);if(s==S||s==D)return!i.size;if(Jr(i))return!aa(i).length;for(var l in i)if(Se.call(i,l))return!1;return!0}function GE(i,s){return Qr(i,s)}function VE(i,s,l){l=typeof l=="function"?l:n;var u=l?l(i,s):n;return u===n?Qr(i,s,n,l):!!u}function Ma(i){if(!$e(i))return!1;var s=_t(i);return s==qn||s==Wr||typeof i.message=="string"&&typeof i.name=="string"&&!es(i)}function YE(i){return typeof i=="number"&&Kf(i)}function Pn(i){if(!We(i))return!1;var s=_t(i);return s==w||s==I||s==Ki||s==k}function ud(i){return typeof i=="number"&&i==se(i)}function xo(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=pe}function We(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}function $e(i){return i!=null&&typeof i=="object"}var fd=Tf?Dt(Tf):Jy;function QE(i,s){return i===s||la(i,s,Ia(s))}function XE(i,s,l){return l=typeof l=="function"?l:n,la(i,s,Ia(s),l)}function jE(i){return hd(i)&&i!=+i}function JE(i){if(L0(i))throw new ne(a);return ih(i)}function ZE(i){return i===null}function eC(i){return i==null}function hd(i){return typeof i=="number"||$e(i)&&_t(i)==O}function es(i){if(!$e(i)||_t(i)!=F)return!1;var s=Js(i);if(s===null)return!0;var l=Se.call(s,"constructor")&&s.constructor;return typeof l=="function"&&l instanceof l&&Ys.call(l)==Xv}var La=xf?Dt(xf):Zy;function tC(i){return ud(i)&&i>=-pe&&i<=pe}var dd=Sf?Dt(Sf):e0;function So(i){return typeof i=="string"||!re(i)&&$e(i)&&_t(i)==V}function Lt(i){return typeof i=="symbol"||$e(i)&&_t(i)==q}var or=Af?Dt(Af):t0;function nC(i){return i===n}function iC(i){return $e(i)&&at(i)==X}function rC(i){return $e(i)&&_t(i)==ce}var sC=mo(ca),oC=mo(function(i,s){return i<=s});function _d(i){if(!i)return[];if(Ct(i))return So(i)?Qt(i):Et(i);if(Hr&&i[Hr])return Bv(i[Hr]());var s=at(i),l=s==S?Xl:s==D?qs:lr;return l(i)}function On(i){if(!i)return i===0?i:0;if(i=Yt(i),i===Te||i===-Te){var s=i<0?-1:1;return s*Cn}return i===i?i:0}function se(i){var s=On(i),l=s%1;return s===s?l?s-l:s:0}function pd(i){return i?vi(se(i),0,Xe):0}function Yt(i){if(typeof i=="number")return i;if(Lt(i))return bn;if(We(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=We(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=Mf(i);var l=Hm.test(i);return l||zm.test(i)?Ev(i.slice(2),l?2:8):Um.test(i)?bn:+i}function gd(i){return dn(i,bt(i))}function lC(i){return i?vi(se(i),-pe,pe):i===0?i:0}function xe(i){return i==null?"":Mt(i)}var aC=ir(function(i,s){if(Jr(s)||Ct(s)){dn(s,je(s),i);return}for(var l in s)Se.call(s,l)&&Gr(i,l,s[l])}),md=ir(function(i,s){dn(s,bt(s),i)}),Ao=ir(function(i,s,l,u){dn(s,bt(s),i,u)}),cC=ir(function(i,s,l,u){dn(s,je(s),i,u)}),uC=Rn(na);function fC(i,s){var l=nr(i);return s==null?l:Qf(l,s)}var hC=le(function(i,s){i=Re(i);var l=-1,u=s.length,h=u>2?s[2]:n;for(h&&pt(s[0],s[1],h)&&(u=1);++l<u;)for(var g=s[l],m=bt(g),E=-1,T=m.length;++E<T;){var R=m[E],N=i[R];(N===n||jt(N,Zi[R])&&!Se.call(i,R))&&(i[R]=g[R])}return i}),dC=le(function(i){return i.push(n,Mh),Ot(vd,n,i)});function _C(i,s){return Nf(i,Q(s,3),hn)}function pC(i,s){return Nf(i,Q(s,3),ra)}function gC(i,s){return i==null?i:ia(i,Q(s,3),bt)}function mC(i,s){return i==null?i:eh(i,Q(s,3),bt)}function vC(i,s){return i&&hn(i,Q(s,3))}function yC(i,s){return i&&ra(i,Q(s,3))}function wC(i){return i==null?[]:ao(i,je(i))}function EC(i){return i==null?[]:ao(i,bt(i))}function Fa(i,s,l){var u=i==null?n:yi(i,s);return u===n?l:u}function CC(i,s){return i!=null&&kh(i,s,qy)}function ka(i,s){return i!=null&&kh(i,s,Gy)}var bC=Rh(function(i,s,l){s!=null&&typeof s.toString!="function"&&(s=Qs.call(s)),i[s]=l},Wa(It)),IC=Rh(function(i,s,l){s!=null&&typeof s.toString!="function"&&(s=Qs.call(s)),Se.call(i,s)?i[s].push(l):i[s]=[l]},Q),TC=le(Yr);function je(i){return Ct(i)?Vf(i):aa(i)}function bt(i){return Ct(i)?Vf(i,!0):n0(i)}function xC(i,s){var l={};return s=Q(s,3),hn(i,function(u,h,g){Sn(l,s(u,h,g),u)}),l}function SC(i,s){var l={};return s=Q(s,3),hn(i,function(u,h,g){Sn(l,h,s(u,h,g))}),l}var AC=ir(function(i,s,l){co(i,s,l)}),vd=ir(function(i,s,l,u){co(i,s,l,u)}),RC=Rn(function(i,s){var l={};if(i==null)return l;var u=!1;s=ke(s,function(g){return g=Jn(g,i),u||(u=g.length>1),g}),dn(i,Ca(i),l),u&&(l=qt(l,v|C|P,b0));for(var h=s.length;h--;)_a(l,s[h]);return l});function NC(i,s){return yd(i,To(Q(s)))}var PC=Rn(function(i,s){return i==null?{}:r0(i,s)});function yd(i,s){if(i==null)return{};var l=ke(Ca(i),function(u){return[u]});return s=Q(s),uh(i,l,function(u,h){return s(u,h[0])})}function OC(i,s,l){s=Jn(s,i);var u=-1,h=s.length;for(h||(h=1,i=n);++u<h;){var g=i==null?n:i[_n(s[u])];g===n&&(u=h,g=l),i=Pn(g)?g.call(i):g}return i}function DC(i,s,l){return i==null?i:Xr(i,s,l)}function MC(i,s,l,u){return u=typeof u=="function"?u:n,i==null?i:Xr(i,s,l,u)}var wd=Oh(je),Ed=Oh(bt);function LC(i,s,l){var u=re(i),h=u||ei(i)||or(i);if(s=Q(s,4),l==null){var g=i&&i.constructor;h?l=u?new g:[]:We(i)?l=Pn(g)?nr(Js(i)):{}:l={}}return(h?$t:hn)(i,function(m,E,T){return s(l,m,E,T)}),l}function FC(i,s){return i==null?!0:_a(i,s)}function kC(i,s,l){return i==null?i:ph(i,s,ma(l))}function BC(i,s,l,u){return u=typeof u=="function"?u:n,i==null?i:ph(i,s,ma(l),u)}function lr(i){return i==null?[]:Ql(i,je(i))}function WC(i){return i==null?[]:Ql(i,bt(i))}function UC(i,s,l){return l===n&&(l=s,s=n),l!==n&&(l=Yt(l),l=l===l?l:0),s!==n&&(s=Yt(s),s=s===s?s:0),vi(Yt(i),s,l)}function HC(i,s,l){return s=On(s),l===n?(l=s,s=0):l=On(l),i=Yt(i),Vy(i,s,l)}function $C(i,s,l){if(l&&typeof l!="boolean"&&pt(i,s,l)&&(s=l=n),l===n&&(typeof s=="boolean"?(l=s,s=n):typeof i=="boolean"&&(l=i,i=n)),i===n&&s===n?(i=0,s=1):(i=On(i),s===n?(s=i,i=0):s=On(s)),i>s){var u=i;i=s,s=u}if(l||i%1||s%1){var h=qf();return lt(i+h*(s-i+wv("1e-"+((h+"").length-1))),s)}return fa(i,s)}var zC=rr(function(i,s,l){return s=s.toLowerCase(),i+(l?Cd(s):s)});function Cd(i){return Ba(xe(i).toLowerCase())}function bd(i){return i=xe(i),i&&i.replace(qm,Dv).replace(uv,"")}function KC(i,s,l){i=xe(i),s=Mt(s);var u=i.length;l=l===n?u:vi(se(l),0,u);var h=l;return l-=s.length,l>=0&&i.slice(l,h)==s}function qC(i){return i=xe(i),i&&Tm.test(i)?i.replace(Zu,Mv):i}function GC(i){return i=xe(i),i&&Pm.test(i)?i.replace(Dl,"\\$&"):i}var VC=rr(function(i,s,l){return i+(l?"-":"")+s.toLowerCase()}),YC=rr(function(i,s,l){return i+(l?" ":"")+s.toLowerCase()}),QC=xh("toLowerCase");function XC(i,s,l){i=xe(i),s=se(s);var u=s?ji(i):0;if(!s||u>=s)return i;var h=(s-u)/2;return go(no(h),l)+i+go(to(h),l)}function jC(i,s,l){i=xe(i),s=se(s);var u=s?ji(i):0;return s&&u<s?i+go(s-u,l):i}function JC(i,s,l){i=xe(i),s=se(s);var u=s?ji(i):0;return s&&u<s?go(s-u,l)+i:i}function ZC(i,s,l){return l||s==null?s=0:s&&(s=+s),oy(xe(i).replace(Ml,""),s||0)}function eb(i,s,l){return(l?pt(i,s,l):s===n)?s=1:s=se(s),ha(xe(i),s)}function tb(){var i=arguments,s=xe(i[0]);return i.length<3?s:s.replace(i[1],i[2])}var nb=rr(function(i,s,l){return i+(l?"_":"")+s.toLowerCase()});function ib(i,s,l){return l&&typeof l!="number"&&pt(i,s,l)&&(s=l=n),l=l===n?Xe:l>>>0,l?(i=xe(i),i&&(typeof s=="string"||s!=null&&!La(s))&&(s=Mt(s),!s&&Xi(i))?Zn(Qt(i),0,l):i.split(s,l)):[]}var rb=rr(function(i,s,l){return i+(l?" ":"")+Ba(s)});function sb(i,s,l){return i=xe(i),l=l==null?0:vi(se(l),0,i.length),s=Mt(s),i.slice(l,l+s.length)==s}function ob(i,s,l){var u=p.templateSettings;l&&pt(i,s,l)&&(s=n),i=xe(i),s=Ao({},s,u,Dh);var h=Ao({},s.imports,u.imports,Dh),g=je(h),m=Ql(h,g),E,T,R=0,N=s.interpolate||Us,L="__p += '",H=jl((s.escape||Us).source+"|"+N.source+"|"+(N===ef?Wm:Us).source+"|"+(s.evaluate||Us).source+"|$","g"),G="//# sourceURL="+(Se.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pv+"]")+`
`;i.replace(H,function(J,de,me,Ft,gt,kt){return me||(me=Ft),L+=i.slice(R,kt).replace(Gm,Lv),de&&(E=!0,L+=`' +
__e(`+de+`) +
'`),gt&&(T=!0,L+=`';
`+gt+`;
__p += '`),me&&(L+=`' +
((__t = (`+me+`)) == null ? '' : __t) +
'`),R=kt+J.length,J}),L+=`';
`;var j=Se.call(s,"variable")&&s.variable;if(!j)L=`with (obj) {
`+L+`
}
`;else if(km.test(j))throw new ne(f);L=(T?L.replace(Em,""):L).replace(Cm,"$1").replace(bm,"$1;"),L="function("+(j||"obj")+`) {
`+(j?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(E?", __e = _.escape":"")+(T?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+L+`return __p
}`;var oe=Td(function(){return Ce(g,G+"return "+L).apply(n,m)});if(oe.source=L,Ma(oe))throw oe;return oe}function lb(i){return xe(i).toLowerCase()}function ab(i){return xe(i).toUpperCase()}function cb(i,s,l){if(i=xe(i),i&&(l||s===n))return Mf(i);if(!i||!(s=Mt(s)))return i;var u=Qt(i),h=Qt(s),g=Lf(u,h),m=Ff(u,h)+1;return Zn(u,g,m).join("")}function ub(i,s,l){if(i=xe(i),i&&(l||s===n))return i.slice(0,Bf(i)+1);if(!i||!(s=Mt(s)))return i;var u=Qt(i),h=Ff(u,Qt(s))+1;return Zn(u,0,h).join("")}function fb(i,s,l){if(i=xe(i),i&&(l||s===n))return i.replace(Ml,"");if(!i||!(s=Mt(s)))return i;var u=Qt(i),h=Lf(u,Qt(s));return Zn(u,h).join("")}function hb(i,s){var l=En,u=di;if(We(s)){var h="separator"in s?s.separator:h;l="length"in s?se(s.length):l,u="omission"in s?Mt(s.omission):u}i=xe(i);var g=i.length;if(Xi(i)){var m=Qt(i);g=m.length}if(l>=g)return i;var E=l-ji(u);if(E<1)return u;var T=m?Zn(m,0,E).join(""):i.slice(0,E);if(h===n)return T+u;if(m&&(E+=T.length-E),La(h)){if(i.slice(E).search(h)){var R,N=T;for(h.global||(h=jl(h.source,xe(tf.exec(h))+"g")),h.lastIndex=0;R=h.exec(N);)var L=R.index;T=T.slice(0,L===n?E:L)}}else if(i.indexOf(Mt(h),E)!=E){var H=T.lastIndexOf(h);H>-1&&(T=T.slice(0,H))}return T+u}function db(i){return i=xe(i),i&&Im.test(i)?i.replace(Ju,$v):i}var _b=rr(function(i,s,l){return i+(l?" ":"")+s.toUpperCase()}),Ba=xh("toUpperCase");function Id(i,s,l){return i=xe(i),s=l?n:s,s===n?kv(i)?qv(i):Av(i):i.match(s)||[]}var Td=le(function(i,s){try{return Ot(i,n,s)}catch(l){return Ma(l)?l:new ne(l)}}),pb=Rn(function(i,s){return $t(s,function(l){l=_n(l),Sn(i,l,Oa(i[l],i))}),i});function gb(i){var s=i==null?0:i.length,l=Q();return i=s?ke(i,function(u){if(typeof u[1]!="function")throw new zt(c);return[l(u[0]),u[1]]}):[],le(function(u){for(var h=-1;++h<s;){var g=i[h];if(Ot(g[0],this,u))return Ot(g[1],this,u)}})}function mb(i){return $y(qt(i,v))}function Wa(i){return function(){return i}}function vb(i,s){return i==null||i!==i?s:i}var yb=Ah(),wb=Ah(!0);function It(i){return i}function Ua(i){return rh(typeof i=="function"?i:qt(i,v))}function Eb(i){return oh(qt(i,v))}function Cb(i,s){return lh(i,qt(s,v))}var bb=le(function(i,s){return function(l){return Yr(l,i,s)}}),Ib=le(function(i,s){return function(l){return Yr(i,l,s)}});function Ha(i,s,l){var u=je(s),h=ao(s,u);l==null&&!(We(s)&&(h.length||!u.length))&&(l=s,s=i,i=this,h=ao(s,je(s)));var g=!(We(l)&&"chain"in l)||!!l.chain,m=Pn(i);return $t(h,function(E){var T=s[E];i[E]=T,m&&(i.prototype[E]=function(){var R=this.__chain__;if(g||R){var N=i(this.__wrapped__),L=N.__actions__=Et(this.__actions__);return L.push({func:T,args:arguments,thisArg:i}),N.__chain__=R,N}return T.apply(i,Vn([this.value()],arguments))})}),i}function Tb(){return rt._===this&&(rt._=jv),this}function $a(){}function xb(i){return i=se(i),le(function(s){return ah(s,i)})}var Sb=ya(ke),Ab=ya(Rf),Rb=ya(Kl);function xd(i){return xa(i)?ql(_n(i)):s0(i)}function Nb(i){return function(s){return i==null?n:yi(i,s)}}var Pb=Nh(),Ob=Nh(!0);function za(){return[]}function Ka(){return!1}function Db(){return{}}function Mb(){return""}function Lb(){return!0}function Fb(i,s){if(i=se(i),i<1||i>pe)return[];var l=Xe,u=lt(i,Xe);s=Q(s),i-=Xe;for(var h=Yl(u,s);++l<i;)s(l);return h}function kb(i){return re(i)?ke(i,_n):Lt(i)?[i]:Et(Gh(xe(i)))}function Bb(i){var s=++Qv;return xe(i)+s}var Wb=po(function(i,s){return i+s},0),Ub=wa("ceil"),Hb=po(function(i,s){return i/s},1),$b=wa("floor");function zb(i){return i&&i.length?lo(i,It,sa):n}function Kb(i,s){return i&&i.length?lo(i,Q(s,2),sa):n}function qb(i){return Of(i,It)}function Gb(i,s){return Of(i,Q(s,2))}function Vb(i){return i&&i.length?lo(i,It,ca):n}function Yb(i,s){return i&&i.length?lo(i,Q(s,2),ca):n}var Qb=po(function(i,s){return i*s},1),Xb=wa("round"),jb=po(function(i,s){return i-s},0);function Jb(i){return i&&i.length?Vl(i,It):0}function Zb(i,s){return i&&i.length?Vl(i,Q(s,2)):0}return p.after=EE,p.ary=id,p.assign=aC,p.assignIn=md,p.assignInWith=Ao,p.assignWith=cC,p.at=uC,p.before=rd,p.bind=Oa,p.bindAll=pb,p.bindKey=sd,p.castArray=DE,p.chain=ed,p.chunk=$0,p.compact=z0,p.concat=K0,p.cond=gb,p.conforms=mb,p.constant=Wa,p.countBy=Jw,p.create=fC,p.curry=od,p.curryRight=ld,p.debounce=ad,p.defaults=hC,p.defaultsDeep=dC,p.defer=CE,p.delay=bE,p.difference=q0,p.differenceBy=G0,p.differenceWith=V0,p.drop=Y0,p.dropRight=Q0,p.dropRightWhile=X0,p.dropWhile=j0,p.fill=J0,p.filter=eE,p.flatMap=iE,p.flatMapDeep=rE,p.flatMapDepth=sE,p.flatten=Xh,p.flattenDeep=Z0,p.flattenDepth=ew,p.flip=IE,p.flow=yb,p.flowRight=wb,p.fromPairs=tw,p.functions=wC,p.functionsIn=EC,p.groupBy=oE,p.initial=iw,p.intersection=rw,p.intersectionBy=sw,p.intersectionWith=ow,p.invert=bC,p.invertBy=IC,p.invokeMap=aE,p.iteratee=Ua,p.keyBy=cE,p.keys=je,p.keysIn=bt,p.map=Co,p.mapKeys=xC,p.mapValues=SC,p.matches=Eb,p.matchesProperty=Cb,p.memoize=Io,p.merge=AC,p.mergeWith=vd,p.method=bb,p.methodOf=Ib,p.mixin=Ha,p.negate=To,p.nthArg=xb,p.omit=RC,p.omitBy=NC,p.once=TE,p.orderBy=uE,p.over=Sb,p.overArgs=xE,p.overEvery=Ab,p.overSome=Rb,p.partial=Da,p.partialRight=cd,p.partition=fE,p.pick=PC,p.pickBy=yd,p.property=xd,p.propertyOf=Nb,p.pull=uw,p.pullAll=Jh,p.pullAllBy=fw,p.pullAllWith=hw,p.pullAt=dw,p.range=Pb,p.rangeRight=Ob,p.rearg=SE,p.reject=_E,p.remove=_w,p.rest=AE,p.reverse=Na,p.sampleSize=gE,p.set=DC,p.setWith=MC,p.shuffle=mE,p.slice=pw,p.sortBy=wE,p.sortedUniq=Cw,p.sortedUniqBy=bw,p.split=ib,p.spread=RE,p.tail=Iw,p.take=Tw,p.takeRight=xw,p.takeRightWhile=Sw,p.takeWhile=Aw,p.tap=zw,p.throttle=NE,p.thru=Eo,p.toArray=_d,p.toPairs=wd,p.toPairsIn=Ed,p.toPath=kb,p.toPlainObject=gd,p.transform=LC,p.unary=PE,p.union=Rw,p.unionBy=Nw,p.unionWith=Pw,p.uniq=Ow,p.uniqBy=Dw,p.uniqWith=Mw,p.unset=FC,p.unzip=Pa,p.unzipWith=Zh,p.update=kC,p.updateWith=BC,p.values=lr,p.valuesIn=WC,p.without=Lw,p.words=Id,p.wrap=OE,p.xor=Fw,p.xorBy=kw,p.xorWith=Bw,p.zip=Ww,p.zipObject=Uw,p.zipObjectDeep=Hw,p.zipWith=$w,p.entries=wd,p.entriesIn=Ed,p.extend=md,p.extendWith=Ao,Ha(p,p),p.add=Wb,p.attempt=Td,p.camelCase=zC,p.capitalize=Cd,p.ceil=Ub,p.clamp=UC,p.clone=ME,p.cloneDeep=FE,p.cloneDeepWith=kE,p.cloneWith=LE,p.conformsTo=BE,p.deburr=bd,p.defaultTo=vb,p.divide=Hb,p.endsWith=KC,p.eq=jt,p.escape=qC,p.escapeRegExp=GC,p.every=Zw,p.find=tE,p.findIndex=Yh,p.findKey=_C,p.findLast=nE,p.findLastIndex=Qh,p.findLastKey=pC,p.floor=$b,p.forEach=td,p.forEachRight=nd,p.forIn=gC,p.forInRight=mC,p.forOwn=vC,p.forOwnRight=yC,p.get=Fa,p.gt=WE,p.gte=UE,p.has=CC,p.hasIn=ka,p.head=jh,p.identity=It,p.includes=lE,p.indexOf=nw,p.inRange=HC,p.invoke=TC,p.isArguments=Ci,p.isArray=re,p.isArrayBuffer=HE,p.isArrayLike=Ct,p.isArrayLikeObject=ze,p.isBoolean=$E,p.isBuffer=ei,p.isDate=zE,p.isElement=KE,p.isEmpty=qE,p.isEqual=GE,p.isEqualWith=VE,p.isError=Ma,p.isFinite=YE,p.isFunction=Pn,p.isInteger=ud,p.isLength=xo,p.isMap=fd,p.isMatch=QE,p.isMatchWith=XE,p.isNaN=jE,p.isNative=JE,p.isNil=eC,p.isNull=ZE,p.isNumber=hd,p.isObject=We,p.isObjectLike=$e,p.isPlainObject=es,p.isRegExp=La,p.isSafeInteger=tC,p.isSet=dd,p.isString=So,p.isSymbol=Lt,p.isTypedArray=or,p.isUndefined=nC,p.isWeakMap=iC,p.isWeakSet=rC,p.join=lw,p.kebabCase=VC,p.last=Vt,p.lastIndexOf=aw,p.lowerCase=YC,p.lowerFirst=QC,p.lt=sC,p.lte=oC,p.max=zb,p.maxBy=Kb,p.mean=qb,p.meanBy=Gb,p.min=Vb,p.minBy=Yb,p.stubArray=za,p.stubFalse=Ka,p.stubObject=Db,p.stubString=Mb,p.stubTrue=Lb,p.multiply=Qb,p.nth=cw,p.noConflict=Tb,p.noop=$a,p.now=bo,p.pad=XC,p.padEnd=jC,p.padStart=JC,p.parseInt=ZC,p.random=$C,p.reduce=hE,p.reduceRight=dE,p.repeat=eb,p.replace=tb,p.result=OC,p.round=Xb,p.runInContext=b,p.sample=pE,p.size=vE,p.snakeCase=nb,p.some=yE,p.sortedIndex=gw,p.sortedIndexBy=mw,p.sortedIndexOf=vw,p.sortedLastIndex=yw,p.sortedLastIndexBy=ww,p.sortedLastIndexOf=Ew,p.startCase=rb,p.startsWith=sb,p.subtract=jb,p.sum=Jb,p.sumBy=Zb,p.template=ob,p.times=Fb,p.toFinite=On,p.toInteger=se,p.toLength=pd,p.toLower=lb,p.toNumber=Yt,p.toSafeInteger=lC,p.toString=xe,p.toUpper=ab,p.trim=cb,p.trimEnd=ub,p.trimStart=fb,p.truncate=hb,p.unescape=db,p.uniqueId=Bb,p.upperCase=_b,p.upperFirst=Ba,p.each=td,p.eachRight=nd,p.first=jh,Ha(p,function(){var i={};return hn(p,function(s,l){Se.call(p.prototype,l)||(i[l]=s)}),i}(),{chain:!1}),p.VERSION=r,$t(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){p[i].placeholder=p}),$t(["drop","take"],function(i,s){_e.prototype[i]=function(l){l=l===n?1:Ve(se(l),0);var u=this.__filtered__&&!s?new _e(this):this.clone();return u.__filtered__?u.__takeCount__=lt(l,u.__takeCount__):u.__views__.push({size:lt(l,Xe),type:i+(u.__dir__<0?"Right":"")}),u},_e.prototype[i+"Right"]=function(l){return this.reverse()[i](l).reverse()}}),$t(["filter","map","takeWhile"],function(i,s){var l=s+1,u=l==zi||l==nt;_e.prototype[i]=function(h){var g=this.clone();return g.__iteratees__.push({iteratee:Q(h,3),type:l}),g.__filtered__=g.__filtered__||u,g}}),$t(["head","last"],function(i,s){var l="take"+(s?"Right":"");_e.prototype[i]=function(){return this[l](1).value()[0]}}),$t(["initial","tail"],function(i,s){var l="drop"+(s?"":"Right");_e.prototype[i]=function(){return this.__filtered__?new _e(this):this[l](1)}}),_e.prototype.compact=function(){return this.filter(It)},_e.prototype.find=function(i){return this.filter(i).head()},_e.prototype.findLast=function(i){return this.reverse().find(i)},_e.prototype.invokeMap=le(function(i,s){return typeof i=="function"?new _e(this):this.map(function(l){return Yr(l,i,s)})}),_e.prototype.reject=function(i){return this.filter(To(Q(i)))},_e.prototype.slice=function(i,s){i=se(i);var l=this;return l.__filtered__&&(i>0||s<0)?new _e(l):(i<0?l=l.takeRight(-i):i&&(l=l.drop(i)),s!==n&&(s=se(s),l=s<0?l.dropRight(-s):l.take(s-i)),l)},_e.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},_e.prototype.toArray=function(){return this.take(Xe)},hn(_e.prototype,function(i,s){var l=/^(?:filter|find|map|reject)|While$/.test(s),u=/^(?:head|last)$/.test(s),h=p[u?"take"+(s=="last"?"Right":""):s],g=u||/^find/.test(s);h&&(p.prototype[s]=function(){var m=this.__wrapped__,E=u?[1]:arguments,T=m instanceof _e,R=E[0],N=T||re(m),L=function(de){var me=h.apply(p,Vn([de],E));return u&&H?me[0]:me};N&&l&&typeof R=="function"&&R.length!=1&&(T=N=!1);var H=this.__chain__,G=!!this.__actions__.length,j=g&&!H,oe=T&&!G;if(!g&&N){m=oe?m:new _e(this);var J=i.apply(m,E);return J.__actions__.push({func:Eo,args:[L],thisArg:n}),new Kt(J,H)}return j&&oe?i.apply(this,E):(J=this.thru(L),j?u?J.value()[0]:J.value():J)})}),$t(["pop","push","shift","sort","splice","unshift"],function(i){var s=Gs[i],l=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",u=/^(?:pop|shift)$/.test(i);p.prototype[i]=function(){var h=arguments;if(u&&!this.__chain__){var g=this.value();return s.apply(re(g)?g:[],h)}return this[l](function(m){return s.apply(re(m)?m:[],h)})}}),hn(_e.prototype,function(i,s){var l=p[s];if(l){var u=l.name+"";Se.call(tr,u)||(tr[u]=[]),tr[u].push({name:s,func:l})}}),tr[_o(n,we).name]=[{name:"wrapper",func:n}],_e.prototype.clone=dy,_e.prototype.reverse=_y,_e.prototype.value=py,p.prototype.at=Kw,p.prototype.chain=qw,p.prototype.commit=Gw,p.prototype.next=Vw,p.prototype.plant=Qw,p.prototype.reverse=Xw,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=jw,p.prototype.first=p.prototype.head,Hr&&(p.prototype[Hr]=Yw),p},Ji=Gv();_i?((_i.exports=Ji)._=Ji,Ul._=Ji):rt._=Ji}).call(ns)})(ul,ul.exports);var HN=ul.exports;const $N=Sx(HN),zN=40,KN=40,qN=ml({__name:"DynamicMarkers",props:{width:{},height:{}},setup(t){const e=t,n=pc([]);UN(Wi().sharingKey,120*6e4,a=>{a?n.value=$N.sortBy(Object.entries(a).map(([c,f])=>({...f,key:c})),c=>c.timestamp):n.value=[]});function r(a){return a.key.substring(a.key.length-4)}function o(a){const c={width:e.width,height:e.height},{parsedZoom:f,parsedCenter:d}=Wi(),_=Math.pow(2,f),y=i_(d),v=i_(a.coordinates),C={x:(v.x-y.x)*_,y:(v.y-y.y)*_},P=parseInt(a.key.substring(a.key.length-4),16)/65536*360,U=Date.now()-a.timestamp>3e4;return{left:Math.round(c.width/2+C.x-zN/2)+"px",top:Math.round(c.height/2+C.y-KN/2)+"px","background-color":`hsl(${P} 60% 80%)`,opacity:U?.5:1,"z-index":U?10:1}}return(a,c)=>(Cr(!0),br(tn,null,CT(en(n),f=>(Cr(),br("div",{key:f.key,class:"circle",style:Nr(o(f))},dI(r(f)),5))),128))}});const GN=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},VN=GN(qN,[["__scopeId","data-v-f17b5c19"]]),YN=ml({__name:"OfferLocation",setup(t){const e=pc(kN()),n=pc(0);function r(){n.value=navigator.geolocation.watchPosition(a=>{WN({lat:a.coords.latitude,lng:a.coords.longitude},a.timestamp)}),e.value=!0,X_(!0)}function o(){navigator.geolocation.clearWatch(n.value),e.value=!1,X_(!1)}return Np(()=>{e.value&&r()}),su(()=>{n.value&&navigator.geolocation.clearWatch(n.value)}),(a,c)=>e.value?(Cr(),br("button",{key:0,id:"send-location",style:{right:"10px",top:"10px",position:"fixed"},onClick:o},"Stop sending location")):(Cr(),br("button",{key:1,id:"send-location",style:{right:"10px",top:"10px",position:"fixed"},onClick:r},"Send location"))}}),QN=1e3,XN=1e3,jN=ml({__name:"App",setup(t){const e=QN,n=XN,{zoom:r,center:o}=Wi();return(a,c)=>(Cr(),br(tn,null,[au("div",{style:Nr({position:"relative",width:en(e)+"px",height:en(n)+"px",overflow:"hidden"})},[yn(Lx,{center:en(o),zoom:en(r),mapWidth:en(e),mapHeight:en(n)},null,8,["center","zoom","mapWidth","mapHeight"]),yn(VN,{width:en(e),height:en(n)},null,8,["width","height"])],4),yn(YN)],64))}});Tx(jN).mount("#app");window.addEventListener("DOMContentLoaded",()=>{MN(Wi())});window.addEventListener("load",()=>{setTimeout(()=>{window.scrollTo((document.body.scrollWidth-document.documentElement.clientWidth)/2,(document.body.scrollHeight-document.documentElement.clientHeight)/2)},50)});
