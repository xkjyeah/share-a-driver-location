(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function qc(t,e){const n=Object.create(null),r=t.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return e?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const Be={},gr=[],cn=()=>{},nI=()=>!1,iI=/^on[^a-z]/,_l=t=>iI.test(t),Gc=t=>t.startsWith("onUpdate:"),tt=Object.assign,Vc=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},rI=Object.prototype.hasOwnProperty,ve=(t,e)=>rI.call(t,e),ie=Array.isArray,mr=t=>pl(t)==="[object Map]",J_=t=>pl(t)==="[object Set]",ae=t=>typeof t=="function",Qe=t=>typeof t=="string",Yc=t=>typeof t=="symbol",He=t=>t!==null&&typeof t=="object",Z_=t=>He(t)&&ae(t.then)&&ae(t.catch),ep=Object.prototype.toString,pl=t=>ep.call(t),sI=t=>pl(t).slice(8,-1),tp=t=>pl(t)==="[object Object]",Qc=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Wo=qc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},oI=/-(\w)/g,Ir=gl(t=>t.replace(oI,(e,n)=>n?n.toUpperCase():"")),lI=/\B([A-Z])/g,Pr=gl(t=>t.replace(lI,"-$1").toLowerCase()),np=gl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ya=gl(t=>t?`on${np(t)}`:""),gs=(t,e)=>!Object.is(t,e),Qa=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},zo=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},aI=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Rd;const dc=()=>Rd||(Rd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fi(t){if(ie(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=Qe(r)?hI(r):Fi(r);if(o)for(const a in o)e[a]=o[a]}return e}else{if(Qe(t))return t;if(He(t))return t}}const cI=/;(?![^(]*\))/g,uI=/:([^]+)/,fI=/\/\*[^]*?\*\//g;function hI(t){const e={};return t.replace(fI,"").split(cI).forEach(n=>{if(n){const r=n.split(uI);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Xc(t){let e="";if(Qe(t))e=t;else if(ie(t))for(let n=0;n<t.length;n++){const r=Xc(t[n]);r&&(e+=r+" ")}else if(He(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const dI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_I=qc(dI);function ip(t){return!!t||t===""}const pI=t=>Qe(t)?t:t==null?"":ie(t)||He(t)&&(t.toString===ep||!ae(t.toString))?JSON.stringify(t,rp,2):String(t),rp=(t,e)=>e&&e.__v_isRef?rp(t,e.value):mr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o])=>(n[`${r} =>`]=o,n),{})}:J_(e)?{[`Set(${e.size})`]:[...e.values()]}:He(e)&&!ie(e)&&!tp(e)?String(e):e;let en;class gI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=en,!e&&en&&(this.index=(en.scopes||(en.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=en;try{return en=this,e()}finally{en=n}}}on(){en=this}off(){en=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function mI(t,e=en){e&&e.active&&e.effects.push(t)}function vI(){return en}const jc=t=>{const e=new Set(t);return e.w=0,e.n=0,e},sp=t=>(t.w&fi)>0,op=t=>(t.n&fi)>0,yI=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=fi},wI=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const o=e[r];sp(o)&&!op(o)?o.delete(t):e[n++]=o,o.w&=~fi,o.n&=~fi}e.length=n}},_c=new WeakMap;let as=0,fi=1;const pc=30;let rn;const Di=Symbol(""),gc=Symbol("");class Jc{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,mI(this,r)}run(){if(!this.active)return this.fn();let e=rn,n=ri;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=rn,rn=this,ri=!0,fi=1<<++as,as<=pc?yI(this):Nd(this),this.fn()}finally{as<=pc&&wI(this),fi=1<<--as,rn=this.parent,ri=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){rn===this?this.deferStop=!0:this.active&&(Nd(this),this.onStop&&this.onStop(),this.active=!1)}}function Nd(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let ri=!0;const lp=[];function Or(){lp.push(ri),ri=!1}function Dr(){const t=lp.pop();ri=t===void 0?!0:t}function Rt(t,e,n){if(ri&&rn){let r=_c.get(t);r||_c.set(t,r=new Map);let o=r.get(n);o||r.set(n,o=jc()),ap(o)}}function ap(t,e){let n=!1;as<=pc?op(t)||(t.n|=fi,n=!sp(t)):n=!t.has(rn),n&&(t.add(rn),rn.deps.push(t))}function Bn(t,e,n,r,o,a){const c=_c.get(t);if(!c)return;let f=[];if(e==="clear")f=[...c.values()];else if(n==="length"&&ie(t)){const h=Number(r);c.forEach((_,y)=>{(y==="length"||y>=h)&&f.push(_)})}else switch(n!==void 0&&f.push(c.get(n)),e){case"add":ie(t)?Qc(n)&&f.push(c.get("length")):(f.push(c.get(Di)),mr(t)&&f.push(c.get(gc)));break;case"delete":ie(t)||(f.push(c.get(Di)),mr(t)&&f.push(c.get(gc)));break;case"set":mr(t)&&f.push(c.get(Di));break}if(f.length===1)f[0]&&mc(f[0]);else{const h=[];for(const _ of f)_&&h.push(..._);mc(jc(h))}}function mc(t,e){const n=ie(t)?t:[...t];for(const r of n)r.computed&&Pd(r);for(const r of n)r.computed||Pd(r)}function Pd(t,e){(t!==rn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const EI=qc("__proto__,__v_isRef,__isVue"),cp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Yc)),CI=Zc(),bI=Zc(!1,!0),II=Zc(!0),Od=TI();function TI(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ie(this);for(let a=0,c=this.length;a<c;a++)Rt(r,"get",a+"");const o=r[e](...n);return o===-1||o===!1?r[e](...n.map(Ie)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Or();const r=Ie(this)[e].apply(this,n);return Dr(),r}}),t}function xI(t){const e=Ie(this);return Rt(e,"has",t),e.hasOwnProperty(t)}function Zc(t=!1,e=!1){return function(r,o,a){if(o==="__v_isReactive")return!t;if(o==="__v_isReadonly")return t;if(o==="__v_isShallow")return e;if(o==="__v_raw"&&a===(t?e?$I:_p:e?dp:hp).get(r))return r;const c=ie(r);if(!t){if(c&&ve(Od,o))return Reflect.get(Od,o,a);if(o==="hasOwnProperty")return xI}const f=Reflect.get(r,o,a);return(Yc(o)?cp.has(o):EI(o))||(t||Rt(r,"get",o),e)?f:ht(f)?c&&Qc(o)?f:f.value:He(f)?t?pp(f):nu(f):f}}const SI=up(),AI=up(!0);function up(t=!1){return function(n,r,o,a){let c=n[r];if(Tr(c)&&ht(c)&&!ht(o))return!1;if(!t&&(!Ko(o)&&!Tr(o)&&(c=Ie(c),o=Ie(o)),!ie(n)&&ht(c)&&!ht(o)))return c.value=o,!0;const f=ie(n)&&Qc(r)?Number(r)<n.length:ve(n,r),h=Reflect.set(n,r,o,a);return n===Ie(a)&&(f?gs(o,c)&&Bn(n,"set",r,o):Bn(n,"add",r,o)),h}}function RI(t,e){const n=ve(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&Bn(t,"delete",e,void 0),r}function NI(t,e){const n=Reflect.has(t,e);return(!Yc(e)||!cp.has(e))&&Rt(t,"has",e),n}function PI(t){return Rt(t,"iterate",ie(t)?"length":Di),Reflect.ownKeys(t)}const fp={get:CI,set:SI,deleteProperty:RI,has:NI,ownKeys:PI},OI={get:II,set(t,e){return!0},deleteProperty(t,e){return!0}},DI=tt({},fp,{get:bI,set:AI}),eu=t=>t,ml=t=>Reflect.getPrototypeOf(t);function Po(t,e,n=!1,r=!1){t=t.__v_raw;const o=Ie(t),a=Ie(e);n||(e!==a&&Rt(o,"get",e),Rt(o,"get",a));const{has:c}=ml(o),f=r?eu:n?ru:ms;if(c.call(o,e))return f(t.get(e));if(c.call(o,a))return f(t.get(a));t!==o&&t.get(e)}function Oo(t,e=!1){const n=this.__v_raw,r=Ie(n),o=Ie(t);return e||(t!==o&&Rt(r,"has",t),Rt(r,"has",o)),t===o?n.has(t):n.has(t)||n.has(o)}function Do(t,e=!1){return t=t.__v_raw,!e&&Rt(Ie(t),"iterate",Di),Reflect.get(t,"size",t)}function Dd(t){t=Ie(t);const e=Ie(this);return ml(e).has.call(e,t)||(e.add(t),Bn(e,"add",t,t)),this}function Md(t,e){e=Ie(e);const n=Ie(this),{has:r,get:o}=ml(n);let a=r.call(n,t);a||(t=Ie(t),a=r.call(n,t));const c=o.call(n,t);return n.set(t,e),a?gs(e,c)&&Bn(n,"set",t,e):Bn(n,"add",t,e),this}function Ld(t){const e=Ie(this),{has:n,get:r}=ml(e);let o=n.call(e,t);o||(t=Ie(t),o=n.call(e,t)),r&&r.call(e,t);const a=e.delete(t);return o&&Bn(e,"delete",t,void 0),a}function Fd(){const t=Ie(this),e=t.size!==0,n=t.clear();return e&&Bn(t,"clear",void 0,void 0),n}function Mo(t,e){return function(r,o){const a=this,c=a.__v_raw,f=Ie(c),h=e?eu:t?ru:ms;return!t&&Rt(f,"iterate",Di),c.forEach((_,y)=>r.call(o,h(_),h(y),a))}}function Lo(t,e,n){return function(...r){const o=this.__v_raw,a=Ie(o),c=mr(a),f=t==="entries"||t===Symbol.iterator&&c,h=t==="keys"&&c,_=o[t](...r),y=n?eu:e?ru:ms;return!e&&Rt(a,"iterate",h?gc:Di),{next(){const{value:v,done:C}=_.next();return C?{value:v,done:C}:{value:f?[y(v[0]),y(v[1])]:y(v),done:C}},[Symbol.iterator](){return this}}}}function ni(t){return function(...e){return t==="delete"?!1:this}}function MI(){const t={get(a){return Po(this,a)},get size(){return Do(this)},has:Oo,add:Dd,set:Md,delete:Ld,clear:Fd,forEach:Mo(!1,!1)},e={get(a){return Po(this,a,!1,!0)},get size(){return Do(this)},has:Oo,add:Dd,set:Md,delete:Ld,clear:Fd,forEach:Mo(!1,!0)},n={get(a){return Po(this,a,!0)},get size(){return Do(this,!0)},has(a){return Oo.call(this,a,!0)},add:ni("add"),set:ni("set"),delete:ni("delete"),clear:ni("clear"),forEach:Mo(!0,!1)},r={get(a){return Po(this,a,!0,!0)},get size(){return Do(this,!0)},has(a){return Oo.call(this,a,!0)},add:ni("add"),set:ni("set"),delete:ni("delete"),clear:ni("clear"),forEach:Mo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=Lo(a,!1,!1),n[a]=Lo(a,!0,!1),e[a]=Lo(a,!1,!0),r[a]=Lo(a,!0,!0)}),[t,n,e,r]}const[LI,FI,kI,BI]=MI();function tu(t,e){const n=e?t?BI:kI:t?FI:LI;return(r,o,a)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(ve(n,o)&&o in r?n:r,o,a)}const WI={get:tu(!1,!1)},UI={get:tu(!1,!0)},HI={get:tu(!0,!1)},hp=new WeakMap,dp=new WeakMap,_p=new WeakMap,$I=new WeakMap;function zI(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function KI(t){return t.__v_skip||!Object.isExtensible(t)?0:zI(sI(t))}function nu(t){return Tr(t)?t:iu(t,!1,fp,WI,hp)}function qI(t){return iu(t,!1,DI,UI,dp)}function pp(t){return iu(t,!0,OI,HI,_p)}function iu(t,e,n,r,o){if(!He(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=o.get(t);if(a)return a;const c=KI(t);if(c===0)return t;const f=new Proxy(t,c===2?r:n);return o.set(t,f),f}function vr(t){return Tr(t)?vr(t.__v_raw):!!(t&&t.__v_isReactive)}function Tr(t){return!!(t&&t.__v_isReadonly)}function Ko(t){return!!(t&&t.__v_isShallow)}function gp(t){return vr(t)||Tr(t)}function Ie(t){const e=t&&t.__v_raw;return e?Ie(e):t}function mp(t){return zo(t,"__v_skip",!0),t}const ms=t=>He(t)?nu(t):t,ru=t=>He(t)?pp(t):t;function vp(t){ri&&rn&&(t=Ie(t),ap(t.dep||(t.dep=jc())))}function yp(t,e){t=Ie(t);const n=t.dep;n&&mc(n)}function ht(t){return!!(t&&t.__v_isRef===!0)}function qo(t){return GI(t,!1)}function GI(t,e){return ht(t)?t:new VI(t,e)}class VI{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ie(e),this._value=n?e:ms(e)}get value(){return vp(this),this._value}set value(e){const n=this.__v_isShallow||Ko(e)||Tr(e);e=n?e:Ie(e),gs(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ms(e),yp(this))}}function tn(t){return ht(t)?t.value:t}const YI={get:(t,e,n)=>tn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const o=t[e];return ht(o)&&!ht(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function wp(t){return vr(t)?t:new Proxy(t,YI)}class QI{constructor(e,n,r,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Jc(e,()=>{this._dirty||(this._dirty=!0,yp(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=r}get value(){const e=Ie(this);return vp(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function XI(t,e,n=!1){let r,o;const a=ae(t);return a?(r=t,o=cn):(r=t.get,o=t.set),new QI(r,o,a||!o,n)}function si(t,e,n,r){let o;try{o=r?t(...r):t()}catch(a){vl(a,e,n)}return o}function un(t,e,n,r){if(ae(t)){const a=si(t,e,n,r);return a&&Z_(a)&&a.catch(c=>{vl(c,e,n)}),a}const o=[];for(let a=0;a<t.length;a++)o.push(un(t[a],e,n,r));return o}function vl(t,e,n,r=!0){const o=e?e.vnode:null;if(e){let a=e.parent;const c=e.proxy,f=n;for(;a;){const _=a.ec;if(_){for(let y=0;y<_.length;y++)if(_[y](t,c,f)===!1)return}a=a.parent}const h=e.appContext.config.errorHandler;if(h){si(h,null,10,[t,c,f]);return}}jI(t,n,o,r)}function jI(t,e,n,r=!0){console.error(t)}let vs=!1,vc=!1;const ut=[];let vn=0;const yr=[];let Mn=null,Ri=0;const Ep=Promise.resolve();let su=null;function JI(t){const e=su||Ep;return t?e.then(this?t.bind(this):t):e}function ZI(t){let e=vn+1,n=ut.length;for(;e<n;){const r=e+n>>>1;ys(ut[r])<t?e=r+1:n=r}return e}function ou(t){(!ut.length||!ut.includes(t,vs&&t.allowRecurse?vn+1:vn))&&(t.id==null?ut.push(t):ut.splice(ZI(t.id),0,t),Cp())}function Cp(){!vs&&!vc&&(vc=!0,su=Ep.then(Ip))}function eT(t){const e=ut.indexOf(t);e>vn&&ut.splice(e,1)}function tT(t){ie(t)?yr.push(...t):(!Mn||!Mn.includes(t,t.allowRecurse?Ri+1:Ri))&&yr.push(t),Cp()}function kd(t,e=vs?vn+1:0){for(;e<ut.length;e++){const n=ut[e];n&&n.pre&&(ut.splice(e,1),e--,n())}}function bp(t){if(yr.length){const e=[...new Set(yr)];if(yr.length=0,Mn){Mn.push(...e);return}for(Mn=e,Mn.sort((n,r)=>ys(n)-ys(r)),Ri=0;Ri<Mn.length;Ri++)Mn[Ri]();Mn=null,Ri=0}}const ys=t=>t.id==null?1/0:t.id,nT=(t,e)=>{const n=ys(t)-ys(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Ip(t){vc=!1,vs=!0,ut.sort(nT);const e=cn;try{for(vn=0;vn<ut.length;vn++){const n=ut[vn];n&&n.active!==!1&&si(n,null,14)}}finally{vn=0,ut.length=0,bp(),vs=!1,su=null,(ut.length||yr.length)&&Ip()}}function iT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Be;let o=n;const a=e.startsWith("update:"),c=a&&e.slice(7);if(c&&c in r){const y=`${c==="modelValue"?"model":c}Modifiers`,{number:v,trim:C}=r[y]||Be;C&&(o=n.map(N=>Qe(N)?N.trim():N)),v&&(o=n.map(aI))}let f,h=r[f=Ya(e)]||r[f=Ya(Ir(e))];!h&&a&&(h=r[f=Ya(Pr(e))]),h&&un(h,t,6,o);const _=r[f+"Once"];if(_){if(!t.emitted)t.emitted={};else if(t.emitted[f])return;t.emitted[f]=!0,un(_,t,6,o)}}function Tp(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const a=t.emits;let c={},f=!1;if(!ae(t)){const h=_=>{const y=Tp(_,e,!0);y&&(f=!0,tt(c,y))};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}return!a&&!f?(He(t)&&r.set(t,null),null):(ie(a)?a.forEach(h=>c[h]=null):tt(c,a),He(t)&&r.set(t,c),c)}function yl(t,e){return!t||!_l(e)?!1:(e=e.slice(2).replace(/Once$/,""),ve(t,e[0].toLowerCase()+e.slice(1))||ve(t,Pr(e))||ve(t,e))}let yn=null,xp=null;function Go(t){const e=yn;return yn=t,xp=t&&t.type.__scopeId||null,e}function rT(t,e=yn,n){if(!e||t._n)return t;const r=(...o)=>{r._d&&Vd(-1);const a=Go(e);let c;try{c=t(...o)}finally{Go(a),r._d&&Vd(1)}return c};return r._n=!0,r._c=!0,r._d=!0,r}function Xa(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:a,propsOptions:[c],slots:f,attrs:h,emit:_,render:y,renderCache:v,data:C,setupState:N,ctx:U,inheritAttrs:K}=t;let Z,we;const Le=Go(t);try{if(n.shapeFlag&4){const te=o||r;Z=mn(y.call(te,te,v,a,N,C,U)),we=h}else{const te=e;Z=mn(te.length>1?te(a,{attrs:h,slots:f,emit:_}):te(a,null)),we=e.props?h:sT(h)}}catch(te){fs.length=0,vl(te,t,1),Z=Bt(ki)}let Ee=Z;if(we&&K!==!1){const te=Object.keys(we),{shapeFlag:qe}=Ee;te.length&&qe&7&&(c&&te.some(Gc)&&(we=oT(we,c)),Ee=xr(Ee,we))}return n.dirs&&(Ee=xr(Ee),Ee.dirs=Ee.dirs?Ee.dirs.concat(n.dirs):n.dirs),n.transition&&(Ee.transition=n.transition),Z=Ee,Go(Le),Z}const sT=t=>{let e;for(const n in t)(n==="class"||n==="style"||_l(n))&&((e||(e={}))[n]=t[n]);return e},oT=(t,e)=>{const n={};for(const r in t)(!Gc(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function lT(t,e,n){const{props:r,children:o,component:a}=t,{props:c,children:f,patchFlag:h}=e,_=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return r?Bd(r,c,_):!!c;if(h&8){const y=e.dynamicProps;for(let v=0;v<y.length;v++){const C=y[v];if(c[C]!==r[C]&&!yl(_,C))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:r===c?!1:r?c?Bd(r,c,_):!0:!!c;return!1}function Bd(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(e[a]!==t[a]&&!yl(n,a))return!0}return!1}function aT({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const cT=t=>t.__isSuspense;function uT(t,e){e&&e.pendingBranch?ie(t)?e.effects.push(...t):e.effects.push(t):tT(t)}const Fo={};function ja(t,e,n){return Sp(t,e,n)}function Sp(t,e,{immediate:n,deep:r,flush:o,onTrack:a,onTrigger:c}=Be){var f;const h=vI()===((f=ft)==null?void 0:f.scope)?ft:null;let _,y=!1,v=!1;if(ht(t)?(_=()=>t.value,y=Ko(t)):vr(t)?(_=()=>t,r=!0):ie(t)?(v=!0,y=t.some(te=>vr(te)||Ko(te)),_=()=>t.map(te=>{if(ht(te))return te.value;if(vr(te))return _r(te);if(ae(te))return si(te,h,2)})):ae(t)?e?_=()=>si(t,h,2):_=()=>{if(!(h&&h.isUnmounted))return C&&C(),un(t,h,3,[N])}:_=cn,e&&r){const te=_;_=()=>_r(te())}let C,N=te=>{C=Le.onStop=()=>{si(te,h,4)}},U;if(Cs)if(N=cn,e?n&&un(e,h,3,[_(),v?[]:void 0,N]):_(),o==="sync"){const te=lx();U=te.__watcherHandles||(te.__watcherHandles=[])}else return cn;let K=v?new Array(t.length).fill(Fo):Fo;const Z=()=>{if(Le.active)if(e){const te=Le.run();(r||y||(v?te.some((qe,Wt)=>gs(qe,K[Wt])):gs(te,K)))&&(C&&C(),un(e,h,3,[te,K===Fo?void 0:v&&K[0]===Fo?[]:K,N]),K=te)}else Le.run()};Z.allowRecurse=!!e;let we;o==="sync"?we=Z:o==="post"?we=()=>Tt(Z,h&&h.suspense):(Z.pre=!0,h&&(Z.id=h.uid),we=()=>ou(Z));const Le=new Jc(_,we);e?n?Z():K=Le.run():o==="post"?Tt(Le.run.bind(Le),h&&h.suspense):Le.run();const Ee=()=>{Le.stop(),h&&h.scope&&Vc(h.scope.effects,Le)};return U&&U.push(Ee),Ee}function fT(t,e,n){const r=this.proxy,o=Qe(t)?t.includes(".")?Ap(r,t):()=>r[t]:t.bind(r,r);let a;ae(e)?a=e:(a=e.handler,n=e);const c=ft;Sr(this);const f=Sp(o,a.bind(r),n);return c?Sr(c):Mi(),f}function Ap(t,e){const n=e.split(".");return()=>{let r=t;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}function _r(t,e){if(!He(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ht(t))_r(t.value,e);else if(ie(t))for(let n=0;n<t.length;n++)_r(t[n],e);else if(J_(t)||mr(t))t.forEach(n=>{_r(n,e)});else if(tp(t))for(const n in t)_r(t[n],e);return t}function Ti(t,e,n,r){const o=t.dirs,a=e&&e.dirs;for(let c=0;c<o.length;c++){const f=o[c];a&&(f.oldValue=a[c].value);let h=f.dir[r];h&&(Or(),un(h,n,8,[t.el,f,t,e]),Dr())}}function Ds(t,e){return ae(t)?(()=>tt({name:t.name},e,{setup:t}))():t}const Uo=t=>!!t.type.__asyncLoader,Rp=t=>t.type.__isKeepAlive;function hT(t,e){Np(t,"a",e)}function dT(t,e){Np(t,"da",e)}function Np(t,e,n=ft){const r=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(wl(e,r,n),n){let o=n.parent;for(;o&&o.parent;)Rp(o.parent.vnode)&&_T(r,e,n,o),o=o.parent}}function _T(t,e,n,r){const o=wl(e,t,r,!0);El(()=>{Vc(r[e],o)},n)}function wl(t,e,n=ft,r=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...c)=>{if(n.isUnmounted)return;Or(),Sr(n);const f=un(e,n,t,c);return Mi(),Dr(),f});return r?o.unshift(a):o.push(a),a}}const $n=t=>(e,n=ft)=>(!Cs||t==="sp")&&wl(t,(...r)=>e(...r),n),pT=$n("bm"),lu=$n("m"),gT=$n("bu"),mT=$n("u"),vT=$n("bum"),El=$n("um"),yT=$n("sp"),wT=$n("rtg"),ET=$n("rtc");function CT(t,e=ft){wl("ec",t,e)}const bT=Symbol.for("v-ndc");function IT(t,e,n,r){let o;const a=n&&n[r];if(ie(t)||Qe(t)){o=new Array(t.length);for(let c=0,f=t.length;c<f;c++)o[c]=e(t[c],c,void 0,a&&a[c])}else if(typeof t=="number"){o=new Array(t);for(let c=0;c<t;c++)o[c]=e(c+1,c,void 0,a&&a[c])}else if(He(t))if(t[Symbol.iterator])o=Array.from(t,(c,f)=>e(c,f,void 0,a&&a[f]));else{const c=Object.keys(t);o=new Array(c.length);for(let f=0,h=c.length;f<h;f++){const _=c[f];o[f]=e(t[_],_,f,a&&a[f])}}else o=[];return n&&(n[r]=o),o}const yc=t=>t?Hp(t)?hu(t)||t.proxy:yc(t.parent):null,us=tt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>yc(t.parent),$root:t=>yc(t.root),$emit:t=>t.emit,$options:t=>au(t),$forceUpdate:t=>t.f||(t.f=()=>ou(t.update)),$nextTick:t=>t.n||(t.n=JI.bind(t.proxy)),$watch:t=>fT.bind(t)}),Ja=(t,e)=>t!==Be&&!t.__isScriptSetup&&ve(t,e),TT={get({_:t},e){const{ctx:n,setupState:r,data:o,props:a,accessCache:c,type:f,appContext:h}=t;let _;if(e[0]!=="$"){const N=c[e];if(N!==void 0)switch(N){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(Ja(r,e))return c[e]=1,r[e];if(o!==Be&&ve(o,e))return c[e]=2,o[e];if((_=t.propsOptions[0])&&ve(_,e))return c[e]=3,a[e];if(n!==Be&&ve(n,e))return c[e]=4,n[e];wc&&(c[e]=0)}}const y=us[e];let v,C;if(y)return e==="$attrs"&&Rt(t,"get",e),y(t);if((v=f.__cssModules)&&(v=v[e]))return v;if(n!==Be&&ve(n,e))return c[e]=4,n[e];if(C=h.config.globalProperties,ve(C,e))return C[e]},set({_:t},e,n){const{data:r,setupState:o,ctx:a}=t;return Ja(o,e)?(o[e]=n,!0):r!==Be&&ve(r,e)?(r[e]=n,!0):ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:a}},c){let f;return!!n[c]||t!==Be&&ve(t,c)||Ja(e,c)||(f=a[0])&&ve(f,c)||ve(r,c)||ve(us,c)||ve(o.config.globalProperties,c)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Wd(t){return ie(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let wc=!0;function xT(t){const e=au(t),n=t.proxy,r=t.ctx;wc=!1,e.beforeCreate&&Ud(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:c,watch:f,provide:h,inject:_,created:y,beforeMount:v,mounted:C,beforeUpdate:N,updated:U,activated:K,deactivated:Z,beforeDestroy:we,beforeUnmount:Le,destroyed:Ee,unmounted:te,render:qe,renderTracked:Wt,renderTriggered:vt,errorCaptured:Pt,serverPrefetch:_i,expose:En,inheritAttrs:pi,components:qi,directives:Gi,filters:Vi}=e;if(_&&ST(_,r,null),c)for(const Te in c){const pe=c[Te];ae(pe)&&(r[Te]=pe.bind(n))}if(o){const Te=o.call(n,n);He(Te)&&(t.data=nu(Te))}if(wc=!0,a)for(const Te in a){const pe=a[Te],Cn=ae(pe)?pe.bind(n,n):ae(pe.get)?pe.get.bind(n,n):cn,bn=!ae(pe)&&ae(pe.set)?pe.set.bind(n):cn,Xe=sx({get:Cn,set:bn});Object.defineProperty(r,Te,{enumerable:!0,configurable:!0,get:()=>Xe.value,set:Ut=>Xe.value=Ut})}if(f)for(const Te in f)Pp(f[Te],r,n,Te);if(h){const Te=ae(h)?h.call(n):h;Reflect.ownKeys(Te).forEach(pe=>{DT(pe,Te[pe])})}y&&Ud(y,t,"c");function nt(Te,pe){ie(pe)?pe.forEach(Cn=>Te(Cn.bind(n))):pe&&Te(pe.bind(n))}if(nt(pT,v),nt(lu,C),nt(gT,N),nt(mT,U),nt(hT,K),nt(dT,Z),nt(CT,Pt),nt(ET,Wt),nt(wT,vt),nt(vT,Le),nt(El,te),nt(yT,_i),ie(En))if(En.length){const Te=t.exposed||(t.exposed={});En.forEach(pe=>{Object.defineProperty(Te,pe,{get:()=>n[pe],set:Cn=>n[pe]=Cn})})}else t.exposed||(t.exposed={});qe&&t.render===cn&&(t.render=qe),pi!=null&&(t.inheritAttrs=pi),qi&&(t.components=qi),Gi&&(t.directives=Gi)}function ST(t,e,n=cn){ie(t)&&(t=Ec(t));for(const r in t){const o=t[r];let a;He(o)?"default"in o?a=Ho(o.from||r,o.default,!0):a=Ho(o.from||r):a=Ho(o),ht(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):e[r]=a}}function Ud(t,e,n){un(ie(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Pp(t,e,n,r){const o=r.includes(".")?Ap(n,r):()=>n[r];if(Qe(t)){const a=e[t];ae(a)&&ja(o,a)}else if(ae(t))ja(o,t.bind(n));else if(He(t))if(ie(t))t.forEach(a=>Pp(a,e,n,r));else{const a=ae(t.handler)?t.handler.bind(n):e[t.handler];ae(a)&&ja(o,a,t)}}function au(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=t.appContext,f=a.get(e);let h;return f?h=f:!o.length&&!n&&!r?h=e:(h={},o.length&&o.forEach(_=>Vo(h,_,c,!0)),Vo(h,e,c)),He(e)&&a.set(e,h),h}function Vo(t,e,n,r=!1){const{mixins:o,extends:a}=e;a&&Vo(t,a,n,!0),o&&o.forEach(c=>Vo(t,c,n,!0));for(const c in e)if(!(r&&c==="expose")){const f=AT[c]||n&&n[c];t[c]=f?f(t[c],e[c]):e[c]}return t}const AT={data:Hd,props:$d,emits:$d,methods:cs,computed:cs,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:cs,directives:cs,watch:NT,provide:Hd,inject:RT};function Hd(t,e){return e?t?function(){return tt(ae(t)?t.call(this,this):t,ae(e)?e.call(this,this):e)}:e:t}function RT(t,e){return cs(Ec(t),Ec(e))}function Ec(t){if(ie(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mt(t,e){return t?[...new Set([].concat(t,e))]:e}function cs(t,e){return t?tt(Object.create(null),t,e):e}function $d(t,e){return t?ie(t)&&ie(e)?[...new Set([...t,...e])]:tt(Object.create(null),Wd(t),Wd(e??{})):e}function NT(t,e){if(!t)return e;if(!e)return t;const n=tt(Object.create(null),t);for(const r in e)n[r]=mt(t[r],e[r]);return n}function Op(){return{app:null,config:{isNativeTag:nI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let PT=0;function OT(t,e){return function(r,o=null){ae(r)||(r=tt({},r)),o!=null&&!He(o)&&(o=null);const a=Op(),c=new Set;let f=!1;const h=a.app={_uid:PT++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:ax,get config(){return a.config},set config(_){},use(_,...y){return c.has(_)||(_&&ae(_.install)?(c.add(_),_.install(h,...y)):ae(_)&&(c.add(_),_(h,...y))),h},mixin(_){return a.mixins.includes(_)||a.mixins.push(_),h},component(_,y){return y?(a.components[_]=y,h):a.components[_]},directive(_,y){return y?(a.directives[_]=y,h):a.directives[_]},mount(_,y,v){if(!f){const C=Bt(r,o);return C.appContext=a,y&&e?e(C,_):t(C,_,v),f=!0,h._container=_,_.__vue_app__=h,hu(C.component)||C.component.proxy}},unmount(){f&&(t(null,h._container),delete h._container.__vue_app__)},provide(_,y){return a.provides[_]=y,h},runWithContext(_){Yo=h;try{return _()}finally{Yo=null}}};return h}}let Yo=null;function DT(t,e){if(ft){let n=ft.provides;const r=ft.parent&&ft.parent.provides;r===n&&(n=ft.provides=Object.create(r)),n[t]=e}}function Ho(t,e,n=!1){const r=ft||yn;if(r||Yo){const o=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Yo._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&ae(e)?e.call(r&&r.proxy):e}}function MT(t,e,n,r=!1){const o={},a={};zo(a,bl,1),t.propsDefaults=Object.create(null),Dp(t,e,o,a);for(const c in t.propsOptions[0])c in o||(o[c]=void 0);n?t.props=r?o:qI(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function LT(t,e,n,r){const{props:o,attrs:a,vnode:{patchFlag:c}}=t,f=Ie(o),[h]=t.propsOptions;let _=!1;if((r||c>0)&&!(c&16)){if(c&8){const y=t.vnode.dynamicProps;for(let v=0;v<y.length;v++){let C=y[v];if(yl(t.emitsOptions,C))continue;const N=e[C];if(h)if(ve(a,C))N!==a[C]&&(a[C]=N,_=!0);else{const U=Ir(C);o[U]=Cc(h,f,U,N,t,!1)}else N!==a[C]&&(a[C]=N,_=!0)}}}else{Dp(t,e,o,a)&&(_=!0);let y;for(const v in f)(!e||!ve(e,v)&&((y=Pr(v))===v||!ve(e,y)))&&(h?n&&(n[v]!==void 0||n[y]!==void 0)&&(o[v]=Cc(h,f,v,void 0,t,!0)):delete o[v]);if(a!==f)for(const v in a)(!e||!ve(e,v))&&(delete a[v],_=!0)}_&&Bn(t,"set","$attrs")}function Dp(t,e,n,r){const[o,a]=t.propsOptions;let c=!1,f;if(e)for(let h in e){if(Wo(h))continue;const _=e[h];let y;o&&ve(o,y=Ir(h))?!a||!a.includes(y)?n[y]=_:(f||(f={}))[y]=_:yl(t.emitsOptions,h)||(!(h in r)||_!==r[h])&&(r[h]=_,c=!0)}if(a){const h=Ie(n),_=f||Be;for(let y=0;y<a.length;y++){const v=a[y];n[v]=Cc(o,h,v,_[v],t,!ve(_,v))}}return c}function Cc(t,e,n,r,o,a){const c=t[n];if(c!=null){const f=ve(c,"default");if(f&&r===void 0){const h=c.default;if(c.type!==Function&&!c.skipFactory&&ae(h)){const{propsDefaults:_}=o;n in _?r=_[n]:(Sr(o),r=_[n]=h.call(null,e),Mi())}else r=h}c[0]&&(a&&!f?r=!1:c[1]&&(r===""||r===Pr(n))&&(r=!0))}return r}function Mp(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const a=t.props,c={},f=[];let h=!1;if(!ae(t)){const y=v=>{h=!0;const[C,N]=Mp(v,e,!0);tt(c,C),N&&f.push(...N)};!n&&e.mixins.length&&e.mixins.forEach(y),t.extends&&y(t.extends),t.mixins&&t.mixins.forEach(y)}if(!a&&!h)return He(t)&&r.set(t,gr),gr;if(ie(a))for(let y=0;y<a.length;y++){const v=Ir(a[y]);zd(v)&&(c[v]=Be)}else if(a)for(const y in a){const v=Ir(y);if(zd(v)){const C=a[y],N=c[v]=ie(C)||ae(C)?{type:C}:tt({},C);if(N){const U=Gd(Boolean,N.type),K=Gd(String,N.type);N[0]=U>-1,N[1]=K<0||U<K,(U>-1||ve(N,"default"))&&f.push(v)}}}const _=[c,f];return He(t)&&r.set(t,_),_}function zd(t){return t[0]!=="$"}function Kd(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function qd(t,e){return Kd(t)===Kd(e)}function Gd(t,e){return ie(e)?e.findIndex(n=>qd(n,t)):ae(e)&&qd(e,t)?0:-1}const Lp=t=>t[0]==="_"||t==="$stable",cu=t=>ie(t)?t.map(mn):[mn(t)],FT=(t,e,n)=>{if(e._n)return e;const r=rT((...o)=>cu(e(...o)),n);return r._c=!1,r},Fp=(t,e,n)=>{const r=t._ctx;for(const o in t){if(Lp(o))continue;const a=t[o];if(ae(a))e[o]=FT(o,a,r);else if(a!=null){const c=cu(a);e[o]=()=>c}}},kp=(t,e)=>{const n=cu(e);t.slots.default=()=>n},kT=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ie(e),zo(e,"_",n)):Fp(e,t.slots={})}else t.slots={},e&&kp(t,e);zo(t.slots,bl,1)},BT=(t,e,n)=>{const{vnode:r,slots:o}=t;let a=!0,c=Be;if(r.shapeFlag&32){const f=e._;f?n&&f===1?a=!1:(tt(o,e),!n&&f===1&&delete o._):(a=!e.$stable,Fp(e,o)),c=e}else e&&(kp(t,e),c={default:1});if(a)for(const f in o)!Lp(f)&&!(f in c)&&delete o[f]};function bc(t,e,n,r,o=!1){if(ie(t)){t.forEach((C,N)=>bc(C,e&&(ie(e)?e[N]:e),n,r,o));return}if(Uo(r)&&!o)return;const a=r.shapeFlag&4?hu(r.component)||r.component.proxy:r.el,c=o?null:a,{i:f,r:h}=t,_=e&&e.r,y=f.refs===Be?f.refs={}:f.refs,v=f.setupState;if(_!=null&&_!==h&&(Qe(_)?(y[_]=null,ve(v,_)&&(v[_]=null)):ht(_)&&(_.value=null)),ae(h))si(h,f,12,[c,y]);else{const C=Qe(h),N=ht(h);if(C||N){const U=()=>{if(t.f){const K=C?ve(v,h)?v[h]:y[h]:h.value;o?ie(K)&&Vc(K,a):ie(K)?K.includes(a)||K.push(a):C?(y[h]=[a],ve(v,h)&&(v[h]=y[h])):(h.value=[a],t.k&&(y[t.k]=h.value))}else C?(y[h]=c,ve(v,h)&&(v[h]=c)):N&&(h.value=c,t.k&&(y[t.k]=c))};c?(U.id=-1,Tt(U,n)):U()}}}const Tt=uT;function WT(t){return UT(t)}function UT(t,e){const n=dc();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:c,createText:f,createComment:h,setText:_,setElementText:y,parentNode:v,nextSibling:C,setScopeId:N=cn,insertStaticContent:U}=t,K=(w,I,S,O=null,M=null,F=null,$=!1,k=null,W=!!I.dynamicChildren)=>{if(w===I)return;w&&!ns(w,I)&&(O=Yi(w),Ut(w,M,F,!0),w=null),I.patchFlag===-2&&(W=!1,I.dynamicChildren=null);const{type:D,ref:V,shapeFlag:q}=I;switch(D){case Cl:Z(w,I,S,O);break;case ki:we(w,I,S,O);break;case Za:w==null&&Le(I,S,O,$);break;case nn:qi(w,I,S,O,M,F,$,k,W);break;default:q&1?qe(w,I,S,O,M,F,$,k,W):q&6?Gi(w,I,S,O,M,F,$,k,W):(q&64||q&128)&&D.process(w,I,S,O,M,F,$,k,W,Ht)}V!=null&&M&&bc(V,w&&w.ref,F,I||w,!I)},Z=(w,I,S,O)=>{if(w==null)r(I.el=f(I.children),S,O);else{const M=I.el=w.el;I.children!==w.children&&_(M,I.children)}},we=(w,I,S,O)=>{w==null?r(I.el=h(I.children||""),S,O):I.el=w.el},Le=(w,I,S,O)=>{[w.el,w.anchor]=U(w.children,I,S,O,w.el,w.anchor)},Ee=({el:w,anchor:I},S,O)=>{let M;for(;w&&w!==I;)M=C(w),r(w,S,O),w=M;r(I,S,O)},te=({el:w,anchor:I})=>{let S;for(;w&&w!==I;)S=C(w),o(w),w=S;o(I)},qe=(w,I,S,O,M,F,$,k,W)=>{$=$||I.type==="svg",w==null?Wt(I,S,O,M,F,$,k,W):_i(w,I,M,F,$,k,W)},Wt=(w,I,S,O,M,F,$,k)=>{let W,D;const{type:V,props:q,shapeFlag:Y,transition:X,dirs:ce}=w;if(W=w.el=c(w.type,F,q&&q.is,q),Y&8?y(W,w.children):Y&16&&Pt(w.children,W,null,O,M,F&&V!=="foreignObject",$,k),ce&&Ti(w,null,O,"created"),vt(W,w,w.scopeId,$,O),q){for(const ge in q)ge!=="value"&&!Wo(ge)&&a(W,ge,null,q[ge],F,w.children,O,M,yt);"value"in q&&a(W,"value",null,q.value),(D=q.onVnodeBeforeMount)&&gn(D,O,w)}ce&&Ti(w,null,O,"beforeMount");const ye=(!M||M&&!M.pendingBranch)&&X&&!X.persisted;ye&&X.beforeEnter(W),r(W,I,S),((D=q&&q.onVnodeMounted)||ye||ce)&&Tt(()=>{D&&gn(D,O,w),ye&&X.enter(W),ce&&Ti(w,null,O,"mounted")},M)},vt=(w,I,S,O,M)=>{if(S&&N(w,S),O)for(let F=0;F<O.length;F++)N(w,O[F]);if(M){let F=M.subTree;if(I===F){const $=M.vnode;vt(w,$,$.scopeId,$.slotScopeIds,M.parent)}}},Pt=(w,I,S,O,M,F,$,k,W=0)=>{for(let D=W;D<w.length;D++){const V=w[D]=k?ii(w[D]):mn(w[D]);K(null,V,I,S,O,M,F,$,k)}},_i=(w,I,S,O,M,F,$)=>{const k=I.el=w.el;let{patchFlag:W,dynamicChildren:D,dirs:V}=I;W|=w.patchFlag&16;const q=w.props||Be,Y=I.props||Be;let X;S&&xi(S,!1),(X=Y.onVnodeBeforeUpdate)&&gn(X,S,I,w),V&&Ti(I,w,S,"beforeUpdate"),S&&xi(S,!0);const ce=M&&I.type!=="foreignObject";if(D?En(w.dynamicChildren,D,k,S,O,ce,F):$||pe(w,I,k,null,S,O,ce,F,!1),W>0){if(W&16)pi(k,I,q,Y,S,O,M);else if(W&2&&q.class!==Y.class&&a(k,"class",null,Y.class,M),W&4&&a(k,"style",q.style,Y.style,M),W&8){const ye=I.dynamicProps;for(let ge=0;ge<ye.length;ge++){const Fe=ye[ge],dt=q[Fe],hn=Y[Fe];(hn!==dt||Fe==="value")&&a(k,Fe,dt,hn,M,w.children,S,O,yt)}}W&1&&w.children!==I.children&&y(k,I.children)}else!$&&D==null&&pi(k,I,q,Y,S,O,M);((X=Y.onVnodeUpdated)||V)&&Tt(()=>{X&&gn(X,S,I,w),V&&Ti(I,w,S,"updated")},O)},En=(w,I,S,O,M,F,$)=>{for(let k=0;k<I.length;k++){const W=w[k],D=I[k],V=W.el&&(W.type===nn||!ns(W,D)||W.shapeFlag&70)?v(W.el):S;K(W,D,V,null,O,M,F,$,!0)}},pi=(w,I,S,O,M,F,$)=>{if(S!==O){if(S!==Be)for(const k in S)!Wo(k)&&!(k in O)&&a(w,k,S[k],null,$,I.children,M,F,yt);for(const k in O){if(Wo(k))continue;const W=O[k],D=S[k];W!==D&&k!=="value"&&a(w,k,D,W,$,I.children,M,F,yt)}"value"in O&&a(w,"value",S.value,O.value)}},qi=(w,I,S,O,M,F,$,k,W)=>{const D=I.el=w?w.el:f(""),V=I.anchor=w?w.anchor:f("");let{patchFlag:q,dynamicChildren:Y,slotScopeIds:X}=I;X&&(k=k?k.concat(X):X),w==null?(r(D,S,O),r(V,S,O),Pt(I.children,S,V,M,F,$,k,W)):q>0&&q&64&&Y&&w.dynamicChildren?(En(w.dynamicChildren,Y,S,M,F,$,k),(I.key!=null||M&&I===M.subTree)&&Bp(w,I,!0)):pe(w,I,S,V,M,F,$,k,W)},Gi=(w,I,S,O,M,F,$,k,W)=>{I.slotScopeIds=k,w==null?I.shapeFlag&512?M.ctx.activate(I,S,O,$,W):Vi(I,S,O,M,F,$,W):Us(w,I,W)},Vi=(w,I,S,O,M,F,$)=>{const k=w.component=ZT(w,O,M);if(Rp(w)&&(k.ctx.renderer=Ht),ex(k),k.asyncDep){if(M&&M.registerDep(k,nt),!w.el){const W=k.subTree=Bt(ki);we(null,W,I,S)}return}nt(k,w,I,S,M,F,$)},Us=(w,I,S)=>{const O=I.component=w.component;if(lT(w,I,S))if(O.asyncDep&&!O.asyncResolved){Te(O,I,S);return}else O.next=I,eT(O.update),O.update();else I.el=w.el,O.vnode=I},nt=(w,I,S,O,M,F,$)=>{const k=()=>{if(w.isMounted){let{next:V,bu:q,u:Y,parent:X,vnode:ce}=w,ye=V,ge;xi(w,!1),V?(V.el=ce.el,Te(w,V,$)):V=ce,q&&Qa(q),(ge=V.props&&V.props.onVnodeBeforeUpdate)&&gn(ge,X,V,ce),xi(w,!0);const Fe=Xa(w),dt=w.subTree;w.subTree=Fe,K(dt,Fe,v(dt.el),Yi(dt),w,M,F),V.el=Fe.el,ye===null&&aT(w,Fe.el),Y&&Tt(Y,M),(ge=V.props&&V.props.onVnodeUpdated)&&Tt(()=>gn(ge,X,V,ce),M)}else{let V;const{el:q,props:Y}=I,{bm:X,m:ce,parent:ye}=w,ge=Uo(I);if(xi(w,!1),X&&Qa(X),!ge&&(V=Y&&Y.onVnodeBeforeMount)&&gn(V,ye,I),xi(w,!0),q&&Gn){const Fe=()=>{w.subTree=Xa(w),Gn(q,w.subTree,w,M,null)};ge?I.type.__asyncLoader().then(()=>!w.isUnmounted&&Fe()):Fe()}else{const Fe=w.subTree=Xa(w);K(null,Fe,S,O,w,M,F),I.el=Fe.el}if(ce&&Tt(ce,M),!ge&&(V=Y&&Y.onVnodeMounted)){const Fe=I;Tt(()=>gn(V,ye,Fe),M)}(I.shapeFlag&256||ye&&Uo(ye.vnode)&&ye.vnode.shapeFlag&256)&&w.a&&Tt(w.a,M),w.isMounted=!0,I=S=O=null}},W=w.effect=new Jc(k,()=>ou(D),w.scope),D=w.update=()=>W.run();D.id=w.uid,xi(w,!0),D()},Te=(w,I,S)=>{I.component=w;const O=w.vnode.props;w.vnode=I,w.next=null,LT(w,I.props,O,S),BT(w,I.children,S),Or(),kd(),Dr()},pe=(w,I,S,O,M,F,$,k,W=!1)=>{const D=w&&w.children,V=w?w.shapeFlag:0,q=I.children,{patchFlag:Y,shapeFlag:X}=I;if(Y>0){if(Y&128){bn(D,q,S,O,M,F,$,k,W);return}else if(Y&256){Cn(D,q,S,O,M,F,$,k,W);return}}X&8?(V&16&&yt(D,M,F),q!==D&&y(S,q)):V&16?X&16?bn(D,q,S,O,M,F,$,k,W):yt(D,M,F,!0):(V&8&&y(S,""),X&16&&Pt(q,S,O,M,F,$,k,W))},Cn=(w,I,S,O,M,F,$,k,W)=>{w=w||gr,I=I||gr;const D=w.length,V=I.length,q=Math.min(D,V);let Y;for(Y=0;Y<q;Y++){const X=I[Y]=W?ii(I[Y]):mn(I[Y]);K(w[Y],X,S,null,M,F,$,k,W)}D>V?yt(w,M,F,!0,!1,q):Pt(I,S,O,M,F,$,k,W,q)},bn=(w,I,S,O,M,F,$,k,W)=>{let D=0;const V=I.length;let q=w.length-1,Y=V-1;for(;D<=q&&D<=Y;){const X=w[D],ce=I[D]=W?ii(I[D]):mn(I[D]);if(ns(X,ce))K(X,ce,S,null,M,F,$,k,W);else break;D++}for(;D<=q&&D<=Y;){const X=w[q],ce=I[Y]=W?ii(I[Y]):mn(I[Y]);if(ns(X,ce))K(X,ce,S,null,M,F,$,k,W);else break;q--,Y--}if(D>q){if(D<=Y){const X=Y+1,ce=X<V?I[X].el:O;for(;D<=Y;)K(null,I[D]=W?ii(I[D]):mn(I[D]),S,ce,M,F,$,k,W),D++}}else if(D>Y)for(;D<=q;)Ut(w[D],M,F,!0),D++;else{const X=D,ce=D,ye=new Map;for(D=ce;D<=Y;D++){const it=I[D]=W?ii(I[D]):mn(I[D]);it.key!=null&&ye.set(it.key,D)}let ge,Fe=0;const dt=Y-ce+1;let hn=!1,Qi=0;const In=new Array(dt);for(D=0;D<dt;D++)In[D]=0;for(D=X;D<=q;D++){const it=w[D];if(Fe>=dt){Ut(it,M,F,!0);continue}let wt;if(it.key!=null)wt=ye.get(it.key);else for(ge=ce;ge<=Y;ge++)if(In[ge-ce]===0&&ns(it,I[ge])){wt=ge;break}wt===void 0?Ut(it,M,F,!0):(In[wt-ce]=D+1,wt>=Qi?Qi=wt:hn=!0,K(it,I[wt],S,null,M,F,$,k,W),Fe++)}const Xi=hn?HT(In):gr;for(ge=Xi.length-1,D=dt-1;D>=0;D--){const it=ce+D,wt=I[it],ji=it+1<V?I[it+1].el:O;In[D]===0?K(null,wt,S,ji,M,F,$,k,W):hn&&(ge<0||D!==Xi[ge]?Xe(wt,S,ji,2):ge--)}}},Xe=(w,I,S,O,M=null)=>{const{el:F,type:$,transition:k,children:W,shapeFlag:D}=w;if(D&6){Xe(w.component.subTree,I,S,O);return}if(D&128){w.suspense.move(I,S,O);return}if(D&64){$.move(w,I,S,Ht);return}if($===nn){r(F,I,S);for(let q=0;q<W.length;q++)Xe(W[q],I,S,O);r(w.anchor,I,S);return}if($===Za){Ee(w,I,S);return}if(O!==2&&D&1&&k)if(O===0)k.beforeEnter(F),r(F,I,S),Tt(()=>k.enter(F),M);else{const{leave:q,delayLeave:Y,afterLeave:X}=k,ce=()=>r(F,I,S),ye=()=>{q(F,()=>{ce(),X&&X()})};Y?Y(F,ce,ye):ye()}else r(F,I,S)},Ut=(w,I,S,O=!1,M=!1)=>{const{type:F,props:$,ref:k,children:W,dynamicChildren:D,shapeFlag:V,patchFlag:q,dirs:Y}=w;if(k!=null&&bc(k,null,S,w,!0),V&256){I.ctx.deactivate(w);return}const X=V&1&&Y,ce=!Uo(w);let ye;if(ce&&(ye=$&&$.onVnodeBeforeUnmount)&&gn(ye,I,w),V&6)Kn(w.component,S,O);else{if(V&128){w.suspense.unmount(S,O);return}X&&Ti(w,null,I,"beforeUnmount"),V&64?w.type.remove(w,I,S,M,Ht,O):D&&(F!==nn||q>0&&q&64)?yt(D,I,S,!1,!0):(F===nn&&q&384||!M&&V&16)&&yt(W,I,S),O&&Hs(w)}(ce&&(ye=$&&$.onVnodeUnmounted)||X)&&Tt(()=>{ye&&gn(ye,I,w),X&&Ti(w,null,I,"unmounted")},S)},Hs=w=>{const{type:I,el:S,anchor:O,transition:M}=w;if(I===nn){Ll(S,O);return}if(I===Za){te(w);return}const F=()=>{o(S),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(w.shapeFlag&1&&M&&!M.persisted){const{leave:$,delayLeave:k}=M,W=()=>$(S,F);k?k(w.el,F,W):W()}else F()},Ll=(w,I)=>{let S;for(;w!==I;)S=C(w),o(w),w=S;o(I)},Kn=(w,I,S)=>{const{bum:O,scope:M,update:F,subTree:$,um:k}=w;O&&Qa(O),M.stop(),F&&(F.active=!1,Ut($,w,I,S)),k&&Tt(k,I),Tt(()=>{w.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},yt=(w,I,S,O=!1,M=!1,F=0)=>{for(let $=F;$<w.length;$++)Ut(w[$],I,S,O,M)},Yi=w=>w.shapeFlag&6?Yi(w.component.subTree):w.shapeFlag&128?w.suspense.next():C(w.anchor||w.el),qn=(w,I,S)=>{w==null?I._vnode&&Ut(I._vnode,null,null,!0):K(I._vnode||null,w,I,null,null,null,S),kd(),bp(),I._vnode=w},Ht={p:K,um:Ut,m:Xe,r:Hs,mt:Vi,mc:Pt,pc:pe,pbc:En,n:Yi,o:t};let Ur,Gn;return e&&([Ur,Gn]=e(Ht)),{render:qn,hydrate:Ur,createApp:OT(qn,Ur)}}function xi({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Bp(t,e,n=!1){const r=t.children,o=e.children;if(ie(r)&&ie(o))for(let a=0;a<r.length;a++){const c=r[a];let f=o[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[a]=ii(o[a]),f.el=c.el),n||Bp(c,f)),f.type===Cl&&(f.el=c.el)}}function HT(t){const e=t.slice(),n=[0];let r,o,a,c,f;const h=t.length;for(r=0;r<h;r++){const _=t[r];if(_!==0){if(o=n[n.length-1],t[o]<_){e[r]=o,n.push(r);continue}for(a=0,c=n.length-1;a<c;)f=a+c>>1,t[n[f]]<_?a=f+1:c=f;_<t[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,c=n[a-1];a-- >0;)n[a]=c,c=e[c];return n}const $T=t=>t.__isTeleport,nn=Symbol.for("v-fgt"),Cl=Symbol.for("v-txt"),ki=Symbol.for("v-cmt"),Za=Symbol.for("v-stc"),fs=[];let on=null;function Fn(t=!1){fs.push(on=t?null:[])}function zT(){fs.pop(),on=fs[fs.length-1]||null}let ws=1;function Vd(t){ws+=t}function Wp(t){return t.dynamicChildren=ws>0?on||gr:null,zT(),ws>0&&on&&on.push(t),t}function oi(t,e,n,r,o,a){return Wp(Es(t,e,n,r,o,a,!0))}function KT(t,e,n,r,o){return Wp(Bt(t,e,n,r,o,!0))}function qT(t){return t?t.__v_isVNode===!0:!1}function ns(t,e){return t.type===e.type&&t.key===e.key}const bl="__vInternal",Up=({key:t})=>t??null,$o=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||ht(t)||ae(t)?{i:yn,r:t,k:e,f:!!n}:t:null);function Es(t,e=null,n=null,r=0,o=null,a=t===nn?0:1,c=!1,f=!1){const h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Up(e),ref:e&&$o(e),scopeId:xp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:yn};return f?(uu(h,n),a&128&&t.normalize(h)):n&&(h.shapeFlag|=Qe(n)?8:16),ws>0&&!c&&on&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&on.push(h),h}const Bt=GT;function GT(t,e=null,n=null,r=0,o=null,a=!1){if((!t||t===bT)&&(t=ki),qT(t)){const f=xr(t,e,!0);return n&&uu(f,n),ws>0&&!a&&on&&(f.shapeFlag&6?on[on.indexOf(t)]=f:on.push(f)),f.patchFlag|=-2,f}if(rx(t)&&(t=t.__vccOpts),e){e=VT(e);let{class:f,style:h}=e;f&&!Qe(f)&&(e.class=Xc(f)),He(h)&&(gp(h)&&!ie(h)&&(h=tt({},h)),e.style=Fi(h))}const c=Qe(t)?1:cT(t)?128:$T(t)?64:He(t)?4:ae(t)?2:0;return Es(t,e,n,r,o,c,a,!0)}function VT(t){return t?gp(t)||bl in t?tt({},t):t:null}function xr(t,e,n=!1){const{props:r,ref:o,patchFlag:a,children:c}=t,f=e?XT(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&Up(f),ref:e&&e.ref?n&&o?ie(o)?o.concat($o(e)):[o,$o(e)]:$o(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==nn?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&xr(t.ssContent),ssFallback:t.ssFallback&&xr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function YT(t=" ",e=0){return Bt(Cl,null,t,e)}function QT(t="",e=!1){return e?(Fn(),KT(ki,null,t)):Bt(ki,null,t)}function mn(t){return t==null||typeof t=="boolean"?Bt(ki):ie(t)?Bt(nn,null,t.slice()):typeof t=="object"?ii(t):Bt(Cl,null,String(t))}function ii(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:xr(t)}function uu(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ie(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),uu(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!(bl in e)?e._ctx=yn:o===3&&yn&&(yn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ae(e)?(e={default:e,_ctx:yn},n=32):(e=String(e),r&64?(n=16,e=[YT(e)]):n=8);t.children=e,t.shapeFlag|=n}function XT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=Xc([e.class,r.class]));else if(o==="style")e.style=Fi([e.style,r.style]);else if(_l(o)){const a=e[o],c=r[o];c&&a!==c&&!(ie(a)&&a.includes(c))&&(e[o]=a?[].concat(a,c):c)}else o!==""&&(e[o]=r[o])}return e}function gn(t,e,n,r=null){un(t,e,7,[n,r])}const jT=Op();let JT=0;function ZT(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||jT,a={uid:JT++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new gI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mp(r,o),emitsOptions:Tp(r,o),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:r.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=iT.bind(null,a),t.ce&&t.ce(a),a}let ft=null,fu,hr,Yd="__VUE_INSTANCE_SETTERS__";(hr=dc()[Yd])||(hr=dc()[Yd]=[]),hr.push(t=>ft=t),fu=t=>{hr.length>1?hr.forEach(e=>e(t)):hr[0](t)};const Sr=t=>{fu(t),t.scope.on()},Mi=()=>{ft&&ft.scope.off(),fu(null)};function Hp(t){return t.vnode.shapeFlag&4}let Cs=!1;function ex(t,e=!1){Cs=e;const{props:n,children:r}=t.vnode,o=Hp(t);MT(t,n,o,e),kT(t,r);const a=o?tx(t,e):void 0;return Cs=!1,a}function tx(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=mp(new Proxy(t.ctx,TT));const{setup:r}=n;if(r){const o=t.setupContext=r.length>1?ix(t):null;Sr(t),Or();const a=si(r,t,0,[t.props,o]);if(Dr(),Mi(),Z_(a)){if(a.then(Mi,Mi),e)return a.then(c=>{Qd(t,c,e)}).catch(c=>{vl(c,t,0)});t.asyncDep=a}else Qd(t,a,e)}else $p(t,e)}function Qd(t,e,n){ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:He(e)&&(t.setupState=wp(e)),$p(t,n)}let Xd;function $p(t,e,n){const r=t.type;if(!t.render){if(!e&&Xd&&!r.render){const o=r.template||au(t).template;if(o){const{isCustomElement:a,compilerOptions:c}=t.appContext.config,{delimiters:f,compilerOptions:h}=r,_=tt(tt({isCustomElement:a,delimiters:f},c),h);r.render=Xd(o,_)}}t.render=r.render||cn}Sr(t),Or(),xT(t),Dr(),Mi()}function nx(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Rt(t,"get","$attrs"),e[n]}}))}function ix(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return nx(t)},slots:t.slots,emit:t.emit,expose:e}}function hu(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(wp(mp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in us)return us[n](t)},has(e,n){return n in e||n in us}}))}function rx(t){return ae(t)&&"__vccOpts"in t}const sx=(t,e)=>XI(t,e,Cs),ox=Symbol.for("v-scx"),lx=()=>Ho(ox),ax="3.3.4",cx="http://www.w3.org/2000/svg",Ni=typeof document<"u"?document:null,jd=Ni&&Ni.createElement("template"),ux={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e?Ni.createElementNS(cx,t):Ni.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>Ni.createTextNode(t),createComment:t=>Ni.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ni.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,o,a){const c=n?n.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{jd.innerHTML=r?`<svg>${t}</svg>`:t;const f=jd.content;if(r){const h=f.firstChild;for(;h.firstChild;)f.appendChild(h.firstChild);f.removeChild(h)}e.insertBefore(f,n)}return[c?c.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function fx(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function hx(t,e,n){const r=t.style,o=Qe(n);if(n&&!o){if(e&&!Qe(e))for(const a in e)n[a]==null&&Ic(r,a,"");for(const a in n)Ic(r,a,n[a])}else{const a=r.display;o?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=a)}}const Jd=/\s*!important$/;function Ic(t,e,n){if(ie(n))n.forEach(r=>Ic(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=dx(t,e);Jd.test(n)?t.setProperty(Pr(r),n.replace(Jd,""),"important"):t[r]=n}}const Zd=["Webkit","Moz","ms"],ec={};function dx(t,e){const n=ec[e];if(n)return n;let r=Ir(e);if(r!=="filter"&&r in t)return ec[e]=r;r=np(r);for(let o=0;o<Zd.length;o++){const a=Zd[o]+r;if(a in t)return ec[e]=a}return e}const e_="http://www.w3.org/1999/xlink";function _x(t,e,n,r,o){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(e_,e.slice(6,e.length)):t.setAttributeNS(e_,e,n);else{const a=_I(e);n==null||a&&!ip(n)?t.removeAttribute(e):t.setAttribute(e,a?"":n)}}function px(t,e,n,r,o,a,c){if(e==="innerHTML"||e==="textContent"){r&&c(r,o,a),t[e]=n??"";return}const f=t.tagName;if(e==="value"&&f!=="PROGRESS"&&!f.includes("-")){t._value=n;const _=f==="OPTION"?t.getAttribute("value"):t.value,y=n??"";_!==y&&(t.value=y),n==null&&t.removeAttribute(e);return}let h=!1;if(n===""||n==null){const _=typeof t[e];_==="boolean"?n=ip(n):n==null&&_==="string"?(n="",h=!0):_==="number"&&(n=0,h=!0)}try{t[e]=n}catch{}h&&t.removeAttribute(e)}function gx(t,e,n,r){t.addEventListener(e,n,r)}function mx(t,e,n,r){t.removeEventListener(e,n,r)}function vx(t,e,n,r,o=null){const a=t._vei||(t._vei={}),c=a[e];if(r&&c)c.value=r;else{const[f,h]=yx(e);if(r){const _=a[e]=Cx(r,o);gx(t,f,_,h)}else c&&(mx(t,f,c,h),a[e]=void 0)}}const t_=/(?:Once|Passive|Capture)$/;function yx(t){let e;if(t_.test(t)){e={};let r;for(;r=t.match(t_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pr(t.slice(2)),e]}let tc=0;const wx=Promise.resolve(),Ex=()=>tc||(wx.then(()=>tc=0),tc=Date.now());function Cx(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;un(bx(r,n.value),e,5,[r])};return n.value=t,n.attached=Ex(),n}function bx(t,e){if(ie(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const n_=/^on[a-z]/,Ix=(t,e,n,r,o=!1,a,c,f,h)=>{e==="class"?fx(t,r,o):e==="style"?hx(t,n,r):_l(e)?Gc(e)||vx(t,e,n,r,c):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Tx(t,e,r,o))?px(t,e,r,a,c,f,h):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),_x(t,e,r,o))};function Tx(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&n_.test(e)&&ae(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||n_.test(e)&&Qe(n)?!1:e in t}const xx=tt({patchProp:Ix},ux);let i_;function Sx(){return i_||(i_=WT(xx))}const Ax=(...t)=>{const e=Sx().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=Rx(r);if(!o)return;const a=e._component;!ae(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const c=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},e};function Rx(t){return Qe(t)?document.querySelector(t):t}var is=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r_=Fx,Qo=256,Px={x:Qo/2,y:Qo/2},Ox=Qo/360,Dx=Qo/(2*Math.PI);function Mx(t,e,n){return e!=null&&(t=Math.max(t,e)),n!=null&&(t=Math.min(t,n)),t}function Lx(t){return t*(Math.PI/180)}function Fx(t,e){var n={x:null,y:null},r=Px;n.x=r.x+t.lng*Ox;var o=Mx(Math.sin(Lx(t.lat)),-.9999,.9999);return n.y=r.y+.5*Math.log((1+o)/(1-o))*-Dx,n}const kx=["src"],Bx=Ds({__name:"StaticMap",props:{zoom:{},center:{},mapWidth:{},mapHeight:{}},setup(t){const e=t,n=new URL("https://maps.googleapis.com/maps/api/staticmap");return n.searchParams.set("zoom",e.zoom),n.searchParams.set("center",e.center),n.searchParams.set("key","AIzaSyDImU7k6IetA47jAxOPlhWiMlWcefJoIiw"),n.searchParams.set("size",`${e.mapWidth}x${e.mapHeight}`),n.searchParams.set("scale","2"),(r,o)=>(Fn(),oi("img",{src:tn(n).toString(),style:Fi({width:e.mapWidth+"px",height:e.mapHeight+"px"})},null,12,kx))}}),Wx={key:0,class:"wake-lock"},Ux=Ds({__name:"WakeLock",setup(t){const e=qo(!1);let n=null;return lu(async()=>{if("wakeLock"in window.navigator)try{n=await window.navigator.wakeLock.request("screen"),e.value=!1}catch{e.value=!0}else e.value=!0}),El(()=>{n&&n.release()}),(r,o)=>e.value?(Fn(),oi("div",Wx," Could not set wake lock -- your phone may go to sleep ")):QT("",!0)}});const zp=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},Hx=zp(Ux,[["__scopeId","data-v-8cf9f106"]]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=function(t,e){if(!t)throw Mr(e)},Mr=function(t){return new Error("Firebase Database ("+Kp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},$x=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],c=t[n++],f=t[n++],h=((o&7)<<18|(a&63)<<12|(c&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},du={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const a=t[o],c=o+1<t.length,f=c?t[o+1]:0,h=o+2<t.length,_=h?t[o+2]:0,y=a>>2,v=(a&3)<<4|f>>4;let C=(f&15)<<2|_>>6,N=_&63;h||(N=64,c||(C=64)),r.push(n[y],n[v],n[C],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$x(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],f=o<t.length?n[t.charAt(o)]:0;++o;const _=o<t.length?n[t.charAt(o)]:64;++o;const v=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||f==null||_==null||v==null)throw new zx;const C=a<<2|f>>4;if(r.push(C),_!==64){const N=f<<4&240|_>>2;if(r.push(N),v!==64){const U=_<<6&192|v;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gp=function(t){const e=qp(t);return du.encodeByteArray(e,!0)},Xo=function(t){return Gp(t).replace(/\./g,"")},Tc=function(t){try{return du.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){return Vp(void 0,t)}function Vp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!qx(n)||(t[n]=Vp(t[n],e[n]));return t}function qx(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=()=>Gx().__FIREBASE_DEFAULTS__,Yx=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Qx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tc(t[1]);return e&&JSON.parse(e)},Yp=()=>{try{return Vx()||Yx()||Qx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xx=t=>{var e,n;return(n=(e=Yp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jx=t=>{const e=Xx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Qp=()=>{var t;return(t=Yp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t),f="";return[Xo(JSON.stringify(n)),Xo(JSON.stringify(c)),f].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zx())}function eS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jp(){return Kp.NODE_ADMIN===!0}function tS(){try{return typeof indexedDB=="object"}catch{return!1}}function nS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="FirebaseError";class Ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iS,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jp.prototype.create)}}class Jp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?rS(a,r):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new Ms(o,f,r)}}function rS(t,e){return t.replace(sS,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const sS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t){return JSON.parse(t)}function et(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=function(t){let e={},n={},r={},o="";try{const a=t.split(".");e=bs(Tc(a[0])||""),n=bs(Tc(a[1])||""),o=a[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:o}},oS=function(t){const e=Zp(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},lS=function(t){const e=Zp(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ar(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function s_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jo(t,e,n){const r={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r}function xc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const a=t[o],c=e[o];if(o_(a)&&o_(c)){if(!xc(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function o_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)r[v]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let v=0;v<16;v++)r[v]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let v=16;v<80;v++){const C=r[v-3]^r[v-8]^r[v-14]^r[v-16];r[v]=(C<<1|C>>>31)&4294967295}let o=this.chain_[0],a=this.chain_[1],c=this.chain_[2],f=this.chain_[3],h=this.chain_[4],_,y;for(let v=0;v<80;v++){v<40?v<20?(_=f^a&(c^f),y=1518500249):(_=a^c^f,y=1859775393):v<60?(_=a&c|f&(a|c),y=2400959708):(_=a^c^f,y=3395469782);const C=(o<<5|o>>>27)+_+h+y+r[v]&4294967295;h=f,f=c,c=(a<<30|a>>>2)&4294967295,a=o,o=C}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let o=0;const a=this.buf_;let c=this.inbuf_;for(;o<n;){if(c===0)for(;o<=r;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(a[c]=e.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}else for(;o<n;)if(a[c]=e[o],++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let a=24;a>=0;a-=8)e[r]=this.chain_[o]>>a&255,++r;return e}}function Tl(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);if(o>=55296&&o<=56319){const a=o-55296;r++,B(r<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(r)-56320;o=65536+(a<<10)+c}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},xl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t){return t&&t._delegate?t._delegate:t}class Is{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Il;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dS(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&c.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hS(t){return t===Si?void 0:t}function dS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const pS={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},gS=Pe.INFO,mS={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},vS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=mS[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eg{constructor(e){this.name=e,this._logLevel=gS,this._logHandler=vS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const yS=(t,e)=>e.some(n=>t instanceof n);let l_,a_;function wS(){return l_||(l_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ES(){return a_||(a_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tg=new WeakMap,Sc=new WeakMap,ng=new WeakMap,nc=new WeakMap,_u=new WeakMap;function CS(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(li(t.result)),o()},c=()=>{r(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&tg.set(n,t)}).catch(()=>{}),_u.set(e,t),e}function bS(t){if(Sc.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),o()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Sc.set(t,e)}let Ac={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Sc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ng.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IS(t){Ac=t(Ac)}function TS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ic(this),e,...n);return ng.set(r,e.sort?e.sort():[e]),li(r)}:ES().includes(t)?function(...e){return t.apply(ic(this),e),li(tg.get(this))}:function(...e){return li(t.apply(ic(this),e))}}function xS(t){return typeof t=="function"?TS(t):(t instanceof IDBTransaction&&bS(t),yS(t,wS())?new Proxy(t,Ac):t)}function li(t){if(t instanceof IDBRequest)return CS(t);if(nc.has(t))return nc.get(t);const e=xS(t);return e!==t&&(nc.set(t,e),_u.set(e,t)),e}const ic=t=>_u.get(t);function SS(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(t,e),f=li(c);return r&&c.addEventListener("upgradeneeded",h=>{r(li(c.result),h.oldVersion,h.newVersion,li(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),f.then(h=>{a&&h.addEventListener("close",()=>a()),o&&h.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),f}const AS=["get","getKey","getAll","getAllKeys","count"],RS=["put","add","delete","clear"],rc=new Map;function c_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rc.get(e))return rc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=RS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||AS.includes(n)))return;const a=async function(c,...f){const h=this.transaction(c,o?"readwrite":"readonly");let _=h.store;return r&&(_=_.index(f.shift())),(await Promise.all([_[n](...f),o&&h.done]))[0]};return rc.set(e,a),a}IS(t=>({...t,get:(e,n,r)=>c_(e,n)||t.get(e,n,r),has:(e,n)=>!!c_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rc="@firebase/app",u_="0.9.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new eg("@firebase/app"),OS="@firebase/app-compat",DS="@firebase/analytics-compat",MS="@firebase/analytics",LS="@firebase/app-check-compat",FS="@firebase/app-check",kS="@firebase/auth",BS="@firebase/auth-compat",WS="@firebase/database",US="@firebase/database-compat",HS="@firebase/functions",$S="@firebase/functions-compat",zS="@firebase/installations",KS="@firebase/installations-compat",qS="@firebase/messaging",GS="@firebase/messaging-compat",VS="@firebase/performance",YS="@firebase/performance-compat",QS="@firebase/remote-config",XS="@firebase/remote-config-compat",jS="@firebase/storage",JS="@firebase/storage-compat",ZS="@firebase/firestore",e1="@firebase/firestore-compat",t1="firebase",n1="9.22.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="[DEFAULT]",i1={[Rc]:"fire-core",[OS]:"fire-core-compat",[MS]:"fire-analytics",[DS]:"fire-analytics-compat",[FS]:"fire-app-check",[LS]:"fire-app-check-compat",[kS]:"fire-auth",[BS]:"fire-auth-compat",[WS]:"fire-rtdb",[US]:"fire-rtdb-compat",[HS]:"fire-fn",[$S]:"fire-fn-compat",[zS]:"fire-iid",[KS]:"fire-iid-compat",[qS]:"fire-fcm",[GS]:"fire-fcm-compat",[VS]:"fire-perf",[YS]:"fire-perf-compat",[QS]:"fire-rc",[XS]:"fire-rc-compat",[jS]:"fire-gcs",[JS]:"fire-gcs-compat",[ZS]:"fire-fst",[e1]:"fire-fst-compat","fire-js":"fire-js",[t1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new Map,Pc=new Map;function r1(t,e){try{t.container.addComponent(e)}catch(n){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zo(t){const e=t.name;if(Pc.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;Pc.set(e,t);for(const n of Jo.values())r1(n,t);return!0}function s1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ai=new Jp("app","Firebase",o1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=n1;function ig(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Nc,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw ai.create("bad-app-name",{appName:String(o)});if(n||(n=Qp()),!n)throw ai.create("no-options");const a=Jo.get(o);if(a){if(xc(n,a.options)&&xc(r,a.config))return a;throw ai.create("duplicate-app",{appName:o})}const c=new _S(o);for(const h of Pc.values())c.addComponent(h);const f=new l1(n,r,c);return Jo.set(o,f),f}function c1(t=Nc){const e=Jo.get(t);if(!e&&t===Nc&&Qp())return ig();if(!e)throw ai.create("no-app",{appName:t});return e}function wr(t,e,n){var r;let o=(r=i1[t])!==null&&r!==void 0?r:t;n&&(o+=`-${n}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${o}" with version "${e}":`];a&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(f.join(" "));return}Zo(new Is(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebase-heartbeat-database",f1=1,Ts="firebase-heartbeat-store";let sc=null;function rg(){return sc||(sc=SS(u1,f1,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ts)}}}).catch(t=>{throw ai.create("idb-open",{originalErrorMessage:t.message})})),sc}async function h1(t){try{return await(await rg()).transaction(Ts).objectStore(Ts).get(sg(t))}catch(e){if(e instanceof Ms)Bi.warn(e.message);else{const n=ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bi.warn(n.message)}}}async function f_(t,e){try{const r=(await rg()).transaction(Ts,"readwrite");await r.objectStore(Ts).put(e,sg(t)),await r.done}catch(n){if(n instanceof Ms)Bi.warn(n.message);else{const r=ai.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bi.warn(r.message)}}}function sg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1024,_1=30*24*60*60*1e3;class p1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new m1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=h_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=_1}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=h_(),{heartbeatsToSend:n,unsentEntries:r}=g1(this._heartbeatsCache.heartbeats),o=Xo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function h_(){return new Date().toISOString().substring(0,10)}function g1(t,e=d1){const n=[];let r=t.slice();for(const o of t){const a=n.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),d_(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),d_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class m1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tS()?nS().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await h1(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return f_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return f_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function d_(t){return Xo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){Zo(new Is("platform-logger",e=>new NS(e),"PRIVATE")),Zo(new Is("heartbeat",e=>new p1(e),"PRIVATE")),wr(Rc,u_,t),wr(Rc,u_,"esm2017"),wr("fire-js","")}v1("");var y1="firebase",w1="9.22.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(y1,w1,"app");const __="@firebase/database",p_="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og="";function E1(t){og=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),et(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:bs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return wn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new C1(e)}}catch{}return new b1},Pi=lg("localStorage"),Oc=lg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new eg("@firebase/database"),I1=function(){let t=1;return function(){return t++}}(),ag=function(t){const e=uS(t),n=new cS;n.update(e);const r=n.digest();return du.encodeByteArray(r)},Ls=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ls.apply(null,r):typeof r=="object"?e+=et(r):e+=r,e+=" "}return e};let Li=null,g_=!0;const T1=function(t,e){B(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Er.logLevel=Pe.VERBOSE,Li=Er.log.bind(Er),e&&Oc.set("logging_enabled",!0)):typeof t=="function"?Li=t:(Li=null,Oc.remove("logging_enabled"))},ct=function(...t){if(g_===!0&&(g_=!1,Li===null&&Oc.get("logging_enabled")===!0&&T1(!0)),Li){const e=Ls.apply(null,t);Li(e)}},Fs=function(t){return function(...e){ct(t,...e)}},Dc=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ls(...t);Er.error(e)},Wn=function(...t){const e=`FIREBASE FATAL ERROR: ${Ls(...t)}`;throw Er.error(e),new Error(e)},At=function(...t){const e="FIREBASE WARNING: "+Ls(...t);Er.warn(e)},x1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&At("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},pu=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S1=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Wi="[MIN_NAME]",Un="[MAX_NAME]",Fr=function(t,e){if(t===e)return 0;if(t===Wi||e===Un)return-1;if(e===Wi||t===Un)return 1;{const n=m_(t),r=m_(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},A1=function(t,e){return t===e?0:t<e?-1:1},rs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+et(e))},gu=function(t){if(typeof t!="object"||t===null)return et(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=et(e[r]),n+=":",n+=gu(t[e[r]]);return n+="}",n},cg=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let o=0;o<n;o+=e)o+e>n?r.push(t.substring(o,n)):r.push(t.substring(o,o+e));return r};function Nt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ug=function(t){B(!pu(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let o,a,c,f,h;t===0?(a=0,c=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(t)/Math.LN2),r),a=f+r,c=Math.round(t*Math.pow(2,n-f)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-r-n))));const _=[];for(h=n;h;h-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(h=e;h;h-=1)_.push(a%2?1:0),a=Math.floor(a/2);_.push(o?1:0),_.reverse();const y=_.join("");let v="";for(h=0;h<64;h+=8){let C=parseInt(y.substr(h,8),2).toString(16);C.length===1&&(C="0"+C),v=v+C}return v.toLowerCase()},R1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},N1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function P1(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const O1=new RegExp("^-?(0*)\\d{1,10}$"),D1=-2147483648,M1=2147483647,m_=function(t){if(O1.test(t)){const e=Number(t);if(e>=D1&&e<=M1)return e}return null},kr=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw At("Exception was thrown by user callback.",n),e},Math.floor(0))}},L1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},hs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){At(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',At(e)}}class Cr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Cr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu="5",fg="v",hg="s",dg="r",_g="f",pg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gg="ls",mg="p",Mc="ac",vg="websocket",yg="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n,r,o,a=!1,c="",f=!1,h=!1){this.secure=n,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Pi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function B1(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Eg(t,e,n){B(typeof e=="string","typeof type must == string"),B(typeof n=="object","typeof params must == object");let r;if(e===vg)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===yg)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);B1(t)&&(n.ns=t.namespace);const o=[];return Nt(n,(a,c)=>{o.push(a+"="+c)}),r+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.counters_={}}incrementCounter(e,n=1){wn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Kx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc={},lc={};function vu(t){const e=t.toString();return oc[e]||(oc[e]=new W1),oc[e]}function U1(t,e){const n=t.toString();return lc[n]||(lc[n]=e()),lc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&kr(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="start",$1="close",z1="pLPCommand",K1="pRTLPCB",Cg="id",bg="pw",Ig="ser",q1="cb",G1="seg",V1="ts",Y1="d",Q1="dframe",Tg=1870,xg=30,X1=Tg-xg,j1=25e3,J1=3e4;class pr{constructor(e,n,r,o,a,c,f){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=o,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fs(e),this.stats_=vu(n),this.urlFn=h=>(this.appCheckToken&&(h[Mc]=this.appCheckToken),Eg(n,yg,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new H1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(J1)),S1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yu((...a)=>{const[c,f,h,_,y]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===v_)this.id=f,this.password=h;else if(c===$1)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={};r[v_]="t",r[Ig]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[q1]=this.scriptTagHolder.uniqueCallbackIdentifier),r[fg]=mu,this.transportSessionId&&(r[hg]=this.transportSessionId),this.lastSessionId&&(r[gg]=this.lastSessionId),this.applicationId&&(r[mg]=this.applicationId),this.appCheckToken&&(r[Mc]=this.appCheckToken),typeof location<"u"&&location.hostname&&pg.test(location.hostname)&&(r[dg]=_g);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pr.forceAllow_=!0}static forceDisallow(){pr.forceDisallow_=!0}static isAvailable(){return pr.forceAllow_?!0:!pr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!R1()&&!N1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Gp(n),o=cg(r,X1);for(let a=0;a<o.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Q1]="t",r[Cg]=e,r[bg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=et(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class yu{constructor(e,n,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=I1(),window[z1+this.uniqueCallbackIdentifier]=e,window[K1+this.uniqueCallbackIdentifier]=n,this.myIFrame=yu.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){ct("frame writing exception"),f.stack&&ct(f.stack),ct(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ct("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Cg]=this.myID,e[bg]=this.myPW,e[Ig]=this.currentSerial;let n=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+xg+r.length<=Tg;){const c=this.pendingSegs.shift();r=r+"&"+G1+o+"="+c.seg+"&"+V1+o+"="+c.ts+"&"+Y1+o+"="+c.d,o++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(r,Math.floor(j1)),a=()=>{clearTimeout(o),r()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ct("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=16384,eA=45e3;let el=null;typeof MozWebSocket<"u"?el=MozWebSocket:typeof WebSocket<"u"&&(el=WebSocket);class sn{constructor(e,n,r,o,a,c,f){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fs(this.connId),this.stats_=vu(n),this.connURL=sn.connectionURL_(n,c,f,o,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,o,a){const c={};return c[fg]=mu,typeof location<"u"&&location.hostname&&pg.test(location.hostname)&&(c[dg]=_g),n&&(c[hg]=n),r&&(c[gg]=r),o&&(c[Mc]=o),a&&(c[mg]=a),Eg(e,vg,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pi.set("previous_websocket_failure",!0);try{let r;jp(),this.mySock=new el(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){sn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&el!==null&&!sn.forceDisallow_}static previouslyFailed(){return Pi.isInMemoryStorage||Pi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Pi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=bs(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(B(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=cg(n,Z1);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(eA))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}sn.responsesRequiredToBeHealthy=2;sn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[pr,sn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=sn&&sn.isAvailable();let r=n&&!sn.previouslyFailed();if(e.webSocketOnly&&(n||At("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[sn];else{const o=this.transports_=[];for(const a of xs.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a);xs.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}xs.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=6e4,nA=5e3,iA=10*1024,rA=100*1024,ac="t",y_="d",sA="s",w_="r",oA="e",E_="o",C_="a",b_="n",I_="p",lA="h";class aA{constructor(e,n,r,o,a,c,f,h,_,y){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=h,this.onKill_=_,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fs("c:"+this.id+":"),this.transportManager_=new xs(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=hs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rA?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>iA?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ac in e){const n=e[ac];n===C_?this.upgradeIfSecondaryHealthy_():n===w_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===E_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=rs("t",e),r=rs("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:I_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:C_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:b_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=rs("t",e),r=rs("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=rs(ac,e);if(y_ in e){const r=e[y_];if(n===lA){const o=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===b_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===sA?this.onConnectionShutdown_(r):n===w_?this.onReset_(r):n===oA?Dc("Server Error: "+r):n===E_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),mu!==r&&At("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),hs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tA))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nA))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:I_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{put(e,n,r,o){}merge(e,n,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.allowedEvents_=e,this.listeners_={},B(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const o=this.getInitialEvent(e);o&&n.apply(r,o)}off(e,n,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let a=0;a<o.length;a++)if(o[a].callback===n&&(!r||r===o[a].context)){o.splice(a,1);return}}validateEventType_(e){B(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends Ag{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Xp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new tl}getInitialEvent(e){return B(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=32,x_=768;class Ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function be(){return new Ae("")}function ue(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function hi(t){return t.pieces_.length-t.pieceNum_}function Oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ae(t.pieces_,e)}function Rg(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function cA(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ng(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Pg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ae(e,0)}function Ye(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&n.push(r[o])}return new Ae(n,0)}function fe(t){return t.pieceNum_>=t.pieces_.length}function xt(t,e){const n=ue(t),r=ue(e);if(n===null)return e;if(n===r)return xt(Oe(t),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wu(t,e){if(hi(t)!==hi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ln(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(hi(t)>hi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class uA{constructor(e,n){this.errorPrefix_=n,this.parts_=Ng(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=xl(this.parts_[r]);Og(this)}}function fA(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=xl(e),Og(t)}function hA(t){const e=t.parts_.pop();t.byteLength_-=xl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Og(t){if(t.byteLength_>x_)throw new Error(t.errorPrefix_+"has a key path longer than "+x_+" bytes ("+t.byteLength_+").");if(t.parts_.length>T_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+T_+") or object contains a cycle "+Ai(t))}function Ai(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends Ag{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Eu}getInitialEvent(e){return B(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=1e3,dA=60*5*1e3,S_=30*1e3,_A=1.3,pA=3e4,gA="server_kill",A_=3;class kn extends Sg{constructor(e,n,r,o,a,c,f,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=h,this.id=kn.nextPersistentConnectionId_++,this.log_=Fs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ss,this.maxReconnectDelay_=dA,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!jp())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Eu.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&tl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const o=++this.requestNumber_,a={r:o,a:e,b:n};this.log_(et(a)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();const n=new Il,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const f=c.d;c.s==="ok"?n.resolve(f):n.reject(f)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,r,o){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:n,query:e,tag:r};this.listens.get(c).set(a,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+r+" for "+o);const a={p:r},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,f=>{const h=f.d,_=f.s;kn.warnOnListenWarnings_(h,n),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",f),_!=="ok"&&this.removeListen_(r,o),e.onComplete&&e.onComplete(_,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&wn(e,"w")){const r=Ar(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();At(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||lS(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=S_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=oS(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,o=>{const a=o.s,c=o.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),B(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,n)}sendUnlisten_(e,n,r,o){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";o&&(a.q=r,a.t=o),this.sendRequest(c,a)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,o){const a={p:n,d:r};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(e,n,r,o){this.putInternal("p",e,n,r,o)}merge(e,n,r,o){this.putInternal("m",e,n,r,o)}putInternal(e,n,r,o,a){this.initConnection_();const c={p:n,d:r};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:o}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+et(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Dc("Unrecognized action received from server: "+et(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ss,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ss,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pA&&(this.reconnectDelay_=ss),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_A)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+kn.nextConnectionId_++,a=this.lastSessionId;let c=!1,f=null;const h=function(){f?f.close():(c=!0,r())},_=function(v){B(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(v)};this.realtime_={close:h,sendRequest:_};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,C]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);c?ct("getToken() completed but was canceled"):(ct("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=C&&C.token,f=new aA(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,N=>{At(N+" ("+this.repoInfo_.toString()+")"),this.interrupt(gA)},a))}catch(v){this.log_("Failed to get token: "+v),c||(this.repoInfo_.nodeAdmin&&At(v),h())}}}interrupt(e){ct("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ct("Resuming connection for reason: "+e),delete this.interruptReasons_[e],s_(this.interruptReasons_)&&(this.reconnectDelay_=ss,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(a=>gu(a)).join("$"):r="default";const o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const r=new Ae(e).toString();let o;if(this.listens.has(r)){const a=this.listens.get(r);o=a.get(n),a.delete(n),a.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,n){ct("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=A_&&(this.reconnectDelay_=S_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ct("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=A_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+og.replace(/\./g,"-")]=1,Xp()?e["framework.cordova"]=1:eS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=tl.getInstance().currentlyOnline();return s_(this.interruptReasons_)&&e}}kn.nextPersistentConnectionId_=0;kn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new he(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new he(Wi,e),o=new he(Wi,n);return this.compare(r,o)!==0}minPost(){return he.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko;class Dg extends Sl{static get __EMPTY_NODE(){return ko}static set __EMPTY_NODE(e){ko=e}compare(e,n){return Fr(e.name,n.name)}isDefinedOn(e){throw Mr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return he.MIN}maxPost(){return new he(Un,ko)}makePost(e,n){return B(typeof e=="string","KeyIndex indexValue must always be a string."),new he(e,ko)}toString(){return".key"}}const ci=new Dg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n,r,o,a=null){this.isReverse_=o,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?r(e.key,n):1,o&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,o,a){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=o??St.EMPTY_NODE,this.right=a??St.EMPTY_NODE}copy(e,n,r,o,a){return new Ze(e??this.key,n??this.value,r??this.color,o??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const a=r(e,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(e,n,r),null):a===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return St.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,o;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return St.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ze.RED=!0;Ze.BLACK=!1;class mA{copy(e,n,r,o,a){return this}insert(e,n,r){return new Ze(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class St{constructor(e,n=St.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new St(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ze.BLACK,null,null))}remove(e){return new St(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ze.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,o=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Bo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Bo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Bo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Bo(this.root_,null,this.comparator_,!0,e)}}St.EMPTY_NODE=new mA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e){return Fr(t.name,e.name)}function Cu(t,e){return Fr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc;function yA(t){Lc=t}const Mg=function(t){return typeof t=="number"?"number:"+ug(t):"string:"+t},Lg=function(t){if(t.isLeafNode()){const e=t.val();B(typeof e=="string"||typeof e=="number"||typeof e=="object"&&wn(e,".sv"),"Priority must be a string or number.")}else B(t===Lc||t.isEmpty(),"priority of unexpected type.");B(t===Lc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R_;class Je{constructor(e,n=Je.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Lg(this.priorityNode_)}static set __childrenNodeConstructor(e){R_=e}static get __childrenNodeConstructor(){return R_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Je(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Je.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return fe(e)?this:ue(e)===".priority"?this.priorityNode_:Je.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Je.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ue(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(B(r!==".priority"||hi(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Je.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Mg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ug(this.value_):e+=this.value_,this.lazyHash_=ag(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Je.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Je.__childrenNodeConstructor?-1:(B(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,o=Je.VALUE_TYPE_ORDER.indexOf(n),a=Je.VALUE_TYPE_ORDER.indexOf(r);return B(o>=0,"Unknown leaf type: "+n),B(a>=0,"Unknown leaf type: "+r),o===a?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Je.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fg,kg;function wA(t){Fg=t}function EA(t){kg=t}class CA extends Sl{compare(e,n){const r=e.node.getPriority(),o=n.node.getPriority(),a=r.compareTo(o);return a===0?Fr(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return he.MIN}maxPost(){return new he(Un,new Je("[PRIORITY-POST]",kg))}makePost(e,n){const r=Fg(e);return new he(n,new Je("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ue=new CA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=Math.log(2);class IA{constructor(e){const n=a=>parseInt(Math.log(a)/bA,10),r=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=r(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nl=function(t,e,n,r){t.sort(e);const o=function(h,_){const y=_-h;let v,C;if(y===0)return null;if(y===1)return v=t[h],C=n?n(v):v,new Ze(C,v.node,Ze.BLACK,null,null);{const N=parseInt(y/2,10)+h,U=o(h,N),K=o(N+1,_);return v=t[N],C=n?n(v):v,new Ze(C,v.node,Ze.BLACK,U,K)}},a=function(h){let _=null,y=null,v=t.length;const C=function(U,K){const Z=v-U,we=v;v-=U;const Le=o(Z+1,we),Ee=t[Z],te=n?n(Ee):Ee;N(new Ze(te,Ee.node,K,null,Le))},N=function(U){_?(_.left=U,_=U):(y=U,_=U)};for(let U=0;U<h.count;++U){const K=h.nextBitIsOne(),Z=Math.pow(2,h.count-(U+1));K?C(Z,Ze.BLACK):(C(Z,Ze.BLACK),C(Z,Ze.RED))}return y},c=new IA(t.length),f=a(c);return new St(r||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc;const dr={};class Ln{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return B(dr&&Ue,"ChildrenNode.ts has not been loaded"),cc=cc||new Ln({".priority":dr},{".priority":Ue}),cc}get(e){const n=Ar(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof St?n:null}hasIndex(e){return wn(this.indexSet_,e.toString())}addIndex(e,n){B(e!==ci,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const a=n.getIterator(he.Wrap);let c=a.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=a.getNext();let f;o?f=nl(r,e.getCompare()):f=dr;const h=e.toString(),_=Object.assign({},this.indexSet_);_[h]=e;const y=Object.assign({},this.indexes_);return y[h]=f,new Ln(y,_)}addToIndexes(e,n){const r=jo(this.indexes_,(o,a)=>{const c=Ar(this.indexSet_,a);if(B(c,"Missing index implementation for "+a),o===dr)if(c.isDefinedOn(e.node)){const f=[],h=n.getIterator(he.Wrap);let _=h.getNext();for(;_;)_.name!==e.name&&f.push(_),_=h.getNext();return f.push(e),nl(f,c.getCompare())}else return dr;else{const f=n.get(e.name);let h=o;return f&&(h=h.remove(new he(e.name,f))),h.insert(e,e.node)}});return new Ln(r,this.indexSet_)}removeFromIndexes(e,n){const r=jo(this.indexes_,o=>{if(o===dr)return o;{const a=n.get(e.name);return a?o.remove(new he(e.name,a)):o}});return new Ln(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let os;class ee{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Lg(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return os||(os=new ee(new St(Cu),null,Ln.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||os}updatePriority(e){return this.children_.isEmpty()?this:new ee(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?os:n}}getChild(e){const n=ue(e);return n===null?this:this.getImmediateChild(n).getChild(Oe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(B(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new he(e,n);let o,a;n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));const c=o.isEmpty()?os:this.priorityNode_;return new ee(o,c,a)}}updateChild(e,n){const r=ue(e);if(r===null)return n;{B(ue(e)!==".priority"||hi(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Oe(e),n);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,o=0,a=!0;if(this.forEachChild(Ue,(c,f)=>{n[c]=f.val(e),r++,a&&ee.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):a=!1}),!e&&a&&o<2*r){const c=[];for(const f in n)c[f]=n[f];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Mg(this.getPriority().val())+":"),this.forEachChild(Ue,(n,r)=>{const o=r.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":ag(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const o=this.resolveIndex_(r);if(o){const a=o.getPredecessorKey(new he(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new he(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new he(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,he.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,he.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)>0;)o.getNext(),a=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ks?-1:0}withIndex(e){if(e===ci||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ee(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ci||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ue),o=n.getIterator(Ue);let a=r.getNext(),c=o.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=r.getNext(),c=o.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===ci?null:this.indexMap_.get(e.toString())}}ee.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class TA extends ee{constructor(){super(new St(Cu),ee.EMPTY_NODE,Ln.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ee.EMPTY_NODE}isEmpty(){return!1}}const ks=new TA;Object.defineProperties(he,{MIN:{value:new he(Wi,ee.EMPTY_NODE)},MAX:{value:new he(Un,ks)}});Dg.__EMPTY_NODE=ee.EMPTY_NODE;Je.__childrenNodeConstructor=ee;yA(ks);EA(ks);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=!0;function ot(t,e=null){if(t===null)return ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),B(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Je(n,ot(e))}if(!(t instanceof Array)&&xA){const n=[];let r=!1;if(Nt(t,(c,f)=>{if(c.substring(0,1)!=="."){const h=ot(f);h.isEmpty()||(r=r||!h.getPriority().isEmpty(),n.push(new he(c,h)))}}),n.length===0)return ee.EMPTY_NODE;const a=nl(n,vA,c=>c.name,Cu);if(r){const c=nl(n,Ue.getCompare());return new ee(a,ot(e),new Ln({".priority":c},{".priority":Ue}))}else return new ee(a,ot(e),Ln.Default)}else{let n=ee.EMPTY_NODE;return Nt(t,(r,o)=>{if(wn(t,r)&&r.substring(0,1)!=="."){const a=ot(o);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(r,a))}}),n.updatePriority(ot(e))}}wA(ot);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Sl{constructor(e){super(),this.indexPath_=e,B(!fe(e)&&ue(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),o=this.extractChild(n.node),a=r.compareTo(o);return a===0?Fr(e.name,n.name):a}makePost(e,n){const r=ot(e),o=ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new he(n,o)}maxPost(){const e=ee.EMPTY_NODE.updateChild(this.indexPath_,ks);return new he(Un,e)}toString(){return Ng(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA extends Sl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Fr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return he.MIN}maxPost(){return he.MAX}makePost(e,n){const r=ot(e);return new he(n,r)}toString(){return".value"}}const Bg=new SA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(t){return{type:"value",snapshotNode:t}}function Rr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ss(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function As(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function AA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.index_=e}updateChild(e,n,r,o,a,c){B(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(n);return f.getChild(o).equals(r.getChild(o))&&f.isEmpty()===r.isEmpty()||(c!=null&&(r.isEmpty()?e.hasChild(n)?c.trackChildChange(Ss(n,f)):B(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Rr(n,r)):c.trackChildChange(As(n,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ue,(o,a)=>{n.hasChild(o)||r.trackChildChange(Ss(o,a))}),n.isLeafNode()||n.forEachChild(Ue,(o,a)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(a)||r.trackChildChange(As(o,a,c))}else r.trackChildChange(Rr(o,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.indexedFilter_=new Iu(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Rs.getStartPost_(e),this.endPost_=Rs.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,o,a,c){return this.matches(new he(n,r))||(r=ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,o,a,c)}updateFullNode(e,n,r){n.isLeafNode()&&(n=ee.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(ee.EMPTY_NODE);const a=this;return n.forEachChild(Ue,(c,f)=>{a.matches(new he(c,f))||(o=o.updateImmediateChild(c,ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Rs(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,o,a,c){return this.rangedFilter_.matches(new he(n,r))||(r=ee.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,o,a,c):this.fullLimitUpdateChild_(e,n,r,a,c)}updateFullNode(e,n,r){let o;if(n.isLeafNode()||n.isEmpty())o=ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=ee.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))o=o.updateImmediateChild(f.name,f.node),c++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(ee.EMPTY_NODE);let a;this.reverse_?a=o.getReverseIterator(this.index_):a=o.getIterator(this.index_);let c=0;for(;a.hasNext();){const f=a.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:o=o.updateImmediateChild(f.name,ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,o,a){let c;if(this.reverse_){const v=this.index_.getCompare();c=(C,N)=>v(N,C)}else c=this.index_.getCompare();const f=e;B(f.numChildren()===this.limit_,"");const h=new he(n,r),_=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),y=this.rangedFilter_.matches(h);if(f.hasChild(n)){const v=f.getImmediateChild(n);let C=o.getChildAfterChild(this.index_,_,this.reverse_);for(;C!=null&&(C.name===n||f.hasChild(C.name));)C=o.getChildAfterChild(this.index_,C,this.reverse_);const N=C==null?1:c(C,h);if(y&&!r.isEmpty()&&N>=0)return a!=null&&a.trackChildChange(As(n,r,v)),f.updateImmediateChild(n,r);{a!=null&&a.trackChildChange(Ss(n,v));const K=f.updateImmediateChild(n,ee.EMPTY_NODE);return C!=null&&this.rangedFilter_.matches(C)?(a!=null&&a.trackChildChange(Rr(C.name,C.node)),K.updateImmediateChild(C.name,C.node)):K}}else return r.isEmpty()?e:y&&c(_,h)>=0?(a!=null&&(a.trackChildChange(Ss(_.name,_.node)),a.trackChildChange(Rr(n,r))),f.updateImmediateChild(n,r).updateImmediateChild(_.name,ee.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ue}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wi}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Un}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ue}copy(){const e=new Tu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function NA(t){return t.loadsAllData()?new Iu(t.getIndex()):t.hasLimit()?new RA(t):new Rs(t)}function PA(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function N_(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function OA(t,e,n){let r;return t.index_===ci||n?r=N_(t,e,n):r=N_(t,e,Un),r.startAfterSet_=!0,r}function DA(t,e){const n=t.copy();return n.index_=e,n}function P_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ue?n="$priority":t.index_===Bg?n="$value":t.index_===ci?n="$key":(B(t.index_ instanceof bu,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=et(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=et(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+et(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=et(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+et(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function O_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ue&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends Sg{constructor(e,n,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=Fs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(B(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,o){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=il.getListenId_(e,r),f={};this.listens_[c]=f;const h=P_(e._queryParams);this.restRequest_(a+".json",h,(_,y)=>{let v=y;if(_===404&&(v=null,_=null),_===null&&this.onDataUpdate_(a,v,!1,r),Ar(this.listens_,c)===f){let C;_?_===401?C="permission_denied":C="rest_error:"+_:C="ok",o(C,null)}})}unlisten(e,n){const r=il.getListenId_(e,n);delete this.listens_[r]}get(e){const n=P_(e._queryParams),r=e._path.toString(),o=new Il;return this.restRequest_(r+".json",n,(a,c)=>{let f=c;a===404&&(f=null,a=null),a===null?(this.onDataUpdate_(r,f,!1,null),o.resolve(f)):o.reject(new Error(f))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,a])=>{o&&o.accessToken&&(n.auth=o.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+aS(n);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&f.readyState===4){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let h=null;if(f.status>=200&&f.status<300){try{h=bs(f.responseText)}catch{At("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,h)}else f.status!==401&&f.status!==404&&At("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(){return{value:null,children:new Map}}function Ug(t,e,n){if(fe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ue(e);t.children.has(r)||t.children.set(r,rl());const o=t.children.get(r);e=Oe(e),Ug(o,e,n)}}function Fc(t,e,n){t.value!==null?n(e,t.value):LA(t,(r,o)=>{const a=new Ae(e.toString()+"/"+r);Fc(o,a,n)})}function LA(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Nt(this.last_,(r,o)=>{n[r]=n[r]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=10*1e3,kA=30*1e3,BA=5*60*1e3;class WA{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new FA(e);const r=D_+(kA-D_)*Math.random();hs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Nt(e,(o,a)=>{a>0&&wn(this.statsToReport_,o)&&(n[o]=a,r=!0)}),r&&this.server_.reportStats(n),hs(this.reportStats_.bind(this),Math.floor(Math.random()*2*BA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(an||(an={}));function Hg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function xu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Su(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=an.ACK_USER_WRITE,this.source=Hg()}operationForChild(e){if(fe(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ae(e));return new sl(be(),n,this.revert)}}else return B(ue(this.path)===e,"operationForChild called for unrelated child."),new sl(Oe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.source=e,this.path=n,this.type=an.LISTEN_COMPLETE}operationForChild(e){return fe(this.path)?new Ns(this.source,be()):new Ns(this.source,Oe(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=an.OVERWRITE}operationForChild(e){return fe(this.path)?new Ui(this.source,be(),this.snap.getImmediateChild(e)):new Ui(this.source,Oe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=an.MERGE}operationForChild(e){if(fe(this.path)){const n=this.children.subtree(new Ae(e));return n.isEmpty()?null:n.value?new Ui(this.source,be(),n.value):new Ps(this.source,be(),n)}else return B(ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ps(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(fe(e))return this.isFullyInitialized()&&!this.filtered_;const n=ue(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function HA(t,e,n,r){const o=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(AA(c.childName,c.snapshotNode))}),ls(t,o,"child_removed",e,r,n),ls(t,o,"child_added",e,r,n),ls(t,o,"child_moved",a,r,n),ls(t,o,"child_changed",e,r,n),ls(t,o,"value",e,r,n),o}function ls(t,e,n,r,o,a){const c=r.filter(f=>f.type===n);c.sort((f,h)=>zA(t,f,h)),c.forEach(f=>{const h=$A(t,f,a);o.forEach(_=>{_.respondsTo(f.type)&&e.push(_.createEvent(h,t.query_))})})}function $A(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function zA(t,e,n){if(e.childName==null||n.childName==null)throw Mr("Should only compare child_ events.");const r=new he(e.childName,e.snapshotNode),o=new he(n.childName,n.snapshotNode);return t.index_.compare(r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t,e){return{eventCache:t,serverCache:e}}function ds(t,e,n,r){return Al(new Hi(e,n,r),t.serverCache)}function $g(t,e,n,r){return Al(t.eventCache,new Hi(e,n,r))}function kc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function $i(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc;const KA=()=>(uc||(uc=new St(A1)),uc);class Me{constructor(e,n=KA()){this.value=e,this.children=n}static fromObject(e){let n=new Me(null);return Nt(e,(r,o)=>{n=n.set(new Ae(r),o)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:be(),value:this.value};if(fe(e))return null;{const r=ue(e),o=this.children.get(r);if(o!==null){const a=o.findRootMostMatchingPathAndValue(Oe(e),n);return a!=null?{path:Ye(new Ae(r),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(fe(e))return this;{const n=ue(e),r=this.children.get(n);return r!==null?r.subtree(Oe(e)):new Me(null)}}set(e,n){if(fe(e))return new Me(n,this.children);{const r=ue(e),a=(this.children.get(r)||new Me(null)).set(Oe(e),n),c=this.children.insert(r,a);return new Me(this.value,c)}}remove(e){if(fe(e))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const n=ue(e),r=this.children.get(n);if(r){const o=r.remove(Oe(e));let a;return o.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,o),this.value===null&&a.isEmpty()?new Me(null):new Me(this.value,a)}else return this}}get(e){if(fe(e))return this.value;{const n=ue(e),r=this.children.get(n);return r?r.get(Oe(e)):null}}setTree(e,n){if(fe(e))return n;{const r=ue(e),a=(this.children.get(r)||new Me(null)).setTree(Oe(e),n);let c;return a.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,a),new Me(this.value,c)}}fold(e){return this.fold_(be(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((o,a)=>{r[o]=a.fold_(Ye(e,o),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,be(),n)}findOnPath_(e,n,r){const o=this.value?r(n,this.value):!1;if(o)return o;if(fe(e))return null;{const a=ue(e),c=this.children.get(a);return c?c.findOnPath_(Oe(e),Ye(n,a),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,be(),n)}foreachOnPath_(e,n,r){if(fe(e))return this;{this.value&&r(n,this.value);const o=ue(e),a=this.children.get(o);return a?a.foreachOnPath_(Oe(e),Ye(n,o),r):new Me(null)}}foreach(e){this.foreach_(be(),e)}foreach_(e,n){this.children.inorderTraversal((r,o)=>{o.foreach_(Ye(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.writeTree_=e}static empty(){return new fn(new Me(null))}}function _s(t,e,n){if(fe(e))return new fn(new Me(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const o=r.path;let a=r.value;const c=xt(o,e);return a=a.updateChild(c,n),new fn(t.writeTree_.set(o,a))}else{const o=new Me(n),a=t.writeTree_.setTree(e,o);return new fn(a)}}}function M_(t,e,n){let r=t;return Nt(n,(o,a)=>{r=_s(r,Ye(e,o),a)}),r}function L_(t,e){if(fe(e))return fn.empty();{const n=t.writeTree_.setTree(e,new Me(null));return new fn(n)}}function Bc(t,e){return Ki(t,e)!=null}function Ki(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(xt(n.path,e)):null}function F_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ue,(r,o)=>{e.push(new he(r,o))}):t.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&e.push(new he(r,o.value))}),e}function ui(t,e){if(fe(e))return t;{const n=Ki(t,e);return n!=null?new fn(new Me(n)):new fn(t.writeTree_.subtree(e))}}function Wc(t){return t.writeTree_.isEmpty()}function Nr(t,e){return zg(be(),t.writeTree_,e)}function zg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((o,a)=>{o===".priority"?(B(a.value!==null,"Priority writes must always be leaf nodes"),r=a.value):n=zg(Ye(t,o),a,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ye(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e){return Vg(e,t)}function qA(t,e,n,r,o){B(r>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=_s(t.visibleWrites,e,n)),t.lastWriteId=r}function GA(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function VA(t,e){const n=t.allWrites.findIndex(f=>f.writeId===e);B(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let o=r.visible,a=!1,c=t.allWrites.length-1;for(;o&&c>=0;){const f=t.allWrites[c];f.visible&&(c>=n&&YA(f,r.path)?o=!1:ln(r.path,f.path)&&(a=!0)),c--}if(o){if(a)return QA(t),!0;if(r.snap)t.visibleWrites=L_(t.visibleWrites,r.path);else{const f=r.children;Nt(f,h=>{t.visibleWrites=L_(t.visibleWrites,Ye(r.path,h))})}return!0}else return!1}function YA(t,e){if(t.snap)return ln(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ln(Ye(t.path,n),e))return!0;return!1}function QA(t){t.visibleWrites=Kg(t.allWrites,XA,be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function XA(t){return t.visible}function Kg(t,e,n){let r=fn.empty();for(let o=0;o<t.length;++o){const a=t[o];if(e(a)){const c=a.path;let f;if(a.snap)ln(n,c)?(f=xt(n,c),r=_s(r,f,a.snap)):ln(c,n)&&(f=xt(c,n),r=_s(r,be(),a.snap.getChild(f)));else if(a.children){if(ln(n,c))f=xt(n,c),r=M_(r,f,a.children);else if(ln(c,n))if(f=xt(c,n),fe(f))r=M_(r,be(),a.children);else{const h=Ar(a.children,ue(f));if(h){const _=h.getChild(Oe(f));r=_s(r,be(),_)}}}else throw Mr("WriteRecord should have .snap or .children")}}return r}function qg(t,e,n,r,o){if(!r&&!o){const a=Ki(t.visibleWrites,e);if(a!=null)return a;{const c=ui(t.visibleWrites,e);if(Wc(c))return n;if(n==null&&!Bc(c,be()))return null;{const f=n||ee.EMPTY_NODE;return Nr(c,f)}}}else{const a=ui(t.visibleWrites,e);if(!o&&Wc(a))return n;if(!o&&n==null&&!Bc(a,be()))return null;{const c=function(_){return(_.visible||o)&&(!r||!~r.indexOf(_.writeId))&&(ln(_.path,e)||ln(e,_.path))},f=Kg(t.allWrites,c,e),h=n||ee.EMPTY_NODE;return Nr(f,h)}}}function jA(t,e,n){let r=ee.EMPTY_NODE;const o=Ki(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Ue,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(n){const a=ui(t.visibleWrites,e);return n.forEachChild(Ue,(c,f)=>{const h=Nr(ui(a,new Ae(c)),f);r=r.updateImmediateChild(c,h)}),F_(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{const a=ui(t.visibleWrites,e);return F_(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function JA(t,e,n,r,o){B(r||o,"Either existingEventSnap or existingServerSnap must exist");const a=Ye(e,n);if(Bc(t.visibleWrites,a))return null;{const c=ui(t.visibleWrites,a);return Wc(c)?o.getChild(n):Nr(c,o.getChild(n))}}function ZA(t,e,n,r){const o=Ye(e,n),a=Ki(t.visibleWrites,o);if(a!=null)return a;if(r.isCompleteForChild(n)){const c=ui(t.visibleWrites,o);return Nr(c,r.getNode().getImmediateChild(n))}else return null}function eR(t,e){return Ki(t.visibleWrites,e)}function tR(t,e,n,r,o,a,c){let f;const h=ui(t.visibleWrites,e),_=Ki(h,be());if(_!=null)f=_;else if(n!=null)f=Nr(h,n);else return[];if(f=f.withIndex(c),!f.isEmpty()&&!f.isLeafNode()){const y=[],v=c.getCompare(),C=a?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let N=C.getNext();for(;N&&y.length<o;)v(N,r)!==0&&y.push(N),N=C.getNext();return y}else return[]}function nR(){return{visibleWrites:fn.empty(),allWrites:[],lastWriteId:-1}}function ol(t,e,n,r){return qg(t.writeTree,t.treePath,e,n,r)}function Ru(t,e){return jA(t.writeTree,t.treePath,e)}function k_(t,e,n,r){return JA(t.writeTree,t.treePath,e,n,r)}function ll(t,e){return eR(t.writeTree,Ye(t.treePath,e))}function iR(t,e,n,r,o,a){return tR(t.writeTree,t.treePath,e,n,r,o,a)}function Nu(t,e,n){return ZA(t.writeTree,t.treePath,e,n)}function Gg(t,e){return Vg(Ye(t.treePath,e),t.writeTree)}function Vg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;B(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),B(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const a=o.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(r,As(r,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(r,Ss(r,o.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(r,Rr(r,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(r,As(r,e.snapshotNode,o.oldSnap));else throw Mr("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Yg=new sR;class Pu{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Hi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Nu(this.writes_,e,r)}}getChildAfterChild(e,n,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:$i(this.viewCache_),a=iR(this.writes_,o,n,1,r,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){return{filter:t}}function lR(t,e){B(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),B(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function aR(t,e,n,r,o){const a=new rR;let c,f;if(n.type===an.OVERWRITE){const _=n;_.source.fromUser?c=Uc(t,e,_.path,_.snap,r,o,a):(B(_.source.fromServer,"Unknown source."),f=_.source.tagged||e.serverCache.isFiltered()&&!fe(_.path),c=al(t,e,_.path,_.snap,r,o,f,a))}else if(n.type===an.MERGE){const _=n;_.source.fromUser?c=uR(t,e,_.path,_.children,r,o,a):(B(_.source.fromServer,"Unknown source."),f=_.source.tagged||e.serverCache.isFiltered(),c=Hc(t,e,_.path,_.children,r,o,f,a))}else if(n.type===an.ACK_USER_WRITE){const _=n;_.revert?c=dR(t,e,_.path,r,o,a):c=fR(t,e,_.path,_.affectedTree,r,o,a)}else if(n.type===an.LISTEN_COMPLETE)c=hR(t,e,n.path,r,a);else throw Mr("Unknown operation type: "+n.type);const h=a.getChanges();return cR(e,c,h),{viewCache:c,changes:h}}function cR(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=kc(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Wg(kc(e)))}}function Qg(t,e,n,r,o,a){const c=e.eventCache;if(ll(r,n)!=null)return e;{let f,h;if(fe(n))if(B(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=$i(e),y=_ instanceof ee?_:ee.EMPTY_NODE,v=Ru(r,y);f=t.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const _=ol(r,$i(e));f=t.filter.updateFullNode(e.eventCache.getNode(),_,a)}else{const _=ue(n);if(_===".priority"){B(hi(n)===1,"Can't have a priority with additional path components");const y=c.getNode();h=e.serverCache.getNode();const v=k_(r,n,y,h);v!=null?f=t.filter.updatePriority(y,v):f=c.getNode()}else{const y=Oe(n);let v;if(c.isCompleteForChild(_)){h=e.serverCache.getNode();const C=k_(r,n,c.getNode(),h);C!=null?v=c.getNode().getImmediateChild(_).updateChild(y,C):v=c.getNode().getImmediateChild(_)}else v=Nu(r,_,e.serverCache);v!=null?f=t.filter.updateChild(c.getNode(),_,v,y,o,a):f=c.getNode()}}return ds(e,f,c.isFullyInitialized()||fe(n),t.filter.filtersNodes())}}function al(t,e,n,r,o,a,c,f){const h=e.serverCache;let _;const y=c?t.filter:t.filter.getIndexedFilter();if(fe(n))_=y.updateFullNode(h.getNode(),r,null);else if(y.filtersNodes()&&!h.isFiltered()){const N=h.getNode().updateChild(n,r);_=y.updateFullNode(h.getNode(),N,null)}else{const N=ue(n);if(!h.isCompleteForPath(n)&&hi(n)>1)return e;const U=Oe(n),Z=h.getNode().getImmediateChild(N).updateChild(U,r);N===".priority"?_=y.updatePriority(h.getNode(),Z):_=y.updateChild(h.getNode(),N,Z,U,Yg,null)}const v=$g(e,_,h.isFullyInitialized()||fe(n),y.filtersNodes()),C=new Pu(o,v,a);return Qg(t,v,n,o,C,f)}function Uc(t,e,n,r,o,a,c){const f=e.eventCache;let h,_;const y=new Pu(o,e,a);if(fe(n))_=t.filter.updateFullNode(e.eventCache.getNode(),r,c),h=ds(e,_,!0,t.filter.filtersNodes());else{const v=ue(n);if(v===".priority")_=t.filter.updatePriority(e.eventCache.getNode(),r),h=ds(e,_,f.isFullyInitialized(),f.isFiltered());else{const C=Oe(n),N=f.getNode().getImmediateChild(v);let U;if(fe(C))U=r;else{const K=y.getCompleteChild(v);K!=null?Rg(C)===".priority"&&K.getChild(Pg(C)).isEmpty()?U=K:U=K.updateChild(C,r):U=ee.EMPTY_NODE}if(N.equals(U))h=e;else{const K=t.filter.updateChild(f.getNode(),v,U,C,y,c);h=ds(e,K,f.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function B_(t,e){return t.eventCache.isCompleteForChild(e)}function uR(t,e,n,r,o,a,c){let f=e;return r.foreach((h,_)=>{const y=Ye(n,h);B_(e,ue(y))&&(f=Uc(t,f,y,_,o,a,c))}),r.foreach((h,_)=>{const y=Ye(n,h);B_(e,ue(y))||(f=Uc(t,f,y,_,o,a,c))}),f}function W_(t,e,n){return n.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function Hc(t,e,n,r,o,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,_;fe(n)?_=r:_=new Me(null).setTree(n,r);const y=e.serverCache.getNode();return _.children.inorderTraversal((v,C)=>{if(y.hasChild(v)){const N=e.serverCache.getNode().getImmediateChild(v),U=W_(t,N,C);h=al(t,h,new Ae(v),U,o,a,c,f)}}),_.children.inorderTraversal((v,C)=>{const N=!e.serverCache.isCompleteForChild(v)&&C.value===null;if(!y.hasChild(v)&&!N){const U=e.serverCache.getNode().getImmediateChild(v),K=W_(t,U,C);h=al(t,h,new Ae(v),K,o,a,c,f)}}),h}function fR(t,e,n,r,o,a,c){if(ll(o,n)!=null)return e;const f=e.serverCache.isFiltered(),h=e.serverCache;if(r.value!=null){if(fe(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return al(t,e,n,h.getNode().getChild(n),o,a,f,c);if(fe(n)){let _=new Me(null);return h.getNode().forEachChild(ci,(y,v)=>{_=_.set(new Ae(y),v)}),Hc(t,e,n,_,o,a,f,c)}else return e}else{let _=new Me(null);return r.foreach((y,v)=>{const C=Ye(n,y);h.isCompleteForPath(C)&&(_=_.set(y,h.getNode().getChild(C)))}),Hc(t,e,n,_,o,a,f,c)}}function hR(t,e,n,r,o){const a=e.serverCache,c=$g(e,a.getNode(),a.isFullyInitialized()||fe(n),a.isFiltered());return Qg(t,c,n,r,Yg,o)}function dR(t,e,n,r,o,a){let c;if(ll(r,n)!=null)return e;{const f=new Pu(r,e,o),h=e.eventCache.getNode();let _;if(fe(n)||ue(n)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=ol(r,$i(e));else{const v=e.serverCache.getNode();B(v instanceof ee,"serverChildren would be complete if leaf node"),y=Ru(r,v)}y=y,_=t.filter.updateFullNode(h,y,a)}else{const y=ue(n);let v=Nu(r,y,e.serverCache);v==null&&e.serverCache.isCompleteForChild(y)&&(v=h.getImmediateChild(y)),v!=null?_=t.filter.updateChild(h,y,v,Oe(n),f,a):e.eventCache.getNode().hasChild(y)?_=t.filter.updateChild(h,y,ee.EMPTY_NODE,Oe(n),f,a):_=h,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=ol(r,$i(e)),c.isLeafNode()&&(_=t.filter.updateFullNode(_,c,a)))}return c=e.serverCache.isFullyInitialized()||ll(r,be())!=null,ds(e,_,c,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new Iu(r.getIndex()),a=NA(r);this.processor_=oR(a);const c=n.serverCache,f=n.eventCache,h=o.updateFullNode(ee.EMPTY_NODE,c.getNode(),null),_=a.updateFullNode(ee.EMPTY_NODE,f.getNode(),null),y=new Hi(h,c.isFullyInitialized(),o.filtersNodes()),v=new Hi(_,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=Al(v,y),this.eventGenerator_=new UA(this.query_)}get query(){return this.query_}}function pR(t){return t.viewCache_.serverCache.getNode()}function gR(t,e){const n=$i(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!fe(e)&&!n.getImmediateChild(ue(e)).isEmpty())?n.getChild(e):null}function U_(t){return t.eventRegistrations_.length===0}function mR(t,e){t.eventRegistrations_.push(e)}function H_(t,e,n){const r=[];if(n){B(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,o);c&&r.push(c)})}if(e){let o=[];for(let a=0;a<t.eventRegistrations_.length;++a){const c=t.eventRegistrations_[a];if(!c.matches(e))o.push(c);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function $_(t,e,n,r){e.type===an.MERGE&&e.source.queryId!==null&&(B($i(t.viewCache_),"We should always have a full cache before handling merges"),B(kc(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,a=aR(t.processor_,o,e,n,r);return lR(t.processor_,a.viewCache),B(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,Xg(t,a.changes,a.viewCache.eventCache.getNode(),null)}function vR(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ue,(a,c)=>{r.push(Rr(a,c))}),n.isFullyInitialized()&&r.push(Wg(n.getNode())),Xg(t,r,n.getNode(),e)}function Xg(t,e,n,r){const o=r?[r]:t.eventRegistrations_;return HA(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl;class yR{constructor(){this.views=new Map}}function wR(t){B(!cl,"__referenceConstructor has already been defined"),cl=t}function ER(){return B(cl,"Reference.ts has not been loaded"),cl}function CR(t){return t.views.size===0}function Ou(t,e,n,r){const o=e.source.queryId;if(o!==null){const a=t.views.get(o);return B(a!=null,"SyncTree gave us an op for an invalid query."),$_(a,e,n,r)}else{let a=[];for(const c of t.views.values())a=a.concat($_(c,e,n,r));return a}}function bR(t,e,n,r,o){const a=e._queryIdentifier,c=t.views.get(a);if(!c){let f=ol(n,o?r:null),h=!1;f?h=!0:r instanceof ee?(f=Ru(n,r),h=!1):(f=ee.EMPTY_NODE,h=!1);const _=Al(new Hi(f,h,!1),new Hi(r,o,!1));return new _R(e,_)}return c}function IR(t,e,n,r,o,a){const c=bR(t,e,r,o,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),mR(c,n),vR(c,n)}function TR(t,e,n,r){const o=e._queryIdentifier,a=[];let c=[];const f=di(t);if(o==="default")for(const[h,_]of t.views.entries())c=c.concat(H_(_,n,r)),U_(_)&&(t.views.delete(h),_.query._queryParams.loadsAllData()||a.push(_.query));else{const h=t.views.get(o);h&&(c=c.concat(H_(h,n,r)),U_(h)&&(t.views.delete(o),h.query._queryParams.loadsAllData()||a.push(h.query)))}return f&&!di(t)&&a.push(new(ER())(e._repo,e._path)),{removed:a,events:c}}function jg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function br(t,e){let n=null;for(const r of t.views.values())n=n||gR(r,e);return n}function Jg(t,e){if(e._queryParams.loadsAllData())return Rl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Zg(t,e){return Jg(t,e)!=null}function di(t){return Rl(t)!=null}function Rl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul;function xR(t){B(!ul,"__referenceConstructor has already been defined"),ul=t}function SR(){return B(ul,"Reference.ts has not been loaded"),ul}let AR=1;class z_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Me(null),this.pendingWriteTree_=nR(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function em(t,e,n,r,o){return qA(t.pendingWriteTree_,e,n,r,o),o?Bs(t,new Ui(Hg(),e,n)):[]}function Oi(t,e,n=!1){const r=GA(t.pendingWriteTree_,e);if(VA(t.pendingWriteTree_,e)){let a=new Me(null);return r.snap!=null?a=a.set(be(),!0):Nt(r.children,c=>{a=a.set(new Ae(c),!0)}),Bs(t,new sl(r.path,a,n))}else return[]}function Nl(t,e,n){return Bs(t,new Ui(xu(),e,n))}function RR(t,e,n){const r=Me.fromObject(n);return Bs(t,new Ps(xu(),e,r))}function NR(t,e){return Bs(t,new Ns(xu(),e))}function PR(t,e,n){const r=Mu(t,n);if(r){const o=Lu(r),a=o.path,c=o.queryId,f=xt(a,e),h=new Ns(Su(c),f);return Fu(t,a,h)}else return[]}function $c(t,e,n,r,o=!1){const a=e._path,c=t.syncPointTree_.get(a);let f=[];if(c&&(e._queryIdentifier==="default"||Zg(c,e))){const h=TR(c,e,n,r);CR(c)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const _=h.removed;if(f=h.events,!o){const y=_.findIndex(C=>C._queryParams.loadsAllData())!==-1,v=t.syncPointTree_.findOnPath(a,(C,N)=>di(N));if(y&&!v){const C=t.syncPointTree_.subtree(a);if(!C.isEmpty()){const N=MR(C);for(let U=0;U<N.length;++U){const K=N[U],Z=K.query,we=im(t,K);t.listenProvider_.startListening(ps(Z),fl(t,Z),we.hashFn,we.onComplete)}}}!v&&_.length>0&&!r&&(y?t.listenProvider_.stopListening(ps(e),null):_.forEach(C=>{const N=t.queryToTagMap.get(Pl(C));t.listenProvider_.stopListening(ps(C),N)}))}LR(t,_)}return f}function OR(t,e,n,r){const o=Mu(t,r);if(o!=null){const a=Lu(o),c=a.path,f=a.queryId,h=xt(c,e),_=new Ui(Su(f),h,n);return Fu(t,c,_)}else return[]}function DR(t,e,n,r){const o=Mu(t,r);if(o){const a=Lu(o),c=a.path,f=a.queryId,h=xt(c,e),_=Me.fromObject(n),y=new Ps(Su(f),h,_);return Fu(t,c,y)}else return[]}function K_(t,e,n,r=!1){const o=e._path;let a=null,c=!1;t.syncPointTree_.foreachOnPath(o,(C,N)=>{const U=xt(C,o);a=a||br(N,U),c=c||di(N)});let f=t.syncPointTree_.get(o);f?(c=c||di(f),a=a||br(f,be())):(f=new yR,t.syncPointTree_=t.syncPointTree_.set(o,f));let h;a!=null?h=!0:(h=!1,a=ee.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((N,U)=>{const K=br(U,be());K&&(a=a.updateImmediateChild(N,K))}));const _=Zg(f,e);if(!_&&!e._queryParams.loadsAllData()){const C=Pl(e);B(!t.queryToTagMap.has(C),"View does not exist, but we have a tag");const N=FR();t.queryToTagMap.set(C,N),t.tagToQueryMap.set(N,C)}const y=Au(t.pendingWriteTree_,o);let v=IR(f,e,n,y,a,h);if(!_&&!c&&!r){const C=Jg(f,e);v=v.concat(kR(t,e,C))}return v}function Du(t,e,n){const o=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,f)=>{const h=xt(c,e),_=br(f,h);if(_)return _});return qg(o,e,a,n,!0)}function Bs(t,e){return tm(e,t.syncPointTree_,null,Au(t.pendingWriteTree_,be()))}function tm(t,e,n,r){if(fe(t.path))return nm(t,e,n,r);{const o=e.get(be());n==null&&o!=null&&(n=br(o,be()));let a=[];const c=ue(t.path),f=t.operationForChild(c),h=e.children.get(c);if(h&&f){const _=n?n.getImmediateChild(c):null,y=Gg(r,c);a=a.concat(tm(f,h,_,y))}return o&&(a=a.concat(Ou(o,t,r,n))),a}}function nm(t,e,n,r){const o=e.get(be());n==null&&o!=null&&(n=br(o,be()));let a=[];return e.children.inorderTraversal((c,f)=>{const h=n?n.getImmediateChild(c):null,_=Gg(r,c),y=t.operationForChild(c);y&&(a=a.concat(nm(y,f,h,_)))}),o&&(a=a.concat(Ou(o,t,r,n))),a}function im(t,e){const n=e.query,r=fl(t,n);return{hashFn:()=>(pR(e)||ee.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?PR(t,n._path,r):NR(t,n._path);{const a=P1(o,n);return $c(t,n,null,a)}}}}function fl(t,e){const n=Pl(e);return t.queryToTagMap.get(n)}function Pl(t){return t._path.toString()+"$"+t._queryIdentifier}function Mu(t,e){return t.tagToQueryMap.get(e)}function Lu(t){const e=t.indexOf("$");return B(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ae(t.substr(0,e))}}function Fu(t,e,n){const r=t.syncPointTree_.get(e);B(r,"Missing sync point for query tag that we're tracking");const o=Au(t.pendingWriteTree_,e);return Ou(r,n,o,null)}function MR(t){return t.fold((e,n,r)=>{if(n&&di(n))return[Rl(n)];{let o=[];return n&&(o=jg(n)),Nt(r,(a,c)=>{o=o.concat(c)}),o}})}function ps(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(SR())(t._repo,t._path):t}function LR(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const o=Pl(r),a=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(a)}}}function FR(){return AR++}function kR(t,e,n){const r=e._path,o=fl(t,e),a=im(t,n),c=t.listenProvider_.startListening(ps(e),o,a.hashFn,a.onComplete),f=t.syncPointTree_.subtree(r);if(o)B(!di(f.value),"If we're adding a query, it shouldn't be shadowed");else{const h=f.fold((_,y,v)=>{if(!fe(_)&&y&&di(y))return[Rl(y).query];{let C=[];return y&&(C=C.concat(jg(y).map(N=>N.query))),Nt(v,(N,U)=>{C=C.concat(U)}),C}});for(let _=0;_<h.length;++_){const y=h[_];t.listenProvider_.stopListening(ps(y),fl(t,y))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new ku(n)}node(){return this.node_}}class Bu{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ye(this.path_,e);return new Bu(this.syncTree_,n)}node(){return Du(this.syncTree_,this.path_)}}const BR=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},q_=function(t,e,n){if(!t||typeof t!="object")return t;if(B(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return WR(t[".sv"],e,n);if(typeof t[".sv"]=="object")return UR(t[".sv"],e);B(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},WR=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:B(!1,"Unexpected server value: "+t)}},UR=function(t,e,n){t.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&B(!1,"Unexpected increment value: "+r);const o=e.node();if(B(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return typeof c!="number"?r:c+r},HR=function(t,e,n,r){return Wu(e,new Bu(n,t),r)},rm=function(t,e,n){return Wu(t,new ku(e),n)};function Wu(t,e,n){const r=t.getPriority().val(),o=q_(r,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,f=q_(c.getValue(),e,n);return f!==c.getValue()||o!==c.getPriority().val()?new Je(f,ot(o)):t}else{const c=t;return a=c,o!==c.getPriority().val()&&(a=a.updatePriority(new Je(o))),c.forEachChild(Ue,(f,h)=>{const _=Wu(h,e.getImmediateChild(f),n);_!==h&&(a=a.updateImmediateChild(f,_))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Hu(t,e){let n=e instanceof Ae?e:new Ae(e),r=t,o=ue(n);for(;o!==null;){const a=Ar(r.node.children,o)||{children:{},childCount:0};r=new Uu(o,r,a),n=Oe(n),o=ue(n)}return r}function Br(t){return t.node.value}function sm(t,e){t.node.value=e,zc(t)}function om(t){return t.node.childCount>0}function $R(t){return Br(t)===void 0&&!om(t)}function Ol(t,e){Nt(t.node.children,(n,r)=>{e(new Uu(n,t,r))})}function lm(t,e,n,r){n&&!r&&e(t),Ol(t,o=>{lm(o,e,!0,r)}),n&&r&&e(t)}function zR(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ws(t){return new Ae(t.parent===null?t.name:Ws(t.parent)+"/"+t.name)}function zc(t){t.parent!==null&&KR(t.parent,t.name,t)}function KR(t,e,n){const r=$R(n),o=wn(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,zc(t)):!r&&!o&&(t.node.children[e]=n.node,t.node.childCount++,zc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=/[\[\].#$\/\u0000-\u001F\u007F]/,GR=/[\[\].#$\u0000-\u001F\u007F]/,fc=10*1024*1024,$u=function(t){return typeof t=="string"&&t.length!==0&&!qR.test(t)},am=function(t){return typeof t=="string"&&t.length!==0&&!GR.test(t)},VR=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),am(t)},G_=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!pu(t)||t&&typeof t=="object"&&wn(t,".sv")},cm=function(t,e,n,r){r&&e===void 0||zu(Tl(t,"value"),e,n)},zu=function(t,e,n){const r=n instanceof Ae?new uA(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ai(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ai(r)+" with contents = "+e.toString());if(pu(e))throw new Error(t+"contains "+e.toString()+" "+Ai(r));if(typeof e=="string"&&e.length>fc/3&&xl(e)>fc)throw new Error(t+"contains a string greater than "+fc+" utf8 bytes "+Ai(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,a=!1;if(Nt(e,(c,f)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!$u(c)))throw new Error(t+" contains an invalid key ("+c+") "+Ai(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);fA(r,c),zu(t,f,r),hA(r)}),o&&a)throw new Error(t+' contains ".value" child '+Ai(r)+" in addition to actual children.")}},YR=function(t,e,n,r){if(!(r&&n===void 0)&&!$u(n))throw new Error(Tl(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Ku=function(t,e,n,r){if(!(r&&n===void 0)&&!am(n))throw new Error(Tl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},QR=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ku(t,e,n,r)},XR=function(t,e){if(ue(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},jR=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!$u(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!VR(n))throw new Error(Tl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qu(t,e){let n=null;for(let r=0;r<e.length;r++){const o=e[r],a=o.getPath();n!==null&&!wu(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(o)}n&&t.eventLists_.push(n)}function um(t,e,n){qu(t,n),fm(t,r=>wu(r,e))}function Hn(t,e,n){qu(t,n),fm(t,r=>ln(r,e)||ln(e,r))}function fm(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const o=t.eventLists_[r];if(o){const a=o.path;e(a)?(ZR(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function ZR(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Li&&ct("event: "+n.toString()),kr(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="repo_interrupt",tN=25;class nN{constructor(e,n,r,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new JR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rl(),this.transactionQueueTree_=new Uu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function iN(t,e,n){if(t.stats_=vu(t.repoInfo_),t.forceRestClient_||L1())t.server_=new il(t.repoInfo_,(r,o,a,c)=>{V_(t,r,o,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Y_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{et(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new kn(t.repoInfo_,e,(r,o,a,c)=>{V_(t,r,o,a,c)},r=>{Y_(t,r)},r=>{sN(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=U1(t.repoInfo_,()=>new WA(t.stats_,t.server_)),t.infoData_=new MA,t.infoSyncTree_=new z_({startListening:(r,o,a,c)=>{let f=[];const h=t.infoData_.getNode(r._path);return h.isEmpty()||(f=Nl(t.infoSyncTree_,r._path,h),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),Vu(t,"connected",!1),t.serverSyncTree_=new z_({startListening:(r,o,a,c)=>(t.server_.listen(r,a,o,(f,h)=>{const _=c(f,h);Hn(t.eventQueue_,r._path,_)}),[]),stopListening:(r,o)=>{t.server_.unlisten(r,o)}})}function rN(t){const n=t.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Gu(t){return BR({timestamp:rN(t)})}function V_(t,e,n,r,o){t.dataUpdateCount++;const a=new Ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(o)if(r){const h=jo(n,_=>ot(_));c=DR(t.serverSyncTree_,a,h,o)}else{const h=ot(n);c=OR(t.serverSyncTree_,a,h,o)}else if(r){const h=jo(n,_=>ot(_));c=RR(t.serverSyncTree_,a,h)}else{const h=ot(n);c=Nl(t.serverSyncTree_,a,h)}let f=a;c.length>0&&(f=Dl(t,a)),Hn(t.eventQueue_,f,c)}function Y_(t,e){Vu(t,"connected",e),e===!1&&lN(t)}function sN(t,e){Nt(e,(n,r)=>{Vu(t,n,r)})}function Vu(t,e,n){const r=new Ae("/.info/"+e),o=ot(n);t.infoData_.updateSnapshot(r,o);const a=Nl(t.infoSyncTree_,r,o);Hn(t.eventQueue_,r,a)}function hm(t){return t.nextWriteId_++}function oN(t,e,n,r,o){Yu(t,"set",{path:e.toString(),value:n,priority:r});const a=Gu(t),c=ot(n,r),f=Du(t.serverSyncTree_,e),h=rm(c,f,a),_=hm(t),y=em(t.serverSyncTree_,e,h,_,!0);qu(t.eventQueue_,y),t.server_.put(e.toString(),c.val(!0),(C,N)=>{const U=C==="ok";U||At("set at "+e+" failed: "+C);const K=Oi(t.serverSyncTree_,_,!U);Hn(t.eventQueue_,e,K),uN(t,o,C,N)});const v=mm(t,e);Dl(t,v),Hn(t.eventQueue_,v,[])}function lN(t){Yu(t,"onDisconnectEvents");const e=Gu(t),n=rl();Fc(t.onDisconnect_,be(),(o,a)=>{const c=HR(o,a,t.serverSyncTree_,e);Ug(n,o,c)});let r=[];Fc(n,be(),(o,a)=>{r=r.concat(Nl(t.serverSyncTree_,o,a));const c=mm(t,o);Dl(t,c)}),t.onDisconnect_=rl(),Hn(t.eventQueue_,be(),r)}function aN(t,e,n){let r;ue(e._path)===".info"?r=K_(t.infoSyncTree_,e,n):r=K_(t.serverSyncTree_,e,n),um(t.eventQueue_,e._path,r)}function Q_(t,e,n){let r;ue(e._path)===".info"?r=$c(t.infoSyncTree_,e,n):r=$c(t.serverSyncTree_,e,n),um(t.eventQueue_,e._path,r)}function cN(t){t.persistentConnection_&&t.persistentConnection_.interrupt(eN)}function Yu(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ct(n,...e)}function uN(t,e,n,r){e&&kr(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let a=o;r&&(a+=": "+r);const c=new Error(a);c.code=o,e(c)}})}function dm(t,e,n){return Du(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function Qu(t,e=t.transactionQueueTree_){if(e||Ml(t,e),Br(e)){const n=pm(t,e);B(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&fN(t,Ws(e),n)}else om(e)&&Ol(e,n=>{Qu(t,n)})}function fN(t,e,n){const r=n.map(_=>_.currentWriteId),o=dm(t,e,r);let a=o;const c=o.hash();for(let _=0;_<n.length;_++){const y=n[_];B(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const v=xt(e,y.path);a=a.updateChild(v,y.currentOutputSnapshotRaw)}const f=a.val(!0),h=e;t.server_.put(h.toString(),f,_=>{Yu(t,"transaction put response",{path:h.toString(),status:_});let y=[];if(_==="ok"){const v=[];for(let C=0;C<n.length;C++)n[C].status=2,y=y.concat(Oi(t.serverSyncTree_,n[C].currentWriteId)),n[C].onComplete&&v.push(()=>n[C].onComplete(null,!0,n[C].currentOutputSnapshotResolved)),n[C].unwatcher();Ml(t,Hu(t.transactionQueueTree_,e)),Qu(t,t.transactionQueueTree_),Hn(t.eventQueue_,e,y);for(let C=0;C<v.length;C++)kr(v[C])}else{if(_==="datastale")for(let v=0;v<n.length;v++)n[v].status===3?n[v].status=4:n[v].status=0;else{At("transaction at "+h.toString()+" failed: "+_);for(let v=0;v<n.length;v++)n[v].status=4,n[v].abortReason=_}Dl(t,e)}},c)}function Dl(t,e){const n=_m(t,e),r=Ws(n),o=pm(t,n);return hN(t,o,r),r}function hN(t,e,n){if(e.length===0)return;const r=[];let o=[];const c=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const h=e[f],_=xt(n,h.path);let y=!1,v;if(B(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)y=!0,v=h.abortReason,o=o.concat(Oi(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=tN)y=!0,v="maxretry",o=o.concat(Oi(t.serverSyncTree_,h.currentWriteId,!0));else{const C=dm(t,h.path,c);h.currentInputSnapshot=C;const N=e[f].update(C.val());if(N!==void 0){zu("transaction failed: Data returned ",N,h.path);let U=ot(N);typeof N=="object"&&N!=null&&wn(N,".priority")||(U=U.updatePriority(C.getPriority()));const Z=h.currentWriteId,we=Gu(t),Le=rm(U,C,we);h.currentOutputSnapshotRaw=U,h.currentOutputSnapshotResolved=Le,h.currentWriteId=hm(t),c.splice(c.indexOf(Z),1),o=o.concat(em(t.serverSyncTree_,h.path,Le,h.currentWriteId,h.applyLocally)),o=o.concat(Oi(t.serverSyncTree_,Z,!0))}else y=!0,v="nodata",o=o.concat(Oi(t.serverSyncTree_,h.currentWriteId,!0))}Hn(t.eventQueue_,n,o),o=[],y&&(e[f].status=2,function(C){setTimeout(C,Math.floor(0))}(e[f].unwatcher),e[f].onComplete&&(v==="nodata"?r.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):r.push(()=>e[f].onComplete(new Error(v),!1,null))))}Ml(t,t.transactionQueueTree_);for(let f=0;f<r.length;f++)kr(r[f]);Qu(t,t.transactionQueueTree_)}function _m(t,e){let n,r=t.transactionQueueTree_;for(n=ue(e);n!==null&&Br(r)===void 0;)r=Hu(r,n),e=Oe(e),n=ue(e);return r}function pm(t,e){const n=[];return gm(t,e,n),n.sort((r,o)=>r.order-o.order),n}function gm(t,e,n){const r=Br(e);if(r)for(let o=0;o<r.length;o++)n.push(r[o]);Ol(e,o=>{gm(t,o,n)})}function Ml(t,e){const n=Br(e);if(n){let r=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[r]=n[o],r++);n.length=r,sm(e,n.length>0?n:void 0)}Ol(e,r=>{Ml(t,r)})}function mm(t,e){const n=Ws(_m(t,e)),r=Hu(t.transactionQueueTree_,e);return zR(r,o=>{hc(t,o)}),hc(t,r),lm(r,o=>{hc(t,o)}),n}function hc(t,e){const n=Br(e);if(n){const r=[];let o=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(B(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(B(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),o=o.concat(Oi(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&r.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?sm(e,void 0):n.length=a+1,Hn(t.eventQueue_,Ws(e),o);for(let c=0;c<r.length;c++)kr(r[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let o=n[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function _N(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):At(`Invalid query segment '${n}' in query '${t}'`)}return e}const X_=function(t,e){const n=pN(t),r=n.namespace;n.domain==="firebase.com"&&Wn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Wn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||x1();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new wg(n.host,n.secure,r,o,e,"",r!==n.subdomain),path:new Ae(n.pathString)}},pN=function(t){let e="",n="",r="",o="",a="",c=!0,f="https",h=443;if(typeof t=="string"){let _=t.indexOf("//");_>=0&&(f=t.substring(0,_-1),t=t.substring(_+2));let y=t.indexOf("/");y===-1&&(y=t.length);let v=t.indexOf("?");v===-1&&(v=t.length),e=t.substring(0,Math.min(y,v)),y<v&&(o=dN(t.substring(y,v)));const C=_N(t.substring(Math.min(t.length,v)));_=e.indexOf(":"),_>=0?(c=f==="https"||f==="wss",h=parseInt(e.substring(_+1),10)):_=e.length;const N=e.slice(0,_);if(N.toLowerCase()==="localhost")n="localhost";else if(N.split(".").length<=2)n=N;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),n=e.substring(U+1),a=r}"ns"in C&&(a=C.ns)}return{host:e,port:h,domain:n,subdomain:r,secure:c,scheme:f,pathString:o,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,o){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+et(this.snapshot.exportVal())}}class ym{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return B(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r,o){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=o}get key(){return fe(this._path)?null:Rg(this._path)}get ref(){return new zn(this._repo,this._path)}get _queryIdentifier(){const e=O_(this._queryParams),n=gu(e);return n==="{}"?"default":n}get _queryObject(){return O_(this._queryParams)}isEqual(e){if(e=Lr(e),!(e instanceof Wr))return!1;const n=this._repo===e._repo,r=wu(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+cA(this._path)}}function mN(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function wm(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ci){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Wi)throw new Error(r);if(typeof e!="string")throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==Un)throw new Error(r);if(typeof n!="string")throw new Error(o)}}else if(t.getIndex()===Ue){if(e!=null&&!G_(e)||n!=null&&!G_(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(B(t.getIndex()instanceof bu||t.getIndex()===Bg,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function vN(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class zn extends Wr{constructor(e,n){super(e,n,new Tu,!1)}get parent(){const e=Pg(this._path);return e===null?null:new zn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Os{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ae(e),r=hl(this.ref,e);return new Os(this._node.getChild(n),r,Ue)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>e(new Os(o,hl(this.ref,r),Ue)))}hasChild(e){const n=new Ae(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Em(t,e){return t=Lr(t),t._checkNotDeleted("ref"),e!==void 0?hl(t._root,e):t._root}function hl(t,e){return t=Lr(t),ue(t._path)===null?QR("child","path",e,!1):Ku("child","path",e,!1),new zn(t._repo,Ye(t._path,e))}function yN(t,e){t=Lr(t),XR("set",t._path),cm("set",e,t._path,!1);const n=new Il;return oN(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Xu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new vm("value",this,new Os(e.snapshotNode,new zn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ym(this,e,n):null}matches(e){return e instanceof Xu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class ju{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ym(this,e,n):null}createEvent(e,n){B(e.childName!=null,"Child events should have a childName.");const r=hl(new zn(n._repo,n._path),e.childName),o=n._queryParams.getIndex();return new vm(e.type,this,new Os(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ju?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function wN(t,e,n,r,o){let a;if(typeof r=="object"&&(a=void 0,o=r),typeof r=="function"&&(a=r),o&&o.onlyOnce){const h=n,_=(y,v)=>{Q_(t._repo,t,f),h(y,v)};_.userCallback=n.userCallback,_.context=n.context,n=_}const c=new gN(n,a||void 0),f=e==="value"?new Xu(c):new ju(e,c);return aN(t._repo,t,f),()=>Q_(t._repo,t,f)}function EN(t,e,n,r){return wN(t,"value",e,n,r)}class Ju{}class CN extends Ju{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){cm("startAfter",this._value,e._path,!1);const n=OA(e._queryParams,this._value,this._key);if(vN(n),wm(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Wr(e._repo,e._path,n,e._orderByCalled)}}function bN(t,e){return YR("startAfter","key",e,!0),new CN(t,e)}class IN extends Ju{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wr(e._repo,e._path,PA(e._queryParams,this._limit),e._orderByCalled)}}function TN(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new IN(t)}class xN extends Ju{constructor(e){super(),this._path=e}_apply(e){mN(e,"orderByChild");const n=new Ae(this._path);if(fe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new bu(n),o=DA(e._queryParams,r);return wm(o),new Wr(e._repo,e._path,o,!0)}}function SN(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ku("orderByChild","path",t,!1),new xN(t)}function AN(t,...e){let n=Lr(t);for(const r of e)n=r._apply(n);return n}wR(zn);xR(zn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="FIREBASE_DATABASE_EMULATOR_HOST",Kc={};let NN=!1;function PN(t,e,n,r){t.repoInfo_=new wg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function ON(t,e,n,r,o){let a=r||t.options.databaseURL;a===void 0&&(t.options.projectId||Wn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ct("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=X_(a,o),f=c.repoInfo,h,_;typeof process<"u"&&process.env&&(_=process.env[RN]),_?(h=!0,a=`http://${_}?ns=${f.namespace}`,c=X_(a,o),f=c.repoInfo):h=!c.repoInfo.secure;const y=o&&h?new Cr(Cr.OWNER):new k1(t.name,t.options,e);jR("Invalid Firebase Database URL",c),fe(c.path)||Wn("Database URL must point to the root of a Firebase Database (not including a child path).");const v=MN(f,t,y,new F1(t.name,n));return new LN(v,t)}function DN(t,e){const n=Kc[e];(!n||n[t.key]!==t)&&Wn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),cN(t),delete n[t.key]}function MN(t,e,n,r){let o=Kc[e.name];o||(o={},Kc[e.name]=o);let a=o[t.toURLString()];return a&&Wn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new nN(t,NN,n,r),o[t.toURLString()]=a,a}class LN{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(iN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zn(this._repo,be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(DN(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Wn("Cannot call "+e+" on a deleted database.")}}function FN(t=c1(),e){const n=s1(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=jx("database");r&&kN(n,...r)}return n}function kN(t,e,n,r={}){t=Lr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Wn("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let a;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Wn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Cr(Cr.OWNER);else if(r.mockUserToken){const c=typeof r.mockUserToken=="string"?r.mockUserToken:Jx(r.mockUserToken,t.app.options.projectId);a=new Cr(c)}PN(o,e,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){E1(a1),Zo(new Is("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return ON(r,o,a,n)},"PUBLIC").setMultipleInstances(!0)),wr(__,p_,t),wr(__,p_,"esm2017")}kn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};kn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};BN();function WN(){return[1,2,3].map(()=>Math.floor(Math.random()*(2<<16)).toString(16).padStart(4,"0")).join("")}function UN(t){const e=new URL(window.location.href);e.searchParams.set("zoom",t.zoom),e.searchParams.set("center",t.center),e.searchParams.set("sharingKey",t.sharingKey),window.history.replaceState(null,"",e.toString())}function zi(){const t=new URL(window.location.href),e=t.searchParams.get("center")||"1.38,103.8",n=t.searchParams.get("zoom")||"13",r=t.searchParams.get("sharingKey")||WN(),[o,a]=e.split(",");return{center:e,zoom:n,sharingKey:r,parsedZoom:parseFloat(n),parsedCenter:{lat:parseFloat(o),lng:parseFloat(a)}}}const HN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $N(){const t=window.localStorage.getItem("userId");if(t!=null&&t.match(HN))return t;{const e=window.crypto.randomUUID();return window.localStorage.setItem("userId",e),e}}function zN(){const t=window.localStorage.sendLocation;let e={};try{const n=JSON.parse(t);if(n instanceof Array||!(n instanceof Object))throw new Error("bad type");e=n}catch{}return e[zi().sharingKey]||!1}function j_(t){const e=window.localStorage.sendLocation;let n={};try{const r=JSON.parse(e);if(r instanceof Array||!(r instanceof Object))throw new Error("bad type");n=r}catch{}n[zi().sharingKey]=t,window.localStorage.setItem("sendLocation",JSON.stringify(n))}const KN={apiKey:"AIzaSyCVPkgR8wpTD-PtV14m6AbUHR8iWv0WqSc",authDomain:"simple-location-sharing.firebaseapp.com",projectId:"simple-location-sharing",storageBucket:"simple-location-sharing.appspot.com",messagingSenderId:"747204085237",appId:"1:747204085237:web:0f4adacb13c07818174cbc",databaseURL:"https://simple-location-sharing-default-rtdb.asia-southeast1.firebasedatabase.app"};ig(KN);const Cm=FN();function qN(t,e){const n=zi().sharingKey,r=$N();yN(Em(Cm,`sessions/${n}/${r}`),{coordinates:t,timestamp:e})}function GN(t,e,n){EN(AN(Em(Cm,`sessions/${t}`),SN("timestamp"),bN(Date.now()-e),TN(10)),r=>{n(r.val())})}var dl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */dl.exports;(function(t,e){(function(){var n,r="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",f="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",_=500,y="__lodash_placeholder__",v=1,C=2,N=4,U=1,K=2,Z=1,we=2,Le=4,Ee=8,te=16,qe=32,Wt=64,vt=128,Pt=256,_i=512,En=30,pi="...",qi=800,Gi=16,Vi=1,Us=2,nt=3,Te=1/0,pe=9007199254740991,Cn=17976931348623157e292,bn=0/0,Xe=4294967295,Ut=Xe-1,Hs=Xe>>>1,Ll=[["ary",vt],["bind",Z],["bindKey",we],["curry",Ee],["curryRight",te],["flip",_i],["partial",qe],["partialRight",Wt],["rearg",Pt]],Kn="[object Arguments]",yt="[object Array]",Yi="[object AsyncFunction]",qn="[object Boolean]",Ht="[object Date]",Ur="[object DOMException]",Gn="[object Error]",w="[object Function]",I="[object GeneratorFunction]",S="[object Map]",O="[object Number]",M="[object Null]",F="[object Object]",$="[object Promise]",k="[object Proxy]",W="[object RegExp]",D="[object Set]",V="[object String]",q="[object Symbol]",Y="[object Undefined]",X="[object WeakMap]",ce="[object WeakSet]",ye="[object ArrayBuffer]",ge="[object DataView]",Fe="[object Float32Array]",dt="[object Float64Array]",hn="[object Int8Array]",Qi="[object Int16Array]",In="[object Int32Array]",Xi="[object Uint8Array]",it="[object Uint8ClampedArray]",wt="[object Uint16Array]",ji="[object Uint32Array]",bm=/\b__p \+= '';/g,Im=/\b(__p \+=) '' \+/g,Tm=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zu=/&(?:amp|lt|gt|quot|#39);/g,ef=/[&<>"']/g,xm=RegExp(Zu.source),Sm=RegExp(ef.source),Am=/<%-([\s\S]+?)%>/g,Rm=/<%([\s\S]+?)%>/g,tf=/<%=([\s\S]+?)%>/g,Nm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pm=/^\w*$/,Om=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fl=/[\\^$.*+?()[\]{}|]/g,Dm=RegExp(Fl.source),kl=/^\s+/,Mm=/\s/,Lm=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fm=/\{\n\/\* \[wrapped with (.+)\] \*/,km=/,? & /,Bm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wm=/[()=,{}\[\]\/\s]/,Um=/\\(\\)?/g,Hm=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nf=/\w*$/,$m=/^[-+]0x[0-9a-f]+$/i,zm=/^0b[01]+$/i,Km=/^\[object .+?Constructor\]$/,qm=/^0o[0-7]+$/i,Gm=/^(?:0|[1-9]\d*)$/,Vm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$s=/($^)/,Ym=/['\n\r\u2028\u2029\\]/g,zs="\\ud800-\\udfff",Qm="\\u0300-\\u036f",Xm="\\ufe20-\\ufe2f",jm="\\u20d0-\\u20ff",rf=Qm+Xm+jm,sf="\\u2700-\\u27bf",of="a-z\\xdf-\\xf6\\xf8-\\xff",Jm="\\xac\\xb1\\xd7\\xf7",Zm="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ev="\\u2000-\\u206f",tv=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lf="A-Z\\xc0-\\xd6\\xd8-\\xde",af="\\ufe0e\\ufe0f",cf=Jm+Zm+ev+tv,Bl="['’]",nv="["+zs+"]",uf="["+cf+"]",Ks="["+rf+"]",ff="\\d+",iv="["+sf+"]",hf="["+of+"]",df="[^"+zs+cf+ff+sf+of+lf+"]",Wl="\\ud83c[\\udffb-\\udfff]",rv="(?:"+Ks+"|"+Wl+")",_f="[^"+zs+"]",Ul="(?:\\ud83c[\\udde6-\\uddff]){2}",Hl="[\\ud800-\\udbff][\\udc00-\\udfff]",Ji="["+lf+"]",pf="\\u200d",gf="(?:"+hf+"|"+df+")",sv="(?:"+Ji+"|"+df+")",mf="(?:"+Bl+"(?:d|ll|m|re|s|t|ve))?",vf="(?:"+Bl+"(?:D|LL|M|RE|S|T|VE))?",yf=rv+"?",wf="["+af+"]?",ov="(?:"+pf+"(?:"+[_f,Ul,Hl].join("|")+")"+wf+yf+")*",lv="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",av="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ef=wf+yf+ov,cv="(?:"+[iv,Ul,Hl].join("|")+")"+Ef,uv="(?:"+[_f+Ks+"?",Ks,Ul,Hl,nv].join("|")+")",fv=RegExp(Bl,"g"),hv=RegExp(Ks,"g"),$l=RegExp(Wl+"(?="+Wl+")|"+uv+Ef,"g"),dv=RegExp([Ji+"?"+hf+"+"+mf+"(?="+[uf,Ji,"$"].join("|")+")",sv+"+"+vf+"(?="+[uf,Ji+gf,"$"].join("|")+")",Ji+"?"+gf+"+"+mf,Ji+"+"+vf,av,lv,ff,cv].join("|"),"g"),_v=RegExp("["+pf+zs+rf+af+"]"),pv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mv=-1,De={};De[Fe]=De[dt]=De[hn]=De[Qi]=De[In]=De[Xi]=De[it]=De[wt]=De[ji]=!0,De[Kn]=De[yt]=De[ye]=De[qn]=De[ge]=De[Ht]=De[Gn]=De[w]=De[S]=De[O]=De[F]=De[W]=De[D]=De[V]=De[X]=!1;var Ne={};Ne[Kn]=Ne[yt]=Ne[ye]=Ne[ge]=Ne[qn]=Ne[Ht]=Ne[Fe]=Ne[dt]=Ne[hn]=Ne[Qi]=Ne[In]=Ne[S]=Ne[O]=Ne[F]=Ne[W]=Ne[D]=Ne[V]=Ne[q]=Ne[Xi]=Ne[it]=Ne[wt]=Ne[ji]=!0,Ne[Gn]=Ne[w]=Ne[X]=!1;var vv={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},yv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ev={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cv=parseFloat,bv=parseInt,Cf=typeof is=="object"&&is&&is.Object===Object&&is,Iv=typeof self=="object"&&self&&self.Object===Object&&self,rt=Cf||Iv||Function("return this")(),zl=e&&!e.nodeType&&e,gi=zl&&!0&&t&&!t.nodeType&&t,bf=gi&&gi.exports===zl,Kl=bf&&Cf.process,$t=function(){try{var b=gi&&gi.require&&gi.require("util").types;return b||Kl&&Kl.binding&&Kl.binding("util")}catch{}}(),If=$t&&$t.isArrayBuffer,Tf=$t&&$t.isDate,xf=$t&&$t.isMap,Sf=$t&&$t.isRegExp,Af=$t&&$t.isSet,Rf=$t&&$t.isTypedArray;function Ot(b,A,x){switch(x.length){case 0:return b.call(A);case 1:return b.call(A,x[0]);case 2:return b.call(A,x[0],x[1]);case 3:return b.call(A,x[0],x[1],x[2])}return b.apply(A,x)}function Tv(b,A,x,z){for(var ne=-1,Ce=b==null?0:b.length;++ne<Ce;){var Ge=b[ne];A(z,Ge,x(Ge),b)}return z}function zt(b,A){for(var x=-1,z=b==null?0:b.length;++x<z&&A(b[x],x,b)!==!1;);return b}function xv(b,A){for(var x=b==null?0:b.length;x--&&A(b[x],x,b)!==!1;);return b}function Nf(b,A){for(var x=-1,z=b==null?0:b.length;++x<z;)if(!A(b[x],x,b))return!1;return!0}function Vn(b,A){for(var x=-1,z=b==null?0:b.length,ne=0,Ce=[];++x<z;){var Ge=b[x];A(Ge,x,b)&&(Ce[ne++]=Ge)}return Ce}function qs(b,A){var x=b==null?0:b.length;return!!x&&Zi(b,A,0)>-1}function ql(b,A,x){for(var z=-1,ne=b==null?0:b.length;++z<ne;)if(x(A,b[z]))return!0;return!1}function ke(b,A){for(var x=-1,z=b==null?0:b.length,ne=Array(z);++x<z;)ne[x]=A(b[x],x,b);return ne}function Yn(b,A){for(var x=-1,z=A.length,ne=b.length;++x<z;)b[ne+x]=A[x];return b}function Gl(b,A,x,z){var ne=-1,Ce=b==null?0:b.length;for(z&&Ce&&(x=b[++ne]);++ne<Ce;)x=A(x,b[ne],ne,b);return x}function Sv(b,A,x,z){var ne=b==null?0:b.length;for(z&&ne&&(x=b[--ne]);ne--;)x=A(x,b[ne],ne,b);return x}function Vl(b,A){for(var x=-1,z=b==null?0:b.length;++x<z;)if(A(b[x],x,b))return!0;return!1}var Av=Yl("length");function Rv(b){return b.split("")}function Nv(b){return b.match(Bm)||[]}function Pf(b,A,x){var z;return x(b,function(ne,Ce,Ge){if(A(ne,Ce,Ge))return z=Ce,!1}),z}function Gs(b,A,x,z){for(var ne=b.length,Ce=x+(z?1:-1);z?Ce--:++Ce<ne;)if(A(b[Ce],Ce,b))return Ce;return-1}function Zi(b,A,x){return A===A?$v(b,A,x):Gs(b,Of,x)}function Pv(b,A,x,z){for(var ne=x-1,Ce=b.length;++ne<Ce;)if(z(b[ne],A))return ne;return-1}function Of(b){return b!==b}function Df(b,A){var x=b==null?0:b.length;return x?Xl(b,A)/x:bn}function Yl(b){return function(A){return A==null?n:A[b]}}function Ql(b){return function(A){return b==null?n:b[A]}}function Mf(b,A,x,z,ne){return ne(b,function(Ce,Ge,Re){x=z?(z=!1,Ce):A(x,Ce,Ge,Re)}),x}function Ov(b,A){var x=b.length;for(b.sort(A);x--;)b[x]=b[x].value;return b}function Xl(b,A){for(var x,z=-1,ne=b.length;++z<ne;){var Ce=A(b[z]);Ce!==n&&(x=x===n?Ce:x+Ce)}return x}function jl(b,A){for(var x=-1,z=Array(b);++x<b;)z[x]=A(x);return z}function Dv(b,A){return ke(A,function(x){return[x,b[x]]})}function Lf(b){return b&&b.slice(0,Wf(b)+1).replace(kl,"")}function Dt(b){return function(A){return b(A)}}function Jl(b,A){return ke(A,function(x){return b[x]})}function Hr(b,A){return b.has(A)}function Ff(b,A){for(var x=-1,z=b.length;++x<z&&Zi(A,b[x],0)>-1;);return x}function kf(b,A){for(var x=b.length;x--&&Zi(A,b[x],0)>-1;);return x}function Mv(b,A){for(var x=b.length,z=0;x--;)b[x]===A&&++z;return z}var Lv=Ql(vv),Fv=Ql(yv);function kv(b){return"\\"+Ev[b]}function Bv(b,A){return b==null?n:b[A]}function er(b){return _v.test(b)}function Wv(b){return pv.test(b)}function Uv(b){for(var A,x=[];!(A=b.next()).done;)x.push(A.value);return x}function Zl(b){var A=-1,x=Array(b.size);return b.forEach(function(z,ne){x[++A]=[ne,z]}),x}function Bf(b,A){return function(x){return b(A(x))}}function Qn(b,A){for(var x=-1,z=b.length,ne=0,Ce=[];++x<z;){var Ge=b[x];(Ge===A||Ge===y)&&(b[x]=y,Ce[ne++]=x)}return Ce}function Vs(b){var A=-1,x=Array(b.size);return b.forEach(function(z){x[++A]=z}),x}function Hv(b){var A=-1,x=Array(b.size);return b.forEach(function(z){x[++A]=[z,z]}),x}function $v(b,A,x){for(var z=x-1,ne=b.length;++z<ne;)if(b[z]===A)return z;return-1}function zv(b,A,x){for(var z=x+1;z--;)if(b[z]===A)return z;return z}function tr(b){return er(b)?qv(b):Av(b)}function Xt(b){return er(b)?Gv(b):Rv(b)}function Wf(b){for(var A=b.length;A--&&Mm.test(b.charAt(A)););return A}var Kv=Ql(wv);function qv(b){for(var A=$l.lastIndex=0;$l.test(b);)++A;return A}function Gv(b){return b.match($l)||[]}function Vv(b){return b.match(dv)||[]}var Yv=function b(A){A=A==null?rt:nr.defaults(rt.Object(),A,nr.pick(rt,gv));var x=A.Array,z=A.Date,ne=A.Error,Ce=A.Function,Ge=A.Math,Re=A.Object,ea=A.RegExp,Qv=A.String,Kt=A.TypeError,Ys=x.prototype,Xv=Ce.prototype,ir=Re.prototype,Qs=A["__core-js_shared__"],Xs=Xv.toString,Se=ir.hasOwnProperty,jv=0,Uf=function(){var i=/[^.]+$/.exec(Qs&&Qs.keys&&Qs.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),js=ir.toString,Jv=Xs.call(Re),Zv=rt._,ey=ea("^"+Xs.call(Se).replace(Fl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Js=bf?A.Buffer:n,Xn=A.Symbol,Zs=A.Uint8Array,Hf=Js?Js.allocUnsafe:n,eo=Bf(Re.getPrototypeOf,Re),$f=Re.create,zf=ir.propertyIsEnumerable,to=Ys.splice,Kf=Xn?Xn.isConcatSpreadable:n,$r=Xn?Xn.iterator:n,mi=Xn?Xn.toStringTag:n,no=function(){try{var i=Ci(Re,"defineProperty");return i({},"",{}),i}catch{}}(),ty=A.clearTimeout!==rt.clearTimeout&&A.clearTimeout,ny=z&&z.now!==rt.Date.now&&z.now,iy=A.setTimeout!==rt.setTimeout&&A.setTimeout,io=Ge.ceil,ro=Ge.floor,ta=Re.getOwnPropertySymbols,ry=Js?Js.isBuffer:n,qf=A.isFinite,sy=Ys.join,oy=Bf(Re.keys,Re),Ve=Ge.max,lt=Ge.min,ly=z.now,ay=A.parseInt,Gf=Ge.random,cy=Ys.reverse,na=Ci(A,"DataView"),zr=Ci(A,"Map"),ia=Ci(A,"Promise"),rr=Ci(A,"Set"),Kr=Ci(A,"WeakMap"),qr=Ci(Re,"create"),so=Kr&&new Kr,sr={},uy=bi(na),fy=bi(zr),hy=bi(ia),dy=bi(rr),_y=bi(Kr),oo=Xn?Xn.prototype:n,Gr=oo?oo.valueOf:n,Vf=oo?oo.toString:n;function p(i){if($e(i)&&!re(i)&&!(i instanceof _e)){if(i instanceof qt)return i;if(Se.call(i,"__wrapped__"))return Yh(i)}return new qt(i)}var or=function(){function i(){}return function(s){if(!We(s))return{};if($f)return $f(s);i.prototype=s;var l=new i;return i.prototype=n,l}}();function lo(){}function qt(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=n}p.templateSettings={escape:Am,evaluate:Rm,interpolate:tf,variable:"",imports:{_:p}},p.prototype=lo.prototype,p.prototype.constructor=p,qt.prototype=or(lo.prototype),qt.prototype.constructor=qt;function _e(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Xe,this.__views__=[]}function py(){var i=new _e(this.__wrapped__);return i.__actions__=Et(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Et(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Et(this.__views__),i}function gy(){if(this.__filtered__){var i=new _e(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function my(){var i=this.__wrapped__.value(),s=this.__dir__,l=re(i),u=s<0,d=l?i.length:0,g=R0(0,d,this.__views__),m=g.start,E=g.end,T=E-m,R=u?E:m-1,P=this.__iteratees__,L=P.length,H=0,G=lt(T,this.__takeCount__);if(!l||!u&&d==T&&G==T)return mh(i,this.__actions__);var j=[];e:for(;T--&&H<G;){R+=s;for(var oe=-1,J=i[R];++oe<L;){var de=P[oe],me=de.iteratee,Ft=de.type,gt=me(J);if(Ft==Us)J=gt;else if(!gt){if(Ft==Vi)continue e;break e}}j[H++]=J}return j}_e.prototype=or(lo.prototype),_e.prototype.constructor=_e;function vi(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var u=i[s];this.set(u[0],u[1])}}function vy(){this.__data__=qr?qr(null):{},this.size=0}function yy(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}function wy(i){var s=this.__data__;if(qr){var l=s[i];return l===h?n:l}return Se.call(s,i)?s[i]:n}function Ey(i){var s=this.__data__;return qr?s[i]!==n:Se.call(s,i)}function Cy(i,s){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=qr&&s===n?h:s,this}vi.prototype.clear=vy,vi.prototype.delete=yy,vi.prototype.get=wy,vi.prototype.has=Ey,vi.prototype.set=Cy;function Tn(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var u=i[s];this.set(u[0],u[1])}}function by(){this.__data__=[],this.size=0}function Iy(i){var s=this.__data__,l=ao(s,i);if(l<0)return!1;var u=s.length-1;return l==u?s.pop():to.call(s,l,1),--this.size,!0}function Ty(i){var s=this.__data__,l=ao(s,i);return l<0?n:s[l][1]}function xy(i){return ao(this.__data__,i)>-1}function Sy(i,s){var l=this.__data__,u=ao(l,i);return u<0?(++this.size,l.push([i,s])):l[u][1]=s,this}Tn.prototype.clear=by,Tn.prototype.delete=Iy,Tn.prototype.get=Ty,Tn.prototype.has=xy,Tn.prototype.set=Sy;function xn(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var u=i[s];this.set(u[0],u[1])}}function Ay(){this.size=0,this.__data__={hash:new vi,map:new(zr||Tn),string:new vi}}function Ry(i){var s=Eo(this,i).delete(i);return this.size-=s?1:0,s}function Ny(i){return Eo(this,i).get(i)}function Py(i){return Eo(this,i).has(i)}function Oy(i,s){var l=Eo(this,i),u=l.size;return l.set(i,s),this.size+=l.size==u?0:1,this}xn.prototype.clear=Ay,xn.prototype.delete=Ry,xn.prototype.get=Ny,xn.prototype.has=Py,xn.prototype.set=Oy;function yi(i){var s=-1,l=i==null?0:i.length;for(this.__data__=new xn;++s<l;)this.add(i[s])}function Dy(i){return this.__data__.set(i,h),this}function My(i){return this.__data__.has(i)}yi.prototype.add=yi.prototype.push=Dy,yi.prototype.has=My;function jt(i){var s=this.__data__=new Tn(i);this.size=s.size}function Ly(){this.__data__=new Tn,this.size=0}function Fy(i){var s=this.__data__,l=s.delete(i);return this.size=s.size,l}function ky(i){return this.__data__.get(i)}function By(i){return this.__data__.has(i)}function Wy(i,s){var l=this.__data__;if(l instanceof Tn){var u=l.__data__;if(!zr||u.length<o-1)return u.push([i,s]),this.size=++l.size,this;l=this.__data__=new xn(u)}return l.set(i,s),this.size=l.size,this}jt.prototype.clear=Ly,jt.prototype.delete=Fy,jt.prototype.get=ky,jt.prototype.has=By,jt.prototype.set=Wy;function Yf(i,s){var l=re(i),u=!l&&Ii(i),d=!l&&!u&&ti(i),g=!l&&!u&&!d&&ur(i),m=l||u||d||g,E=m?jl(i.length,Qv):[],T=E.length;for(var R in i)(s||Se.call(i,R))&&!(m&&(R=="length"||d&&(R=="offset"||R=="parent")||g&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||Nn(R,T)))&&E.push(R);return E}function Qf(i){var s=i.length;return s?i[_a(0,s-1)]:n}function Uy(i,s){return Co(Et(i),wi(s,0,i.length))}function Hy(i){return Co(Et(i))}function ra(i,s,l){(l!==n&&!Jt(i[s],l)||l===n&&!(s in i))&&Sn(i,s,l)}function Vr(i,s,l){var u=i[s];(!(Se.call(i,s)&&Jt(u,l))||l===n&&!(s in i))&&Sn(i,s,l)}function ao(i,s){for(var l=i.length;l--;)if(Jt(i[l][0],s))return l;return-1}function $y(i,s,l,u){return jn(i,function(d,g,m){s(u,d,l(d),m)}),u}function Xf(i,s){return i&&_n(s,je(s),i)}function zy(i,s){return i&&_n(s,bt(s),i)}function Sn(i,s,l){s=="__proto__"&&no?no(i,s,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[s]=l}function sa(i,s){for(var l=-1,u=s.length,d=x(u),g=i==null;++l<u;)d[l]=g?n:Wa(i,s[l]);return d}function wi(i,s,l){return i===i&&(l!==n&&(i=i<=l?i:l),s!==n&&(i=i>=s?i:s)),i}function Gt(i,s,l,u,d,g){var m,E=s&v,T=s&C,R=s&N;if(l&&(m=d?l(i,u,d,g):l(i)),m!==n)return m;if(!We(i))return i;var P=re(i);if(P){if(m=P0(i),!E)return Et(i,m)}else{var L=at(i),H=L==w||L==I;if(ti(i))return wh(i,E);if(L==F||L==Kn||H&&!d){if(m=T||H?{}:Wh(i),!E)return T?w0(i,zy(m,i)):y0(i,Xf(m,i))}else{if(!Ne[L])return d?i:{};m=O0(i,L,E)}}g||(g=new jt);var G=g.get(i);if(G)return G;g.set(i,m),_d(i)?i.forEach(function(J){m.add(Gt(J,s,l,J,i,g))}):hd(i)&&i.forEach(function(J,de){m.set(de,Gt(J,s,l,de,i,g))});var j=R?T?Ta:Ia:T?bt:je,oe=P?n:j(i);return zt(oe||i,function(J,de){oe&&(de=J,J=i[de]),Vr(m,de,Gt(J,s,l,de,i,g))}),m}function Ky(i){var s=je(i);return function(l){return jf(l,i,s)}}function jf(i,s,l){var u=l.length;if(i==null)return!u;for(i=Re(i);u--;){var d=l[u],g=s[d],m=i[d];if(m===n&&!(d in i)||!g(m))return!1}return!0}function Jf(i,s,l){if(typeof i!="function")throw new Kt(c);return es(function(){i.apply(n,l)},s)}function Yr(i,s,l,u){var d=-1,g=qs,m=!0,E=i.length,T=[],R=s.length;if(!E)return T;l&&(s=ke(s,Dt(l))),u?(g=ql,m=!1):s.length>=o&&(g=Hr,m=!1,s=new yi(s));e:for(;++d<E;){var P=i[d],L=l==null?P:l(P);if(P=u||P!==0?P:0,m&&L===L){for(var H=R;H--;)if(s[H]===L)continue e;T.push(P)}else g(s,L,u)||T.push(P)}return T}var jn=Th(dn),Zf=Th(la,!0);function qy(i,s){var l=!0;return jn(i,function(u,d,g){return l=!!s(u,d,g),l}),l}function co(i,s,l){for(var u=-1,d=i.length;++u<d;){var g=i[u],m=s(g);if(m!=null&&(E===n?m===m&&!Lt(m):l(m,E)))var E=m,T=g}return T}function Gy(i,s,l,u){var d=i.length;for(l=se(l),l<0&&(l=-l>d?0:d+l),u=u===n||u>d?d:se(u),u<0&&(u+=d),u=l>u?0:gd(u);l<u;)i[l++]=s;return i}function eh(i,s){var l=[];return jn(i,function(u,d,g){s(u,d,g)&&l.push(u)}),l}function st(i,s,l,u,d){var g=-1,m=i.length;for(l||(l=M0),d||(d=[]);++g<m;){var E=i[g];s>0&&l(E)?s>1?st(E,s-1,l,u,d):Yn(d,E):u||(d[d.length]=E)}return d}var oa=xh(),th=xh(!0);function dn(i,s){return i&&oa(i,s,je)}function la(i,s){return i&&th(i,s,je)}function uo(i,s){return Vn(s,function(l){return Pn(i[l])})}function Ei(i,s){s=Zn(s,i);for(var l=0,u=s.length;i!=null&&l<u;)i=i[pn(s[l++])];return l&&l==u?i:n}function nh(i,s,l){var u=s(i);return re(i)?u:Yn(u,l(i))}function _t(i){return i==null?i===n?Y:M:mi&&mi in Re(i)?A0(i):H0(i)}function aa(i,s){return i>s}function Vy(i,s){return i!=null&&Se.call(i,s)}function Yy(i,s){return i!=null&&s in Re(i)}function Qy(i,s,l){return i>=lt(s,l)&&i<Ve(s,l)}function ca(i,s,l){for(var u=l?ql:qs,d=i[0].length,g=i.length,m=g,E=x(g),T=1/0,R=[];m--;){var P=i[m];m&&s&&(P=ke(P,Dt(s))),T=lt(P.length,T),E[m]=!l&&(s||d>=120&&P.length>=120)?new yi(m&&P):n}P=i[0];var L=-1,H=E[0];e:for(;++L<d&&R.length<T;){var G=P[L],j=s?s(G):G;if(G=l||G!==0?G:0,!(H?Hr(H,j):u(R,j,l))){for(m=g;--m;){var oe=E[m];if(!(oe?Hr(oe,j):u(i[m],j,l)))continue e}H&&H.push(j),R.push(G)}}return R}function Xy(i,s,l,u){return dn(i,function(d,g,m){s(u,l(d),g,m)}),u}function Qr(i,s,l){s=Zn(s,i),i=zh(i,s);var u=i==null?i:i[pn(Yt(s))];return u==null?n:Ot(u,i,l)}function ih(i){return $e(i)&&_t(i)==Kn}function jy(i){return $e(i)&&_t(i)==ye}function Jy(i){return $e(i)&&_t(i)==Ht}function Xr(i,s,l,u,d){return i===s?!0:i==null||s==null||!$e(i)&&!$e(s)?i!==i&&s!==s:Zy(i,s,l,u,Xr,d)}function Zy(i,s,l,u,d,g){var m=re(i),E=re(s),T=m?yt:at(i),R=E?yt:at(s);T=T==Kn?F:T,R=R==Kn?F:R;var P=T==F,L=R==F,H=T==R;if(H&&ti(i)){if(!ti(s))return!1;m=!0,P=!1}if(H&&!P)return g||(g=new jt),m||ur(i)?Fh(i,s,l,u,d,g):x0(i,s,T,l,u,d,g);if(!(l&U)){var G=P&&Se.call(i,"__wrapped__"),j=L&&Se.call(s,"__wrapped__");if(G||j){var oe=G?i.value():i,J=j?s.value():s;return g||(g=new jt),d(oe,J,l,u,g)}}return H?(g||(g=new jt),S0(i,s,l,u,d,g)):!1}function e0(i){return $e(i)&&at(i)==S}function ua(i,s,l,u){var d=l.length,g=d,m=!u;if(i==null)return!g;for(i=Re(i);d--;){var E=l[d];if(m&&E[2]?E[1]!==i[E[0]]:!(E[0]in i))return!1}for(;++d<g;){E=l[d];var T=E[0],R=i[T],P=E[1];if(m&&E[2]){if(R===n&&!(T in i))return!1}else{var L=new jt;if(u)var H=u(R,P,T,i,s,L);if(!(H===n?Xr(P,R,U|K,u,L):H))return!1}}return!0}function rh(i){if(!We(i)||F0(i))return!1;var s=Pn(i)?ey:Km;return s.test(bi(i))}function t0(i){return $e(i)&&_t(i)==W}function n0(i){return $e(i)&&at(i)==D}function i0(i){return $e(i)&&Ao(i.length)&&!!De[_t(i)]}function sh(i){return typeof i=="function"?i:i==null?It:typeof i=="object"?re(i)?ah(i[0],i[1]):lh(i):Sd(i)}function fa(i){if(!Zr(i))return oy(i);var s=[];for(var l in Re(i))Se.call(i,l)&&l!="constructor"&&s.push(l);return s}function r0(i){if(!We(i))return U0(i);var s=Zr(i),l=[];for(var u in i)u=="constructor"&&(s||!Se.call(i,u))||l.push(u);return l}function ha(i,s){return i<s}function oh(i,s){var l=-1,u=Ct(i)?x(i.length):[];return jn(i,function(d,g,m){u[++l]=s(d,g,m)}),u}function lh(i){var s=Sa(i);return s.length==1&&s[0][2]?Hh(s[0][0],s[0][1]):function(l){return l===i||ua(l,i,s)}}function ah(i,s){return Ra(i)&&Uh(s)?Hh(pn(i),s):function(l){var u=Wa(l,i);return u===n&&u===s?Ua(l,i):Xr(s,u,U|K)}}function fo(i,s,l,u,d){i!==s&&oa(s,function(g,m){if(d||(d=new jt),We(g))s0(i,s,m,l,fo,u,d);else{var E=u?u(Pa(i,m),g,m+"",i,s,d):n;E===n&&(E=g),ra(i,m,E)}},bt)}function s0(i,s,l,u,d,g,m){var E=Pa(i,l),T=Pa(s,l),R=m.get(T);if(R){ra(i,l,R);return}var P=g?g(E,T,l+"",i,s,m):n,L=P===n;if(L){var H=re(T),G=!H&&ti(T),j=!H&&!G&&ur(T);P=T,H||G||j?re(E)?P=E:ze(E)?P=Et(E):G?(L=!1,P=wh(T,!0)):j?(L=!1,P=Eh(T,!0)):P=[]:ts(T)||Ii(T)?(P=E,Ii(E)?P=md(E):(!We(E)||Pn(E))&&(P=Wh(T))):L=!1}L&&(m.set(T,P),d(P,T,u,g,m),m.delete(T)),ra(i,l,P)}function ch(i,s){var l=i.length;if(l)return s+=s<0?l:0,Nn(s,l)?i[s]:n}function uh(i,s,l){s.length?s=ke(s,function(g){return re(g)?function(m){return Ei(m,g.length===1?g[0]:g)}:g}):s=[It];var u=-1;s=ke(s,Dt(Q()));var d=oh(i,function(g,m,E){var T=ke(s,function(R){return R(g)});return{criteria:T,index:++u,value:g}});return Ov(d,function(g,m){return v0(g,m,l)})}function o0(i,s){return fh(i,s,function(l,u){return Ua(i,u)})}function fh(i,s,l){for(var u=-1,d=s.length,g={};++u<d;){var m=s[u],E=Ei(i,m);l(E,m)&&jr(g,Zn(m,i),E)}return g}function l0(i){return function(s){return Ei(s,i)}}function da(i,s,l,u){var d=u?Pv:Zi,g=-1,m=s.length,E=i;for(i===s&&(s=Et(s)),l&&(E=ke(i,Dt(l)));++g<m;)for(var T=0,R=s[g],P=l?l(R):R;(T=d(E,P,T,u))>-1;)E!==i&&to.call(E,T,1),to.call(i,T,1);return i}function hh(i,s){for(var l=i?s.length:0,u=l-1;l--;){var d=s[l];if(l==u||d!==g){var g=d;Nn(d)?to.call(i,d,1):ma(i,d)}}return i}function _a(i,s){return i+ro(Gf()*(s-i+1))}function a0(i,s,l,u){for(var d=-1,g=Ve(io((s-i)/(l||1)),0),m=x(g);g--;)m[u?g:++d]=i,i+=l;return m}function pa(i,s){var l="";if(!i||s<1||s>pe)return l;do s%2&&(l+=i),s=ro(s/2),s&&(i+=i);while(s);return l}function le(i,s){return Oa($h(i,s,It),i+"")}function c0(i){return Qf(fr(i))}function u0(i,s){var l=fr(i);return Co(l,wi(s,0,l.length))}function jr(i,s,l,u){if(!We(i))return i;s=Zn(s,i);for(var d=-1,g=s.length,m=g-1,E=i;E!=null&&++d<g;){var T=pn(s[d]),R=l;if(T==="__proto__"||T==="constructor"||T==="prototype")return i;if(d!=m){var P=E[T];R=u?u(P,T,E):n,R===n&&(R=We(P)?P:Nn(s[d+1])?[]:{})}Vr(E,T,R),E=E[T]}return i}var dh=so?function(i,s){return so.set(i,s),i}:It,f0=no?function(i,s){return no(i,"toString",{configurable:!0,enumerable:!1,value:$a(s),writable:!0})}:It;function h0(i){return Co(fr(i))}function Vt(i,s,l){var u=-1,d=i.length;s<0&&(s=-s>d?0:d+s),l=l>d?d:l,l<0&&(l+=d),d=s>l?0:l-s>>>0,s>>>=0;for(var g=x(d);++u<d;)g[u]=i[u+s];return g}function d0(i,s){var l;return jn(i,function(u,d,g){return l=s(u,d,g),!l}),!!l}function ho(i,s,l){var u=0,d=i==null?u:i.length;if(typeof s=="number"&&s===s&&d<=Hs){for(;u<d;){var g=u+d>>>1,m=i[g];m!==null&&!Lt(m)&&(l?m<=s:m<s)?u=g+1:d=g}return d}return ga(i,s,It,l)}function ga(i,s,l,u){var d=0,g=i==null?0:i.length;if(g===0)return 0;s=l(s);for(var m=s!==s,E=s===null,T=Lt(s),R=s===n;d<g;){var P=ro((d+g)/2),L=l(i[P]),H=L!==n,G=L===null,j=L===L,oe=Lt(L);if(m)var J=u||j;else R?J=j&&(u||H):E?J=j&&H&&(u||!G):T?J=j&&H&&!G&&(u||!oe):G||oe?J=!1:J=u?L<=s:L<s;J?d=P+1:g=P}return lt(g,Ut)}function _h(i,s){for(var l=-1,u=i.length,d=0,g=[];++l<u;){var m=i[l],E=s?s(m):m;if(!l||!Jt(E,T)){var T=E;g[d++]=m===0?0:m}}return g}function ph(i){return typeof i=="number"?i:Lt(i)?bn:+i}function Mt(i){if(typeof i=="string")return i;if(re(i))return ke(i,Mt)+"";if(Lt(i))return Vf?Vf.call(i):"";var s=i+"";return s=="0"&&1/i==-Te?"-0":s}function Jn(i,s,l){var u=-1,d=qs,g=i.length,m=!0,E=[],T=E;if(l)m=!1,d=ql;else if(g>=o){var R=s?null:I0(i);if(R)return Vs(R);m=!1,d=Hr,T=new yi}else T=s?[]:E;e:for(;++u<g;){var P=i[u],L=s?s(P):P;if(P=l||P!==0?P:0,m&&L===L){for(var H=T.length;H--;)if(T[H]===L)continue e;s&&T.push(L),E.push(P)}else d(T,L,l)||(T!==E&&T.push(L),E.push(P))}return E}function ma(i,s){return s=Zn(s,i),i=zh(i,s),i==null||delete i[pn(Yt(s))]}function gh(i,s,l,u){return jr(i,s,l(Ei(i,s)),u)}function _o(i,s,l,u){for(var d=i.length,g=u?d:-1;(u?g--:++g<d)&&s(i[g],g,i););return l?Vt(i,u?0:g,u?g+1:d):Vt(i,u?g+1:0,u?d:g)}function mh(i,s){var l=i;return l instanceof _e&&(l=l.value()),Gl(s,function(u,d){return d.func.apply(d.thisArg,Yn([u],d.args))},l)}function va(i,s,l){var u=i.length;if(u<2)return u?Jn(i[0]):[];for(var d=-1,g=x(u);++d<u;)for(var m=i[d],E=-1;++E<u;)E!=d&&(g[d]=Yr(g[d]||m,i[E],s,l));return Jn(st(g,1),s,l)}function vh(i,s,l){for(var u=-1,d=i.length,g=s.length,m={};++u<d;){var E=u<g?s[u]:n;l(m,i[u],E)}return m}function ya(i){return ze(i)?i:[]}function wa(i){return typeof i=="function"?i:It}function Zn(i,s){return re(i)?i:Ra(i,s)?[i]:Vh(xe(i))}var _0=le;function ei(i,s,l){var u=i.length;return l=l===n?u:l,!s&&l>=u?i:Vt(i,s,l)}var yh=ty||function(i){return rt.clearTimeout(i)};function wh(i,s){if(s)return i.slice();var l=i.length,u=Hf?Hf(l):new i.constructor(l);return i.copy(u),u}function Ea(i){var s=new i.constructor(i.byteLength);return new Zs(s).set(new Zs(i)),s}function p0(i,s){var l=s?Ea(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.byteLength)}function g0(i){var s=new i.constructor(i.source,nf.exec(i));return s.lastIndex=i.lastIndex,s}function m0(i){return Gr?Re(Gr.call(i)):{}}function Eh(i,s){var l=s?Ea(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)}function Ch(i,s){if(i!==s){var l=i!==n,u=i===null,d=i===i,g=Lt(i),m=s!==n,E=s===null,T=s===s,R=Lt(s);if(!E&&!R&&!g&&i>s||g&&m&&T&&!E&&!R||u&&m&&T||!l&&T||!d)return 1;if(!u&&!g&&!R&&i<s||R&&l&&d&&!u&&!g||E&&l&&d||!m&&d||!T)return-1}return 0}function v0(i,s,l){for(var u=-1,d=i.criteria,g=s.criteria,m=d.length,E=l.length;++u<m;){var T=Ch(d[u],g[u]);if(T){if(u>=E)return T;var R=l[u];return T*(R=="desc"?-1:1)}}return i.index-s.index}function bh(i,s,l,u){for(var d=-1,g=i.length,m=l.length,E=-1,T=s.length,R=Ve(g-m,0),P=x(T+R),L=!u;++E<T;)P[E]=s[E];for(;++d<m;)(L||d<g)&&(P[l[d]]=i[d]);for(;R--;)P[E++]=i[d++];return P}function Ih(i,s,l,u){for(var d=-1,g=i.length,m=-1,E=l.length,T=-1,R=s.length,P=Ve(g-E,0),L=x(P+R),H=!u;++d<P;)L[d]=i[d];for(var G=d;++T<R;)L[G+T]=s[T];for(;++m<E;)(H||d<g)&&(L[G+l[m]]=i[d++]);return L}function Et(i,s){var l=-1,u=i.length;for(s||(s=x(u));++l<u;)s[l]=i[l];return s}function _n(i,s,l,u){var d=!l;l||(l={});for(var g=-1,m=s.length;++g<m;){var E=s[g],T=u?u(l[E],i[E],E,l,i):n;T===n&&(T=i[E]),d?Sn(l,E,T):Vr(l,E,T)}return l}function y0(i,s){return _n(i,Aa(i),s)}function w0(i,s){return _n(i,kh(i),s)}function po(i,s){return function(l,u){var d=re(l)?Tv:$y,g=s?s():{};return d(l,i,Q(u,2),g)}}function lr(i){return le(function(s,l){var u=-1,d=l.length,g=d>1?l[d-1]:n,m=d>2?l[2]:n;for(g=i.length>3&&typeof g=="function"?(d--,g):n,m&&pt(l[0],l[1],m)&&(g=d<3?n:g,d=1),s=Re(s);++u<d;){var E=l[u];E&&i(s,E,u,g)}return s})}function Th(i,s){return function(l,u){if(l==null)return l;if(!Ct(l))return i(l,u);for(var d=l.length,g=s?d:-1,m=Re(l);(s?g--:++g<d)&&u(m[g],g,m)!==!1;);return l}}function xh(i){return function(s,l,u){for(var d=-1,g=Re(s),m=u(s),E=m.length;E--;){var T=m[i?E:++d];if(l(g[T],T,g)===!1)break}return s}}function E0(i,s,l){var u=s&Z,d=Jr(i);function g(){var m=this&&this!==rt&&this instanceof g?d:i;return m.apply(u?l:this,arguments)}return g}function Sh(i){return function(s){s=xe(s);var l=er(s)?Xt(s):n,u=l?l[0]:s.charAt(0),d=l?ei(l,1).join(""):s.slice(1);return u[i]()+d}}function ar(i){return function(s){return Gl(Td(Id(s).replace(fv,"")),i,"")}}function Jr(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var l=or(i.prototype),u=i.apply(l,s);return We(u)?u:l}}function C0(i,s,l){var u=Jr(i);function d(){for(var g=arguments.length,m=x(g),E=g,T=cr(d);E--;)m[E]=arguments[E];var R=g<3&&m[0]!==T&&m[g-1]!==T?[]:Qn(m,T);if(g-=R.length,g<l)return Oh(i,s,go,d.placeholder,n,m,R,n,n,l-g);var P=this&&this!==rt&&this instanceof d?u:i;return Ot(P,this,m)}return d}function Ah(i){return function(s,l,u){var d=Re(s);if(!Ct(s)){var g=Q(l,3);s=je(s),l=function(E){return g(d[E],E,d)}}var m=i(s,l,u);return m>-1?d[g?s[m]:m]:n}}function Rh(i){return Rn(function(s){var l=s.length,u=l,d=qt.prototype.thru;for(i&&s.reverse();u--;){var g=s[u];if(typeof g!="function")throw new Kt(c);if(d&&!m&&wo(g)=="wrapper")var m=new qt([],!0)}for(u=m?u:l;++u<l;){g=s[u];var E=wo(g),T=E=="wrapper"?xa(g):n;T&&Na(T[0])&&T[1]==(vt|Ee|qe|Pt)&&!T[4].length&&T[9]==1?m=m[wo(T[0])].apply(m,T[3]):m=g.length==1&&Na(g)?m[E]():m.thru(g)}return function(){var R=arguments,P=R[0];if(m&&R.length==1&&re(P))return m.plant(P).value();for(var L=0,H=l?s[L].apply(this,R):P;++L<l;)H=s[L].call(this,H);return H}})}function go(i,s,l,u,d,g,m,E,T,R){var P=s&vt,L=s&Z,H=s&we,G=s&(Ee|te),j=s&_i,oe=H?n:Jr(i);function J(){for(var de=arguments.length,me=x(de),Ft=de;Ft--;)me[Ft]=arguments[Ft];if(G)var gt=cr(J),kt=Mv(me,gt);if(u&&(me=bh(me,u,d,G)),g&&(me=Ih(me,g,m,G)),de-=kt,G&&de<R){var Ke=Qn(me,gt);return Oh(i,s,go,J.placeholder,l,me,Ke,E,T,R-de)}var Zt=L?l:this,Dn=H?Zt[i]:i;return de=me.length,E?me=$0(me,E):j&&de>1&&me.reverse(),P&&T<de&&(me.length=T),this&&this!==rt&&this instanceof J&&(Dn=oe||Jr(Dn)),Dn.apply(Zt,me)}return J}function Nh(i,s){return function(l,u){return Xy(l,i,s(u),{})}}function mo(i,s){return function(l,u){var d;if(l===n&&u===n)return s;if(l!==n&&(d=l),u!==n){if(d===n)return u;typeof l=="string"||typeof u=="string"?(l=Mt(l),u=Mt(u)):(l=ph(l),u=ph(u)),d=i(l,u)}return d}}function Ca(i){return Rn(function(s){return s=ke(s,Dt(Q())),le(function(l){var u=this;return i(s,function(d){return Ot(d,u,l)})})})}function vo(i,s){s=s===n?" ":Mt(s);var l=s.length;if(l<2)return l?pa(s,i):s;var u=pa(s,io(i/tr(s)));return er(s)?ei(Xt(u),0,i).join(""):u.slice(0,i)}function b0(i,s,l,u){var d=s&Z,g=Jr(i);function m(){for(var E=-1,T=arguments.length,R=-1,P=u.length,L=x(P+T),H=this&&this!==rt&&this instanceof m?g:i;++R<P;)L[R]=u[R];for(;T--;)L[R++]=arguments[++E];return Ot(H,d?l:this,L)}return m}function Ph(i){return function(s,l,u){return u&&typeof u!="number"&&pt(s,l,u)&&(l=u=n),s=On(s),l===n?(l=s,s=0):l=On(l),u=u===n?s<l?1:-1:On(u),a0(s,l,u,i)}}function yo(i){return function(s,l){return typeof s=="string"&&typeof l=="string"||(s=Qt(s),l=Qt(l)),i(s,l)}}function Oh(i,s,l,u,d,g,m,E,T,R){var P=s&Ee,L=P?m:n,H=P?n:m,G=P?g:n,j=P?n:g;s|=P?qe:Wt,s&=~(P?Wt:qe),s&Le||(s&=~(Z|we));var oe=[i,s,d,G,L,j,H,E,T,R],J=l.apply(n,oe);return Na(i)&&Kh(J,oe),J.placeholder=u,qh(J,i,s)}function ba(i){var s=Ge[i];return function(l,u){if(l=Qt(l),u=u==null?0:lt(se(u),292),u&&qf(l)){var d=(xe(l)+"e").split("e"),g=s(d[0]+"e"+(+d[1]+u));return d=(xe(g)+"e").split("e"),+(d[0]+"e"+(+d[1]-u))}return s(l)}}var I0=rr&&1/Vs(new rr([,-0]))[1]==Te?function(i){return new rr(i)}:qa;function Dh(i){return function(s){var l=at(s);return l==S?Zl(s):l==D?Hv(s):Dv(s,i(s))}}function An(i,s,l,u,d,g,m,E){var T=s&we;if(!T&&typeof i!="function")throw new Kt(c);var R=u?u.length:0;if(R||(s&=~(qe|Wt),u=d=n),m=m===n?m:Ve(se(m),0),E=E===n?E:se(E),R-=d?d.length:0,s&Wt){var P=u,L=d;u=d=n}var H=T?n:xa(i),G=[i,s,l,u,d,P,L,g,m,E];if(H&&W0(G,H),i=G[0],s=G[1],l=G[2],u=G[3],d=G[4],E=G[9]=G[9]===n?T?0:i.length:Ve(G[9]-R,0),!E&&s&(Ee|te)&&(s&=~(Ee|te)),!s||s==Z)var j=E0(i,s,l);else s==Ee||s==te?j=C0(i,s,E):(s==qe||s==(Z|qe))&&!d.length?j=b0(i,s,l,u):j=go.apply(n,G);var oe=H?dh:Kh;return qh(oe(j,G),i,s)}function Mh(i,s,l,u){return i===n||Jt(i,ir[l])&&!Se.call(u,l)?s:i}function Lh(i,s,l,u,d,g){return We(i)&&We(s)&&(g.set(s,i),fo(i,s,n,Lh,g),g.delete(s)),i}function T0(i){return ts(i)?n:i}function Fh(i,s,l,u,d,g){var m=l&U,E=i.length,T=s.length;if(E!=T&&!(m&&T>E))return!1;var R=g.get(i),P=g.get(s);if(R&&P)return R==s&&P==i;var L=-1,H=!0,G=l&K?new yi:n;for(g.set(i,s),g.set(s,i);++L<E;){var j=i[L],oe=s[L];if(u)var J=m?u(oe,j,L,s,i,g):u(j,oe,L,i,s,g);if(J!==n){if(J)continue;H=!1;break}if(G){if(!Vl(s,function(de,me){if(!Hr(G,me)&&(j===de||d(j,de,l,u,g)))return G.push(me)})){H=!1;break}}else if(!(j===oe||d(j,oe,l,u,g))){H=!1;break}}return g.delete(i),g.delete(s),H}function x0(i,s,l,u,d,g,m){switch(l){case ge:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case ye:return!(i.byteLength!=s.byteLength||!g(new Zs(i),new Zs(s)));case qn:case Ht:case O:return Jt(+i,+s);case Gn:return i.name==s.name&&i.message==s.message;case W:case V:return i==s+"";case S:var E=Zl;case D:var T=u&U;if(E||(E=Vs),i.size!=s.size&&!T)return!1;var R=m.get(i);if(R)return R==s;u|=K,m.set(i,s);var P=Fh(E(i),E(s),u,d,g,m);return m.delete(i),P;case q:if(Gr)return Gr.call(i)==Gr.call(s)}return!1}function S0(i,s,l,u,d,g){var m=l&U,E=Ia(i),T=E.length,R=Ia(s),P=R.length;if(T!=P&&!m)return!1;for(var L=T;L--;){var H=E[L];if(!(m?H in s:Se.call(s,H)))return!1}var G=g.get(i),j=g.get(s);if(G&&j)return G==s&&j==i;var oe=!0;g.set(i,s),g.set(s,i);for(var J=m;++L<T;){H=E[L];var de=i[H],me=s[H];if(u)var Ft=m?u(me,de,H,s,i,g):u(de,me,H,i,s,g);if(!(Ft===n?de===me||d(de,me,l,u,g):Ft)){oe=!1;break}J||(J=H=="constructor")}if(oe&&!J){var gt=i.constructor,kt=s.constructor;gt!=kt&&"constructor"in i&&"constructor"in s&&!(typeof gt=="function"&&gt instanceof gt&&typeof kt=="function"&&kt instanceof kt)&&(oe=!1)}return g.delete(i),g.delete(s),oe}function Rn(i){return Oa($h(i,n,jh),i+"")}function Ia(i){return nh(i,je,Aa)}function Ta(i){return nh(i,bt,kh)}var xa=so?function(i){return so.get(i)}:qa;function wo(i){for(var s=i.name+"",l=sr[s],u=Se.call(sr,s)?l.length:0;u--;){var d=l[u],g=d.func;if(g==null||g==i)return d.name}return s}function cr(i){var s=Se.call(p,"placeholder")?p:i;return s.placeholder}function Q(){var i=p.iteratee||za;return i=i===za?sh:i,arguments.length?i(arguments[0],arguments[1]):i}function Eo(i,s){var l=i.__data__;return L0(s)?l[typeof s=="string"?"string":"hash"]:l.map}function Sa(i){for(var s=je(i),l=s.length;l--;){var u=s[l],d=i[u];s[l]=[u,d,Uh(d)]}return s}function Ci(i,s){var l=Bv(i,s);return rh(l)?l:n}function A0(i){var s=Se.call(i,mi),l=i[mi];try{i[mi]=n;var u=!0}catch{}var d=js.call(i);return u&&(s?i[mi]=l:delete i[mi]),d}var Aa=ta?function(i){return i==null?[]:(i=Re(i),Vn(ta(i),function(s){return zf.call(i,s)}))}:Ga,kh=ta?function(i){for(var s=[];i;)Yn(s,Aa(i)),i=eo(i);return s}:Ga,at=_t;(na&&at(new na(new ArrayBuffer(1)))!=ge||zr&&at(new zr)!=S||ia&&at(ia.resolve())!=$||rr&&at(new rr)!=D||Kr&&at(new Kr)!=X)&&(at=function(i){var s=_t(i),l=s==F?i.constructor:n,u=l?bi(l):"";if(u)switch(u){case uy:return ge;case fy:return S;case hy:return $;case dy:return D;case _y:return X}return s});function R0(i,s,l){for(var u=-1,d=l.length;++u<d;){var g=l[u],m=g.size;switch(g.type){case"drop":i+=m;break;case"dropRight":s-=m;break;case"take":s=lt(s,i+m);break;case"takeRight":i=Ve(i,s-m);break}}return{start:i,end:s}}function N0(i){var s=i.match(Fm);return s?s[1].split(km):[]}function Bh(i,s,l){s=Zn(s,i);for(var u=-1,d=s.length,g=!1;++u<d;){var m=pn(s[u]);if(!(g=i!=null&&l(i,m)))break;i=i[m]}return g||++u!=d?g:(d=i==null?0:i.length,!!d&&Ao(d)&&Nn(m,d)&&(re(i)||Ii(i)))}function P0(i){var s=i.length,l=new i.constructor(s);return s&&typeof i[0]=="string"&&Se.call(i,"index")&&(l.index=i.index,l.input=i.input),l}function Wh(i){return typeof i.constructor=="function"&&!Zr(i)?or(eo(i)):{}}function O0(i,s,l){var u=i.constructor;switch(s){case ye:return Ea(i);case qn:case Ht:return new u(+i);case ge:return p0(i,l);case Fe:case dt:case hn:case Qi:case In:case Xi:case it:case wt:case ji:return Eh(i,l);case S:return new u;case O:case V:return new u(i);case W:return g0(i);case D:return new u;case q:return m0(i)}}function D0(i,s){var l=s.length;if(!l)return i;var u=l-1;return s[u]=(l>1?"& ":"")+s[u],s=s.join(l>2?", ":" "),i.replace(Lm,`{
/* [wrapped with `+s+`] */
`)}function M0(i){return re(i)||Ii(i)||!!(Kf&&i&&i[Kf])}function Nn(i,s){var l=typeof i;return s=s??pe,!!s&&(l=="number"||l!="symbol"&&Gm.test(i))&&i>-1&&i%1==0&&i<s}function pt(i,s,l){if(!We(l))return!1;var u=typeof s;return(u=="number"?Ct(l)&&Nn(s,l.length):u=="string"&&s in l)?Jt(l[s],i):!1}function Ra(i,s){if(re(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||Lt(i)?!0:Pm.test(i)||!Nm.test(i)||s!=null&&i in Re(s)}function L0(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}function Na(i){var s=wo(i),l=p[s];if(typeof l!="function"||!(s in _e.prototype))return!1;if(i===l)return!0;var u=xa(l);return!!u&&i===u[0]}function F0(i){return!!Uf&&Uf in i}var k0=Qs?Pn:Va;function Zr(i){var s=i&&i.constructor,l=typeof s=="function"&&s.prototype||ir;return i===l}function Uh(i){return i===i&&!We(i)}function Hh(i,s){return function(l){return l==null?!1:l[i]===s&&(s!==n||i in Re(l))}}function B0(i){var s=xo(i,function(u){return l.size===_&&l.clear(),u}),l=s.cache;return s}function W0(i,s){var l=i[1],u=s[1],d=l|u,g=d<(Z|we|vt),m=u==vt&&l==Ee||u==vt&&l==Pt&&i[7].length<=s[8]||u==(vt|Pt)&&s[7].length<=s[8]&&l==Ee;if(!(g||m))return i;u&Z&&(i[2]=s[2],d|=l&Z?0:Le);var E=s[3];if(E){var T=i[3];i[3]=T?bh(T,E,s[4]):E,i[4]=T?Qn(i[3],y):s[4]}return E=s[5],E&&(T=i[5],i[5]=T?Ih(T,E,s[6]):E,i[6]=T?Qn(i[5],y):s[6]),E=s[7],E&&(i[7]=E),u&vt&&(i[8]=i[8]==null?s[8]:lt(i[8],s[8])),i[9]==null&&(i[9]=s[9]),i[0]=s[0],i[1]=d,i}function U0(i){var s=[];if(i!=null)for(var l in Re(i))s.push(l);return s}function H0(i){return js.call(i)}function $h(i,s,l){return s=Ve(s===n?i.length-1:s,0),function(){for(var u=arguments,d=-1,g=Ve(u.length-s,0),m=x(g);++d<g;)m[d]=u[s+d];d=-1;for(var E=x(s+1);++d<s;)E[d]=u[d];return E[s]=l(m),Ot(i,this,E)}}function zh(i,s){return s.length<2?i:Ei(i,Vt(s,0,-1))}function $0(i,s){for(var l=i.length,u=lt(s.length,l),d=Et(i);u--;){var g=s[u];i[u]=Nn(g,l)?d[g]:n}return i}function Pa(i,s){if(!(s==="constructor"&&typeof i[s]=="function")&&s!="__proto__")return i[s]}var Kh=Gh(dh),es=iy||function(i,s){return rt.setTimeout(i,s)},Oa=Gh(f0);function qh(i,s,l){var u=s+"";return Oa(i,D0(u,z0(N0(u),l)))}function Gh(i){var s=0,l=0;return function(){var u=ly(),d=Gi-(u-l);if(l=u,d>0){if(++s>=qi)return arguments[0]}else s=0;return i.apply(n,arguments)}}function Co(i,s){var l=-1,u=i.length,d=u-1;for(s=s===n?u:s;++l<s;){var g=_a(l,d),m=i[g];i[g]=i[l],i[l]=m}return i.length=s,i}var Vh=B0(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(Om,function(l,u,d,g){s.push(d?g.replace(Um,"$1"):u||l)}),s});function pn(i){if(typeof i=="string"||Lt(i))return i;var s=i+"";return s=="0"&&1/i==-Te?"-0":s}function bi(i){if(i!=null){try{return Xs.call(i)}catch{}try{return i+""}catch{}}return""}function z0(i,s){return zt(Ll,function(l){var u="_."+l[0];s&l[1]&&!qs(i,u)&&i.push(u)}),i.sort()}function Yh(i){if(i instanceof _e)return i.clone();var s=new qt(i.__wrapped__,i.__chain__);return s.__actions__=Et(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}function K0(i,s,l){(l?pt(i,s,l):s===n)?s=1:s=Ve(se(s),0);var u=i==null?0:i.length;if(!u||s<1)return[];for(var d=0,g=0,m=x(io(u/s));d<u;)m[g++]=Vt(i,d,d+=s);return m}function q0(i){for(var s=-1,l=i==null?0:i.length,u=0,d=[];++s<l;){var g=i[s];g&&(d[u++]=g)}return d}function G0(){var i=arguments.length;if(!i)return[];for(var s=x(i-1),l=arguments[0],u=i;u--;)s[u-1]=arguments[u];return Yn(re(l)?Et(l):[l],st(s,1))}var V0=le(function(i,s){return ze(i)?Yr(i,st(s,1,ze,!0)):[]}),Y0=le(function(i,s){var l=Yt(s);return ze(l)&&(l=n),ze(i)?Yr(i,st(s,1,ze,!0),Q(l,2)):[]}),Q0=le(function(i,s){var l=Yt(s);return ze(l)&&(l=n),ze(i)?Yr(i,st(s,1,ze,!0),n,l):[]});function X0(i,s,l){var u=i==null?0:i.length;return u?(s=l||s===n?1:se(s),Vt(i,s<0?0:s,u)):[]}function j0(i,s,l){var u=i==null?0:i.length;return u?(s=l||s===n?1:se(s),s=u-s,Vt(i,0,s<0?0:s)):[]}function J0(i,s){return i&&i.length?_o(i,Q(s,3),!0,!0):[]}function Z0(i,s){return i&&i.length?_o(i,Q(s,3),!0):[]}function ew(i,s,l,u){var d=i==null?0:i.length;return d?(l&&typeof l!="number"&&pt(i,s,l)&&(l=0,u=d),Gy(i,s,l,u)):[]}function Qh(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var d=l==null?0:se(l);return d<0&&(d=Ve(u+d,0)),Gs(i,Q(s,3),d)}function Xh(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var d=u-1;return l!==n&&(d=se(l),d=l<0?Ve(u+d,0):lt(d,u-1)),Gs(i,Q(s,3),d,!0)}function jh(i){var s=i==null?0:i.length;return s?st(i,1):[]}function tw(i){var s=i==null?0:i.length;return s?st(i,Te):[]}function nw(i,s){var l=i==null?0:i.length;return l?(s=s===n?1:se(s),st(i,s)):[]}function iw(i){for(var s=-1,l=i==null?0:i.length,u={};++s<l;){var d=i[s];u[d[0]]=d[1]}return u}function Jh(i){return i&&i.length?i[0]:n}function rw(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var d=l==null?0:se(l);return d<0&&(d=Ve(u+d,0)),Zi(i,s,d)}function sw(i){var s=i==null?0:i.length;return s?Vt(i,0,-1):[]}var ow=le(function(i){var s=ke(i,ya);return s.length&&s[0]===i[0]?ca(s):[]}),lw=le(function(i){var s=Yt(i),l=ke(i,ya);return s===Yt(l)?s=n:l.pop(),l.length&&l[0]===i[0]?ca(l,Q(s,2)):[]}),aw=le(function(i){var s=Yt(i),l=ke(i,ya);return s=typeof s=="function"?s:n,s&&l.pop(),l.length&&l[0]===i[0]?ca(l,n,s):[]});function cw(i,s){return i==null?"":sy.call(i,s)}function Yt(i){var s=i==null?0:i.length;return s?i[s-1]:n}function uw(i,s,l){var u=i==null?0:i.length;if(!u)return-1;var d=u;return l!==n&&(d=se(l),d=d<0?Ve(u+d,0):lt(d,u-1)),s===s?zv(i,s,d):Gs(i,Of,d,!0)}function fw(i,s){return i&&i.length?ch(i,se(s)):n}var hw=le(Zh);function Zh(i,s){return i&&i.length&&s&&s.length?da(i,s):i}function dw(i,s,l){return i&&i.length&&s&&s.length?da(i,s,Q(l,2)):i}function _w(i,s,l){return i&&i.length&&s&&s.length?da(i,s,n,l):i}var pw=Rn(function(i,s){var l=i==null?0:i.length,u=sa(i,s);return hh(i,ke(s,function(d){return Nn(d,l)?+d:d}).sort(Ch)),u});function gw(i,s){var l=[];if(!(i&&i.length))return l;var u=-1,d=[],g=i.length;for(s=Q(s,3);++u<g;){var m=i[u];s(m,u,i)&&(l.push(m),d.push(u))}return hh(i,d),l}function Da(i){return i==null?i:cy.call(i)}function mw(i,s,l){var u=i==null?0:i.length;return u?(l&&typeof l!="number"&&pt(i,s,l)?(s=0,l=u):(s=s==null?0:se(s),l=l===n?u:se(l)),Vt(i,s,l)):[]}function vw(i,s){return ho(i,s)}function yw(i,s,l){return ga(i,s,Q(l,2))}function ww(i,s){var l=i==null?0:i.length;if(l){var u=ho(i,s);if(u<l&&Jt(i[u],s))return u}return-1}function Ew(i,s){return ho(i,s,!0)}function Cw(i,s,l){return ga(i,s,Q(l,2),!0)}function bw(i,s){var l=i==null?0:i.length;if(l){var u=ho(i,s,!0)-1;if(Jt(i[u],s))return u}return-1}function Iw(i){return i&&i.length?_h(i):[]}function Tw(i,s){return i&&i.length?_h(i,Q(s,2)):[]}function xw(i){var s=i==null?0:i.length;return s?Vt(i,1,s):[]}function Sw(i,s,l){return i&&i.length?(s=l||s===n?1:se(s),Vt(i,0,s<0?0:s)):[]}function Aw(i,s,l){var u=i==null?0:i.length;return u?(s=l||s===n?1:se(s),s=u-s,Vt(i,s<0?0:s,u)):[]}function Rw(i,s){return i&&i.length?_o(i,Q(s,3),!1,!0):[]}function Nw(i,s){return i&&i.length?_o(i,Q(s,3)):[]}var Pw=le(function(i){return Jn(st(i,1,ze,!0))}),Ow=le(function(i){var s=Yt(i);return ze(s)&&(s=n),Jn(st(i,1,ze,!0),Q(s,2))}),Dw=le(function(i){var s=Yt(i);return s=typeof s=="function"?s:n,Jn(st(i,1,ze,!0),n,s)});function Mw(i){return i&&i.length?Jn(i):[]}function Lw(i,s){return i&&i.length?Jn(i,Q(s,2)):[]}function Fw(i,s){return s=typeof s=="function"?s:n,i&&i.length?Jn(i,n,s):[]}function Ma(i){if(!(i&&i.length))return[];var s=0;return i=Vn(i,function(l){if(ze(l))return s=Ve(l.length,s),!0}),jl(s,function(l){return ke(i,Yl(l))})}function ed(i,s){if(!(i&&i.length))return[];var l=Ma(i);return s==null?l:ke(l,function(u){return Ot(s,n,u)})}var kw=le(function(i,s){return ze(i)?Yr(i,s):[]}),Bw=le(function(i){return va(Vn(i,ze))}),Ww=le(function(i){var s=Yt(i);return ze(s)&&(s=n),va(Vn(i,ze),Q(s,2))}),Uw=le(function(i){var s=Yt(i);return s=typeof s=="function"?s:n,va(Vn(i,ze),n,s)}),Hw=le(Ma);function $w(i,s){return vh(i||[],s||[],Vr)}function zw(i,s){return vh(i||[],s||[],jr)}var Kw=le(function(i){var s=i.length,l=s>1?i[s-1]:n;return l=typeof l=="function"?(i.pop(),l):n,ed(i,l)});function td(i){var s=p(i);return s.__chain__=!0,s}function qw(i,s){return s(i),i}function bo(i,s){return s(i)}var Gw=Rn(function(i){var s=i.length,l=s?i[0]:0,u=this.__wrapped__,d=function(g){return sa(g,i)};return s>1||this.__actions__.length||!(u instanceof _e)||!Nn(l)?this.thru(d):(u=u.slice(l,+l+(s?1:0)),u.__actions__.push({func:bo,args:[d],thisArg:n}),new qt(u,this.__chain__).thru(function(g){return s&&!g.length&&g.push(n),g}))});function Vw(){return td(this)}function Yw(){return new qt(this.value(),this.__chain__)}function Qw(){this.__values__===n&&(this.__values__=pd(this.value()));var i=this.__index__>=this.__values__.length,s=i?n:this.__values__[this.__index__++];return{done:i,value:s}}function Xw(){return this}function jw(i){for(var s,l=this;l instanceof lo;){var u=Yh(l);u.__index__=0,u.__values__=n,s?d.__wrapped__=u:s=u;var d=u;l=l.__wrapped__}return d.__wrapped__=i,s}function Jw(){var i=this.__wrapped__;if(i instanceof _e){var s=i;return this.__actions__.length&&(s=new _e(this)),s=s.reverse(),s.__actions__.push({func:bo,args:[Da],thisArg:n}),new qt(s,this.__chain__)}return this.thru(Da)}function Zw(){return mh(this.__wrapped__,this.__actions__)}var eE=po(function(i,s,l){Se.call(i,l)?++i[l]:Sn(i,l,1)});function tE(i,s,l){var u=re(i)?Nf:qy;return l&&pt(i,s,l)&&(s=n),u(i,Q(s,3))}function nE(i,s){var l=re(i)?Vn:eh;return l(i,Q(s,3))}var iE=Ah(Qh),rE=Ah(Xh);function sE(i,s){return st(Io(i,s),1)}function oE(i,s){return st(Io(i,s),Te)}function lE(i,s,l){return l=l===n?1:se(l),st(Io(i,s),l)}function nd(i,s){var l=re(i)?zt:jn;return l(i,Q(s,3))}function id(i,s){var l=re(i)?xv:Zf;return l(i,Q(s,3))}var aE=po(function(i,s,l){Se.call(i,l)?i[l].push(s):Sn(i,l,[s])});function cE(i,s,l,u){i=Ct(i)?i:fr(i),l=l&&!u?se(l):0;var d=i.length;return l<0&&(l=Ve(d+l,0)),Ro(i)?l<=d&&i.indexOf(s,l)>-1:!!d&&Zi(i,s,l)>-1}var uE=le(function(i,s,l){var u=-1,d=typeof s=="function",g=Ct(i)?x(i.length):[];return jn(i,function(m){g[++u]=d?Ot(s,m,l):Qr(m,s,l)}),g}),fE=po(function(i,s,l){Sn(i,l,s)});function Io(i,s){var l=re(i)?ke:oh;return l(i,Q(s,3))}function hE(i,s,l,u){return i==null?[]:(re(s)||(s=s==null?[]:[s]),l=u?n:l,re(l)||(l=l==null?[]:[l]),uh(i,s,l))}var dE=po(function(i,s,l){i[l?0:1].push(s)},function(){return[[],[]]});function _E(i,s,l){var u=re(i)?Gl:Mf,d=arguments.length<3;return u(i,Q(s,4),l,d,jn)}function pE(i,s,l){var u=re(i)?Sv:Mf,d=arguments.length<3;return u(i,Q(s,4),l,d,Zf)}function gE(i,s){var l=re(i)?Vn:eh;return l(i,So(Q(s,3)))}function mE(i){var s=re(i)?Qf:c0;return s(i)}function vE(i,s,l){(l?pt(i,s,l):s===n)?s=1:s=se(s);var u=re(i)?Uy:u0;return u(i,s)}function yE(i){var s=re(i)?Hy:h0;return s(i)}function wE(i){if(i==null)return 0;if(Ct(i))return Ro(i)?tr(i):i.length;var s=at(i);return s==S||s==D?i.size:fa(i).length}function EE(i,s,l){var u=re(i)?Vl:d0;return l&&pt(i,s,l)&&(s=n),u(i,Q(s,3))}var CE=le(function(i,s){if(i==null)return[];var l=s.length;return l>1&&pt(i,s[0],s[1])?s=[]:l>2&&pt(s[0],s[1],s[2])&&(s=[s[0]]),uh(i,st(s,1),[])}),To=ny||function(){return rt.Date.now()};function bE(i,s){if(typeof s!="function")throw new Kt(c);return i=se(i),function(){if(--i<1)return s.apply(this,arguments)}}function rd(i,s,l){return s=l?n:s,s=i&&s==null?i.length:s,An(i,vt,n,n,n,n,s)}function sd(i,s){var l;if(typeof s!="function")throw new Kt(c);return i=se(i),function(){return--i>0&&(l=s.apply(this,arguments)),i<=1&&(s=n),l}}var La=le(function(i,s,l){var u=Z;if(l.length){var d=Qn(l,cr(La));u|=qe}return An(i,u,s,l,d)}),od=le(function(i,s,l){var u=Z|we;if(l.length){var d=Qn(l,cr(od));u|=qe}return An(s,u,i,l,d)});function ld(i,s,l){s=l?n:s;var u=An(i,Ee,n,n,n,n,n,s);return u.placeholder=ld.placeholder,u}function ad(i,s,l){s=l?n:s;var u=An(i,te,n,n,n,n,n,s);return u.placeholder=ad.placeholder,u}function cd(i,s,l){var u,d,g,m,E,T,R=0,P=!1,L=!1,H=!0;if(typeof i!="function")throw new Kt(c);s=Qt(s)||0,We(l)&&(P=!!l.leading,L="maxWait"in l,g=L?Ve(Qt(l.maxWait)||0,s):g,H="trailing"in l?!!l.trailing:H);function G(Ke){var Zt=u,Dn=d;return u=d=n,R=Ke,m=i.apply(Dn,Zt),m}function j(Ke){return R=Ke,E=es(de,s),P?G(Ke):m}function oe(Ke){var Zt=Ke-T,Dn=Ke-R,Ad=s-Zt;return L?lt(Ad,g-Dn):Ad}function J(Ke){var Zt=Ke-T,Dn=Ke-R;return T===n||Zt>=s||Zt<0||L&&Dn>=g}function de(){var Ke=To();if(J(Ke))return me(Ke);E=es(de,oe(Ke))}function me(Ke){return E=n,H&&u?G(Ke):(u=d=n,m)}function Ft(){E!==n&&yh(E),R=0,u=T=d=E=n}function gt(){return E===n?m:me(To())}function kt(){var Ke=To(),Zt=J(Ke);if(u=arguments,d=this,T=Ke,Zt){if(E===n)return j(T);if(L)return yh(E),E=es(de,s),G(T)}return E===n&&(E=es(de,s)),m}return kt.cancel=Ft,kt.flush=gt,kt}var IE=le(function(i,s){return Jf(i,1,s)}),TE=le(function(i,s,l){return Jf(i,Qt(s)||0,l)});function xE(i){return An(i,_i)}function xo(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new Kt(c);var l=function(){var u=arguments,d=s?s.apply(this,u):u[0],g=l.cache;if(g.has(d))return g.get(d);var m=i.apply(this,u);return l.cache=g.set(d,m)||g,m};return l.cache=new(xo.Cache||xn),l}xo.Cache=xn;function So(i){if(typeof i!="function")throw new Kt(c);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}function SE(i){return sd(2,i)}var AE=_0(function(i,s){s=s.length==1&&re(s[0])?ke(s[0],Dt(Q())):ke(st(s,1),Dt(Q()));var l=s.length;return le(function(u){for(var d=-1,g=lt(u.length,l);++d<g;)u[d]=s[d].call(this,u[d]);return Ot(i,this,u)})}),Fa=le(function(i,s){var l=Qn(s,cr(Fa));return An(i,qe,n,s,l)}),ud=le(function(i,s){var l=Qn(s,cr(ud));return An(i,Wt,n,s,l)}),RE=Rn(function(i,s){return An(i,Pt,n,n,n,s)});function NE(i,s){if(typeof i!="function")throw new Kt(c);return s=s===n?s:se(s),le(i,s)}function PE(i,s){if(typeof i!="function")throw new Kt(c);return s=s==null?0:Ve(se(s),0),le(function(l){var u=l[s],d=ei(l,0,s);return u&&Yn(d,u),Ot(i,this,d)})}function OE(i,s,l){var u=!0,d=!0;if(typeof i!="function")throw new Kt(c);return We(l)&&(u="leading"in l?!!l.leading:u,d="trailing"in l?!!l.trailing:d),cd(i,s,{leading:u,maxWait:s,trailing:d})}function DE(i){return rd(i,1)}function ME(i,s){return Fa(wa(s),i)}function LE(){if(!arguments.length)return[];var i=arguments[0];return re(i)?i:[i]}function FE(i){return Gt(i,N)}function kE(i,s){return s=typeof s=="function"?s:n,Gt(i,N,s)}function BE(i){return Gt(i,v|N)}function WE(i,s){return s=typeof s=="function"?s:n,Gt(i,v|N,s)}function UE(i,s){return s==null||jf(i,s,je(s))}function Jt(i,s){return i===s||i!==i&&s!==s}var HE=yo(aa),$E=yo(function(i,s){return i>=s}),Ii=ih(function(){return arguments}())?ih:function(i){return $e(i)&&Se.call(i,"callee")&&!zf.call(i,"callee")},re=x.isArray,zE=If?Dt(If):jy;function Ct(i){return i!=null&&Ao(i.length)&&!Pn(i)}function ze(i){return $e(i)&&Ct(i)}function KE(i){return i===!0||i===!1||$e(i)&&_t(i)==qn}var ti=ry||Va,qE=Tf?Dt(Tf):Jy;function GE(i){return $e(i)&&i.nodeType===1&&!ts(i)}function VE(i){if(i==null)return!0;if(Ct(i)&&(re(i)||typeof i=="string"||typeof i.splice=="function"||ti(i)||ur(i)||Ii(i)))return!i.length;var s=at(i);if(s==S||s==D)return!i.size;if(Zr(i))return!fa(i).length;for(var l in i)if(Se.call(i,l))return!1;return!0}function YE(i,s){return Xr(i,s)}function QE(i,s,l){l=typeof l=="function"?l:n;var u=l?l(i,s):n;return u===n?Xr(i,s,n,l):!!u}function ka(i){if(!$e(i))return!1;var s=_t(i);return s==Gn||s==Ur||typeof i.message=="string"&&typeof i.name=="string"&&!ts(i)}function XE(i){return typeof i=="number"&&qf(i)}function Pn(i){if(!We(i))return!1;var s=_t(i);return s==w||s==I||s==Yi||s==k}function fd(i){return typeof i=="number"&&i==se(i)}function Ao(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=pe}function We(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}function $e(i){return i!=null&&typeof i=="object"}var hd=xf?Dt(xf):e0;function jE(i,s){return i===s||ua(i,s,Sa(s))}function JE(i,s,l){return l=typeof l=="function"?l:n,ua(i,s,Sa(s),l)}function ZE(i){return dd(i)&&i!=+i}function eC(i){if(k0(i))throw new ne(a);return rh(i)}function tC(i){return i===null}function nC(i){return i==null}function dd(i){return typeof i=="number"||$e(i)&&_t(i)==O}function ts(i){if(!$e(i)||_t(i)!=F)return!1;var s=eo(i);if(s===null)return!0;var l=Se.call(s,"constructor")&&s.constructor;return typeof l=="function"&&l instanceof l&&Xs.call(l)==Jv}var Ba=Sf?Dt(Sf):t0;function iC(i){return fd(i)&&i>=-pe&&i<=pe}var _d=Af?Dt(Af):n0;function Ro(i){return typeof i=="string"||!re(i)&&$e(i)&&_t(i)==V}function Lt(i){return typeof i=="symbol"||$e(i)&&_t(i)==q}var ur=Rf?Dt(Rf):i0;function rC(i){return i===n}function sC(i){return $e(i)&&at(i)==X}function oC(i){return $e(i)&&_t(i)==ce}var lC=yo(ha),aC=yo(function(i,s){return i<=s});function pd(i){if(!i)return[];if(Ct(i))return Ro(i)?Xt(i):Et(i);if($r&&i[$r])return Uv(i[$r]());var s=at(i),l=s==S?Zl:s==D?Vs:fr;return l(i)}function On(i){if(!i)return i===0?i:0;if(i=Qt(i),i===Te||i===-Te){var s=i<0?-1:1;return s*Cn}return i===i?i:0}function se(i){var s=On(i),l=s%1;return s===s?l?s-l:s:0}function gd(i){return i?wi(se(i),0,Xe):0}function Qt(i){if(typeof i=="number")return i;if(Lt(i))return bn;if(We(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=We(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=Lf(i);var l=zm.test(i);return l||qm.test(i)?bv(i.slice(2),l?2:8):$m.test(i)?bn:+i}function md(i){return _n(i,bt(i))}function cC(i){return i?wi(se(i),-pe,pe):i===0?i:0}function xe(i){return i==null?"":Mt(i)}var uC=lr(function(i,s){if(Zr(s)||Ct(s)){_n(s,je(s),i);return}for(var l in s)Se.call(s,l)&&Vr(i,l,s[l])}),vd=lr(function(i,s){_n(s,bt(s),i)}),No=lr(function(i,s,l,u){_n(s,bt(s),i,u)}),fC=lr(function(i,s,l,u){_n(s,je(s),i,u)}),hC=Rn(sa);function dC(i,s){var l=or(i);return s==null?l:Xf(l,s)}var _C=le(function(i,s){i=Re(i);var l=-1,u=s.length,d=u>2?s[2]:n;for(d&&pt(s[0],s[1],d)&&(u=1);++l<u;)for(var g=s[l],m=bt(g),E=-1,T=m.length;++E<T;){var R=m[E],P=i[R];(P===n||Jt(P,ir[R])&&!Se.call(i,R))&&(i[R]=g[R])}return i}),pC=le(function(i){return i.push(n,Lh),Ot(yd,n,i)});function gC(i,s){return Pf(i,Q(s,3),dn)}function mC(i,s){return Pf(i,Q(s,3),la)}function vC(i,s){return i==null?i:oa(i,Q(s,3),bt)}function yC(i,s){return i==null?i:th(i,Q(s,3),bt)}function wC(i,s){return i&&dn(i,Q(s,3))}function EC(i,s){return i&&la(i,Q(s,3))}function CC(i){return i==null?[]:uo(i,je(i))}function bC(i){return i==null?[]:uo(i,bt(i))}function Wa(i,s,l){var u=i==null?n:Ei(i,s);return u===n?l:u}function IC(i,s){return i!=null&&Bh(i,s,Vy)}function Ua(i,s){return i!=null&&Bh(i,s,Yy)}var TC=Nh(function(i,s,l){s!=null&&typeof s.toString!="function"&&(s=js.call(s)),i[s]=l},$a(It)),xC=Nh(function(i,s,l){s!=null&&typeof s.toString!="function"&&(s=js.call(s)),Se.call(i,s)?i[s].push(l):i[s]=[l]},Q),SC=le(Qr);function je(i){return Ct(i)?Yf(i):fa(i)}function bt(i){return Ct(i)?Yf(i,!0):r0(i)}function AC(i,s){var l={};return s=Q(s,3),dn(i,function(u,d,g){Sn(l,s(u,d,g),u)}),l}function RC(i,s){var l={};return s=Q(s,3),dn(i,function(u,d,g){Sn(l,d,s(u,d,g))}),l}var NC=lr(function(i,s,l){fo(i,s,l)}),yd=lr(function(i,s,l,u){fo(i,s,l,u)}),PC=Rn(function(i,s){var l={};if(i==null)return l;var u=!1;s=ke(s,function(g){return g=Zn(g,i),u||(u=g.length>1),g}),_n(i,Ta(i),l),u&&(l=Gt(l,v|C|N,T0));for(var d=s.length;d--;)ma(l,s[d]);return l});function OC(i,s){return wd(i,So(Q(s)))}var DC=Rn(function(i,s){return i==null?{}:o0(i,s)});function wd(i,s){if(i==null)return{};var l=ke(Ta(i),function(u){return[u]});return s=Q(s),fh(i,l,function(u,d){return s(u,d[0])})}function MC(i,s,l){s=Zn(s,i);var u=-1,d=s.length;for(d||(d=1,i=n);++u<d;){var g=i==null?n:i[pn(s[u])];g===n&&(u=d,g=l),i=Pn(g)?g.call(i):g}return i}function LC(i,s,l){return i==null?i:jr(i,s,l)}function FC(i,s,l,u){return u=typeof u=="function"?u:n,i==null?i:jr(i,s,l,u)}var Ed=Dh(je),Cd=Dh(bt);function kC(i,s,l){var u=re(i),d=u||ti(i)||ur(i);if(s=Q(s,4),l==null){var g=i&&i.constructor;d?l=u?new g:[]:We(i)?l=Pn(g)?or(eo(i)):{}:l={}}return(d?zt:dn)(i,function(m,E,T){return s(l,m,E,T)}),l}function BC(i,s){return i==null?!0:ma(i,s)}function WC(i,s,l){return i==null?i:gh(i,s,wa(l))}function UC(i,s,l,u){return u=typeof u=="function"?u:n,i==null?i:gh(i,s,wa(l),u)}function fr(i){return i==null?[]:Jl(i,je(i))}function HC(i){return i==null?[]:Jl(i,bt(i))}function $C(i,s,l){return l===n&&(l=s,s=n),l!==n&&(l=Qt(l),l=l===l?l:0),s!==n&&(s=Qt(s),s=s===s?s:0),wi(Qt(i),s,l)}function zC(i,s,l){return s=On(s),l===n?(l=s,s=0):l=On(l),i=Qt(i),Qy(i,s,l)}function KC(i,s,l){if(l&&typeof l!="boolean"&&pt(i,s,l)&&(s=l=n),l===n&&(typeof s=="boolean"?(l=s,s=n):typeof i=="boolean"&&(l=i,i=n)),i===n&&s===n?(i=0,s=1):(i=On(i),s===n?(s=i,i=0):s=On(s)),i>s){var u=i;i=s,s=u}if(l||i%1||s%1){var d=Gf();return lt(i+d*(s-i+Cv("1e-"+((d+"").length-1))),s)}return _a(i,s)}var qC=ar(function(i,s,l){return s=s.toLowerCase(),i+(l?bd(s):s)});function bd(i){return Ha(xe(i).toLowerCase())}function Id(i){return i=xe(i),i&&i.replace(Vm,Lv).replace(hv,"")}function GC(i,s,l){i=xe(i),s=Mt(s);var u=i.length;l=l===n?u:wi(se(l),0,u);var d=l;return l-=s.length,l>=0&&i.slice(l,d)==s}function VC(i){return i=xe(i),i&&Sm.test(i)?i.replace(ef,Fv):i}function YC(i){return i=xe(i),i&&Dm.test(i)?i.replace(Fl,"\\$&"):i}var QC=ar(function(i,s,l){return i+(l?"-":"")+s.toLowerCase()}),XC=ar(function(i,s,l){return i+(l?" ":"")+s.toLowerCase()}),jC=Sh("toLowerCase");function JC(i,s,l){i=xe(i),s=se(s);var u=s?tr(i):0;if(!s||u>=s)return i;var d=(s-u)/2;return vo(ro(d),l)+i+vo(io(d),l)}function ZC(i,s,l){i=xe(i),s=se(s);var u=s?tr(i):0;return s&&u<s?i+vo(s-u,l):i}function eb(i,s,l){i=xe(i),s=se(s);var u=s?tr(i):0;return s&&u<s?vo(s-u,l)+i:i}function tb(i,s,l){return l||s==null?s=0:s&&(s=+s),ay(xe(i).replace(kl,""),s||0)}function nb(i,s,l){return(l?pt(i,s,l):s===n)?s=1:s=se(s),pa(xe(i),s)}function ib(){var i=arguments,s=xe(i[0]);return i.length<3?s:s.replace(i[1],i[2])}var rb=ar(function(i,s,l){return i+(l?"_":"")+s.toLowerCase()});function sb(i,s,l){return l&&typeof l!="number"&&pt(i,s,l)&&(s=l=n),l=l===n?Xe:l>>>0,l?(i=xe(i),i&&(typeof s=="string"||s!=null&&!Ba(s))&&(s=Mt(s),!s&&er(i))?ei(Xt(i),0,l):i.split(s,l)):[]}var ob=ar(function(i,s,l){return i+(l?" ":"")+Ha(s)});function lb(i,s,l){return i=xe(i),l=l==null?0:wi(se(l),0,i.length),s=Mt(s),i.slice(l,l+s.length)==s}function ab(i,s,l){var u=p.templateSettings;l&&pt(i,s,l)&&(s=n),i=xe(i),s=No({},s,u,Mh);var d=No({},s.imports,u.imports,Mh),g=je(d),m=Jl(d,g),E,T,R=0,P=s.interpolate||$s,L="__p += '",H=ea((s.escape||$s).source+"|"+P.source+"|"+(P===tf?Hm:$s).source+"|"+(s.evaluate||$s).source+"|$","g"),G="//# sourceURL="+(Se.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mv+"]")+`
`;i.replace(H,function(J,de,me,Ft,gt,kt){return me||(me=Ft),L+=i.slice(R,kt).replace(Ym,kv),de&&(E=!0,L+=`' +
__e(`+de+`) +
'`),gt&&(T=!0,L+=`';
`+gt+`;
__p += '`),me&&(L+=`' +
((__t = (`+me+`)) == null ? '' : __t) +
'`),R=kt+J.length,J}),L+=`';
`;var j=Se.call(s,"variable")&&s.variable;if(!j)L=`with (obj) {
`+L+`
}
`;else if(Wm.test(j))throw new ne(f);L=(T?L.replace(bm,""):L).replace(Im,"$1").replace(Tm,"$1;"),L="function("+(j||"obj")+`) {
`+(j?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(E?", __e = _.escape":"")+(T?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+L+`return __p
}`;var oe=xd(function(){return Ce(g,G+"return "+L).apply(n,m)});if(oe.source=L,ka(oe))throw oe;return oe}function cb(i){return xe(i).toLowerCase()}function ub(i){return xe(i).toUpperCase()}function fb(i,s,l){if(i=xe(i),i&&(l||s===n))return Lf(i);if(!i||!(s=Mt(s)))return i;var u=Xt(i),d=Xt(s),g=Ff(u,d),m=kf(u,d)+1;return ei(u,g,m).join("")}function hb(i,s,l){if(i=xe(i),i&&(l||s===n))return i.slice(0,Wf(i)+1);if(!i||!(s=Mt(s)))return i;var u=Xt(i),d=kf(u,Xt(s))+1;return ei(u,0,d).join("")}function db(i,s,l){if(i=xe(i),i&&(l||s===n))return i.replace(kl,"");if(!i||!(s=Mt(s)))return i;var u=Xt(i),d=Ff(u,Xt(s));return ei(u,d).join("")}function _b(i,s){var l=En,u=pi;if(We(s)){var d="separator"in s?s.separator:d;l="length"in s?se(s.length):l,u="omission"in s?Mt(s.omission):u}i=xe(i);var g=i.length;if(er(i)){var m=Xt(i);g=m.length}if(l>=g)return i;var E=l-tr(u);if(E<1)return u;var T=m?ei(m,0,E).join(""):i.slice(0,E);if(d===n)return T+u;if(m&&(E+=T.length-E),Ba(d)){if(i.slice(E).search(d)){var R,P=T;for(d.global||(d=ea(d.source,xe(nf.exec(d))+"g")),d.lastIndex=0;R=d.exec(P);)var L=R.index;T=T.slice(0,L===n?E:L)}}else if(i.indexOf(Mt(d),E)!=E){var H=T.lastIndexOf(d);H>-1&&(T=T.slice(0,H))}return T+u}function pb(i){return i=xe(i),i&&xm.test(i)?i.replace(Zu,Kv):i}var gb=ar(function(i,s,l){return i+(l?" ":"")+s.toUpperCase()}),Ha=Sh("toUpperCase");function Td(i,s,l){return i=xe(i),s=l?n:s,s===n?Wv(i)?Vv(i):Nv(i):i.match(s)||[]}var xd=le(function(i,s){try{return Ot(i,n,s)}catch(l){return ka(l)?l:new ne(l)}}),mb=Rn(function(i,s){return zt(s,function(l){l=pn(l),Sn(i,l,La(i[l],i))}),i});function vb(i){var s=i==null?0:i.length,l=Q();return i=s?ke(i,function(u){if(typeof u[1]!="function")throw new Kt(c);return[l(u[0]),u[1]]}):[],le(function(u){for(var d=-1;++d<s;){var g=i[d];if(Ot(g[0],this,u))return Ot(g[1],this,u)}})}function yb(i){return Ky(Gt(i,v))}function $a(i){return function(){return i}}function wb(i,s){return i==null||i!==i?s:i}var Eb=Rh(),Cb=Rh(!0);function It(i){return i}function za(i){return sh(typeof i=="function"?i:Gt(i,v))}function bb(i){return lh(Gt(i,v))}function Ib(i,s){return ah(i,Gt(s,v))}var Tb=le(function(i,s){return function(l){return Qr(l,i,s)}}),xb=le(function(i,s){return function(l){return Qr(i,l,s)}});function Ka(i,s,l){var u=je(s),d=uo(s,u);l==null&&!(We(s)&&(d.length||!u.length))&&(l=s,s=i,i=this,d=uo(s,je(s)));var g=!(We(l)&&"chain"in l)||!!l.chain,m=Pn(i);return zt(d,function(E){var T=s[E];i[E]=T,m&&(i.prototype[E]=function(){var R=this.__chain__;if(g||R){var P=i(this.__wrapped__),L=P.__actions__=Et(this.__actions__);return L.push({func:T,args:arguments,thisArg:i}),P.__chain__=R,P}return T.apply(i,Yn([this.value()],arguments))})}),i}function Sb(){return rt._===this&&(rt._=Zv),this}function qa(){}function Ab(i){return i=se(i),le(function(s){return ch(s,i)})}var Rb=Ca(ke),Nb=Ca(Nf),Pb=Ca(Vl);function Sd(i){return Ra(i)?Yl(pn(i)):l0(i)}function Ob(i){return function(s){return i==null?n:Ei(i,s)}}var Db=Ph(),Mb=Ph(!0);function Ga(){return[]}function Va(){return!1}function Lb(){return{}}function Fb(){return""}function kb(){return!0}function Bb(i,s){if(i=se(i),i<1||i>pe)return[];var l=Xe,u=lt(i,Xe);s=Q(s),i-=Xe;for(var d=jl(u,s);++l<i;)s(l);return d}function Wb(i){return re(i)?ke(i,pn):Lt(i)?[i]:Et(Vh(xe(i)))}function Ub(i){var s=++jv;return xe(i)+s}var Hb=mo(function(i,s){return i+s},0),$b=ba("ceil"),zb=mo(function(i,s){return i/s},1),Kb=ba("floor");function qb(i){return i&&i.length?co(i,It,aa):n}function Gb(i,s){return i&&i.length?co(i,Q(s,2),aa):n}function Vb(i){return Df(i,It)}function Yb(i,s){return Df(i,Q(s,2))}function Qb(i){return i&&i.length?co(i,It,ha):n}function Xb(i,s){return i&&i.length?co(i,Q(s,2),ha):n}var jb=mo(function(i,s){return i*s},1),Jb=ba("round"),Zb=mo(function(i,s){return i-s},0);function eI(i){return i&&i.length?Xl(i,It):0}function tI(i,s){return i&&i.length?Xl(i,Q(s,2)):0}return p.after=bE,p.ary=rd,p.assign=uC,p.assignIn=vd,p.assignInWith=No,p.assignWith=fC,p.at=hC,p.before=sd,p.bind=La,p.bindAll=mb,p.bindKey=od,p.castArray=LE,p.chain=td,p.chunk=K0,p.compact=q0,p.concat=G0,p.cond=vb,p.conforms=yb,p.constant=$a,p.countBy=eE,p.create=dC,p.curry=ld,p.curryRight=ad,p.debounce=cd,p.defaults=_C,p.defaultsDeep=pC,p.defer=IE,p.delay=TE,p.difference=V0,p.differenceBy=Y0,p.differenceWith=Q0,p.drop=X0,p.dropRight=j0,p.dropRightWhile=J0,p.dropWhile=Z0,p.fill=ew,p.filter=nE,p.flatMap=sE,p.flatMapDeep=oE,p.flatMapDepth=lE,p.flatten=jh,p.flattenDeep=tw,p.flattenDepth=nw,p.flip=xE,p.flow=Eb,p.flowRight=Cb,p.fromPairs=iw,p.functions=CC,p.functionsIn=bC,p.groupBy=aE,p.initial=sw,p.intersection=ow,p.intersectionBy=lw,p.intersectionWith=aw,p.invert=TC,p.invertBy=xC,p.invokeMap=uE,p.iteratee=za,p.keyBy=fE,p.keys=je,p.keysIn=bt,p.map=Io,p.mapKeys=AC,p.mapValues=RC,p.matches=bb,p.matchesProperty=Ib,p.memoize=xo,p.merge=NC,p.mergeWith=yd,p.method=Tb,p.methodOf=xb,p.mixin=Ka,p.negate=So,p.nthArg=Ab,p.omit=PC,p.omitBy=OC,p.once=SE,p.orderBy=hE,p.over=Rb,p.overArgs=AE,p.overEvery=Nb,p.overSome=Pb,p.partial=Fa,p.partialRight=ud,p.partition=dE,p.pick=DC,p.pickBy=wd,p.property=Sd,p.propertyOf=Ob,p.pull=hw,p.pullAll=Zh,p.pullAllBy=dw,p.pullAllWith=_w,p.pullAt=pw,p.range=Db,p.rangeRight=Mb,p.rearg=RE,p.reject=gE,p.remove=gw,p.rest=NE,p.reverse=Da,p.sampleSize=vE,p.set=LC,p.setWith=FC,p.shuffle=yE,p.slice=mw,p.sortBy=CE,p.sortedUniq=Iw,p.sortedUniqBy=Tw,p.split=sb,p.spread=PE,p.tail=xw,p.take=Sw,p.takeRight=Aw,p.takeRightWhile=Rw,p.takeWhile=Nw,p.tap=qw,p.throttle=OE,p.thru=bo,p.toArray=pd,p.toPairs=Ed,p.toPairsIn=Cd,p.toPath=Wb,p.toPlainObject=md,p.transform=kC,p.unary=DE,p.union=Pw,p.unionBy=Ow,p.unionWith=Dw,p.uniq=Mw,p.uniqBy=Lw,p.uniqWith=Fw,p.unset=BC,p.unzip=Ma,p.unzipWith=ed,p.update=WC,p.updateWith=UC,p.values=fr,p.valuesIn=HC,p.without=kw,p.words=Td,p.wrap=ME,p.xor=Bw,p.xorBy=Ww,p.xorWith=Uw,p.zip=Hw,p.zipObject=$w,p.zipObjectDeep=zw,p.zipWith=Kw,p.entries=Ed,p.entriesIn=Cd,p.extend=vd,p.extendWith=No,Ka(p,p),p.add=Hb,p.attempt=xd,p.camelCase=qC,p.capitalize=bd,p.ceil=$b,p.clamp=$C,p.clone=FE,p.cloneDeep=BE,p.cloneDeepWith=WE,p.cloneWith=kE,p.conformsTo=UE,p.deburr=Id,p.defaultTo=wb,p.divide=zb,p.endsWith=GC,p.eq=Jt,p.escape=VC,p.escapeRegExp=YC,p.every=tE,p.find=iE,p.findIndex=Qh,p.findKey=gC,p.findLast=rE,p.findLastIndex=Xh,p.findLastKey=mC,p.floor=Kb,p.forEach=nd,p.forEachRight=id,p.forIn=vC,p.forInRight=yC,p.forOwn=wC,p.forOwnRight=EC,p.get=Wa,p.gt=HE,p.gte=$E,p.has=IC,p.hasIn=Ua,p.head=Jh,p.identity=It,p.includes=cE,p.indexOf=rw,p.inRange=zC,p.invoke=SC,p.isArguments=Ii,p.isArray=re,p.isArrayBuffer=zE,p.isArrayLike=Ct,p.isArrayLikeObject=ze,p.isBoolean=KE,p.isBuffer=ti,p.isDate=qE,p.isElement=GE,p.isEmpty=VE,p.isEqual=YE,p.isEqualWith=QE,p.isError=ka,p.isFinite=XE,p.isFunction=Pn,p.isInteger=fd,p.isLength=Ao,p.isMap=hd,p.isMatch=jE,p.isMatchWith=JE,p.isNaN=ZE,p.isNative=eC,p.isNil=nC,p.isNull=tC,p.isNumber=dd,p.isObject=We,p.isObjectLike=$e,p.isPlainObject=ts,p.isRegExp=Ba,p.isSafeInteger=iC,p.isSet=_d,p.isString=Ro,p.isSymbol=Lt,p.isTypedArray=ur,p.isUndefined=rC,p.isWeakMap=sC,p.isWeakSet=oC,p.join=cw,p.kebabCase=QC,p.last=Yt,p.lastIndexOf=uw,p.lowerCase=XC,p.lowerFirst=jC,p.lt=lC,p.lte=aC,p.max=qb,p.maxBy=Gb,p.mean=Vb,p.meanBy=Yb,p.min=Qb,p.minBy=Xb,p.stubArray=Ga,p.stubFalse=Va,p.stubObject=Lb,p.stubString=Fb,p.stubTrue=kb,p.multiply=jb,p.nth=fw,p.noConflict=Sb,p.noop=qa,p.now=To,p.pad=JC,p.padEnd=ZC,p.padStart=eb,p.parseInt=tb,p.random=KC,p.reduce=_E,p.reduceRight=pE,p.repeat=nb,p.replace=ib,p.result=MC,p.round=Jb,p.runInContext=b,p.sample=mE,p.size=wE,p.snakeCase=rb,p.some=EE,p.sortedIndex=vw,p.sortedIndexBy=yw,p.sortedIndexOf=ww,p.sortedLastIndex=Ew,p.sortedLastIndexBy=Cw,p.sortedLastIndexOf=bw,p.startCase=ob,p.startsWith=lb,p.subtract=Zb,p.sum=eI,p.sumBy=tI,p.template=ab,p.times=Bb,p.toFinite=On,p.toInteger=se,p.toLength=gd,p.toLower=cb,p.toNumber=Qt,p.toSafeInteger=cC,p.toString=xe,p.toUpper=ub,p.trim=fb,p.trimEnd=hb,p.trimStart=db,p.truncate=_b,p.unescape=pb,p.uniqueId=Ub,p.upperCase=gb,p.upperFirst=Ha,p.each=nd,p.eachRight=id,p.first=Jh,Ka(p,function(){var i={};return dn(p,function(s,l){Se.call(p.prototype,l)||(i[l]=s)}),i}(),{chain:!1}),p.VERSION=r,zt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){p[i].placeholder=p}),zt(["drop","take"],function(i,s){_e.prototype[i]=function(l){l=l===n?1:Ve(se(l),0);var u=this.__filtered__&&!s?new _e(this):this.clone();return u.__filtered__?u.__takeCount__=lt(l,u.__takeCount__):u.__views__.push({size:lt(l,Xe),type:i+(u.__dir__<0?"Right":"")}),u},_e.prototype[i+"Right"]=function(l){return this.reverse()[i](l).reverse()}}),zt(["filter","map","takeWhile"],function(i,s){var l=s+1,u=l==Vi||l==nt;_e.prototype[i]=function(d){var g=this.clone();return g.__iteratees__.push({iteratee:Q(d,3),type:l}),g.__filtered__=g.__filtered__||u,g}}),zt(["head","last"],function(i,s){var l="take"+(s?"Right":"");_e.prototype[i]=function(){return this[l](1).value()[0]}}),zt(["initial","tail"],function(i,s){var l="drop"+(s?"":"Right");_e.prototype[i]=function(){return this.__filtered__?new _e(this):this[l](1)}}),_e.prototype.compact=function(){return this.filter(It)},_e.prototype.find=function(i){return this.filter(i).head()},_e.prototype.findLast=function(i){return this.reverse().find(i)},_e.prototype.invokeMap=le(function(i,s){return typeof i=="function"?new _e(this):this.map(function(l){return Qr(l,i,s)})}),_e.prototype.reject=function(i){return this.filter(So(Q(i)))},_e.prototype.slice=function(i,s){i=se(i);var l=this;return l.__filtered__&&(i>0||s<0)?new _e(l):(i<0?l=l.takeRight(-i):i&&(l=l.drop(i)),s!==n&&(s=se(s),l=s<0?l.dropRight(-s):l.take(s-i)),l)},_e.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},_e.prototype.toArray=function(){return this.take(Xe)},dn(_e.prototype,function(i,s){var l=/^(?:filter|find|map|reject)|While$/.test(s),u=/^(?:head|last)$/.test(s),d=p[u?"take"+(s=="last"?"Right":""):s],g=u||/^find/.test(s);d&&(p.prototype[s]=function(){var m=this.__wrapped__,E=u?[1]:arguments,T=m instanceof _e,R=E[0],P=T||re(m),L=function(de){var me=d.apply(p,Yn([de],E));return u&&H?me[0]:me};P&&l&&typeof R=="function"&&R.length!=1&&(T=P=!1);var H=this.__chain__,G=!!this.__actions__.length,j=g&&!H,oe=T&&!G;if(!g&&P){m=oe?m:new _e(this);var J=i.apply(m,E);return J.__actions__.push({func:bo,args:[L],thisArg:n}),new qt(J,H)}return j&&oe?i.apply(this,E):(J=this.thru(L),j?u?J.value()[0]:J.value():J)})}),zt(["pop","push","shift","sort","splice","unshift"],function(i){var s=Ys[i],l=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",u=/^(?:pop|shift)$/.test(i);p.prototype[i]=function(){var d=arguments;if(u&&!this.__chain__){var g=this.value();return s.apply(re(g)?g:[],d)}return this[l](function(m){return s.apply(re(m)?m:[],d)})}}),dn(_e.prototype,function(i,s){var l=p[s];if(l){var u=l.name+"";Se.call(sr,u)||(sr[u]=[]),sr[u].push({name:s,func:l})}}),sr[go(n,we).name]=[{name:"wrapper",func:n}],_e.prototype.clone=py,_e.prototype.reverse=gy,_e.prototype.value=my,p.prototype.at=Gw,p.prototype.chain=Vw,p.prototype.commit=Yw,p.prototype.next=Qw,p.prototype.plant=jw,p.prototype.reverse=Jw,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=Zw,p.prototype.first=p.prototype.head,$r&&(p.prototype[$r]=Xw),p},nr=Yv();gi?((gi.exports=nr)._=nr,zl._=nr):rt._=nr}).call(is)})(dl,dl.exports);var VN=dl.exports;const YN=Nx(VN),QN=500,XN=640,jN=3e4,JN=12e4,ZN={width:42,height:62,style:{position:"absolute",left:"0",top:"0"}},eP={style:{position:"absolute",left:"0",top:"0.2em",right:"0","text-align":"center","z-index":"1"}},tP=42,nP=62,iP=Ds({__name:"DynamicMarkers",props:{width:{},height:{}},setup(t){const e=t,n=qo([]);GN(zi().sharingKey,JN,c=>{c?n.value=YN.sortBy(Object.entries(c).map(([f,h])=>({...h,key:f})),f=>f.timestamp):n.value=[]});function r(c){return c.key.substring(c.key.length-4)}function o(c){return`hsl(${parseInt(c.key.substring(c.key.length-4),16)/65536*360} 60% 80%)`}function a(c){const f={width:e.width,height:e.height},{parsedZoom:h,parsedCenter:_}=zi(),y=Math.pow(2,h),v=r_(_),C=r_(c.coordinates),N={x:(C.x-v.x)*y,y:(C.y-v.y)*y},U=Date.now()-c.timestamp>jN;return{left:Math.round(f.width/2+N.x-tP/2)+"px",top:Math.round(f.height/2+N.y-nP)+"px",opacity:U?.5:1,"z-index":U?10:1}}return(c,f)=>(Fn(!0),oi(nn,null,IT(tn(n),h=>(Fn(),oi("div",{key:h.key,class:"circle",style:Fi(a(h))},[(Fn(),oi("svg",ZN,[Es("path",{d:`
M 3.76 31
A 20 20 1 1 1 38.32 31
L 21 61

Z`,style:Fi({fill:o(h)}),class:"marker"},null,4)])),Es("div",eP,pI(r(h)),1)],4))),128))}});const rP=zp(iP,[["__scopeId","data-v-b52f9222"]]),sP=Ds({__name:"OfferLocation",setup(t){const e=qo(zN()),n=qo(0);function r(){n.value=navigator.geolocation.watchPosition(a=>{qN({lat:a.coords.latitude,lng:a.coords.longitude},a.timestamp)}),e.value=!0,j_(!0)}function o(){navigator.geolocation.clearWatch(n.value),e.value=!1,j_(!1)}return lu(()=>{e.value&&r()}),El(()=>{n.value&&navigator.geolocation.clearWatch(n.value)}),(a,c)=>e.value?(Fn(),oi("button",{key:0,id:"send-location",style:{right:"10px",top:"10px",position:"fixed"},onClick:o},"Stop sending location")):(Fn(),oi("button",{key:1,id:"send-location",style:{right:"10px",top:"10px",position:"fixed"},onClick:r},"Send location"))}}),oP=Ds({__name:"App",setup(t){const e=QN,n=XN,{zoom:r,center:o}=zi();return(a,c)=>(Fn(),oi(nn,null,[Es("div",{style:Fi({position:"relative",width:tn(e)+"px",height:tn(n)+"px",overflow:"hidden"})},[Bt(Hx),Bt(Bx,{center:tn(o),zoom:tn(r),mapWidth:tn(e),mapHeight:tn(n)},null,8,["center","zoom","mapWidth","mapHeight"]),Bt(rP,{width:tn(e),height:tn(n)},null,8,["width","height"])],4),Bt(sP)],64))}});Ax(oP).mount("#app");window.addEventListener("DOMContentLoaded",()=>{UN(zi())});window.addEventListener("load",()=>{setTimeout(()=>{window.scrollTo((document.body.scrollWidth-document.documentElement.clientWidth)/2,(document.body.scrollHeight-document.documentElement.clientHeight)/2)},50)});
